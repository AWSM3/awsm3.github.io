<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="theme-color" content="#000000" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <title>React App</title>
    <script>!function(t,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s():"function"==typeof define&&define.amd?define(s):t.proj4=s()}(this,function(){"use strict";function t(t,s){if(t[s])return t[s];for(var i,a=Object.keys(t),h=s.toLowerCase().replace(K,""),e=-1;++e<a.length;)if((i=a[e]).toLowerCase().replace(K,"")===h)return t[i]}function s(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=J}function i(t){return new s(t).output()}function a(t,s,i){Array.isArray(s)&&(i.unshift(s),s=null);var a=s?{}:t,e=i.reduce(function(t,s){return h(s,t),t},a);s&&(t[s]=e)}function h(t,s){if(Array.isArray(t)){var i,e=t.shift();if("PARAMETER"===e&&(e=t.shift()),1===t.length)return Array.isArray(t[0])?(s[e]={},void h(t[0],s[e])):void(s[e]=t[0]);if(t.length)if("TOWGS84"!==e)switch(Array.isArray(e)||(s[e]={}),e){case"UNIT":case"PRIMEM":case"VERT_DATUM":return s[e]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&h(t[2],s[e]));case"SPHEROID":case"ELLIPSOID":return s[e]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&h(t[3],s[e]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void a(s,e,t);default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return h(t,s[e]);return a(s,e,t)}else s[e]=t;else s[e]=!0}else s[t]=!0}function e(t){return t*st}function n(t){function s(s){return s*(t.to_meter||1)}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var i=t.GEOGCS;"GEOGCS"===t.type&&(i=t),i&&(i.DATUM?t.datumCode=i.DATUM.name.toLowerCase():t.datumCode=i.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),i.DATUM&&i.DATUM.SPHEROID&&(t.ellps=i.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=i.DATUM.SPHEROID.a,t.rf=parseFloat(i.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65")),t.b&&!isFinite(t.b)&&(t.b=t.a);[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",e],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",e],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",e],["lat0","latitude_of_origin",e],["lat0","standard_parallel_1",e],["lat1","standard_parallel_1",e],["lat2","standard_parallel_2",e],["alpha","azimuth",e],["srsCode","name"]].forEach(function(s){return function(t,s){var i=s[0],a=s[1];!(i in t)&&a in t&&(t[i]=t[a],3===s.length&&(t[i]=s[2](t[i])))}(t,s)}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=e(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function r(t){var s=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?r[t]=X(arguments[1]):r[t]=it(arguments[1]):r[t]=i}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?r.apply(s,t):r(t)});if("string"==typeof t){if(t in r)return r[t]}else"EPSG"in t?r["EPSG:"+t.EPSG]=t:"ESRI"in t?r["ESRI:"+t.ESRI]=t:"IAU2000"in t?r["IAU2000:"+t.IAU2000]=t:console.log(t);return}}function o(t){return function(t){return"string"==typeof t}(t)?function(t){return t in r}(t)?r[t]:function(t){return at.some(function(s){return t.indexOf(s)>-1})}(t)?it(t):function(t){return"+"===t[0]}(t)?X(t):void 0:t}function l(t){return t}function M(t,s){var i=ut.length;return t.names?(ut[i]=t,t.names.forEach(function(t){ct[t.toLowerCase()]=i}),this):(console.log(s),!0)}function c(s,i){if(!(this instanceof c))return new c(s);i=i||function(t){if(t)throw t};var a=o(s);if("object"==typeof a){var h=c.projections.get(a.projName);if(h){if(a.datumCode&&"none"!==a.datumCode){var e=t(dt,a.datumCode);e&&(a.datum_params=e.towgs84?e.towgs84.split(","):null,a.ellps=e.ellipse,a.datumName=e.datumName?e.datumName:a.datumCode)}a.k0=a.k0||1,a.axis=a.axis||"enu",a.ellps=a.ellps||"wgs84";var n=function(s,i,a,h,e){if(!s){var n=t(mt,h);n||(n=pt),s=n.a,i=n.b,a=n.rf}return a&&!i&&(i=(1-1/a)*s),(0===a||Math.abs(s-i)<z)&&(e=!0,i=s),{a:s,b:i,rf:a,sphere:e}}(a.a,a.b,a.rf,a.ellps,a.sphere),r=function(t,s,i,a){var h=t*t,e=s*s,n=(h-e)/h,r=0;return a?(h=(t*=1-n*(T+n*(j+n*L)))*t,n=0):r=Math.sqrt(n),{es:n,e:r,ep2:(h-e)/e}}(n.a,n.b,n.rf,a.R_A),l=a.datum||function(t,s,i,a,h,e){var n={};return n.datum_type=void 0===t||"none"===t?O:I,s&&(n.datum_params=s.map(parseFloat),0===n.datum_params[0]&&0===n.datum_params[1]&&0===n.datum_params[2]||(n.datum_type=k),n.datum_params.length>3&&(0===n.datum_params[3]&&0===n.datum_params[4]&&0===n.datum_params[5]&&0===n.datum_params[6]||(n.datum_type=q,n.datum_params[3]*=R,n.datum_params[4]*=R,n.datum_params[5]*=R,n.datum_params[6]=n.datum_params[6]/1e6+1))),n.a=i,n.b=a,n.es=h,n.ep2=e,n}(a.datumCode,a.datum_params,n.a,n.b,r.es,r.ep2);ht(this,a),ht(this,h),this.a=n.a,this.b=n.b,this.rf=n.rf,this.sphere=n.sphere,this.es=r.es,this.e=r.e,this.ep2=r.ep2,this.datum=l,this.init(),i(null,this)}else i(s)}else i(s)}function u(t){return t===k||t===q}function f(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function m(t,s,i){var a;return Array.isArray(i)&&(i=xt(i)),vt(i),t.datum&&s.datum&&function(t,s){return(t.datum.datum_type===k||t.datum.datum_type===q)&&"WGS84"!==s.datumCode||(s.datum.datum_type===k||s.datum.datum_type===q)&&"WGS84"!==t.datumCode}(t,s)&&(i=m(t,a=new c("WGS84"),i),t=a),"enu"!==t.axis&&(i=yt(t,!1,i)),"longlat"===t.projName?i={x:i.x*B,y:i.y*B}:(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter}),i=t.inverse(i)),t.from_greenwich&&(i.x+=t.from_greenwich),i=_t(t.datum,s.datum,i),s.from_greenwich&&(i={x:i.x-s.from_greenwich,y:i.y}),"longlat"===s.projName?i={x:i.x*D,y:i.y*D}:(i=s.forward(i),s.to_meter&&(i={x:i.x/s.to_meter,y:i.y/s.to_meter})),"enu"!==s.axis?yt(s,!0,i):i}function p(t,s,i){var a,h,e;return Array.isArray(i)?(a=m(t,s,i),3===i.length?[a.x,a.y,a.z]:[a.x,a.y]):(h=m(t,s,i),2===(e=Object.keys(i)).length?h:(e.forEach(function(t){"x"!==t&&"y"!==t&&(h[t]=i[t])}),h))}function d(t){return t instanceof c?t:t.oProj?t.oProj:c(t)}function _(t,s,i){t=d(t);var a,h=!1;return void 0===s?(s=t,t=gt,h=!0):(void 0!==s.x||Array.isArray(s))&&(i=s,s=t,t=gt,h=!0),s=d(s),i?p(t,s,i):(a={forward:function(i){return p(t,s,i)},inverse:function(i){return p(s,t,i)}},h&&(a.oProj=s),a)}function y(t,s){return s=s||5,function(t,s){var i="00000"+t.easting,a="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function(t,s,i){var a=A(i),h=Math.floor(t/1e5),e=Math.floor(s/1e5)%20;return function(t,s,i){var a=i-1,h=wt.charCodeAt(a),e=At.charCodeAt(a),n=h+t-1,r=e+s,o=!1;return n>St&&(n=n-St+Ct-1,o=!0),(n===Et||Et>h&&n>Et||(n>Et||Et>h)&&o)&&n++,(n===Pt||Pt>h&&n>Pt||(n>Pt||Pt>h)&&o)&&++n===Et&&n++,n>St&&(n=n-St+Ct-1),r>Nt?(r=r-Nt+Ct-1,o=!0):o=!1,(r===Et||Et>e&&r>Et||(r>Et||Et>e)&&o)&&r++,(r===Pt||Pt>e&&r>Pt||(r>Pt||Pt>e)&&o)&&++r===Et&&r++,r>Nt&&(r=r-Nt+Ct-1),String.fromCharCode(n)+String.fromCharCode(r)}(h,e,a)}(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,s)+a.substr(a.length-5,s)}(function(t){var s,i,a,h,e,n,r,o,l=t.lat,M=t.lon,c=6378137,u=.00669438,f=v(l),m=v(M);o=Math.floor((M+180)/6)+1,180===M&&(o=60),l>=56&&64>l&&M>=3&&12>M&&(o=32),l>=72&&84>l&&(M>=0&&9>M?o=31:M>=9&&21>M?o=33:M>=21&&33>M?o=35:M>=33&&42>M&&(o=37)),r=v(6*(o-1)-180+3),s=u/(1-u),i=c/Math.sqrt(1-u*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),h=s*Math.cos(f)*Math.cos(f),e=Math.cos(f)*(m-r),n=c*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-35*u*u*u/3072*Math.sin(6*f));var p=.9996*i*(e+(1-a+h)*e*e*e/6+(5-18*a+a*a+72*h-58*s)*e*e*e*e*e/120)+5e5,d=.9996*(n+i*Math.tan(f)*(e*e/2+(5-a+9*h+4*h*h)*e*e*e*e/24+(61-58*a+a*a+600*h-330*s)*e*e*e*e*e*e/720));return 0>l&&(d+=1e7),{northing:Math.round(d),easting:Math.round(p),zoneNumber:o,zoneLetter:w(l)}}({lat:t[1],lon:t[0]}),s)}function x(t){var s=b(C(t.toUpperCase()));return s.lat&&s.lon?[s.lon,s.lat]:[(s.left+s.right)/2,(s.top+s.bottom)/2]}function v(t){return t*(Math.PI/180)}function g(t){return t/Math.PI*180}function b(t){var s=t.northing,i=t.easting,a=t.zoneLetter,h=t.zoneNumber;if(0>h||h>60)return null;var e,n,r,o,l,M,c,u,f,m=6378137,p=.00669438,d=(1-Math.sqrt(1-p))/(1+Math.sqrt(1-p)),_=i-5e5,y=s;"N">a&&(y-=1e7),c=6*(h-1)-180+3,e=p/(1-p),f=(u=y/.9996/6367449.145945056)+(3*d/2-27*d*d*d/32)*Math.sin(2*u)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*u)+151*d*d*d/96*Math.sin(6*u),n=m/Math.sqrt(1-p*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),o=e*Math.cos(f)*Math.cos(f),l=m*(1-p)/Math.pow(1-p*Math.sin(f)*Math.sin(f),1.5),M=_/(.9996*n);var x=f-n*Math.tan(f)/l*(M*M/2-(5+3*r+10*o-4*o*o-9*e)*M*M*M*M/24+(61+90*r+298*o+45*r*r-252*e-3*o*o)*M*M*M*M*M*M/720);x=g(x);var v,w=(M-(1+2*r+o)*M*M*M/6+(5-2*o+28*r-3*o*o+8*e+24*r*r)*M*M*M*M*M/120)/Math.cos(f);if(w=c+g(w),t.accuracy){var A=b({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});v={top:A.lat,right:A.lon,bottom:x,left:w}}else v={lat:x,lon:w};return v}function w(t){var s="Z";return 84>=t&&t>=72?s="X":72>t&&t>=64?s="W":64>t&&t>=56?s="V":56>t&&t>=48?s="U":48>t&&t>=40?s="T":40>t&&t>=32?s="S":32>t&&t>=24?s="R":24>t&&t>=16?s="Q":16>t&&t>=8?s="P":8>t&&t>=0?s="N":0>t&&t>=-8?s="M":-8>t&&t>=-16?s="L":-16>t&&t>=-24?s="K":-24>t&&t>=-32?s="J":-32>t&&t>=-40?s="H":-40>t&&t>=-48?s="G":-48>t&&t>=-56?s="F":-56>t&&t>=-64?s="E":-64>t&&t>=-72?s="D":-72>t&&t>=-80&&(s="C"),s}function A(t){var s=t%bt;return 0===s&&(s=bt),s}function C(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var s,i=t.length,a=null,h="",e=0;!/[A-Z]/.test(s=t.charAt(e));){if(e>=2)throw"MGRSPoint bad conversion from: "+t;h+=s,e++}var n=parseInt(h,10);if(0===e||e+3>i)throw"MGRSPoint bad conversion from: "+t;var r=t.charAt(e++);if("A">=r||"B"===r||"Y"===r||r>="Z"||"I"===r||"O"===r)throw"MGRSPoint zone letter "+r+" not handled: "+t;a=t.substring(e,e+=2);for(var o=A(n),l=function(t,s){for(var i=wt.charCodeAt(s-1),a=1e5,h=!1;i!==t.charCodeAt(0);){if(++i===Et&&i++,i===Pt&&i++,i>St){if(h)throw"Bad character: "+t;i=Ct,h=!0}a+=1e5}return a}(a.charAt(0),o),M=function(t,s){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=At.charCodeAt(s-1),a=0,h=!1;i!==t.charCodeAt(0);){if(++i===Et&&i++,i===Pt&&i++,i>Nt){if(h)throw"Bad character: "+t;i=Ct,h=!0}a+=1e5}return a}(a.charAt(1),o);M<E(r);)M+=2e6;var c=i-e;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var u,f,m,p=c/2,d=0,_=0;return p>0&&(u=1e5/Math.pow(10,p),f=t.substring(e,e+p),d=parseFloat(f)*u,m=t.substring(e+p),_=parseFloat(m)*u),{easting:d+l,northing:_+M,zoneLetter:r,zoneNumber:n,accuracy:u}}function E(t){var s;switch(t){case"C":s=11e5;break;case"D":s=2e6;break;case"E":s=28e5;break;case"F":s=37e5;break;case"G":s=46e5;break;case"H":s=55e5;break;case"J":s=64e5;break;case"K":s=73e5;break;case"L":s=82e5;break;case"M":s=91e5;break;case"N":s=0;break;case"P":s=8e5;break;case"Q":s=17e5;break;case"R":s=26e5;break;case"S":s=35e5;break;case"T":s=44e5;break;case"U":s=53e5;break;case"V":s=62e5;break;case"W":s=7e6;break;case"X":s=79e5;break;default:s=-1}if(s>=0)return s;throw"Invalid zone letter: "+t}function P(t,s,i){if(!(this instanceof P))return new P(t,s,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===s){var a=t.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=t,this.y=s,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function N(t,s,i,a){var h;return z>t?(a.value=js.AREA_0,h=0):(h=Math.atan2(s,i),Math.abs(h)<=U?a.value=js.AREA_0:h>U&&G+U>=h?(a.value=js.AREA_1,h-=G):h>G+U||-(G+U)>=h?(a.value=js.AREA_2,h=h>=0?h-Q:h+Q):(a.value=js.AREA_3,h+=G)),h}function S(t,s){var i=t+s;return-Q>i?i+=F:i>+Q&&(i-=F),i}var k=1,q=2,I=4,O=5,R=484813681109536e-20,G=Math.PI/2,T=.16666666666666666,j=.04722222222222222,L=.022156084656084655,z=1e-10,B=.017453292519943295,D=57.29577951308232,U=Math.PI/4,F=2*Math.PI,Q=3.14159265359,W={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},H={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},K=/[\s_\-\/\(\)]/g,X=function(s){var i,a,h,e={},n=s.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,s){var i=s.split("=");return i.push(!0),t[i[0].toLowerCase()]=i[1],t},{}),r={proj:"projName",datum:"datumCode",rf:function(t){e.rf=parseFloat(t)},lat_0:function(t){e.lat0=t*B},lat_1:function(t){e.lat1=t*B},lat_2:function(t){e.lat2=t*B},lat_ts:function(t){e.lat_ts=t*B},lon_0:function(t){e.long0=t*B},lon_1:function(t){e.long1=t*B},lon_2:function(t){e.long2=t*B},alpha:function(t){e.alpha=parseFloat(t)*B},lonc:function(t){e.longc=t*B},x_0:function(t){e.x0=parseFloat(t)},y_0:function(t){e.y0=parseFloat(t)},k_0:function(t){e.k0=parseFloat(t)},k:function(t){e.k0=parseFloat(t)},a:function(t){e.a=parseFloat(t)},b:function(t){e.b=parseFloat(t)},r_a:function(){e.R_A=!0},zone:function(t){e.zone=parseInt(t,10)},south:function(){e.utmSouth=!0},towgs84:function(t){e.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){e.to_meter=parseFloat(t)},units:function(s){e.units=s;var i=t(H,s);i&&(e.to_meter=i.to_meter)},from_greenwich:function(t){e.from_greenwich=t*B},pm:function(s){var i=t(W,s);e.from_greenwich=(i||parseFloat(s))*B},nadgrids:function(t){"@null"===t?e.datumCode="none":e.nadgrids=t},axis:function(t){var s="ewnsud";3===t.length&&-1!==s.indexOf(t.substr(0,1))&&-1!==s.indexOf(t.substr(1,1))&&-1!==s.indexOf(t.substr(2,1))&&(e.axis=t)}};for(i in n)a=n[i],i in r?"function"==typeof(h=r[i])?h(a):e[h]=a:e[i]=a;return"string"==typeof e.datumCode&&"WGS84"!==e.datumCode&&(e.datumCode=e.datumCode.toLowerCase()),e},J=1,V=/\s/,Z=/[A-Za-z]/,Y=/[A-Za-z84]/,$=/[,\]]/,tt=/[\d\.E\-\+]/;s.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;V.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case J:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},s.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if($.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},s.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=J)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=J,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},s.prototype.number=function(t){if(!tt.test(t)){if($.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},s.prototype.quoted=function(t){return'"'===t?void(this.state=5):void(this.word+=t)},s.prototype.keyword=function(t){if(Y.test(t))this.word+=t;else{if("["===t){var s=[];return s.push(this.word),this.level++,null===this.root?this.root=s:this.currentObject.push(s),this.stack.push(this.currentObject),this.currentObject=s,void(this.state=J)}if(!$.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},s.prototype.neutral=function(t){if(Z.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(tt.test(t))return this.word=t,void(this.state=3);if(!$.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},s.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var st=.017453292519943295,it=function(t){var s=i(t),a=s.shift(),e=s.shift();s.unshift(["name",e]),s.unshift(["type",a]);var r={};return h(s,r),n(r),r};!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(r);var at=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],ht=function(t,s){var i,a;if(t=t||{},!s)return t;for(a in s)void 0!==(i=s[a])&&(t[a]=i);return t},et=function(t,s,i){var a=t*s;return i/Math.sqrt(1-a*a)},nt=function(t){return 0>t?-1:1},rt=function(t){return Math.abs(t)<=Q?t:t-nt(t)*F},ot=function(t,s,i){var a=t*i,h=.5*t;return a=Math.pow((1-a)/(1+a),h),Math.tan(.5*(G-s))/a},lt=function(t,s){for(var i,a,h=.5*t,e=G-2*Math.atan(s),n=0;15>=n;n++)if(i=t*Math.sin(e),e+=a=G-2*Math.atan(s*Math.pow((1-i)/(1+i),h))-e,Math.abs(a)<=1e-10)return e;return-9999},Mt=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=et(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var s,i,a=t.x,h=t.y;if(h*D>90&&-90>h*D&&a*D>180&&-180>a*D)return null;if(Math.abs(Math.abs(h)-G)<=z)return null;if(this.sphere)s=this.x0+this.a*this.k0*rt(a-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(U+.5*h));else{var e=Math.sin(h),n=ot(this.e,h,e);s=this.x0+this.a*this.k0*rt(a-this.long0),i=this.y0-this.a*this.k0*Math.log(n)}return t.x=s,t.y=i,t},inverse:function(t){var s,i,a=t.x-this.x0,h=t.y-this.y0;if(this.sphere)i=G-2*Math.atan(Math.exp(-h/(this.a*this.k0)));else{var e=Math.exp(-h/(this.a*this.k0));if(-9999===(i=lt(this.e,e)))return null}return s=rt(this.long0+a/(this.a*this.k0)),t.x=s,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:l,inverse:l,names:["longlat","identity"]}],ct={},ut=[],ft={start:function(){Mt.forEach(M)},add:M,get:function(t){if(!t)return!1;var s=t.toLowerCase();return void 0!==ct[s]&&ut[ct[s]]?ut[ct[s]]:void 0}},mt={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},pt=mt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};mt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var dt={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};c.projections=ft,c.projections.start();var _t=function(t,s,i){return function(t,s){return t.datum_type===s.datum_type&&!(t.a!==s.a||Math.abs(t.es-s.es)>5e-11)&&(t.datum_type===k?t.datum_params[0]===s.datum_params[0]&&t.datum_params[1]===s.datum_params[1]&&t.datum_params[2]===s.datum_params[2]:t.datum_type!==q||t.datum_params[0]===s.datum_params[0]&&t.datum_params[1]===s.datum_params[1]&&t.datum_params[2]===s.datum_params[2]&&t.datum_params[3]===s.datum_params[3]&&t.datum_params[4]===s.datum_params[4]&&t.datum_params[5]===s.datum_params[5]&&t.datum_params[6]===s.datum_params[6])}(t,s)?i:t.datum_type===O||s.datum_type===O?i:t.es!==s.es||t.a!==s.a||u(t.datum_type)||u(s.datum_type)?(i=function(t,s,i){var a,h,e,n,r=t.x,o=t.y,l=t.z?t.z:0;if(-G>o&&o>-1.001*G)o=-G;else if(o>G&&1.001*G>o)o=G;else if(-G>o||o>G)return null;return r>Math.PI&&(r-=2*Math.PI),h=Math.sin(o),n=Math.cos(o),e=h*h,{x:((a=i/Math.sqrt(1-s*e))+l)*n*Math.cos(r),y:(a+l)*n*Math.sin(r),z:(a*(1-s)+l)*h}}(i,t.es,t.a),u(t.datum_type)&&(i=function(t,s,i){if(s===k)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(s===q){var a=i[0],h=i[1],e=i[2],n=i[3],r=i[4],o=i[5],l=i[6];return{x:l*(t.x-o*t.y+r*t.z)+a,y:l*(o*t.x+t.y-n*t.z)+h,z:l*(-r*t.x+n*t.y+t.z)+e}}}(i,t.datum_type,t.datum_params)),u(s.datum_type)&&(i=function(t,s,i){if(s===k)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(s===q){var a=i[0],h=i[1],e=i[2],n=i[3],r=i[4],o=i[5],l=i[6],M=(t.x-a)/l,c=(t.y-h)/l,u=(t.z-e)/l;return{x:M+o*c-r*u,y:-o*M+c+n*u,z:r*M-n*c+u}}}(i,s.datum_type,s.datum_params)),function(t,s,i,a){var h,e,n,r,o,l,M,c,u,f,m,p,d,_,y,x=1e-12,v=t.x,g=t.y,b=t.z?t.z:0;if(h=Math.sqrt(v*v+g*g),e=Math.sqrt(v*v+g*g+b*b),x>h/i){if(_=0,x>e/i)return y=-a,{x:t.x,y:t.y,z:t.z}}else _=Math.atan2(g,v);n=b/e,c=(r=h/e)*(1-s)*(o=1/Math.sqrt(1-s*(2-s)*r*r)),u=n*o,d=0;do{d++,l=s*(M=i/Math.sqrt(1-s*u*u))/(M+(y=h*c+b*u-M*(1-s*u*u))),p=(m=n*(o=1/Math.sqrt(1-l*(2-l)*r*r)))*c-(f=r*(1-l)*o)*u,c=f,u=m}while(p*p>1e-24&&30>d);return{x:_,y:Math.atan(m/Math.abs(f)),z:y}}(i,s.es,s.a,s.b)):i},yt=function(t,s,i){var a,h,e,n=i.x,r=i.y,o=i.z||0,l={};for(e=0;3>e;e++)if(!s||2!==e||void 0!==i.z)switch(0===e?(a=n,h="x"):1===e?(a=r,h="y"):(a=o,h="z"),t.axis[e]){case"e":l[h]=a;break;case"w":l[h]=-a;break;case"n":l[h]=a;break;case"s":l[h]=-a;break;case"u":void 0!==i[h]&&(l.z=a);break;case"d":void 0!==i[h]&&(l.z=-a);break;default:return null}return l},xt=function(t){var s={x:t[0],y:t[1]};return t.length>2&&(s.z=t[2]),t.length>3&&(s.m=t[3]),s},vt=function(t){f(t.x),f(t.y)},gt=c("WGS84"),bt=6,wt="AJSAJS",At="AFAFAF",Ct=65,Et=73,Pt=79,Nt=86,St=90,kt={forward:y,inverse:function(t){var s=b(C(t.toUpperCase()));return s.lat&&s.lon?[s.lon,s.lat,s.lon,s.lat]:[s.left,s.bottom,s.right,s.top]},toPoint:x};P.fromMGRS=function(t){return new P(x(t))},P.prototype.toMGRS=function(t){return y([this.x,this.y],t)};var qt,It=.01953125,Ot=.01068115234375,Rt=function(t){var s=[];s[0]=1-t*(.25+t*(.046875+t*(It+t*Ot))),s[1]=t*(.75-t*(.046875+t*(It+t*Ot)));var i=t*t;return s[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),i*=t,s[3]=i*(.3645833333333333-.005696614583333333*t),s[4]=i*t*.3076171875,s},Gt=function(t,s,i,a){return i*=s,s*=s,a[0]*t-i*(a[1]+s*(a[2]+s*(a[3]+s*a[4])))},Tt=function(t,s,i){for(var a=1/(1-s),h=t,e=20;e;--e){var n=Math.sin(h),r=1-s*n*n;if(h-=r=(Gt(h,n,Math.cos(h),i)-t)*(r*Math.sqrt(r))*a,Math.abs(r)<z)return h}return h},jt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Rt(this.es),this.ml0=Gt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var s,i,a,h=t.x,e=t.y,n=rt(h-this.long0),r=Math.sin(e),o=Math.cos(e);if(this.es){var l=o*n,M=Math.pow(l,2),c=this.ep2*Math.pow(o,2),u=Math.pow(c,2),f=Math.abs(o)>z?Math.tan(e):0,m=Math.pow(f,2),p=Math.pow(m,2);s=1-this.es*Math.pow(r,2),l/=Math.sqrt(s);var d=Gt(e,r,o,this.en);i=this.a*(this.k0*l*(1+M/6*(1-m+c+M/20*(5-18*m+p+14*c-58*m*c+M/42*(61+179*p-p*m-479*m)))))+this.x0,a=this.a*(this.k0*(d-this.ml0+r*n*l/2*(1+M/12*(5-m+9*c+4*u+M/30*(61+p-58*m+270*c-330*m*c+M/56*(1385+543*p-p*m-3111*m))))))+this.y0}else{var _=o*Math.sin(n);if(Math.abs(Math.abs(_)-1)<z)return 93;if(i=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,a=o*Math.cos(n)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(a))>=1){if(_-1>z)return 93;a=0}else a=Math.acos(a);0>e&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return t.x=i,t.y=a,t},inverse:function(t){var s,i,a,h,e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);if(this.es)if(s=this.ml0+n/this.k0,i=Tt(s,this.es,this.en),Math.abs(i)<G){var r=Math.sin(i),o=Math.cos(i),l=Math.abs(o)>z?Math.tan(i):0,M=this.ep2*Math.pow(o,2),c=Math.pow(M,2),u=Math.pow(l,2),f=Math.pow(u,2);s=1-this.es*Math.pow(r,2);var m=e*Math.sqrt(s)/this.k0,p=Math.pow(m,2);a=i-(s*=l)*p/(1-this.es)*.5*(1-p/12*(5+3*u-9*M*u+M-4*c-p/30*(61+90*u-252*M*u+45*f+46*M-p/56*(1385+3633*u+4095*f+1574*f*u)))),h=rt(this.long0+m*(1-p/6*(1+2*u+M-p/20*(5+28*u+24*f+8*M*u+6*M-p/42*(61+662*u+1320*f+720*f*u))))/o)}else a=G*nt(n),h=0;else{var d=Math.exp(e/this.k0),_=.5*(d-1/d),y=this.lat0+n/this.k0,x=Math.cos(y);s=Math.sqrt((1-Math.pow(x,2))/(1+Math.pow(_,2))),a=Math.asin(s),0>n&&(a=-a),h=0===_&&0===x?0:rt(Math.atan2(_,x)+this.long0)}return t.x=h,t.y=a,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},Lt=function(t){var s=Math.exp(t);return(s-1/s)/2},zt=function(t,s){t=Math.abs(t),s=Math.abs(s);var i=Math.max(t,s),a=Math.min(t,s)/(i||1);return i*Math.sqrt(1+Math.pow(a,2))},Bt=function(t){var s=Math.abs(t);return s=function(t){var s=1+t,i=s-1;return 0===i?t:t*Math.log(s)/i}(s*(1+s/(zt(1,s)+1))),0>t?-s:s},Dt=function(t,s){for(var i,a=2*Math.cos(2*s),h=t.length-1,e=t[h],n=0;--h>=0;)i=a*e-n+t[h],n=e,e=i;return s+i*Math.sin(2*s)},Ut=function(t,s){for(var i,a=2*Math.cos(s),h=t.length-1,e=t[h],n=0;--h>=0;)i=a*e-n+t[h],n=e,e=i;return Math.sin(s)*i},Ft=function(t,s,i){for(var a,h,e=Math.sin(s),n=Math.cos(s),r=Lt(i),o=function(t){var s=Math.exp(t);return(s+1/s)/2}(i),l=2*n*o,M=-2*e*r,c=t.length-1,u=t[c],f=0,m=0,p=0;--c>=0;)a=m,h=f,u=l*(m=u)-a-M*(f=p)+t[c],p=M*m-h+l*f;return[(l=e*o)*u-(M=n*r)*p,l*p+M*u]},Qt={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),s=t/(2-t),i=s;this.cgb[0]=s*(2+s*(-2/3+s*(s*(116/45+s*(26/45+s*(-2854/675)))-2))),this.cbg[0]=s*(s*(2/3+s*(4/3+s*(-82/45+s*(32/45+s*(4642/4725)))))-2),i*=s,this.cgb[1]=i*(7/3+s*(s*(-227/45+s*(2704/315+s*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+s*(-16/15+s*(-13/9+s*(904/315+s*(-1522/945))))),i*=s,this.cgb[2]=i*(56/15+s*(-136/35+s*(-1262/105+s*(73814/2835)))),this.cbg[2]=i*(-26/15+s*(34/21+s*(1.6+s*(-12686/2835)))),i*=s,this.cgb[3]=i*(4279/630+s*(-332/35+s*(-399572/14175))),this.cbg[3]=i*(1237/630+s*(s*(-24832/14175)-2.4)),i*=s,this.cgb[4]=i*(4174/315+s*(-144838/6237)),this.cbg[4]=i*(-734/315+s*(109598/31185)),i*=s,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(s,2),this.Qn=this.k0/(1+s)*(1+i*(.25+i*(1/64+i/256))),this.utg[0]=s*(s*(2/3+s*(-37/96+s*(1/360+s*(81/512+s*(-96199/604800)))))-.5),this.gtu[0]=s*(.5+s*(-2/3+s*(5/16+s*(41/180+s*(-127/288+s*(7891/37800)))))),this.utg[1]=i*(-1/48+s*(-1/15+s*(437/1440+s*(-46/105+s*(1118711/3870720))))),this.gtu[1]=i*(13/48+s*(s*(557/1440+s*(281/630+s*(-1983433/1935360)))-.6)),i*=s,this.utg[2]=i*(-17/480+s*(37/840+s*(209/4480+s*(-5569/90720)))),this.gtu[2]=i*(61/240+s*(-103/140+s*(15061/26880+s*(167603/181440)))),i*=s,this.utg[3]=i*(-4397/161280+s*(11/504+s*(830251/7257600))),this.gtu[3]=i*(49561/161280+s*(-179/168+s*(6601661/7257600))),i*=s,this.utg[4]=i*(-4583/161280+s*(108847/3991680)),this.gtu[4]=i*(34729/80640+s*(-3418889/1995840)),i*=s,this.utg[5]=-.03233083094085698*i,this.gtu[5]=.6650675310896665*i;var a=Dt(this.cbg,this.lat0);this.Zb=-this.Qn*(a+Ut(this.gtu,2*a))},forward:function(t){var s=rt(t.x-this.long0),i=t.y;i=Dt(this.cbg,i);var a=Math.sin(i),h=Math.cos(i),e=Math.sin(s),n=Math.cos(s);i=Math.atan2(a,n*h),s=Math.atan2(e*h,zt(a,h*n)),s=Bt(Math.tan(s));var r,o,l=Ft(this.gtu,2*i,2*s);return i+=l[0],s+=l[1],Math.abs(s)<=2.623395162778?(r=this.a*(this.Qn*s)+this.x0,o=this.a*(this.Qn*i+this.Zb)+this.y0):(r=1/0,o=1/0),t.x=r,t.y=o,t},inverse:function(t){var s,i,a=(t.x-this.x0)*(1/this.a),h=(t.y-this.y0)*(1/this.a);if(h=(h-this.Zb)/this.Qn,a/=this.Qn,Math.abs(a)<=2.623395162778){var e=Ft(this.utg,2*h,2*a);h+=e[0],a+=e[1],a=Math.atan(Lt(a));var n=Math.sin(h),r=Math.cos(h),o=Math.sin(a),l=Math.cos(a);h=Math.atan2(n*l,zt(o,l*r)),a=Math.atan2(o,l*r),s=rt(a+this.long0),i=Dt(this.cgb,h)}else s=1/0,i=1/0;return t.x=s,t.y=i,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},Wt=function(t,s){if(void 0===t){if(0>(t=Math.floor(30*(rt(s)+Math.PI)/Math.PI)+1))return 0;if(t>60)return 60}return t},Ht={init:function(){var t=Wt(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*B,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Qt.init.apply(this),this.forward=Qt.forward,this.inverse=Qt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},Kt=function(t,s){return Math.pow((1-t)/(1+t),s)},Xt=20,Jt={init:function(){var t=Math.sin(this.lat0),s=Math.cos(this.lat0);s*=s,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*s*s/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+U)/(Math.pow(Math.tan(.5*this.lat0+U),this.C)*Kt(this.e*t,this.ratexp))},forward:function(t){var s=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+U),this.C)*Kt(this.e*Math.sin(i),this.ratexp))-G,t.x=this.C*s,t},inverse:function(t){for(var s=t.x/this.C,i=t.y,a=Math.pow(Math.tan(.5*i+U)/this.K,1/this.C),h=Xt;h>0&&(i=2*Math.atan(a*Kt(this.e*Math.sin(t.y),-.5*this.e))-G,!(Math.abs(i-t.y)<1e-14));--h)t.y=i;return h?(t.x=s,t.y=i,t):null},names:["gauss"]},Vt={init:function(){Jt.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var s,i,a,h;return t.x=rt(t.x-this.long0),Jt.forward.apply(this,[t]),s=Math.sin(t.y),i=Math.cos(t.y),a=Math.cos(t.x),h=this.k0*this.R2/(1+this.sinc0*s+this.cosc0*i*a),t.x=h*i*Math.sin(t.x),t.y=h*(this.cosc0*s-this.sinc0*i*a),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var s,i,a,h,e;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,e=Math.sqrt(t.x*t.x+t.y*t.y)){var n=2*Math.atan2(e,this.R2);s=Math.sin(n),i=Math.cos(n),h=Math.asin(i*this.sinc0+t.y*s*this.cosc0/e),a=Math.atan2(t.x*s,e*this.cosc0*i-t.y*this.sinc0*s)}else h=this.phic0,a=0;return t.x=a,t.y=h,Jt.inverse.apply(this,[t]),t.x=rt(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},Zt={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=z&&(this.k0=.5*(1+nt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=z&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=z&&(this.k0=.5*this.cons*et(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ot(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=et(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-G,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var s,i,a,h,e,n,r=t.x,o=t.y,l=Math.sin(o),M=Math.cos(o),c=rt(r-this.long0);return Math.abs(Math.abs(r-this.long0)-Math.PI)<=z&&Math.abs(o+this.lat0)<=z?(t.x=NaN,t.y=NaN,t):this.sphere?(s=2*this.k0/(1+this.sinlat0*l+this.coslat0*M*Math.cos(c)),t.x=this.a*s*M*Math.sin(c)+this.x0,t.y=this.a*s*(this.coslat0*l-this.sinlat0*M*Math.cos(c))+this.y0,t):(i=2*Math.atan(this.ssfn_(o,l,this.e))-G,h=Math.cos(i),a=Math.sin(i),Math.abs(this.coslat0)<=z?(e=ot(this.e,o*this.con,this.con*l),n=2*this.a*this.k0*e/this.cons,t.x=this.x0+n*Math.sin(r-this.long0),t.y=this.y0-this.con*n*Math.cos(r-this.long0),t):(Math.abs(this.sinlat0)<z?(s=2*this.a*this.k0/(1+h*Math.cos(c)),t.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*h*Math.cos(c))),t.y=s*(this.cosX0*a-this.sinX0*h*Math.cos(c))+this.y0),t.x=s*h*Math.sin(c)+this.x0,t))},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var s,i,a,h,e,n=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var r=2*Math.atan(n/(.5*this.a*this.k0));return s=this.long0,i=this.lat0,z>=n?(t.x=s,t.y=i,t):(i=Math.asin(Math.cos(r)*this.sinlat0+t.y*Math.sin(r)*this.coslat0/n),s=rt(Math.abs(this.coslat0)<z?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(r),n*this.coslat0*Math.cos(r)-t.y*this.sinlat0*Math.sin(r))),t.x=s,t.y=i,t)}if(Math.abs(this.coslat0)<=z){if(z>=n)return i=this.lat0,s=this.long0,t.x=s,t.y=i,t;t.x*=this.con,t.y*=this.con,a=n*this.cons/(2*this.a*this.k0),i=this.con*lt(this.e,a),s=this.con*rt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else h=2*Math.atan(n*this.cosX0/(2*this.a*this.k0*this.ms1)),s=this.long0,z>=n?e=this.X0:(e=Math.asin(Math.cos(h)*this.sinX0+t.y*Math.sin(h)*this.cosX0/n),s=rt(this.long0+Math.atan2(t.x*Math.sin(h),n*this.cosX0*Math.cos(h)-t.y*this.sinX0*Math.sin(h)))),i=-1*lt(this.e,Math.tan(.5*(G+e)));return t.x=s,t.y=i,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,s,i){return s*=i,Math.tan(.5*(G+t))*Math.pow((1-s)/(1+s),.5*i)}},Yt={init:function(){var t=this.lat0;this.lambda0=this.long0;var s=Math.sin(t),i=this.a,a=1/this.rf,h=2*a-Math.pow(a,2),e=this.e=Math.sqrt(h);this.R=this.k0*i*Math.sqrt(1-h)/(1-h*Math.pow(s,2)),this.alpha=Math.sqrt(1+h/(1-h)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(s/this.alpha);var n=Math.log(Math.tan(Math.PI/4+this.b0/2)),r=Math.log(Math.tan(Math.PI/4+t/2)),o=Math.log((1+e*s)/(1-e*s));this.K=n-this.alpha*r+this.alpha*e/2*o},forward:function(t){var s=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),a=-this.alpha*(s+i)+this.K,h=2*(Math.atan(Math.exp(a))-Math.PI/4),e=this.alpha*(t.x-this.lambda0),n=Math.atan(Math.sin(e)/(Math.sin(this.b0)*Math.tan(h)+Math.cos(this.b0)*Math.cos(e))),r=Math.asin(Math.cos(this.b0)*Math.sin(h)-Math.sin(this.b0)*Math.cos(h)*Math.cos(e));return t.y=this.R/2*Math.log((1+Math.sin(r))/(1-Math.sin(r)))+this.y0,t.x=this.R*n+this.x0,t},inverse:function(t){for(var s=t.x-this.x0,i=t.y-this.y0,a=s/this.R,h=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),e=Math.asin(Math.cos(this.b0)*Math.sin(h)+Math.sin(this.b0)*Math.cos(h)*Math.cos(a)),n=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(h))),r=this.lambda0+n/this.alpha,o=0,l=e,M=-1e3,c=0;Math.abs(l-M)>1e-7;){if(++c>20)return;o=1/this.alpha*(Math.log(Math.tan(Math.PI/4+e/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),M=l,l=2*Math.atan(Math.exp(o))-Math.PI/2}return t.x=r,t.y=l,t},names:["somerc"]},$t={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),s=Math.cos(this.lat0),i=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(s,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-i*i);var a,h,e=ot(this.e,this.lat0,t),n=this.bl/s*Math.sqrt((1-this.es)/(1-i*i));if(1>n*n&&(n=1),isNaN(this.longc)){var r=ot(this.e,this.lat1,Math.sin(this.lat1)),o=ot(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(n+Math.sqrt(n*n-1))*Math.pow(e,this.bl):this.el=(n-Math.sqrt(n*n-1))*Math.pow(e,this.bl);var l=Math.pow(r,this.bl),M=Math.pow(o,this.bl);h=.5*((a=this.el/l)-1/a);var c=(this.el*this.el-M*l)/(this.el*this.el+M*l),u=(M-l)/(M+l),f=rt(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(c*Math.tan(.5*this.bl*f)/u)/this.bl,this.long0=rt(this.long0);var m=rt(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*m)/h),this.alpha=Math.asin(n*Math.sin(this.gamma0))}else a=this.lat0>=0?n+Math.sqrt(n*n-1):n-Math.sqrt(n*n-1),this.el=a*Math.pow(e,this.bl),h=.5*(a-1/a),this.gamma0=Math.asin(Math.sin(this.alpha)/n),this.long0=this.longc-Math.asin(h*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha))},forward:function(t){var s,i,a,h=t.x,e=t.y,n=rt(h-this.long0);if(Math.abs(Math.abs(e)-G)<=z)a=e>0?-1:1,i=this.al/this.bl*Math.log(Math.tan(U+a*this.gamma0*.5)),s=-1*a*G*this.al/this.bl;else{var r=ot(this.e,e,Math.sin(e)),o=this.el/Math.pow(r,this.bl),l=.5*(o-1/o),M=.5*(o+1/o),c=Math.sin(this.bl*n),u=(l*Math.sin(this.gamma0)-c*Math.cos(this.gamma0))/M;i=Math.abs(Math.abs(u)-1)<=z?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-u)/(1+u))/this.bl,s=Math.abs(Math.cos(this.bl*n))<=z?this.al*this.bl*n:this.al*Math.atan2(l*Math.cos(this.gamma0)+c*Math.sin(this.gamma0),Math.cos(this.bl*n))/this.bl}return this.no_rot?(t.x=this.x0+s,t.y=this.y0+i):(s-=this.uc,t.x=this.x0+i*Math.cos(this.alpha)+s*Math.sin(this.alpha),t.y=this.y0+s*Math.cos(this.alpha)-i*Math.sin(this.alpha)),t},inverse:function(t){var s,i;this.no_rot?(i=t.y-this.y0,s=t.x-this.x0):(i=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),s=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),s+=this.uc);var a=Math.exp(-1*this.bl*i/this.al),h=.5*(a-1/a),e=.5*(a+1/a),n=Math.sin(this.bl*s/this.al),r=(n*Math.cos(this.gamma0)+h*Math.sin(this.gamma0))/e,o=Math.pow(this.el/Math.sqrt((1+r)/(1-r)),1/this.bl);return Math.abs(r-1)<z?(t.x=this.long0,t.y=G):Math.abs(r+1)<z?(t.x=this.long0,t.y=-1*G):(t.y=lt(this.e,o),t.x=rt(this.long0-Math.atan2(h*Math.cos(this.gamma0)-n*Math.sin(this.gamma0),Math.cos(this.bl*s/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},ts={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<z)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var s=Math.sin(this.lat1),i=Math.cos(this.lat1),a=et(this.e,s,i),h=ot(this.e,this.lat1,s),e=Math.sin(this.lat2),n=Math.cos(this.lat2),r=et(this.e,e,n),o=ot(this.e,this.lat2,e),l=ot(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>z?this.ns=Math.log(a/r)/Math.log(h/o):this.ns=s,isNaN(this.ns)&&(this.ns=s),this.f0=a/(this.ns*Math.pow(h,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var s=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=z&&(i=nt(i)*(G-2*z));var a,h,e=Math.abs(Math.abs(i)-G);if(e>z)a=ot(this.e,i,Math.sin(i)),h=this.a*this.f0*Math.pow(a,this.ns);else{if(0>=(e=i*this.ns))return null;h=0}var n=this.ns*rt(s-this.long0);return t.x=this.k0*(h*Math.sin(n))+this.x0,t.y=this.k0*(this.rh-h*Math.cos(n))+this.y0,t},inverse:function(t){var s,i,a,h,e,n=(t.x-this.x0)/this.k0,r=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(s=Math.sqrt(n*n+r*r),i=1):(s=-Math.sqrt(n*n+r*r),i=-1);var o=0;if(0!==s&&(o=Math.atan2(i*n,i*r)),0!==s||this.ns>0){if(i=1/this.ns,a=Math.pow(s/(this.a*this.f0),i),-9999===(h=lt(this.e,a)))return null}else h=-G;return e=rt(o/this.ns+this.long0),t.x=e,t.y=h,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},ss={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var s,i,a,h,e,n,r,o=t.x,l=t.y,M=rt(o-this.long0);return s=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/s)-this.s45),a=-M*this.alfa,h=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),e=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(h)),n=this.n*e,r=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(h/2+this.s45),this.n),t.y=r*Math.cos(n)/1,t.x=r*Math.sin(n)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var s,i,a,h,e,n,r,o=t.x;t.x=t.y,t.y=o,this.czech||(t.y*=-1,t.x*=-1),e=Math.sqrt(t.x*t.x+t.y*t.y),h=Math.atan2(t.y,t.x)/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/e,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),s=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(h)),i=Math.asin(Math.cos(a)*Math.sin(h)/Math.cos(s)),t.x=this.long0-i/this.alfa,n=s,r=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(s/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(n))/(1-this.e*Math.sin(n)),this.e/2))-this.s45),Math.abs(n-t.y)<1e-10&&(r=1),n=t.y,l+=1}while(0===r&&15>l);return l>=15?null:t},names:["Krovak","krovak"]},is=function(t,s,i,a,h){return t*h-s*Math.sin(2*h)+i*Math.sin(4*h)-a*Math.sin(6*h)},as=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},hs=function(t){return.375*t*(1+.25*t*(1+.46875*t))},es=function(t){return.05859375*t*t*(1+.75*t)},ns=function(t){return t*t*t*(35/3072)},rs=function(t,s,i){var a=s*i;return t/Math.sqrt(1-a*a)},os=function(t){return Math.abs(t)<G?t:t-nt(t)*Math.PI},ls=function(t,s,i,a,h){var e,n;e=t/s;for(var r=0;15>r;r++)if(e+=n=(t-(s*e-i*Math.sin(2*e)+a*Math.sin(4*e)-h*Math.sin(6*e)))/(s-2*i*Math.cos(2*e)+4*a*Math.cos(4*e)-6*h*Math.cos(6*e)),Math.abs(n)<=1e-10)return e;return NaN},Ms={init:function(){this.sphere||(this.e0=as(this.es),this.e1=hs(this.es),this.e2=es(this.es),this.e3=ns(this.es),this.ml0=this.a*is(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var s,i,a=t.x,h=t.y;if(a=rt(a-this.long0),this.sphere)s=this.a*Math.asin(Math.cos(h)*Math.sin(a)),i=this.a*(Math.atan2(Math.tan(h),Math.cos(a))-this.lat0);else{var e=Math.sin(h),n=Math.cos(h),r=rs(this.a,this.e,e),o=Math.tan(h)*Math.tan(h),l=a*Math.cos(h),M=l*l,c=this.es*n*n/(1-this.es);s=r*l*(1-M*o*(1/6-(8-o+8*c)*M/120)),i=this.a*is(this.e0,this.e1,this.e2,this.e3,h)-this.ml0+r*e/n*M*(.5+(5-o+6*c)*M/24)}return t.x=s+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var s,i,a=t.x/this.a,h=t.y/this.a;if(this.sphere){var e=h+this.lat0;s=Math.asin(Math.sin(e)*Math.cos(a)),i=Math.atan2(Math.tan(a),Math.cos(e))}else{var n=this.ml0/this.a+h,r=ls(n,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(r)-G)<=z)return t.x=this.long0,t.y=G,0>h&&(t.y*=-1),t;var o=rs(this.a,this.e,Math.sin(r)),l=o*o*o/this.a/this.a*(1-this.es),M=Math.pow(Math.tan(r),2),c=a*this.a/o,u=c*c;s=r-o*Math.tan(r)/l*c*c*(.5-(1+3*M)*c*c/24),i=c*(1-u*(M/3+(1+3*M)*M*u/15))/Math.cos(r)}return t.x=rt(i+this.long0),t.y=os(s),t},names:["Cassini","Cassini_Soldner","cass"]},cs=function(t,s){var i;return t>1e-7?(1-t*t)*(s/(1-(i=t*s)*i)-.5/t*Math.log((1-i)/(1+i))):2*s},us=.3333333333333333,fs=.17222222222222222,ms=.10257936507936508,ps=.06388888888888888,ds=.0664021164021164,_s=.016415012942191543,ys={init:function(){var t,s=Math.abs(this.lat0);if(Math.abs(s-G)<z?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(s)<z?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=cs(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var s,i=[];return i[0]=t*us,s=t*t,i[0]+=s*fs,i[1]=s*ps,s*=t,i[0]+=s*ms,i[1]+=s*ds,i[2]=s*_s,i}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=cs(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var s,i,a,h,e,n,r,o,l,M,c=t.x,u=t.y;if(c=rt(c-this.long0),this.sphere){if(e=Math.sin(u),M=Math.cos(u),a=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+M*a:1+this.sinph0*e+this.cosph0*M*a,z>=i)return null;s=(i=Math.sqrt(2/i))*M*Math.sin(c),i*=this.mode===this.EQUIT?e:this.cosph0*e-this.sinph0*M*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(u+this.phi0)<z)return null;i=U-.5*u,s=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(c),i*=a}}else{switch(r=0,o=0,l=0,a=Math.cos(c),h=Math.sin(c),e=Math.sin(u),n=cs(this.e,e),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(r=n/this.qp,o=Math.sqrt(1-r*r)),this.mode){case this.OBLIQ:l=1+this.sinb1*r+this.cosb1*o*a;break;case this.EQUIT:l=1+o*a;break;case this.N_POLE:l=G+u,n=this.qp-n;break;case this.S_POLE:l=u-G,n=this.qp+n}if(Math.abs(l)<z)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),i=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*r-this.sinb1*o*a):(l=Math.sqrt(2/(1+o*a)))*r*this.ymf,s=this.xmf*l*o*h;break;case this.N_POLE:case this.S_POLE:n>=0?(s=(l=Math.sqrt(n))*h,i=a*(this.mode===this.S_POLE?l:-l)):s=i=0}}return t.x=this.a*s+this.x0,t.y=this.a*i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var s,i,a,h,e,n,r,o=t.x/this.a,l=t.y/this.a;if(this.sphere){var M,c=0,u=0;if((i=.5*(M=Math.sqrt(o*o+l*l)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(u=Math.sin(i),c=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(M)<=z?0:Math.asin(l*u/M),o*=u,l=c*M;break;case this.OBLIQ:i=Math.abs(M)<=z?this.phi0:Math.asin(c*this.sinph0+l*u*this.cosph0/M),o*=u*this.cosph0,l=(c-Math.sin(i)*this.sinph0)*M;break;case this.N_POLE:l=-l,i=G-i;break;case this.S_POLE:i-=G}s=0!==l||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(o,l):0}else{if(r=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(o/=this.dd,l*=this.dd,n=Math.sqrt(o*o+l*l),z>n)return t.x=0,t.y=this.phi0,t;h=2*Math.asin(.5*n/this.rq),a=Math.cos(h),o*=h=Math.sin(h),this.mode===this.OBLIQ?(r=a*this.sinb1+l*h*this.cosb1/n,e=this.qp*r,l=n*this.cosb1*a-l*this.sinb1*h):(r=l*h/n,e=this.qp*r,l=n*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(l=-l),!(e=o*o+l*l))return t.x=0,t.y=this.phi0,t;r=1-e/this.qp,this.mode===this.S_POLE&&(r=-r)}s=Math.atan2(o,l),i=function(t,s){var i=t+t;return t+s[0]*Math.sin(i)+s[1]*Math.sin(i+i)+s[2]*Math.sin(i+i+i)}(Math.asin(r),this.apa)}return t.x=rt(this.long0+s),t.y=i,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},xs=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)},vs={init:function(){Math.abs(this.lat1+this.lat2)<z||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=et(this.e3,this.sin_po,this.cos_po),this.qs1=cs(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=et(this.e3,this.sin_po,this.cos_po),this.qs2=cs(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=cs(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>z?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var s=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var a=cs(this.e3,this.sin_phi,this.cos_phi),h=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,e=this.ns0*rt(s-this.long0),n=h*Math.sin(e)+this.x0,r=this.rh-h*Math.cos(e)+this.y0;return t.x=n,t.y=r,t},inverse:function(t){var s,i,a,h,e,n;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(s=Math.sqrt(t.x*t.x+t.y*t.y),a=1):(s=-Math.sqrt(t.x*t.x+t.y*t.y),a=-1),h=0,0!==s&&(h=Math.atan2(a*t.x,a*t.y)),a=s*this.ns0/this.a,this.sphere?n=Math.asin((this.c-a*a)/(2*this.ns0)):(i=(this.c-a*a)/this.ns0,n=this.phi1z(this.e3,i)),e=rt(h/this.ns0+this.long0),t.x=e,t.y=n,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,s){var i,a,h,e,n=xs(.5*s);if(z>t)return n;for(var r=t*t,o=1;25>=o;o++)if(n+=e=.5*(h=1-(a=t*(i=Math.sin(n)))*a)*h/Math.cos(n)*(s/(1-r)-i/h+.5/t*Math.log((1-a)/(1+a))),Math.abs(e)<=1e-7)return n;return null}},gs={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var s,i,a,h,e,n,r,o=t.x,l=t.y;return a=rt(o-this.long0),s=Math.sin(l),i=Math.cos(l),h=Math.cos(a),(e=this.sin_p14*s+this.cos_p14*i*h)>0||Math.abs(e)<=z?(n=this.x0+1*this.a*i*Math.sin(a)/e,r=this.y0+1*this.a*(this.cos_p14*s-this.sin_p14*i*h)/e):(n=this.x0+this.infinity_dist*i*Math.sin(a),r=this.y0+this.infinity_dist*(this.cos_p14*s-this.sin_p14*i*h)),t.x=n,t.y=r,t},inverse:function(t){var s,i,a,h,e,n;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(s=Math.sqrt(t.x*t.x+t.y*t.y))?(h=Math.atan2(s,this.rc),i=Math.sin(h),a=Math.cos(h),n=xs(a*this.sin_p14+t.y*i*this.cos_p14/s),e=Math.atan2(t.x*i,s*this.cos_p14*a-t.y*this.sin_p14*i),e=rt(this.long0+e)):(n=this.phic0,e=0),t.x=e,t.y=n,t},names:["gnom"]},bs=function(t,s){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(s)-i)<1e-6)return 0>s?-1*G:G;for(var a,h,e,n,r=Math.asin(.5*s),o=0;30>o;o++)if(h=Math.sin(r),e=Math.cos(r),n=t*h,r+=a=Math.pow(1-n*n,2)/(2*e)*(s/(1-t*t)-h/(1-n*n)+.5/t*Math.log((1-n)/(1+n))),Math.abs(a)<=1e-10)return r;return NaN},ws={init:function(){this.sphere||(this.k0=et(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var s,i,a=t.x,h=t.y,e=rt(a-this.long0);if(this.sphere)s=this.x0+this.a*e*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(h)/Math.cos(this.lat_ts);else{var n=cs(this.e,Math.sin(h));s=this.x0+this.a*this.k0*e,i=this.y0+this.a*n*.5/this.k0}return t.x=s,t.y=i,t},inverse:function(t){var s,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(s=rt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=bs(this.e,2*t.y*this.k0/this.a),s=rt(this.long0+t.x/(this.a*this.k0))),t.x=s,t.y=i,t},names:["cea"]},As={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var s=t.x,i=t.y,a=rt(s-this.long0),h=os(i-this.lat0);return t.x=this.x0+this.a*a*this.rc,t.y=this.y0+this.a*h,t},inverse:function(t){var s=t.x,i=t.y;return t.x=rt(this.long0+(s-this.x0)/(this.a*this.rc)),t.y=os(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Cs=20,Es={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=as(this.es),this.e1=hs(this.es),this.e2=es(this.es),this.e3=ns(this.es),this.ml0=this.a*is(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var s,i,a,h=t.x,e=t.y,n=rt(h-this.long0);if(a=n*Math.sin(e),this.sphere)Math.abs(e)<=z?(s=this.a*n,i=-1*this.a*this.lat0):(s=this.a*Math.sin(a)/Math.tan(e),i=this.a*(os(e-this.lat0)+(1-Math.cos(a))/Math.tan(e)));else if(Math.abs(e)<=z)s=this.a*n,i=-1*this.ml0;else{var r=rs(this.a,this.e,Math.sin(e))/Math.tan(e);s=r*Math.sin(a),i=this.a*is(this.e0,this.e1,this.e2,this.e3,e)-this.ml0+r*(1-Math.cos(a))}return t.x=s+this.x0,t.y=i+this.y0,t},inverse:function(t){var s,i,a,h,e,n,r,o,l;if(a=t.x-this.x0,h=t.y-this.y0,this.sphere)if(Math.abs(h+this.a*this.lat0)<=z)s=rt(a/this.a+this.long0),i=0;else{var M;for(n=this.lat0+h/this.a,r=a*a/this.a/this.a+n*n,o=n,e=Cs;e;--e)if(o+=l=-1*(n*(o*(M=Math.tan(o))+1)-o-.5*(o*o+r)*M)/((o-n)/M-1),Math.abs(l)<=z){i=o;break}s=rt(this.long0+Math.asin(a*Math.tan(o)/this.a)/Math.sin(i))}else if(Math.abs(h+this.ml0)<=z)i=0,s=rt(this.long0+a/this.a);else{var c,u,f,m,p;for(n=(this.ml0+h)/this.a,r=a*a/this.a/this.a+n*n,o=n,e=Cs;e;--e)if(p=this.e*Math.sin(o),c=Math.sqrt(1-p*p)*Math.tan(o),u=this.a*is(this.e0,this.e1,this.e2,this.e3,o),f=this.e0-2*this.e1*Math.cos(2*o)+4*this.e2*Math.cos(4*o)-6*this.e3*Math.cos(6*o),o-=l=(n*(c*(m=u/this.a)+1)-m-.5*c*(m*m+r))/(this.es*Math.sin(2*o)*(m*m+r-2*n*m)/(4*c)+(n-m)*(c*f-2/Math.sin(2*o))-f),Math.abs(l)<=z){i=o;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),s=rt(this.long0+Math.asin(a*c/this.a)/Math.sin(i))}return t.x=s,t.y=i,t},names:["Polyconic","poly"]},Ps={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var s,i=t.x,a=t.y-this.lat0,h=i-this.long0,e=a/R*1e-5,n=h,r=1,o=0;for(s=1;10>=s;s++)r*=e,o+=this.A[s]*r;var l,M=o,c=n,u=1,f=0,m=0,p=0;for(s=1;6>=s;s++)l=f*M+u*c,u=u*M-f*c,f=l,m=m+this.B_re[s]*u-this.B_im[s]*f,p=p+this.B_im[s]*u+this.B_re[s]*f;return t.x=p*this.a+this.x0,t.y=m*this.a+this.y0,t},inverse:function(t){var s,i,a=t.x,h=t.y,e=a-this.x0,n=(h-this.y0)/this.a,r=e/this.a,o=1,l=0,M=0,c=0;for(s=1;6>=s;s++)i=l*n+o*r,o=o*n-l*r,l=i,M=M+this.C_re[s]*o-this.C_im[s]*l,c=c+this.C_im[s]*o+this.C_re[s]*l;for(var u=0;u<this.iterations;u++){var f,m=M,p=c,d=n,_=r;for(s=2;6>=s;s++)f=p*M+m*c,m=m*M-p*c,p=f,d+=(s-1)*(this.B_re[s]*m-this.B_im[s]*p),_+=(s-1)*(this.B_im[s]*m+this.B_re[s]*p);m=1,p=0;var y=this.B_re[1],x=this.B_im[1];for(s=2;6>=s;s++)f=p*M+m*c,m=m*M-p*c,p=f,y+=s*(this.B_re[s]*m-this.B_im[s]*p),x+=s*(this.B_im[s]*m+this.B_re[s]*p);var v=y*y+x*x;M=(d*y+_*x)/v,c=(_*y-d*x)/v}var g=M,b=c,w=1,A=0;for(s=1;9>=s;s++)w*=g,A+=this.D[s]*w;var C=this.lat0+A*R*1e5,E=this.long0+b;return t.x=E,t.y=C,t},names:["New_Zealand_Map_Grid","nzmg"]},Ns={init:function(){},forward:function(t){var s=t.x,i=t.y,a=rt(s-this.long0),h=this.x0+this.a*a,e=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=h,t.y=e,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var s=rt(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=s,t.y=i,t},names:["Miller_Cylindrical","mill"]},Ss=20,ks={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Rt(this.es)},forward:function(t){var s,i,a=t.x,h=t.y;if(a=rt(a-this.long0),this.sphere){if(this.m)for(var e=this.n*Math.sin(h),n=Ss;n;--n){var r=(this.m*h+Math.sin(h)-e)/(this.m+Math.cos(h));if(h-=r,Math.abs(r)<z)break}else h=1!==this.n?Math.asin(this.n*Math.sin(h)):h;s=this.a*this.C_x*a*(this.m+Math.cos(h)),i=this.a*this.C_y*h}else{var o=Math.sin(h),l=Math.cos(h);i=this.a*Gt(h,o,l,this.en),s=this.a*a*l/Math.sqrt(1-this.es*o*o)}return t.x=s,t.y=i,t},inverse:function(t){var s,i,a,h;return t.x-=this.x0,a=t.x/this.a,t.y-=this.y0,s=t.y/this.a,this.sphere?(s/=this.C_y,a/=this.C_x*(this.m+Math.cos(s)),this.m?s=xs((this.m*s+Math.sin(s))/this.n):1!==this.n&&(s=xs(Math.sin(s)/this.n)),a=rt(a+this.long0),s=os(s)):(s=Tt(t.y/this.a,this.es,this.en),h=Math.abs(s),G>h?(h=Math.sin(s),i=this.long0+t.x*Math.sqrt(1-this.es*h*h)/(this.a*Math.cos(s)),a=rt(i)):G>h-z&&(a=this.long0)),t.x=a,t.y=s,t},names:["Sinusoidal","sinu"]},qs={init:function(){},forward:function(t){for(var s=t.x,i=t.y,a=rt(s-this.long0),h=i,e=Math.PI*Math.sin(i);;){var n=-(h+Math.sin(h)-e)/(1+Math.cos(h));if(h+=n,Math.abs(n)<z)break}h/=2,Math.PI/2-Math.abs(i)<z&&(a=0);var r=.900316316158*this.a*a*Math.cos(h)+this.x0,o=1.4142135623731*this.a*Math.sin(h)+this.y0;return t.x=r,t.y=o,t},inverse:function(t){var s,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),s=Math.asin(i);var a=rt(this.long0+t.x/(.900316316158*this.a*Math.cos(s)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),i=(2*s+Math.sin(2*s))/Math.PI,Math.abs(i)>1&&(i=1);var h=Math.asin(i);return t.x=a,t.y=h,t},names:["Mollweide","moll"]},Is={init:function(){Math.abs(this.lat1+this.lat2)<z||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=as(this.es),this.e1=hs(this.es),this.e2=es(this.es),this.e3=ns(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=et(this.e,this.sinphi,this.cosphi),this.ml1=is(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<z?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=et(this.e,this.sinphi,this.cosphi),this.ml2=is(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=is(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var s,i=t.x,a=t.y;if(this.sphere)s=this.a*(this.g-a);else{var h=is(this.e0,this.e1,this.e2,this.e3,a);s=this.a*(this.g-h)}var e=this.ns*rt(i-this.long0),n=this.x0+s*Math.sin(e),r=this.y0+this.rh-s*Math.cos(e);return t.x=n,t.y=r,t},inverse:function(t){var s,i,a,h;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),s=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),s=-1);var e=0;if(0!==i&&(e=Math.atan2(s*t.x,s*t.y)),this.sphere)return h=rt(this.long0+e/this.ns),a=os(this.g-i/this.a),t.x=h,t.y=a,t;var n=this.g-i/this.a;return a=ls(n,this.e0,this.e1,this.e2,this.e3),h=rt(this.long0+e/this.ns),t.x=h,t.y=a,t},names:["Equidistant_Conic","eqdc"]},Os={init:function(){this.R=this.a},forward:function(t){var s,i,a=t.x,h=t.y,e=rt(a-this.long0);Math.abs(h)<=z&&(s=this.x0+this.R*e,i=this.y0);var n=xs(2*Math.abs(h/Math.PI));(Math.abs(e)<=z||Math.abs(Math.abs(h)-G)<=z)&&(s=this.x0,i=h>=0?this.y0+Math.PI*this.R*Math.tan(.5*n):this.y0+Math.PI*this.R*-Math.tan(.5*n));var r=.5*Math.abs(Math.PI/e-e/Math.PI),o=r*r,l=Math.sin(n),M=Math.cos(n),c=M/(l+M-1),u=c*c,f=c*(2/l-1),m=f*f,p=Math.PI*this.R*(r*(c-m)+Math.sqrt(o*(c-m)*(c-m)-(m+o)*(u-m)))/(m+o);0>e&&(p=-p),s=this.x0+p;var d=o+c;return p=Math.PI*this.R*(f*d-r*Math.sqrt((m+o)*(o+1)-d*d))/(m+o),i=h>=0?this.y0+p:this.y0-p,t.x=s,t.y=i,t},inverse:function(t){var s,i,a,h,e,n,r,o,l,M,c,u;return t.x-=this.x0,t.y-=this.y0,c=Math.PI*this.R,e=(a=t.x/c)*a+(h=t.y/c)*h,c=3*(h*h/(o=-2*(n=-Math.abs(h)*(1+e))+1+2*h*h+e*e)+(2*(r=n-2*h*h+a*a)*r*r/o/o/o-9*n*r/o/o)/27)/(l=(n-r*r/3/o)/o)/(M=2*Math.sqrt(-l/3)),Math.abs(c)>1&&(c=c>=0?1:-1),u=Math.acos(c)/3,i=t.y>=0?(-M*Math.cos(u+Math.PI/3)-r/3/o)*Math.PI:-(-M*Math.cos(u+Math.PI/3)-r/3/o)*Math.PI,s=Math.abs(a)<z?this.long0:rt(this.long0+Math.PI*(e-1+Math.sqrt(1+2*(a*a-h*h)+e*e))/2/a),t.x=s,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},Rs={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var s,i,a,h,e,n,r,o,l,M,c,u,f,m,p,d,_,y,x,v,g,b,w=t.x,A=t.y,C=Math.sin(t.y),E=Math.cos(t.y),P=rt(w-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=z?(t.x=this.x0+this.a*(G-A)*Math.sin(P),t.y=this.y0-this.a*(G-A)*Math.cos(P),t):Math.abs(this.sin_p12+1)<=z?(t.x=this.x0+this.a*(G+A)*Math.sin(P),t.y=this.y0+this.a*(G+A)*Math.cos(P),t):(y=this.sin_p12*C+this.cos_p12*E*Math.cos(P),_=(d=Math.acos(y))/Math.sin(d),t.x=this.x0+this.a*_*E*Math.sin(P),t.y=this.y0+this.a*_*(this.cos_p12*C-this.sin_p12*E*Math.cos(P)),t):(s=as(this.es),i=hs(this.es),a=es(this.es),h=ns(this.es),Math.abs(this.sin_p12-1)<=z?(e=this.a*is(s,i,a,h,G),n=this.a*is(s,i,a,h,A),t.x=this.x0+(e-n)*Math.sin(P),t.y=this.y0-(e-n)*Math.cos(P),t):Math.abs(this.sin_p12+1)<=z?(e=this.a*is(s,i,a,h,G),n=this.a*is(s,i,a,h,A),t.x=this.x0+(e+n)*Math.sin(P),t.y=this.y0+(e+n)*Math.cos(P),t):(r=C/E,o=rs(this.a,this.e,this.sin_p12),l=rs(this.a,this.e,C),M=Math.atan((1-this.es)*r+this.es*o*this.sin_p12/(l*E)),x=0===(c=Math.atan2(Math.sin(P),this.cos_p12*Math.tan(M)-this.sin_p12*Math.cos(P)))?Math.asin(this.cos_p12*Math.sin(M)-this.sin_p12*Math.cos(M)):Math.abs(Math.abs(c)-Math.PI)<=z?-Math.asin(this.cos_p12*Math.sin(M)-this.sin_p12*Math.cos(M)):Math.asin(Math.sin(P)*Math.cos(M)/Math.sin(c)),u=this.e*this.sin_p12/Math.sqrt(1-this.es),d=o*x*(1-(v=x*x)*(p=(f=this.e*this.cos_p12*Math.cos(c)/Math.sqrt(1-this.es))*f)*(1-p)/6+(g=v*x)/8*(m=u*f)*(1-2*p)+(b=g*x)/120*(p*(4-7*p)-3*u*u*(1-7*p))-b*x/48*m),t.x=this.x0+d*Math.sin(c),t.y=this.y0+d*Math.cos(c),t))},inverse:function(t){var s,i,a,h,e,n,r,o,l,M,c,u,f,m,p,d,_,y,x,v,g,b;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((s=Math.sqrt(t.x*t.x+t.y*t.y))>2*G*this.a)return;return i=s/this.a,a=Math.sin(i),h=Math.cos(i),e=this.long0,Math.abs(s)<=z?n=this.lat0:(n=xs(h*this.sin_p12+t.y*a*this.cos_p12/s),r=Math.abs(this.lat0)-G,e=rt(Math.abs(r)<=z?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*a,s*this.cos_p12*h-t.y*this.sin_p12*a))),t.x=e,t.y=n,t}return o=as(this.es),l=hs(this.es),M=es(this.es),c=ns(this.es),Math.abs(this.sin_p12-1)<=z?(u=this.a*is(o,l,M,c,G),s=Math.sqrt(t.x*t.x+t.y*t.y),n=ls((u-s)/this.a,o,l,M,c),e=rt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=e,t.y=n,t):Math.abs(this.sin_p12+1)<=z?(u=this.a*is(o,l,M,c,G),s=Math.sqrt(t.x*t.x+t.y*t.y),n=ls((s-u)/this.a,o,l,M,c),e=rt(this.long0+Math.atan2(t.x,t.y)),t.x=e,t.y=n,t):(s=Math.sqrt(t.x*t.x+t.y*t.y),p=Math.atan2(t.x,t.y),f=rs(this.a,this.e,this.sin_p12),d=Math.cos(p),y=-(_=this.e*this.cos_p12*d)*_/(1-this.es),x=3*this.es*(1-y)*this.sin_p12*this.cos_p12*d/(1-this.es),b=1-y*(g=(v=s/f)-y*(1+y)*Math.pow(v,3)/6-x*(1+3*y)*Math.pow(v,4)/24)*g/2-v*g*g*g/6,m=Math.asin(this.sin_p12*Math.cos(g)+this.cos_p12*Math.sin(g)*d),e=rt(this.long0+Math.asin(Math.sin(p)*Math.sin(g)/Math.cos(m))),n=Math.atan((1-this.es*b*this.sin_p12/Math.sin(m))*Math.tan(m)/(1-this.es)),t.x=e,t.y=n,t)},names:["Azimuthal_Equidistant","aeqd"]},Gs={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var s,i,a,h,e,n,r,o=t.x,l=t.y;return a=rt(o-this.long0),s=Math.sin(l),i=Math.cos(l),h=Math.cos(a),((e=this.sin_p14*s+this.cos_p14*i*h)>0||Math.abs(e)<=z)&&(n=1*this.a*i*Math.sin(a),r=this.y0+1*this.a*(this.cos_p14*s-this.sin_p14*i*h)),t.x=n,t.y=r,t},inverse:function(t){var s,i,a,h,e,n,r;return t.x-=this.x0,t.y-=this.y0,s=Math.sqrt(t.x*t.x+t.y*t.y),i=xs(s/this.a),a=Math.sin(i),h=Math.cos(i),n=this.long0,Math.abs(s)<=z?(r=this.lat0,t.x=n,t.y=r,t):(r=xs(h*this.sin_p14+t.y*a*this.cos_p14/s),e=Math.abs(this.lat0)-G,Math.abs(e)<=z?(n=rt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=n,t.y=r,t):(n=rt(this.long0+Math.atan2(t.x*a,s*this.cos_p14*h-t.y*this.sin_p14*a)),t.x=n,t.y=r,t))},names:["ortho"]},Ts={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},js={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},Ls={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=G-U/2?this.face=Ts.TOP:this.lat0<=-(G-U/2)?this.face=Ts.BOTTOM:Math.abs(this.long0)<=U?this.face=Ts.FRONT:Math.abs(this.long0)<=G+U?this.face=this.long0>0?Ts.RIGHT:Ts.LEFT:this.face=Ts.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var s,i,a,h,e,n,r={x:0,y:0},o={value:0};if(t.x-=this.long0,s=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,this.face===Ts.TOP)h=G-s,i>=U&&G+U>=i?(o.value=js.AREA_0,a=i-G):i>G+U||-(G+U)>=i?(o.value=js.AREA_1,a=i>0?i-Q:i+Q):i>-(G+U)&&-U>=i?(o.value=js.AREA_2,a=i+G):(o.value=js.AREA_3,a=i);else if(this.face===Ts.BOTTOM)h=G+s,i>=U&&G+U>=i?(o.value=js.AREA_0,a=-i+G):U>i&&i>=-U?(o.value=js.AREA_1,a=-i):-U>i&&i>=-(G+U)?(o.value=js.AREA_2,a=-i-G):(o.value=js.AREA_3,a=i>0?-i+Q:-i-Q);else{var l,M,c,u,f,m;this.face===Ts.RIGHT?i=S(i,+G):this.face===Ts.BACK?i=S(i,+Q):this.face===Ts.LEFT&&(i=S(i,-G)),u=Math.sin(s),f=Math.cos(s),m=Math.sin(i),l=f*Math.cos(i),M=f*m,c=u,this.face===Ts.FRONT?a=N(h=Math.acos(l),c,M,o):this.face===Ts.RIGHT?a=N(h=Math.acos(M),c,-l,o):this.face===Ts.BACK?a=N(h=Math.acos(-l),c,-M,o):this.face===Ts.LEFT?a=N(h=Math.acos(-M),c,l,o):(h=a=0,o.value=js.AREA_0)}return n=Math.atan(12/Q*(a+Math.acos(Math.sin(a)*Math.cos(U))-G)),e=Math.sqrt((1-Math.cos(h))/(Math.cos(n)*Math.cos(n))/(1-Math.cos(Math.atan(1/Math.cos(a))))),o.value===js.AREA_1?n+=G:o.value===js.AREA_2?n+=Q:o.value===js.AREA_3&&(n+=1.5*Q),r.x=e*Math.cos(n),r.y=e*Math.sin(n),r.x=r.x*this.a+this.x0,r.y=r.y*this.a+this.y0,t.x=r.x,t.y=r.y,t},inverse:function(t){var s,i,a,h,e,n,r,o,l,M,c,u,f={lam:0,phi:0},m={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),s=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?m.value=js.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(m.value=js.AREA_1,s-=G):t.x<0&&-t.x>=Math.abs(t.y)?(m.value=js.AREA_2,s=0>s?s+Q:s-Q):(m.value=js.AREA_3,s+=G),l=Q/12*Math.tan(s),e=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),n=Math.atan(e),-1>(r=1-(a=Math.cos(s))*a*(h=Math.tan(i))*h*(1-Math.cos(Math.atan(1/Math.cos(n)))))?r=-1:r>1&&(r=1),this.face===Ts.TOP)o=Math.acos(r),f.phi=G-o,m.value===js.AREA_0?f.lam=n+G:m.value===js.AREA_1?f.lam=0>n?n+Q:n-Q:m.value===js.AREA_2?f.lam=n-G:f.lam=n;else if(this.face===Ts.BOTTOM)o=Math.acos(r),f.phi=o-G,m.value===js.AREA_0?f.lam=-n+G:m.value===js.AREA_1?f.lam=-n:m.value===js.AREA_2?f.lam=-n-G:f.lam=0>n?-n-Q:-n+Q;else{var p,d,_;l=(p=r)*p,d=(l+=(_=l>=1?0:Math.sqrt(1-l)*Math.sin(n))*_)>=1?0:Math.sqrt(1-l),m.value===js.AREA_1?(l=d,d=-_,_=l):m.value===js.AREA_2?(d=-d,_=-_):m.value===js.AREA_3&&(l=d,d=_,_=-l),this.face===Ts.RIGHT?(l=p,p=-d,d=l):this.face===Ts.BACK?(p=-p,d=-d):this.face===Ts.LEFT&&(l=p,p=d,d=-l),f.phi=Math.acos(-_)-G,f.lam=Math.atan2(d,p),this.face===Ts.RIGHT?f.lam=S(f.lam,-G):this.face===Ts.BACK?f.lam=S(f.lam,-Q):this.face===Ts.LEFT&&(f.lam=S(f.lam,+G))}return 0!==this.es&&(M=f.phi<0?1:0,c=Math.tan(f.phi),u=this.b/Math.sqrt(c*c+this.one_minus_f_squared),f.phi=Math.atan(Math.sqrt(this.a*this.a-u*u)/(this.one_minus_f*u)),M&&(f.phi=-f.phi)),f.lam+=this.long0,t.x=f.lam,t.y=f.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};return _.defaultDatum="WGS84",_.Proj=c,_.WGS84=new _.Proj("WGS84"),_.Point=P,_.toPoint=xt,_.defs=r,_.transform=m,_.mgrs=kt,_.version="2.4.4",(qt=_).Proj.projections.add(jt),qt.Proj.projections.add(Qt),qt.Proj.projections.add(Ht),qt.Proj.projections.add(Vt),qt.Proj.projections.add(Zt),qt.Proj.projections.add(Yt),qt.Proj.projections.add($t),qt.Proj.projections.add(ts),qt.Proj.projections.add(ss),qt.Proj.projections.add(Ms),qt.Proj.projections.add(ys),qt.Proj.projections.add(vs),qt.Proj.projections.add(gs),qt.Proj.projections.add(ws),qt.Proj.projections.add(As),qt.Proj.projections.add(Es),qt.Proj.projections.add(Ps),qt.Proj.projections.add(Ns),qt.Proj.projections.add(ks),qt.Proj.projections.add(qs),qt.Proj.projections.add(Is),qt.Proj.projections.add(Os),qt.Proj.projections.add(Rs),qt.Proj.projections.add(Gs),qt.Proj.projections.add(Ls),_});</script>
    <script>!function(){"use strict";var t=0;function e(e){return e.ol_uid||(e.ol_uid=++t)}var i=function(t){function e(e){var i="Assertion failed. See https://openlayers.org/en/"+"5.2.0".split("-")[0]+"/doc/errors/#"+e+" for details.";t.call(this,i),this.code=e,this.name="AssertionError",this.message=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Error),r="add",n="remove",o="propertychange",s="function"==typeof Object.assign?Object.assign:function(t,e){var i=arguments;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1,o=arguments.length;n<o;++n){var s=i[n];if(null!=s)for(var a in s)s.hasOwnProperty(a)&&(r[a]=s[a])}return r};function a(t){for(var e in t)delete t[e]}function h(t){var e=[];for(var i in t)e.push(t[i]);return e}function l(t){var e;for(e in t)return!1;return!e}function u(t,e,i,r){for(var n,o=0,s=t.length;o<s;++o)if((n=t[o]).listener===e&&n.bindTo===i)return r&&(n.deleteIndex=o),n}function c(t,e){var i=t.ol_lm;return i?i[e]:void 0}function p(t){var e=t.ol_lm;return e||(e=t.ol_lm={}),e}function d(t,e){var i=c(t,e);if(i){for(var r=0,n=i.length;r<n;++r)t.removeEventListener(e,i[r].boundListener),a(i[r]);i.length=0;var o=t.ol_lm;o&&(delete o[e],0===Object.keys(o).length&&delete t.ol_lm)}}function f(t,e,i,r,n){var o=p(t),s=o[e];s||(s=o[e]=[]);var a,h,l=u(s,i,r,!1);return l?n||(l.callOnce=!1):(l={bindTo:r,callOnce:!!n,listener:i,target:t,type:e},t.addEventListener(e,(h=function(t){var e=a.listener,i=a.bindTo||a.target;return a.callOnce&&y(a),e.call(i,t)},(a=l).boundListener=h)),s.push(l)),l}function _(t,e,i,r){return f(t,e,i,r,!0)}function g(t,e,i,r){var n=c(t,e);if(n){var o=u(n,i,r,!0);o&&y(o)}}function y(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=c(t.target,t.type);if(e){var i="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==i&&e.splice(i,1),0===e.length&&d(t.target,t.type)}a(t)}}function v(t){var e=p(t);for(var i in e)d(t,i)}var m=function(){this.disposed_=!1};function x(){return!0}function S(){return!1}function E(){}m.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},m.prototype.disposeInternal=function(){};var C=function(t){this.propagationStopped,this.type=t,this.target=null};function T(t){t.stopPropagation()}C.prototype.preventDefault=function(){this.propagationStopped=!0},C.prototype.stopPropagation=function(){this.propagationStopped=!0};var w=function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.addEventListener=function(t,e){var i=this.listeners_[t];i||(i=this.listeners_[t]=[]),-1===i.indexOf(e)&&i.push(e)},e.prototype.dispatchEvent=function(t){var e,i="string"==typeof t?new C(t):t,r=i.type,n=(i.target=this).listeners_[r];if(n){r in this.dispatching_||(this.dispatching_[r]=0,this.pendingRemovals_[r]=0),++this.dispatching_[r];for(var o=0,s=n.length;o<s;++o)if(!1===n[o].call(this,i)||i.propagationStopped){e=!1;break}if(--this.dispatching_[r],0===this.dispatching_[r]){var a=this.pendingRemovals_[r];for(delete this.pendingRemovals_[r];a--;)this.removeEventListener(r,E);delete this.dispatching_[r]}return e}},e.prototype.disposeInternal=function(){v(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:0<Object.keys(this.listeners_).length},e.prototype.removeEventListener=function(t,e){var i=this.listeners_[t];if(i){var r=i.indexOf(e);t in this.pendingRemovals_?(i[r]=E,++this.pendingRemovals_[t]):(i.splice(r,1),0===i.length&&delete this.listeners_[t])}},e}(m),R={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"},I=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.changed=function(){++this.revision_,this.dispatchEvent(R.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),n=0;n<i;++n)r[n]=f(this,t[n],e);return r}return f(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var i=t.length,r=new Array(i),n=0;n<i;++n)r[n]=_(this,t[n],e);return r}return _(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var i=0,r=t.length;i<r;++i)g(this,t[i],e);else g(this,t,e)},e}(w),L=function(t){function e(e,i,r){t.call(this,e),this.key=i,this.oldValue=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(C),b=function(t){function i(i){t.call(this),e(this),this.values_={},void 0!==i&&this.setProperties(i)}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},i.prototype.getKeys=function(){return Object.keys(this.values_)},i.prototype.getProperties=function(){return s({},this.values_)},i.prototype.notify=function(t,e){var i;i=P(t),this.dispatchEvent(new L(i,t,e)),i=o,this.dispatchEvent(new L(i,t,e))},i.prototype.set=function(t,e,i){if(i)this.values_[t]=e;else{var r=this.values_[t];r!==(this.values_[t]=e)&&this.notify(t,r)}},i.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},i.prototype.unset=function(t,e){if(t in this.values_){var i=this.values_[t];delete this.values_[t],e||this.notify(t,i)}},i}(I),F={};function P(t){return F.hasOwnProperty(t)?F[t]:F[t]="change:"+t}var M="length",O=function(t){function e(e,i){t.call(this,e),this.element=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(C),N=function(t){function e(e,i){t.call(this);var r=i||{};if(this.unique_=!!r.unique,this.array_=e||[],this.unique_)for(var n=0,o=this.array_.length;n<o;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.clear=function(){for(;0<this.getLength();)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,r=e.length;i<r;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(M)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new O(r,e))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,r=e.length;i<r;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new O(n,e)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var o=this.array_[t];this.array_[t]=e,this.dispatchEvent(new O(n,o)),this.dispatchEvent(new O(r,e))}else{for(var s=i;s<t;++s)this.insertAt(s,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(M,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===t&&r!==e)throw new i(58)},e}(b);function A(t,e){if(!t)throw new i(e)}var G={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},k={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function D(t){for(var e=[1/0,1/0,-1/0,-1/0],i=0,r=t.length;i<r;++i)$(e,t[i]);return e}function j(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function U(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function Y(t,e,i){var r,n;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(n=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*n}function B(t,e){return z(t,e[0],e[1])}function X(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function z(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function V(t,e){var i=t[0],r=t[1],n=t[2],o=t[3],s=e[0],a=e[1],h=k.UNKNOWN;return s<i?h|=k.LEFT:n<s&&(h|=k.RIGHT),a<r?h|=k.BELOW:o<a&&(h|=k.ABOVE),h===k.UNKNOWN&&(h=k.INTERSECTING),h}function W(){return[1/0,1/0,-1/0,-1/0]}function K(t,e,i,r,n){return n?(n[0]=t,n[1]=e,n[2]=i,n[3]=r,n):[t,e,i,r]}function H(t){return K(1/0,1/0,-1/0,-1/0,t)}function Z(t,e){var i=t[0],r=t[1];return K(i,r,i,r,e)}function q(t,e,i,r,n){return tt(H(n),t,e,i,r)}function J(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Q(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function $(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function tt(t,e,i,r,n){for(;i<r;i+=n)et(t,e[i],e[i+1]);return t}function et(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function it(t,e,i){var r;return(r=e.call(i,nt(t)))?r:(r=e.call(i,ot(t)))?r:(r=e.call(i,ct(t)))?r:(r=e.call(i,ut(t)))||!1}function rt(t){var e=0;return ft(t)||(e=pt(t)*ht(t)),e}function nt(t){return[t[0],t[1]]}function ot(t){return[t[2],t[1]]}function st(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function at(t,e,i,r,n){var o=e*r[0]/2,s=e*r[1]/2,a=Math.cos(i),h=Math.sin(i),l=o*a,u=o*h,c=s*a,p=s*h,d=t[0],f=t[1],_=d-l+p,g=d-l-p,y=d+l-p,v=d+l+p,m=f-u-c,x=f-u+c,S=f+u+c,E=f+u-c;return K(Math.min(_,g,y,v),Math.min(m,x,S,E),Math.max(_,g,y,v),Math.max(m,x,S,E),n)}function ht(t){return t[3]-t[1]}function lt(t,e,i){var r=i||[1/0,1/0,-1/0,-1/0];return dt(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):H(r),r}function ut(t){return[t[0],t[3]]}function ct(t){return[t[2],t[3]]}function pt(t){return t[2]-t[0]}function dt(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function ft(t){return t[2]<t[0]||t[3]<t[1]}function _t(t,e){var i=(t[2]-t[0])/2*(e-1),r=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=r,t[3]+=r}function gt(t,e,i){var r,n,o,s=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(s,s,2),r=[s[0],s[2],s[4],s[6]],n=[s[1],s[3],s[5],s[7]],o=i,K(Math.min.apply(null,r),Math.min.apply(null,n),Math.max.apply(null,r),Math.max.apply(null,n),o)}function yt(t,e,i,r,n,o){for(var s=o||[],a=0,h=e;h<i;h+=r){var l=t[h],u=t[h+1];s[a++]=n[0]*l+n[2]*u+n[4],s[a++]=n[1]*l+n[3]*u+n[5]}return o&&s.length!=a&&(s.length=a),s}function vt(t,e,i,r,n,o,s){for(var a=s||[],h=0,l=e;l<i;l+=r){a[h++]=t[l]+n,a[h++]=t[l+1]+o;for(var u=l+2;u<l+r;++u)a[h++]=t[u]}return s&&a.length!=h&&(a.length=h),a}function mt(t,e,i){return Math.min(Math.max(t,e),i)}var xt="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function St(t,e,i,r,n,o){var s=n-i,a=o-r;if(0!==s||0!==a){var h=((t-i)*s+(e-r)*a)/(s*s+a*a);1<h?(i=n,r=o):0<h&&(i+=s*h,r+=a*h)}return Et(t,e,i,r)}function Et(t,e,i,r){var n=i-t,o=r-e;return n*n+o*o}function Ct(t){return 180*t/Math.PI}function Tt(t){return t*Math.PI/180}function wt(t,e){var i=t%e;return i*e<0?i+e:i}function Rt(t,e,i){return t+i*(e-t)}var It={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Lt=6371008.8;function bt(t,e,i){var r=i||Lt,n=Tt(t[1]),o=Tt(e[1]),s=(o-n)/2,a=Tt(e[0]-t[0])/2,h=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(n)*Math.cos(o);return 2*r*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function Ft(t,e){for(var i=0,r=0,n=t.length;r<n-1;++r)i+=bt(t[r],t[r+1],e);return i}function Pt(t,e){for(var i=0,r=t.length,n=t[r-1][0],o=t[r-1][1],s=0;s<r;s++){var a=t[s][0],h=t[s][1];i+=Tt(a-n)*(2+Math.sin(Tt(o))+Math.sin(Tt(h))),n=a,o=h}return i*e*e/2}var Mt={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Ot={};Ot[Mt.DEGREES]=2*Math.PI*6370997/360,Ot[Mt.FEET]=.3048,Ot[Mt.METERS]=1,Ot[Mt.USFEET]=1200/3937;var Nt=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};Nt.prototype.canWrapX=function(){return this.canWrapX_},Nt.prototype.getCode=function(){return this.code_},Nt.prototype.getExtent=function(){return this.extent_},Nt.prototype.getUnits=function(){return this.units_},Nt.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Ot[this.units_]},Nt.prototype.getWorldExtent=function(){return this.worldExtent_},Nt.prototype.getAxisOrientation=function(){return this.axisOrientation_},Nt.prototype.isGlobal=function(){return this.global_},Nt.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},Nt.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},Nt.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},Nt.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},Nt.prototype.setWorldExtent=function(t){this.worldExtent_=t},Nt.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},Nt.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_};var At=6378137,Gt=Math.PI*At,kt=[-Gt,-Gt,Gt,Gt],Dt=[-180,-85,180,85],jt=function(t){function e(e){t.call(this,{code:e,units:Mt.METERS,extent:kt,global:!0,worldExtent:Dt,getPointResolution:function(t,e){return t/xt(e[1]/At)}})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Nt),Ut=[new jt("EPSG:3857"),new jt("EPSG:102100"),new jt("EPSG:102113"),new jt("EPSG:900913"),new jt("urn:ogc:def:crs:EPSG:6.18:3:3857"),new jt("urn:ogc:def:crs:EPSG::3857"),new jt("http://www.opengis.net/gml/srs/epsg.xml#3857")];var Yt,Bt,Xt,zt=[-180,-90,180,90],Vt=6378137*Math.PI/180,Wt=function(t){function e(e,i){t.call(this,{code:e,units:Mt.DEGREES,extent:zt,axisOrientation:i,global:!0,metersPerUnit:Vt,worldExtent:zt})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Nt),Kt=[new Wt("CRS:84"),new Wt("EPSG:4326","neu"),new Wt("urn:ogc:def:crs:EPSG::4326","neu"),new Wt("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Wt("urn:ogc:def:crs:OGC:1.3:CRS84"),new Wt("urn:ogc:def:crs:OGC:2:84"),new Wt("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Wt("urn:x-ogc:def:crs:EPSG:4326","neu")],Ht={},Zt={};function qt(t,e,i){var r=t.getCode(),n=e.getCode();r in Zt||(Zt[r]={}),Zt[r][n]=i}function Jt(t,e){var i;return t in Zt&&e in Zt[t]&&(i=Zt[t][e]),i}function Qt(t,e,i){var r;if(void 0!==e){for(var n=0,o=t.length;n<o;++n)e[n]=t[n];r=e}else r=t.slice();return r}function $t(t,e,i){if(void 0!==e&&t!==e){for(var r=0,n=t.length;r<n;++r)e[r]=t[r];t=e}return t}function te(t){var e,i;e=t.getCode(),i=t,Ht[e]=i,qt(t,t,Qt)}function ee(t){var e=null;return t instanceof Nt?e=t:"string"==typeof t&&(e=Ht[t]||null),e}function ie(t,e,i,r){var n,o=(t=ee(t)).getPointResolutionFunc();if(o)n=o(e,i);else if(t.getUnits()==Mt.DEGREES&&!r||r==Mt.DEGREES)n=e;else{var s=he(t,ee("EPSG:4326")),a=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];n=(bt((a=s(a,a,2)).slice(0,2),a.slice(2,4))+bt(a.slice(4,6),a.slice(6,8)))/2;var h=r?Ot[r]:t.getMetersPerUnit();void 0!==h&&(n/=h)}return n}function re(t){t.forEach(te),t.forEach(function(e){t.forEach(function(t){e!==t&&qt(e,t,Qt)})})}function ne(t,e){return t?"string"==typeof t?ee(t):t:ee(e)}function oe(t){return function(e,i,r){for(var n=e.length,o=void 0!==r?r:2,s=void 0!==i?i:new Array(n),a=0;a<n;a+=o){var h=t([e[a],e[a+1]]);s[a]=h[0],s[a+1]=h[1];for(var l=o-1;2<=l;--l)s[a+l]=e[a+l]}return s}}function se(t,e,i,r){var n=ee(t),o=ee(e);qt(n,o,oe(i)),qt(o,n,oe(r))}function ae(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?i:he(t,e)===Qt&&i}function he(t,e){var i=Jt(t.getCode(),e.getCode());return i||(i=$t),i}function le(t,e){return he(ee(t),ee(e))}function ue(t,e,i){return le(e,i)(t,void 0,t.length)}function ce(t,e,i){return gt(t,le(e,i))}re(Ut),re(Kt),Yt=Ut,Bt=function(t,e,i){var r=t.length,n=1<i?i:2,o=e;void 0===o&&(o=2<n?t.slice():new Array(r));for(var s=Gt,a=0;a<r;a+=n){o[a]=s*t[a]/180;var h=At*Math.log(Math.tan(Math.PI*(t[a+1]+90)/360));s<h?h=s:h<-s&&(h=-s),o[a+1]=h}return o},Xt=function(t,e,i){var r=t.length,n=1<i?i:2,o=e;void 0===o&&(o=2<n?t.slice():new Array(r));for(var s=0;s<r;s+=n)o[s]=180*t[s]/Gt,o[s+1]=360*Math.atan(Math.exp(t[s+1]/At))/Math.PI-90;return o},Kt.forEach(function(t){Yt.forEach(function(e){qt(t,e,Bt),qt(e,t,Xt)})});var pe=new Array(6);function de(t){return _e(t,1,0,0,1,0,0)}function fe(t,e){var i=t[0],r=t[1],n=t[2],o=t[3],s=t[4],a=t[5],h=e[0],l=e[1],u=e[2],c=e[3],p=e[4],d=e[5];return t[0]=i*h+n*l,t[1]=r*h+o*l,t[2]=i*u+n*c,t[3]=r*u+o*c,t[4]=i*p+n*d+s,t[5]=r*p+o*d+a,t}function _e(t,e,i,r,n,o,s){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=o,t[5]=s,t}function ge(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function ye(t,e){var i=e[0],r=e[1];return e[0]=t[0]*i+t[2]*r+t[4],e[1]=t[1]*i+t[3]*r+t[5],e}function ve(t,e){var i=Math.cos(e),r=Math.sin(e);return fe(t,_e(pe,i,r,-r,i,0,0))}function me(t,e,i){return fe(t,_e(pe,e,0,0,i,0,0))}function xe(t,e,i){return fe(t,_e(pe,1,0,0,1,e,i))}function Se(t,e,i,r,n,o,s,a){var h=Math.sin(o),l=Math.cos(o);return t[0]=r*l,t[1]=n*h,t[2]=-r*h,t[3]=n*l,t[4]=s*r*l-a*r*h+e,t[5]=s*n*h+a*n*l+i,t}function Ee(t){var e,i=(e=t)[0]*e[3]-e[1]*e[2];A(0!==i,32);var r=t[0],n=t[1],o=t[2],s=t[3],a=t[4],h=t[5];return t[0]=s/i,t[1]=-n/i,t[2]=-o/i,t[3]=r/i,t[4]=(o*h-s*a)/i,t[5]=-(r*h-n*a)/i,t}var Ce=[1,0,0,1,0,0],Te=function(t){function e(){t.call(this),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.clone=function(){},e.prototype.closestPointXY=function(t,e,i,r){},e.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),e=this.extent_,(i=t)?(i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i):e;var e,i},e.prototype.rotate=function(t,e){},e.prototype.scale=function(t,e,i){},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){},e.prototype.getType=function(){},e.prototype.applyTransform=function(t){},e.prototype.intersectsExtent=function(t){},e.prototype.translate=function(t,e){},e.prototype.transform=function(t,e){var i=(t=ee(t)).getUnits()==Mt.TILE_PIXELS?function(i,r,n){var o=t.getExtent(),s=t.getWorldExtent(),a=ht(s)/ht(o);return Se(Ce,s[0],s[3],a,-a,0,0,0),yt(i,0,i.length,n,Ce,r),le(t,e)(i,r,n)}:le(t,e);return this.applyTransform(i),this},e}(b);Te.prototype.containsXY=S;var we=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Re=/^([a-z]*)$/i;function Ie(t){return"string"==typeof t?t:Oe(t)}var Le,be,Fe=(Le={},be=0,function(t){var e;if(Le.hasOwnProperty(t))e=Le[t];else{if(1024<=be){var i=0;for(var r in Le)0==(3&i++)&&(delete Le[r],--be)}e=function(t){var e,i,r,n,o;if(Re.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i}return""}(t)),we.exec(t)){var s,a=t.length-1;s=a<=4?1:2;var h=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),i=parseInt(t.substr(1+1*s,s),16),r=parseInt(t.substr(1+2*s,s),16),n=h?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,i=(i<<4)+i,r=(r<<4)+r,h&&(n=(n<<4)+n)),o=[e,i,r,n/255]}else 0==t.indexOf("rgba(")?Me(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),Me(o)):A(!1,14);return o}(t),Le[t]=e,++be}return e});function Pe(t){return Array.isArray(t)?t:Fe(t)}function Me(t){return t[0]=mt(t[0]+.5|0,0,255),t[1]=mt(t[1]+.5|0,0,255),t[2]=mt(t[2]+.5|0,0,255),t[3]=mt(t[3],0,1),t}function Oe(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+e+","+i+","+r+","+(void 0===t[3]?1:t[3])+")"}function Ne(t){return"string"==typeof(e=t)||e instanceof CanvasPattern||e instanceof CanvasGradient?t:Oe(t);var e}function Ae(t,e){var i=document.createElement("canvas");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d")}function Ge(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)}function ke(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function De(t){for(;t.lastChild;)t.removeChild(t.lastChild)}var je,Ue,Ye=34962,Be=5126,Xe=10242,ze=10243,Ve=3553,We=33071,Ke=36160,He=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Ze(t,e){for(var i=He.length,r=0;r<i;++r)try{var n=t.getContext(He[r],e);if(n)return n}catch(t){}return null}if("undefined"!=typeof window&&"WebGLRenderingContext"in window)try{var qe=Ze(document.createElement("canvas"),{failIfMajorPerformanceCaveat:!0});qe&&(je=qe.getParameter(qe.MAX_TEXTURE_SIZE),Ue=qe.getSupportedExtensions())}catch(m){}var Je,Qe,$e="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",ti=-1!==$e.indexOf("firefox"),ei=-1!==$e.indexOf("safari")&&-1==$e.indexOf("chrom"),ii=-1!==$e.indexOf("webkit")&&-1==$e.indexOf("edge"),ri=-1!==$e.indexOf("macintosh"),ni=window.devicePixelRatio||1,oi=function(){var t=!1;try{t=!!document.createElement("canvas").getContext("2d").setLineDash}catch(t){}return t}(),si="geolocation"in navigator,ai="ontouchstart"in window,hi="PointerEvent"in window,li=!!navigator.msPointerEnabled,ui={IDLE:0,LOADING:1,LOADED:2,ERROR:3},ci="ol-hidden",pi="ol-unselectable",di="ol-control",fi="ol-collapsed",_i=(Qe={},function(t){if(Je||(Je=document.createElement("div").style),!(t in Qe)){Je.font=t;var e=Je.fontFamily;if(Je.font="",!e)return null;Qe[t]=e.split(/,\s?/)}return Qe[t]}),gi=function(t){function e(e){t.call(this),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(R.CLEAR)},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t,e){for(var i=this.oldest_;i;)t.call(e,i.value_,i.key_,this),i=i.newer},e.prototype.get=function(t){var e=this.entries_[t];return A(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,(this.newest_=e).value_)},e.prototype.remove=function(t){var e=this.entries_[t];return A(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},e.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},e.prototype.set=function(t,e){A(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},e}(w),yi="10px sans-serif",vi=[0,0,0,1],mi="round",xi=[],Si="round",Ei=[0,0,0,1],Ci="center",Ti=[0,0,0,0],wi=new gi,Ri={},Ii=null,Li={},bi=function(){var t,e,i=60,r=Ri,n="32px ",o=["monospace","serif"],s=o.length,h="wmytzilWMYTZIL@#/&?$%10";function l(t){for(var i=Fi(),r=100;r<=700;r+=300){for(var a=r+" ",l=!0,u=0;u<s;++u){var c=o[u];if(i.font=a+n+c,e=i.measureText(h).width,t!=c){i.font=a+n+t+","+c;var p=i.measureText(h).width;l=l&&p!=e}}if(l)return!0}return!1}function u(){var e=!0;for(var n in r)r[n]<i&&(l(n)?(r[n]=i,a(Li),Ii=null,wi.clear()):(++r[n],e=!1));e&&(clearInterval(t),t=void 0)}return function(e){var n=_i(e);if(n)for(var o=0,s=n.length;o<s;++o){var a=n[o];a in r||(r[a]=i,l(a)||void(r[a]=0)===t&&(t=setInterval(u,32)))}}}();function Fi(){return Ii||(Ii=Ae(1,1)),Ii}var Pi,Mi,Oi=(Mi=Li,function(t){var e=Mi[t];return null==e&&(Pi||((Pi=document.createElement("span")).textContent="M",Pi.style.margin=Pi.style.padding="0 !important",Pi.style.position="absolute !important",Pi.style.left="-99999px !important"),Pi.style.font=t,document.body.appendChild(Pi),e=Mi[t]=Pi.offsetHeight,document.body.removeChild(Pi)),e});function Ni(t,e){var i=Fi();return t!=i.font&&(i.font=t),i.measureText(e).width}function Ai(t,e,i,r){0!==e&&(t.translate(i,r),t.rotate(e),t.translate(-i,-r))}var Gi=[1,0,0,1,0,0];function ki(t,e,i,r,n,o,s,a,h,l,u){var c;1!=i&&(c=t.globalAlpha,t.globalAlpha=c*i),e&&t.setTransform.apply(t,e),t.drawImage(r,n,o,s,a,h,l,s*u,a*u),c&&(t.globalAlpha=c),e&&t.setTransform.apply(t,Gi)}var Di=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale};Di.prototype.getOpacity=function(){return this.opacity_},Di.prototype.getRotateWithView=function(){return this.rotateWithView_},Di.prototype.getRotation=function(){return this.rotation_},Di.prototype.getScale=function(){return this.scale_},Di.prototype.getSnapToPixel=function(){return!1},Di.prototype.getAnchor=function(){},Di.prototype.getImage=function(t){},Di.prototype.getHitDetectionImage=function(t){},Di.prototype.getImageState=function(){},Di.prototype.getImageSize=function(){},Di.prototype.getHitDetectionImageSize=function(){},Di.prototype.getOrigin=function(){},Di.prototype.getSize=function(){},Di.prototype.setOpacity=function(t){this.opacity_=t},Di.prototype.setRotateWithView=function(t){this.rotateWithView_=t},Di.prototype.setRotation=function(t){this.rotation_=t},Di.prototype.setScale=function(t){this.scale_=t},Di.prototype.setSnapToPixel=function(t){},Di.prototype.listenImageChange=function(t,e){},Di.prototype.load=function(){},Di.prototype.unlistenImageChange=function(t,e){};var ji=function(t){function e(e){var i=void 0!==e.rotateWithView&&e.rotateWithView;t.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==e.rotation?e.rotation:0,scale:1}),this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=e.atlasManager,this.render_(this.atlasManager_)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return ui.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t,e){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t,e){},e.prototype.render_=function(t){var e,i,r="",n="",o=0,s=null,a=0,h=0;this.stroke_&&(null===(i=this.stroke_.getColor())&&(i=Ei),i=Ne(i),void 0===(h=this.stroke_.getWidth())&&(h=1),s=this.stroke_.getLineDash(),a=this.stroke_.getLineDashOffset(),oi||(s=null,a=0),void 0===(n=this.stroke_.getLineJoin())&&(n=Si),void 0===(r=this.stroke_.getLineCap())&&(r=mi),void 0===(o=this.stroke_.getMiterLimit())&&(o=10));var l=2*(this.radius_+h)+1,u={strokeStyle:i,strokeWidth:h,size:l,lineCap:r,lineDash:s,lineDashOffset:a,lineJoin:n,miterLimit:o};if(void 0===t){var c=Ae(l,l);this.canvas_=c.canvas,e=l=this.canvas_.width,this.draw_(u,c,0,0),this.createHitDetectionCanvas_(u)}else{l=Math.round(l);var p,d=!this.fill_;d&&(p=this.drawHitDetectionCanvas_.bind(this,u));var f=this.getChecksum(),_=t.add(f,l,l,this.draw_.bind(this,u),p);this.canvas_=_.image,this.origin_=[_.offsetX,_.offsetY],e=_.image.width,d?(this.hitDetectionCanvas_=_.hitImage,this.hitDetectionImageSize_=[_.hitImage.width,_.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[l/2,l/2],this.size_=[l,l],this.imageSize_=[e,e]},e.prototype.draw_=function(t,e,i,r){var n,o,s;e.setTransform(1,0,0,1,0,0),e.translate(i,r),e.beginPath();var a=this.points_;if(a===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var h=void 0!==this.radius2_?this.radius2_:this.radius_;for(h!==this.radius_&&(a*=2),n=0;n<=a;n++)o=2*n*Math.PI/a-Math.PI/2+this.angle_,s=n%2==0?this.radius_:h,e.lineTo(t.size/2+s*Math.cos(o),t.size/2+s*Math.sin(o))}if(this.fill_){var l=this.fill_.getColor();null===l&&(l=vi),e.fillStyle=Ne(l),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=Ae(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,r){e.setTransform(1,0,0,1,0,0),e.translate(i,r),e.beginPath();var n=this.points_;if(n===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o,s,a,h=void 0!==this.radius2_?this.radius2_:this.radius_;for(h!==this.radius_&&(n*=2),o=0;o<=n;o++)a=2*o*Math.PI/n-Math.PI/2+this.angle_,s=o%2==0?this.radius_:h,e.lineTo(t.size/2+s*Math.cos(a),t.size/2+s*Math.sin(a))}e.fillStyle=vi,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var i="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[i,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},e}(Di),Ui=function(t){function e(e){var i=e||{};t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,atlasManager:i.atlasManager})}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e}(ji),Yi=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};Yi.prototype.clone=function(){var t=this.getColor();return new Yi({color:t&&t.slice?t.slice():t||void 0})},Yi.prototype.getColor=function(){return this.color_},Yi.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},Yi.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient?this.checksum_=e(this.color_).toString():this.checksum_="f"+(this.color_?Ie(this.color_):"-")),this.checksum_};var Bi=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};Bi.prototype.clone=function(){var t=this.getColor();return new Bi({color:t&&t.slice?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},Bi.prototype.getColor=function(){return this.color_},Bi.prototype.getLineCap=function(){return this.lineCap_},Bi.prototype.getLineDash=function(){return this.lineDash_},Bi.prototype.getLineDashOffset=function(){return this.lineDashOffset_},Bi.prototype.getLineJoin=function(){return this.lineJoin_},Bi.prototype.getMiterLimit=function(){return this.miterLimit_},Bi.prototype.getWidth=function(){return this.width_},Bi.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},Bi.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},Bi.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},Bi.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},Bi.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},Bi.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},Bi.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},Bi.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=e(this.color_).toString():this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_};var Xi=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=Ki,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};Xi.prototype.clone=function(){var t=this.getGeometry();return t&&t.clone&&(t=t.clone()),new Xi({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},Xi.prototype.getRenderer=function(){return this.renderer_},Xi.prototype.setRenderer=function(t){this.renderer_=t},Xi.prototype.getGeometry=function(){return this.geometry_},Xi.prototype.getGeometryFunction=function(){return this.geometryFunction_},Xi.prototype.getFill=function(){return this.fill_},Xi.prototype.setFill=function(t){this.fill_=t},Xi.prototype.getImage=function(){return this.image_},Xi.prototype.setImage=function(t){this.image_=t},Xi.prototype.getStroke=function(){return this.stroke_},Xi.prototype.setStroke=function(t){this.stroke_=t},Xi.prototype.getText=function(){return this.text_},Xi.prototype.setText=function(t){this.text_=t},Xi.prototype.getZIndex=function(){return this.zIndex_},Xi.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Ki,this.geometry_=t},Xi.prototype.setZIndex=function(t){this.zIndex_=t};var zi=null;function Vi(t,e){if(!zi){var i=new Yi({color:"rgba(255,255,255,0.4)"}),r=new Bi({color:"#3399CC",width:1.25});zi=[new Xi({image:new Ui({fill:i,stroke:r,radius:5}),fill:i,stroke:r})]}return zi}function Wi(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[It.POLYGON]=[new Xi({fill:new Yi({color:[255,255,255,.5]})})],t[It.MULTI_POLYGON]=t[It.POLYGON],t[It.LINE_STRING]=[new Xi({stroke:new Bi({color:e,width:5})}),new Xi({stroke:new Bi({color:i,width:3})})],t[It.MULTI_LINE_STRING]=t[It.LINE_STRING],t[It.CIRCLE]=t[It.POLYGON].concat(t[It.LINE_STRING]),t[It.POINT]=[new Xi({image:new Ui({radius:6,fill:new Yi({color:i}),stroke:new Bi({color:e,width:1.5})}),zIndex:1/0})],t[It.MULTI_POINT]=t[It.POINT],t[It.GEOMETRY_COLLECTION]=t[It.POLYGON].concat(t[It.LINE_STRING],t[It.POINT]),t}function Ki(t){return t.getGeometry()}var Hi=function(t){function e(e){if(t.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,f(this,P(this.geometryName_),this.handleGeometryChanged_,this),void 0!==e)if(e instanceof Te||!e){var i=e;this.setGeometry(i)}else{var r=e;this.setProperties(r)}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(y(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=f(t,R.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){return"function"==typeof t?t:(Array.isArray(t)?e=t:(A(t instanceof Xi,41),e=[t]),function(){return e});var e}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){g(this,P(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,f(this,P(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e}(b),Zi="accuracy",qi="accuracyGeometry",Ji="altitude",Qi="altitudeAccuracy",$i="heading",tr="position",er="projection",ir="tracking",rr="trackingOptions";function nr(t,e){return e<t?1:t<e?-1:0}function or(t,e){return 0<=t.indexOf(e)}function sr(t,e,i){var r,n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;if(0<i){for(r=1;r<n;++r)if(t[r]<e)return r-1}else if(i<0){for(r=1;r<n;++r)if(t[r]<=e)return r}else for(r=1;r<n;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return n-1}function ar(t,e,i){for(;e<i;){var r=t[e];t[e]=t[i],t[i]=r,++e,--i}}function hr(t,e){for(var i=Array.isArray(e)?e:[e],r=i.length,n=0;n<r;n++)t[t.length]=i[n]}function lr(t,e){for(var i,r=t.length>>>0,n=0;n<r;n++)if(e(i=t[n],n,t))return i;return null}function ur(t,e){var i=t.length;if(i!==e.length)return!1;for(var r=0;r<i;r++)if(t[r]!==e[r])return!1;return!0}function cr(t,e){var i,r=t.length,n=Array(t.length);for(i=0;i<r;i++)n[i]={index:i,value:t[i]};for(n.sort(function(t,i){return e(t.value,i.value)||t.index-i.index}),i=0;i<t.length;i++)t[i]=n[i].value}function pr(t,e){var i;return t.every(function(r,n){return!e(r,i=n,t)})?-1:i}var dr={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"},fr=function(t){function e(){t.call(this),this.layout=dr.XY,this.stride=2,this.flatCoordinates=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.computeExtent=function(t){return q(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(a(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?this.simplifiedGeometryCache[e]=i:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=_r(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){},e.prototype.setLayout=function(t,e,i){var r;if(t)r=_r(t);else{for(var n=0;n<i;++n){if(0===e.length)return this.layout=dr.XY,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=dr.XY:3==t?e=dr.XYZ:4==t&&(e=dr.XYZM),e}(r=e.length)}this.layout=t,this.stride=r},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var r=this.getStride();!function(t,e,i,r,n,o,s){for(var a=s||[],h=Math.cos(n),l=Math.sin(n),u=o[0],c=o[1],p=0,d=0;d<i;d+=r){var f=t[d]-u,_=t[d+1]-c;a[p++]=u+f*h-_*l,a[p++]=c+f*l+_*h;for(var g=d+2;g<d+r;++g)a[p++]=t[g]}s&&a.length!=p&&(a.length=p)}(i,0,i.length,r,t,e,i),this.changed()}},e.prototype.scale=function(t,e,i){var r=e;void 0===r&&(r=t);var n=i;n||(n=st(this.getExtent()));var o=this.getFlatCoordinates();if(o){var s=this.getStride();!function(t,e,i,r,n,o,s,a){for(var h=a||[],l=s[0],u=s[1],c=0,p=0;p<i;p+=r){var d=t[p]-l,f=t[p+1]-u;h[c++]=l+n*d,h[c++]=u+o*f;for(var _=p+2;_<p+r;++_)h[c++]=t[_]}a&&h.length!=c&&(h.length=c)}(o,0,o.length,s,t,r,n,o),this.changed()}},e.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var r=this.getStride();vt(i,0,i.length,r,t,e,i),this.changed()}},e}(Te);function _r(t){var e;return t==dr.XY?e=2:t==dr.XYZ||t==dr.XYM?e=3:t==dr.XYZM&&(e=4),e}function gr(t,e,i,r){for(var n=0,o=t[i-r],s=t[i-r+1];e<i;e+=r){var a=t[e],h=t[e+1];n+=s*a-o*h,o=a,s=h}return n/2}function yr(t,e,i,r){for(var n=0,o=0,s=i.length;o<s;++o){var a=i[o];n+=gr(t,e,a,r),e=a}return n}function vr(t,e,i,r,n,o,s){var a,h=t[e],l=t[e+1],u=t[i]-h,c=t[i+1]-l;if(0===u&&0===c)a=e;else{var p=((n-h)*u+(o-l)*c)/(u*u+c*c);if(1<p)a=i;else{if(0<p){for(var d=0;d<r;++d)s[d]=Rt(t[e+d],t[i+d],p);return void(s.length=r)}a=e}}for(var f=0;f<r;++f)s[f]=t[a+f];s.length=r}function mr(t,e,i,r,n){var o=t[e],s=t[e+1];for(e+=r;e<i;e+=r){var a=t[e],h=t[e+1],l=Et(o,s,a,h);n<l&&(n=l),o=a,s=h}return n}function xr(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){var a=i[o];n=mr(t,e,a,r,n),e=a}return n}function Sr(t,e,i,r,n,o,s,a,h,l,u){if(e==i)return l;var c,p;if(0===n){if((p=Et(s,a,t[e],t[e+1]))<l){for(c=0;c<r;++c)h[c]=t[e+c];return h.length=r,p}return l}for(var d=u||[NaN,NaN],f=e+r;f<i;)if(vr(t,f-r,f,r,s,a,d),(p=Et(s,a,d[0],d[1]))<l){for(l=p,c=0;c<r;++c)h[c]=d[c];f+=h.length=r}else f+=r*Math.max((Math.sqrt(p)-Math.sqrt(l))/n|0,1);if(o&&(vr(t,i-r,e,r,s,a,d),(p=Et(s,a,d[0],d[1]))<l)){for(l=p,c=0;c<r;++c)h[c]=d[c];h.length=r}return l}function Er(t,e,i,r,n,o,s,a,h,l,u){for(var c=u||[NaN,NaN],p=0,d=i.length;p<d;++p){var f=i[p];l=Sr(t,e,f,r,n,o,s,a,h,l,c),e=f}return l}function Cr(t,e,i,r){for(var n=0,o=i.length;n<o;++n)t[e++]=i[n];return e}function Tr(t,e,i,r){for(var n=0,o=i.length;n<o;++n)for(var s=i[n],a=0;a<r;++a)t[e++]=s[a];return e}function wr(t,e,i,r,n){for(var o=n||[],s=0,a=0,h=i.length;a<h;++a){var l=Tr(t,e,i[a],r);e=o[s++]=l}return o.length=s,o}function Rr(t,e,i,r,n){for(var o=void 0!==n?n:[],s=0,a=e;a<i;a+=r)o[s++]=t.slice(a,a+r);return o.length=s,o}function Ir(t,e,i,r,n){for(var o=void 0!==n?n:[],s=0,a=0,h=i.length;a<h;++a){var l=i[a];o[s++]=Rr(t,e,l,r,o[s]),e=l}return o.length=s,o}function Lr(t,e,i,r,n){for(var o=void 0!==n?n:[],s=0,a=0,h=i.length;a<h;++a){var l=i[a];o[s++]=Ir(t,e,l,r,o[s]),e=l[l.length-1]}return o.length=s,o}function br(t,e,i,r,n,o,s){var a=(i-e)/r;if(a<3){for(;e<i;e+=r)o[s++]=t[e],o[s++]=t[e+1];return s}var h=new Array(a);h[0]=1,h[a-1]=1;for(var l=[e,i-r],u=0;0<l.length;){for(var c=l.pop(),p=l.pop(),d=0,f=t[p],_=t[p+1],g=t[c],y=t[c+1],v=p+r;v<c;v+=r){var m=St(t[v],t[v+1],f,_,g,y);d<m&&(u=v,d=m)}n<d&&(h[(u-e)/r]=1,p+r<u&&l.push(p,u),u+r<c&&l.push(u,c))}for(var x=0;x<a;++x)h[x]&&(o[s++]=t[e+x*r],o[s++]=t[e+x*r+1]);return s}function Fr(t,e){return e*Math.round(t/e)}function Pr(t,e,i,r,n,o,s){if(e==i)return s;var a,h,l=Fr(t[e],n),u=Fr(t[e+1],n);e+=r,o[s++]=l,o[s++]=u;do{if(a=Fr(t[e],n),h=Fr(t[e+1],n),(e+=r)==i)return o[s++]=a,o[s++]=h,s}while(a==l&&h==u);for(;e<i;){var c=Fr(t[e],n),p=Fr(t[e+1],n);if(e+=r,c!=a||p!=h){var d=a-l,f=h-u,_=c-l,g=p-u;d*g==f*_&&(d<0&&_<d||d==_||0<d&&d<_)&&(f<0&&g<f||f==g||0<f&&f<g)||(l=o[s++]=a,u=o[s++]=h),a=c,h=p}}return o[s++]=a,o[s++]=h,s}function Mr(t,e,i,r,n,o,s,a){for(var h=0,l=i.length;h<l;++h){var u=i[h];s=Pr(t,e,u,r,n,o,s),a.push(s),e=u}return s}fr.prototype.containsXY=S;var Or=function(t){function e(e,i){t.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,r){return r<Y(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Sr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,r))},e.prototype.getArea=function(){return gr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Rr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=br(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,dr.XY)},e.prototype.getType=function(){return It.LINEAR_RING},e.prototype.intersectsExtent=function(t){},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Tr(this.flatCoordinates,0,t,this.stride),this.changed()},e}(fr),Nr=function(t){function e(e,i){t.call(this),this.setCoordinates(e,i)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,r){var n=this.flatCoordinates,o=Et(t,e,n[0],n[1]);if(o<r){for(var s=this.stride,a=0;a<s;++a)i[a]=n[a];return i.length=s,o}return r},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Z(this.flatCoordinates,t)},e.prototype.getType=function(){return It.POINT},e.prototype.intersectsExtent=function(t){return z(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Cr(this.flatCoordinates,0,t,this.stride),this.changed()},e}(fr);function Ar(t,e,i,r,n){return!it(n,function(n){return!Gr(t,e,i,r,n[0],n[1])})}function Gr(t,e,i,r,n,o){for(var s=0,a=t[i-r],h=t[i-r+1];e<i;e+=r){var l=t[e],u=t[e+1];h<=o?o<u&&0<(l-a)*(o-h)-(n-a)*(u-h)&&s++:u<=o&&(l-a)*(o-h)-(n-a)*(u-h)<0&&s--,a=l,h=u}return 0!==s}function kr(t,e,i,r,n,o){if(0===i.length)return!1;if(!Gr(t,e,i[0],r,n,o))return!1;for(var s=1,a=i.length;s<a;++s)if(Gr(t,i[s-1],i[s],r,n,o))return!1;return!0}function Dr(t,e,i,r,n,o,s){for(var a,h,l,u,c,p,d,f=n[o+1],_=[],g=0,y=i.length;g<y;++g){var v=i[g];for(u=t[v-r],p=t[v-r+1],a=e;a<v;a+=r)c=t[a],d=t[a+1],(f<=p&&d<=f||p<=f&&f<=d)&&(l=(f-p)/(d-p)*(c-u)+u,_.push(l)),u=c,p=d}var m=NaN,x=-1/0;for(_.sort(nr),u=_[0],a=1,h=_.length;a<h;++a){c=_[a];var S=Math.abs(c-u);x<S&&kr(t,e,i,r,l=(u+c)/2,f)&&(m=l,x=S),u=c}return isNaN(m)&&(m=n[o]),s?(s.push(m,f,x),s):[m,f,x]}function jr(t,e,i,r,n){for(var o=[],s=0,a=i.length;s<a;++s){var h=i[s];o=Dr(t,e,h,r,n,2*s,o),e=h[h.length-1]}return o}function Ur(t,e,i,r,n,o){for(var s,a=[t[e],t[e+1]],h=[];e+r<i;e+=r){if(h[0]=t[e+r],h[1]=t[e+r+1],s=n.call(o,a,h))return s;a[0]=h[0],a[1]=h[1]}return!1}function Yr(t,e,i,r,n){var o=tt([1/0,1/0,-1/0,-1/0],t,e,i,r);return!!dt(n,o)&&(!!X(n,o)||o[0]>=n[0]&&o[2]<=n[2]||o[1]>=n[1]&&o[3]<=n[3]||Ur(t,e,i,r,function(t,e){return function(t,e,i){var r=!1,n=V(t,e),o=V(t,i);if(n===k.INTERSECTING||o===k.INTERSECTING)r=!0;else{var s,a,h=t[0],l=t[1],u=t[2],c=t[3],p=e[0],d=e[1],f=i[0],_=i[1],g=(_-d)/(f-p);o&k.ABOVE&&!(n&k.ABOVE)&&(r=h<=(s=f-(_-c)/g)&&s<=u),r||!(o&k.RIGHT)||n&k.RIGHT||(r=l<=(a=_-(f-u)*g)&&a<=c),r||!(o&k.BELOW)||n&k.BELOW||(r=h<=(s=f-(_-l)/g)&&s<=u),r||!(o&k.LEFT)||n&k.LEFT||(r=l<=(a=_-(f-h)*g)&&a<=c)}return r}(n,t,e)}))}function Br(t,e,i,r,n){if(!(Yr(o=t,s=e,a=i[0],h=r,l=n)||Gr(o,s,a,h,l[0],l[1])||Gr(o,s,a,h,l[0],l[3])||Gr(o,s,a,h,l[2],l[1])||Gr(o,s,a,h,l[2],l[3])))return!1;var o,s,a,h,l;if(1===i.length)return!0;for(var u=1,c=i.length;u<c;++u)if(Ar(t,i[u-1],i[u],r,n))return!1;return!0}function Xr(t,e,i,r){for(;e<i-r;){for(var n=0;n<r;++n){var o=t[e+n];t[e+n]=t[i-r+n],t[i-r+n]=o}e+=r,i-=r}}function zr(t,e,i,r){for(var n=0,o=t[i-r],s=t[i-r+1];e<i;e+=r){var a=t[e],h=t[e+1];n+=(a-o)*(h+s),o=a,s=h}return 0<n}function Vr(t,e,i,r,n){for(var o=void 0!==n&&n,s=0,a=i.length;s<a;++s){var h=i[s],l=zr(t,e,h,r);if(0===s){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1;e=h}return!0}function Wr(t,e,i,r,n){for(var o=void 0!==n&&n,s=0,a=i.length;s<a;++s){var h=i[s],l=zr(t,e,h,r);(0===s?o&&l||!o&&!l:o&&!l||!o&&l)&&Xr(t,e,h,r),e=h}return e}function Kr(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o)e=Wr(t,e,i[o],r,n);return e}var Hr=function(t){function e(e,i,r){t.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==i&&r?(this.setFlatCoordinates(i,e),this.ends_=r):this.setCoordinates(e,i)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.appendLinearRing=function(t){this.flatCoordinates?hr(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,r){return r<Y(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(xr(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Er(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,r))},e.prototype.containsXY=function(t,e){return kr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return yr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Wr(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,Ir(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=st(this.getExtent());this.flatInteriorPoint_=Dr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Nr(this.getFlatInteriorPoint(),dr.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Or(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,r=[],n=0,o=0,s=i.length;o<s;++o){var a=i[o],h=new Or(e.slice(n,a),t);r.push(h),n=a}return r},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Vr(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Wr(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=Mr(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,r),new e(i,dr.XY,r)},e.prototype.getType=function(){return It.POLYGON},e.prototype.intersectsExtent=function(t){return Br(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=wr(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(fr);function Zr(t,e,i,r){for(var n,o,s,a,h,l,u,c,p=i||32,d=[],f=0;f<p;++f)hr(d,(n=t,o=e,s=2*Math.PI*f/p,a=r||Lt,h=Tt(n[1]),l=Tt(n[0]),u=o/a,c=Math.asin(Math.sin(h)*Math.cos(u)+Math.cos(h)*Math.sin(u)*Math.cos(s)),[Ct(l+Math.atan2(Math.sin(s)*Math.sin(u)*Math.cos(h),Math.cos(u)-Math.sin(h)*Math.sin(c))),Ct(c)]));return d.push(d[0],d[1]),new Hr(d,dr.XY,[d.length])}function qr(t){var e=t[0],i=t[1],r=t[2],n=t[3],o=[e,i,e,n,r,n,r,i,e,i];return new Hr(o,dr.XY,[o.length])}function Jr(t,e,i){for(var r=e||32,n=t.getStride(),o=t.getLayout(),s=t.getCenter(),a=n*(r+1),h=new Array(a),l=0;l<a;l+=n){h[l]=0,h[l+1]=0;for(var u=2;u<n;u++)h[l+u]=s[u]}var c=[h.length],p=new Hr(h,o,c);return Qr(p,s,t.getRadius(),i),p}function Qr(t,e,i,r){for(var n=t.getFlatCoordinates(),o=t.getStride(),s=n.length/o-1,a=r||0,h=0;h<=s;++h){var l=h*o,u=a+2*wt(h,s)*Math.PI/s;n[l]=e[0]+i*Math.cos(u),n[l+1]=e[1]+i*Math.sin(u)}t.changed()}var $r=function(t){function e(e){t.call(this);var i=e||{};this.position_=null,this.transform_=$t,this.watchId_=void 0,f(this,P(er),this.handleProjectionChanged_,this),f(this,P(ir),this.handleTrackingChanged_,this),void 0!==i.projection&&this.setProjection(i.projection),void 0!==i.trackingOptions&&this.setTrackingOptions(i.trackingOptions),this.setTracking(void 0!==i.tracking&&i.tracking)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=he(ee("EPSG:4326"),t),this.position_&&this.set(tr,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if(si){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(Zi,e.accuracy),this.set(Ji,null===e.altitude?void 0:e.altitude),this.set(Qi,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set($i,null===e.heading?void 0:Tt(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var i=this.transform_(this.position_);this.set(tr,i),this.set("speed",null===e.speed?void 0:e.speed);var r=Zr(this.position_,e.accuracy);r.applyTransform(this.transform_),this.set(qi,r),this.changed()},e.prototype.positionError_=function(t){t.type=R.ERROR,this.setTracking(!1),this.dispatchEvent(t)},e.prototype.getAccuracy=function(){return this.get(Zi)},e.prototype.getAccuracyGeometry=function(){return this.get(qi)||null},e.prototype.getAltitude=function(){return this.get(Ji)},e.prototype.getAltitudeAccuracy=function(){return this.get(Qi)},e.prototype.getHeading=function(){return this.get($i)},e.prototype.getPosition=function(){return this.get(tr)},e.prototype.getProjection=function(){return this.get(er)},e.prototype.getSpeed=function(){return this.get("speed")},e.prototype.getTracking=function(){return this.get(ir)},e.prototype.getTrackingOptions=function(){return this.get(rr)},e.prototype.setProjection=function(t){this.set(er,ee(t))},e.prototype.setTracking=function(t){this.set(ir,t)},e.prototype.setTrackingOptions=function(t){this.set(rr,t)},e}(b);function tn(t,e,i){var r=void 0!==i?t.toFixed(i):""+t,n=r.indexOf(".");return e<(n=-1===n?r.length:n)?r:new Array(1+e-n).join("0")+r}function en(t,e){for(var i=(""+t).split("."),r=(""+e).split("."),n=0;n<Math.max(i.length,r.length);n++){var o=parseInt(i[n]||"0",10),s=parseInt(r[n]||"0",10);if(s<o)return 1;if(o<s)return-1}return 0}function rn(t,e){return t[0]+=e[0],t[1]+=e[1],t}function nn(t,e){var i,r,n=t[0],o=t[1],s=e[0],a=e[1],h=s[0],l=s[1],u=a[0],c=a[1],p=u-h,d=c-l,f=0===p&&0===d?0:(p*(n-h)+d*(o-l))/(p*p+d*d||0);return f<=0?(i=h,r=l):1<=f?(i=u,r=c):(i=h+f*p,r=l+f*d),[i,r]}function on(t,e,i){var r=wt(e+180,360)-180,n=Math.abs(3600*r),o=i||0,s=Math.pow(10,o),a=Math.floor(n/3600),h=Math.floor((n-3600*a)/60),l=n-3600*a-60*h;return 60<=(l=Math.ceil(l*s)/s)&&(l=0,h+=1),60<=h&&(h=0,a+=1),a+" "+tn(h,2)+" "+tn(l,2,o)+""+(0==r?"":" "+t.charAt(r<0?1:0))}function sn(t,e,i){return t?e.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}function an(t,e){for(var i=!0,r=t.length-1;0<=r;--r)if(t[r]!=e[r]){i=!1;break}return i}function hn(t,e){var i=Math.cos(e),r=Math.sin(e),n=t[0]*i-t[1]*r,o=t[1]*i+t[0]*r;return t[0]=n,t[1]=o,t}function ln(t,e){return t[0]*=e,t[1]*=e,t}function un(t,e){var i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function cn(t,e){return Math.sqrt(un(t,e))}function pn(t,e){return un(t,nn(t,e))}function dn(t,e){return sn(t,"{x}, {y}",e)}function fn(t,e,i,r,n,o){var s=NaN,a=NaN,h=(i-e)/r;if(1===h)s=t[e],a=t[e+1];else if(2==h)s=(1-n)*t[e]+n*t[e+r],a=(1-n)*t[e+1]+n*t[e+r+1];else if(0!==h){for(var l=t[e],u=t[e+1],c=0,p=[0],d=e+r;d<i;d+=r){var f=t[d],_=t[d+1];c+=Math.sqrt((f-l)*(f-l)+(_-u)*(_-u)),p.push(c),l=f,u=_}var g=n*c,y=function(t,e,i){for(var r,n,o=nr,s=0,a=t.length,h=!1;s<a;)(n=+o(t[r=s+(a-s>>1)],e))<0?s=r+1:(a=r,h=!n);return h?s:~s}(p,g);if(y<0){var v=(g-p[-y-2])/(p[-y-1]-p[-y-2]),m=e+(-y-2)*r;s=Rt(t[m],t[m+r],v),a=Rt(t[m+1],t[m+r+1],v)}else s=t[e+y*r],a=t[e+y*r+1]}return o?(o[0]=s,o[1]=a,o):[s,a]}function _n(t,e,i,r,n,o){if(i==e)return null;var s;if(n<t[e+r-1])return o?((s=t.slice(e,e+r))[r-1]=n,s):null;if(t[i-1]<n)return o?((s=t.slice(i-r,i))[r-1]=n,s):null;if(n==t[e+r-1])return t.slice(e,e+r);for(var a=e/r,h=i/r;a<h;){var l=a+h>>1;n<t[(l+1)*r-1]?h=l:a=l+1}var u=t[a*r-1];if(n==u)return t.slice((a-1)*r,(a-1)*r+r);var c=(n-u)/(t[(a+1)*r-1]-u);s=[];for(var p=0;p<r-1;++p)s.push(Rt(t[(a-1)*r+p],t[a*r+p],c));return s.push(n),s}function gn(t,e,i,r){for(var n=t[e],o=t[e+1],s=0,a=e+r;a<i;a+=r){var h=t[a],l=t[a+1];s+=Math.sqrt((h-n)*(h-n)+(l-o)*(l-o)),n=h,o=l}return s}var yn=function(t){function e(e,i){t.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.appendCoordinate=function(t){this.flatCoordinates?hr(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,r){return r<Y(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(mr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Sr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,r))},e.prototype.forEachSegment=function(t){return Ur(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=dr.XYM&&this.layout!=dr.XYZM)return null;var i=void 0!==e&&e;return _n(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return Rr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return fn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return gn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=br(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,dr.XY)},e.prototype.getType=function(){return It.LINE_STRING},e.prototype.intersectsExtent=function(t){return Yr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Tr(this.flatCoordinates,0,t,this.stride),this.changed()},e}(fr);function vn(t,e,i){for(var r,n,o,s,a,h,l=[],u=t(0),c=t(1),p=e(u),d=e(c),f=[c,u],_=[d,p],g=[1,0],y={},v=1e5;0<--v&&0<g.length;)o=g.pop(),u=f.pop(),p=_.pop(),(h=o.toString())in y||(l.push(p[0],p[1]),y[h]=!0),s=g.pop(),c=f.pop(),d=_.pop(),St((n=e(r=t(a=(o+s)/2)))[0],n[1],p[0],p[1],d[0],d[1])<i?(l.push(d[0],d[1]),y[h=s.toString()]=!0):(g.push(s,a,a,o),_.push(d,n,n,p),f.push(c,r,r,u));return l}var mn="postcompose",xn="precompose",Sn="render",En=function(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new Yi({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding};En.prototype.clone=function(){return new En({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},En.prototype.getOverflow=function(){return this.overflow_},En.prototype.getFont=function(){return this.font_},En.prototype.getMaxAngle=function(){return this.maxAngle_},En.prototype.getPlacement=function(){return this.placement_},En.prototype.getOffsetX=function(){return this.offsetX_},En.prototype.getOffsetY=function(){return this.offsetY_},En.prototype.getFill=function(){return this.fill_},En.prototype.getRotateWithView=function(){return this.rotateWithView_},En.prototype.getRotation=function(){return this.rotation_},En.prototype.getScale=function(){return this.scale_},En.prototype.getStroke=function(){return this.stroke_},En.prototype.getText=function(){return this.text_},En.prototype.getTextAlign=function(){return this.textAlign_},En.prototype.getTextBaseline=function(){return this.textBaseline_},En.prototype.getBackgroundFill=function(){return this.backgroundFill_},En.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},En.prototype.getPadding=function(){return this.padding_},En.prototype.setOverflow=function(t){this.overflow_=t},En.prototype.setFont=function(t){this.font_=t},En.prototype.setMaxAngle=function(t){this.maxAngle_=t},En.prototype.setOffsetX=function(t){this.offsetX_=t},En.prototype.setOffsetY=function(t){this.offsetY_=t},En.prototype.setPlacement=function(t){this.placement_=t},En.prototype.setFill=function(t){this.fill_=t},En.prototype.setRotation=function(t){this.rotation_=t},En.prototype.setScale=function(t){this.scale_=t},En.prototype.setStroke=function(t){this.stroke_=t},En.prototype.setText=function(t){this.text_=t},En.prototype.setTextAlign=function(t){this.textAlign_=t},En.prototype.setTextBaseline=function(t){this.textBaseline_=t},En.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},En.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},En.prototype.setPadding=function(t){this.padding_=t};var Cn=new Bi({color:"rgba(0,0,0,0.2)"}),Tn=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],wn=function(t){var e=t||{};this.map_=null,this.postcomposeListenerKey_=null,this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxLatP_=1/0,this.maxLonP_=1/0,this.minLatP_=-1/0,this.minLonP_=-1/0,this.targetSize_=void 0!==e.targetSize?e.targetSize:100,this.maxLines_=void 0!==e.maxLines?e.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==e.strokeStyle?e.strokeStyle:Cn,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,1==e.showLabels&&(this.lonLabelFormatter_=null==e.lonLabelFormatter?on.bind(this,"EW"):e.lonLabelFormatter,this.latLabelFormatter_=null==e.latLabelFormatter?on.bind(this,"NS"):e.latLabelFormatter,this.lonLabelPosition_=null==e.lonLabelPosition?0:e.lonLabelPosition,this.latLabelPosition_=null==e.latLabelPosition?1:e.latLabelPosition,this.lonLabelStyle_=void 0!==e.lonLabelStyle?e.lonLabelStyle:new En({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Yi({color:"rgba(0,0,0,1)"}),stroke:new Bi({color:"rgba(255,255,255,1)",width:3})}),this.latLabelStyle_=void 0!==e.latLabelStyle?e.latLabelStyle:new En({font:"12px Calibri,sans-serif",textAlign:"end",fill:new Yi({color:"rgba(0,0,0,1)"}),stroke:new Bi({color:"rgba(255,255,255,1)",width:3})}),this.meridiansLabels_=[],this.parallelsLabels_=[]),this.setMap(void 0!==e.map?e.map:null)};wn.prototype.addMeridian_=function(t,e,i,r,n,o){var s=this.getMeridian_(t,e,i,r,o);if(dt(s.getExtent(),n)){if(this.meridiansLabels_){var a=this.getMeridianPoint_(s,n,o);this.meridiansLabels_[o]={geom:a,text:this.lonLabelFormatter_(t)}}this.meridians_[o++]=s}return o},wn.prototype.getMeridianPoint_=function(t,e,i){var r,n=t.getFlatCoordinates(),o=Math.max(e[1],n[1]),s=Math.min(e[3],n[n.length-1]),a=mt(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,o,s),h=[n[0],a];return i in this.meridiansLabels_?(r=this.meridiansLabels_[i].geom).setCoordinates(h):r=new Nr(h),r},wn.prototype.addParallel_=function(t,e,i,r,n,o){var s=this.getParallel_(t,e,i,r,o);if(dt(s.getExtent(),n)){if(this.parallelsLabels_){var a=this.getParallelPoint_(s,n,o);this.parallelsLabels_[o]={geom:a,text:this.latLabelFormatter_(t)}}this.parallels_[o++]=s}return o},wn.prototype.getParallelPoint_=function(t,e,i){var r,n=t.getFlatCoordinates(),o=Math.max(e[0],n[0]),s=Math.min(e[2],n[n.length-2]),a=[mt(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,o,s),n[1]];return i in this.parallelsLabels_?(r=this.parallelsLabels_[i].geom).setCoordinates(a):r=new Nr(a),r},wn.prototype.createGraticule_=function(t,e,i,r){var n=this.getInterval_(i);if(-1==n)return this.meridians_.length=this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var o,s,a,h,l=this.toLonLatTransform_(e),u=l[0],c=l[1],p=this.maxLines_,d=[Math.max(t[0],this.minLonP_),Math.max(t[1],this.minLatP_),Math.min(t[2],this.maxLonP_),Math.min(t[3],this.maxLatP_)],f=(d=ce(d,this.projection_,"EPSG:4326"))[3],_=d[2],g=d[1],y=d[0];for(h=mt(u=Math.floor(u/n)*n,this.minLon_,this.maxLon_),s=this.addMeridian_(h,g,f,r,t,0),o=0;h!=this.minLon_&&o++<p;)h=Math.max(h-n,this.minLon_),s=this.addMeridian_(h,g,f,r,t,s);for(h=mt(u,this.minLon_,this.maxLon_),o=0;h!=this.maxLon_&&o++<p;)h=Math.min(h+n,this.maxLon_),s=this.addMeridian_(h,g,f,r,t,s);for(this.meridians_.length=s,this.meridiansLabels_&&(this.meridiansLabels_.length=s),a=mt(c=Math.floor(c/n)*n,this.minLat_,this.maxLat_),s=this.addParallel_(a,y,_,r,t,0),o=0;a!=this.minLat_&&o++<p;)a=Math.max(a-n,this.minLat_),s=this.addParallel_(a,y,_,r,t,s);for(a=mt(c,this.minLat_,this.maxLat_),o=0;a!=this.maxLat_&&o++<p;)a=Math.min(a+n,this.maxLat_),s=this.addParallel_(a,y,_,r,t,s);this.parallels_.length=s,this.parallelsLabels_&&(this.parallelsLabels_.length=s)},wn.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],i=this.projectionCenterLonLat_[1],r=-1,n=Math.pow(this.targetSize_*t,2),o=[],s=[],a=0,h=Tn.length;a<h;++a){var l=Tn[a]/2;if(o[0]=e-l,o[1]=i-l,s[0]=e+l,s[1]=i+l,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(s,s),Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2)<=n)break;r=Tn[a]}return r},wn.prototype.getMap=function(){return this.map_},wn.prototype.getMeridian_=function(t,e,i,r,n){var o,s,a,h,l,u=(o=t,s=e,a=i,h=this.projection_,l=r,vn(function(t){return[o,s+(a-s)*t]},le(ee("EPSG:4326"),h),l)),c=this.meridians_[n];return c?(c.setFlatCoordinates(dr.XY,u),c.changed()):c=this.meridians_[n]=new yn(u,dr.XY),c},wn.prototype.getMeridians=function(){return this.meridians_},wn.prototype.getParallel_=function(t,e,i,r,n){var o,s,a,h,l,u=(o=t,s=e,a=i,h=this.projection_,l=r,vn(function(t){return[s+(a-s)*t,o]},le(ee("EPSG:4326"),h),l)),c=this.parallels_[n];return c?(c.setFlatCoordinates(dr.XY,u),c.changed()):c=new yn(u,dr.XY),c},wn.prototype.getParallels=function(){return this.parallels_},wn.prototype.handlePostCompose_=function(t){var e,i,r,n,o=t.vectorContext,s=t.frameState,a=s.extent,h=s.viewState,l=h.center,u=h.projection,c=h.resolution,p=s.pixelRatio,d=c*c/(4*p*p);for((!this.projection_||!ae(this.projection_,u))&&this.updateProjectionInfo_(u),this.createGraticule_(a,l,c,d),o.setFillStrokeStyle(null,this.strokeStyle_),e=0,i=this.meridians_.length;e<i;++e)r=this.meridians_[e],o.drawGeometry(r);for(e=0,i=this.parallels_.length;e<i;++e)r=this.parallels_[e],o.drawGeometry(r);if(this.meridiansLabels_)for(e=0,i=this.meridiansLabels_.length;e<i;++e)n=this.meridiansLabels_[e],this.lonLabelStyle_.setText(n.text),o.setTextStyle(this.lonLabelStyle_),o.drawGeometry(n.geom);if(this.parallelsLabels_)for(e=0,i=this.parallelsLabels_.length;e<i;++e)n=this.parallelsLabels_[e],this.latLabelStyle_.setText(n.text),o.setTextStyle(this.latLabelStyle_),o.drawGeometry(n.geom)},wn.prototype.updateProjectionInfo_=function(t){var e=ee("EPSG:4326"),i=t.getWorldExtent(),r=ce(i,e,t);this.maxLat_=i[3],this.maxLon_=i[2],this.minLat_=i[1],this.minLon_=i[0],this.maxLatP_=r[3],this.maxLonP_=r[2],this.minLatP_=r[1],this.minLonP_=r[0],this.fromLonLatTransform_=le(e,t),this.toLonLatTransform_=le(t,e),this.projectionCenterLonLat_=this.toLonLatTransform_(st(t.getExtent())),this.projection_=t},wn.prototype.setMap=function(t){this.map_&&(y(this.postcomposeListenerKey_),this.postcomposeListenerKey_=null,this.map_.render()),t&&(this.postcomposeListenerKey_=f(t,mn,this.handlePostCompose_,this),t.render()),this.map_=t};var Rn=function(t){function e(e,i,r,n){t.call(this),this.extent=e,this.pixelRatio_=r,this.resolution=i,this.state=n}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.changed=function(){this.dispatchEvent(R.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){},e}(w),In=function(t){function e(e,i,r,n,o,s){t.call(this,e,i,r,ui.IDLE),this.src_=n,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.imageListenerKeys_=null,this.state=ui.IDLE,this.imageLoadFunction_=s}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=ui.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=ht(this.extent)/this.image_.height),this.state=ui.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=ui.IDLE&&this.state!=ui.ERROR||(this.state=ui.LOADING,this.changed(),this.imageListenerKeys_=[_(this.image_,R.ERROR,this.handleImageError_,this),_(this.image_,R.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(y),this.imageListenerKeys_=null},e}(Rn),Ln=0,bn=2,Fn=4;function Pn(t){return Math.pow(t,3)}function Mn(t){return 1-Pn(1-t)}function On(t){return 3*t*t-2*t*t*t}function Nn(t){return t}var An=function(t){function e(e,i,r){t.call(this);var n=r||{};this.tileCoord=e,this.state=i,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.changed=function(){this.dispatchEvent(R.CHANGE)},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==bn)return t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==bn){t.interimTile=null;break}1==t.getState()?e=t:t.getState()==Ln?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){this.state=t,this.changed()},e.prototype.load=function(){},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var r=e-i+1e3/60;return r>=this.transition_?1:Pn(r/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(w),Gn=function(t){function e(e,i,r,n,o,s){t.call(this,e,i,s),this.crossOrigin_=n,this.src_=r,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.imageListenerKeys_=null,this.tileLoadFunction_=o}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.disposeInternal=function(){1==this.state&&(this.unlistenImage_(),this.image_=kn()),this.interimTile&&this.interimTile.dispose(),this.state=5,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.image_=kn(),this.changed()},e.prototype.handleImageLoad_=function(){this.image_.naturalWidth&&this.image_.naturalHeight?this.state=bn:this.state=Fn,this.unlistenImage_(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=Ln,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Ln&&(this.state=1,this.changed(),this.imageListenerKeys_=[_(this.image_,R.ERROR,this.handleImageError_,this),_(this.image_,R.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(y),this.imageListenerKeys_=null},e}(An);function kn(){var t=Ae(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var Dn=function(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0};Dn.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},Dn.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},Dn.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;0<i&&this.points_[i+2]>t;)i-=3;var r=this.points_[e+2]-this.points_[i+2];if(r<1e3/60)return!1;var n=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,n),this.initialVelocity_=Math.sqrt(n*n+o*o)/r,this.initialVelocity_>this.minVelocity_},Dn.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},Dn.prototype.getAngle=function(){return this.angle_};var jn=function(t){function e(e,i,r){t.call(this,e),this.map=i,this.frameState=void 0!==r?r:null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(C),Un=function(t){function e(e,i,r,n,o){t.call(this,e,i,o),this.originalEvent=r,this.pixel=i.getEventPixel(r),this.coordinate=i.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==n&&n}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(jn),Yn={SINGLECLICK:"singleclick",CLICK:R.CLICK,DBLCLICK:R.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Bn=function(t){function e(e,i,r,n,o){t.call(this,e,i,r.originalEvent,n,o),this.pointerEvent=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Un),Xn="pointermove",zn="pointerdown",Vn="pointerup",Wn=function(t,e){this.dispatcher=t,this.mapping_=e};Wn.prototype.getEvents=function(){return Object.keys(this.mapping_)},Wn.prototype.getHandlerForEvent=function(t){return this.mapping_[t]};var Kn=1,Hn="mouse";function Zn(t){if(!this.isEventSimulatedFromTouch_(t)){Kn.toString()in this.pointerMap&&this.cancel(t);var e=eo(t,this.dispatcher);this.pointerMap[Kn.toString()]=t,this.dispatcher.down(e,t)}}function qn(t){if(!this.isEventSimulatedFromTouch_(t)){var e=eo(t,this.dispatcher);this.dispatcher.move(e,t)}}function Jn(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[Kn.toString()];if(e&&e.button===t.button){var i=eo(t,this.dispatcher);this.dispatcher.up(i,t),this.cleanupMouse()}}}function Qn(t){if(!this.isEventSimulatedFromTouch_(t)){var e=eo(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function $n(t){if(!this.isEventSimulatedFromTouch_(t)){var e=eo(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}var to=function(t){function e(e){var i={mousedown:Zn,mousemove:qn,mouseup:Jn,mouseover:Qn,mouseout:$n};t.call(this,e,i),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,i=t.clientX,r=t.clientY,n=0,o=e.length,s=void 0;n<o&&(s=e[n]);n++){var a=Math.abs(i-s[0]),h=Math.abs(r-s[1]);if(a<=25&&h<=25)return!0}return!1},e.prototype.cancel=function(t){var e=eo(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[Kn.toString()]},e}(Wn);function eo(t,e){var i=e.cloneEvent(t,t),r=i.preventDefault;return i.preventDefault=function(){t.preventDefault(),r()},i.pointerId=Kn,i.isPrimary=!0,i.pointerType=Hn,i}var io=["","unavailable","touch","pen","mouse"];function ro(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function no(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function oo(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function so(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function ao(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function ho(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function lo(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function uo(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var co=function(t){function e(e){var i={MSPointerDown:ro,MSPointerMove:no,MSPointerUp:oo,MSPointerOut:so,MSPointerOver:ao,MSPointerCancel:ho,MSGotPointerCapture:uo,MSLostPointerCapture:lo};t.call(this,e,i),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=io[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(Wn);function po(t){this.dispatcher.fireNativeEvent(t)}function fo(t){this.dispatcher.fireNativeEvent(t)}function _o(t){this.dispatcher.fireNativeEvent(t)}function go(t){this.dispatcher.fireNativeEvent(t)}function yo(t){this.dispatcher.fireNativeEvent(t)}function vo(t){this.dispatcher.fireNativeEvent(t)}function mo(t){this.dispatcher.fireNativeEvent(t)}function xo(t){this.dispatcher.fireNativeEvent(t)}var So=function(t){function e(e){var i={pointerdown:po,pointermove:fo,pointerup:_o,pointerout:go,pointerover:yo,pointercancel:vo,gotpointercapture:xo,lostpointercapture:mo};t.call(this,e,i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Wn),Eo=!1,Co=function(t){function e(e,i,r){t.call(this,e),this.originalEvent=i;var n=r||{};this.buttons=this.getButtons_(n),this.pressure=this.getPressure_(n,this.buttons),this.bubbles="bubbles"in n&&n.bubbles,this.cancelable="cancelable"in n&&n.cancelable,this.view="view"in n?n.view:null,this.detail="detail"in n?n.detail:null,this.screenX="screenX"in n?n.screenX:0,this.screenY="screenY"in n?n.screenY:0,this.clientX="clientX"in n?n.clientX:0,this.clientY="clientY"in n?n.clientY:0,this.ctrlKey="ctrlKey"in n&&n.ctrlKey,this.altKey="altKey"in n&&n.altKey,this.shiftKey="shiftKey"in n&&n.shiftKey,this.metaKey="metaKey"in n&&n.metaKey,this.button="button"in n?n.button:0,this.relatedTarget="relatedTarget"in n?n.relatedTarget:null,this.pointerId="pointerId"in n?n.pointerId:0,this.width="width"in n?n.width:0,this.height="height"in n?n.height:0,this.tiltX="tiltX"in n?n.tiltX:0,this.tiltY="tiltY"in n?n.tiltY:0,this.pointerType="pointerType"in n?n.pointerType:"",this.hwTimestamp="hwTimestamp"in n?n.hwTimestamp:0,this.isPrimary="isPrimary"in n&&n.isPrimary,i.preventDefault&&(this.preventDefault=function(){i.preventDefault()})}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getButtons_=function(t){var e;if(t.buttons||Eo)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e},e.prototype.getPressure_=function(t,e){return t.pressure?t.pressure:e?.5:0},e}(C);function To(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function wo(t){this.processTouches_(t,this.moveOverOut_)}function Ro(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function Io(t){this.processTouches_(t,this.cancelOut_)}!function(){try{var t=new MouseEvent("click",{buttons:1});Eo=1===t.buttons}catch(t){}}();var Lo=function(t){function e(e,i){var r={touchstart:To,touchmove:wo,touchend:Ro,touchcancel:Io};t.call(this,e,r),this.pointerMap=e.pointerMap,this.mouseSource=i,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_=void 0,this.dedupTimeout_=2500}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},e.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&Kn.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},e.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},e.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},e.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},e.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},e.prototype.touchToPointer_=function(t,e){var i=this.dispatcher.cloneEvent(t,e);return i.pointerId=e.identifier+2,i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount_,i.button=0,i.buttons=1,i.width=e.webkitRadiusX||e.radiusX||0,i.height=e.webkitRadiusY||e.radiusY||0,i.pressure=e.webkitForce||e.force||.5,i.isPrimary=this.isPrimaryTouch_(e),i.pointerType="touch",i.clientX=e.clientX,i.clientY=e.clientY,i.screenX=e.screenX,i.screenY=e.screenY,i},e.prototype.processTouches_=function(t,e){var i=Array.prototype.slice.call(t.changedTouches),r=i.length;function n(){t.preventDefault()}for(var o=0;o<r;++o){var s=this.touchToPointer_(t,i[o]);s.preventDefault=n,e.call(this,t,s)}},e.prototype.findTouch_=function(t,e){for(var i=t.length,r=0;r<i;r++)if(t[r].identifier===e)return!0;return!1},e.prototype.vacuumTouches_=function(t){var e=t.touches,i=Object.keys(this.pointerMap),r=i.length;if(r>=e.length){for(var n=[],o=0;o<r;++o){var s=i[o],a=this.pointerMap[s];s==Kn||this.findTouch_(e,s-2)||n.push(a.out)}for(var h=0;h<n.length;++h)this.cancelOut_(t,n[h])}},e.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},e.prototype.moveOverOut_=function(t,e){var i=e,r=this.pointerMap[i.pointerId];if(r){var n=r.out,o=r.outTarget;this.dispatcher.move(i,t),n&&o!==i.target&&(n.relatedTarget=i.target,i.relatedTarget=o,n.target=o,i.target?(this.dispatcher.leaveOut(n,t),this.dispatcher.enterOver(i,t)):(i.target=o,i.relatedTarget=null,this.cancelOut_(t,i))),r.out=i,r.outTarget=i.target}},e.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},e.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,i=t.changedTouches[0];if(this.isPrimaryTouch_(i)){var r=[i.clientX,i.clientY];e.push(r),setTimeout(function(){var t,i,n;i=r,-1<(n=(t=e).indexOf(i))&&t.splice(n,1)},this.dedupTimeout_)}},e}(Wn),bo=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],Fo=function(t){function e(e){t.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.registerSources=function(){if(hi)this.registerSource("native",new So(this));else if(li)this.registerSource("ms",new co(this));else{var t=new to(this);this.registerSource("mouse",t),ai&&this.registerSource("touch",new Lo(this,t))}this.register_()},e.prototype.registerSource=function(t,e){var i=e,r=i.getEvents();r&&(r.forEach(function(t){var e=i.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(i))}.bind(this)),this.eventSourceList_.push(i))},e.prototype.register_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.addEvents_(i.getEvents())}},e.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.removeEvents_(i.getEvents())}},e.prototype.eventHandler_=function(t){var e=t.type,i=this.eventMap_[e];i&&i(t)},e.prototype.addEvents_=function(t){t.forEach(function(t){f(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.removeEvents_=function(t){t.forEach(function(t){g(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.cloneEvent=function(t,e){for(var i={},r=0,n=bo.length;r<n;r++){var o=bo[r][0];i[o]=t[o]||e[o]||bo[r][1]}return i},e.prototype.down=function(t,e){this.fireEvent(zn,t,e)},e.prototype.move=function(t,e){this.fireEvent(Xn,t,e)},e.prototype.up=function(t,e){this.fireEvent(Vn,t,e)},e.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent("pointerenter",t,e)},e.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent("pointerleave",t,e)},e.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent("pointerover",t,e)},e.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent("pointerout",t,e)},e.prototype.cancel=function(t,e){this.fireEvent("pointercancel",t,e)},e.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},e.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},e.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},e.prototype.makeEvent=function(t,e,i){return new Co(t,i,e)},e.prototype.fireEvent=function(t,e,i){var r=this.makeEvent(t,e,i);this.dispatchEvent(r)},e.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},e.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,to.prepareEvent(e,this),e)},e.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},e}(w),Po=function(t){function e(e,i){t.call(this),this.map_=e,this.clickTimeoutId_=0,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i?i*ni:ni,this.down_=null;var r=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new Fo(r),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=f(this.pointerEventHandler_,zn,this.handlePointerDown_,this),this.relayedListenerKey_=f(this.pointerEventHandler_,Xn,this.relayEvent_,this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.emulateClick_=function(t){var e=new Bn(Yn.CLICK,this.map_,t);this.dispatchEvent(e),0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=0,e=new Bn(Yn.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=0;var e=new Bn(Yn.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Yn.POINTERUP||e.type==Yn.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Yn.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new Bn(Yn.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(y),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new Bn(Yn.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new Fo(document),this.dragListenerKeys_.push(f(this.documentPointerEventHandler_,Yn.POINTERMOVE,this.handlePointerMove_,this),f(this.documentPointerEventHandler_,Yn.POINTERUP,this.handlePointerUp_,this),f(this.pointerEventHandler_,Yn.POINTERCANCEL,this.handlePointerUp_,this)))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new Bn(Yn.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},e.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Bn(t.type,this.map_,t,e))},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(y(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(y(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(y),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),t.prototype.disposeInternal.call(this)},e}(w),Mo={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"},Oo={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},No=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};No.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,a(this.queuedElements_)},No.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var r=this.keyFunction_(i);return delete this.queuedElements_[r],i},No.prototype.enqueue=function(t){A(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},No.prototype.getCount=function(){return this.elements_.length},No.prototype.getLeftChildIndex_=function(t){return 2*t+1},No.prototype.getRightChildIndex_=function(t){return 2*t+2},No.prototype.getParentIndex_=function(t){return t-1>>1},No.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;0<=t;t--)this.siftUp_(t)},No.prototype.isEmpty=function(){return 0===this.elements_.length},No.prototype.isKeyQueued=function(t){return t in this.queuedElements_},No.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},No.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,r=e.length,n=e[t],o=i[t],s=t;t<r>>1;){var a=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),l=h<r&&i[h]<i[a]?h:a;e[t]=e[l],i[t]=i[l],t=l}e[t]=n,i[t]=o,this.siftDown_(s,t)},No.prototype.siftDown_=function(t,e){for(var i=this.elements_,r=this.priorities_,n=i[e],o=r[e];t<e;){var s=this.getParentIndex_(e);if(!(r[s]>o))break;i[e]=i[s],r[e]=r[s],e=s}i[e]=n,r[e]=o},No.prototype.reprioritize=function(){var t,e,i,r=this.priorityFunction_,n=this.elements_,o=this.priorities_,s=0,a=n.length;for(e=0;e<a;++e)(i=r(t=n[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[s]=i,n[s++]=t);n.length=s,o.length=s,this.heapify_()};var Ao=function(t){function e(e,i){t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()}),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);return i&&f(e[0],R.CHANGE,this.handleTileChange,this),i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(i===bn||3===i||i===Fn||5===i){g(e,R.CHANGE,this.handleTileChange,this);var r=e.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,r,n,o=0,s=!1;this.tilesLoading_<t&&o<e&&0<this.getCount();)n=(r=this.dequeue()[0]).getKey(),5===(i=r.getState())?s=!0:i!==Ln||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++o,r.load());0===o&&s&&this.tileChangeCallback_()},e}(No),Go=42,ko=256;function Do(t){return t}function jo(t,e){return void 0!==t?0:void 0}function Uo(t,e){return void 0!==t?t+e:void 0}var Yo={ANIMATING:0,INTERACTING:1},Bo="center",Xo="resolution",zo="rotation",Vo=function(t){function i(e){t.call(this);var i=s({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=ne(i.projection,"EPSG:3857"),this.applyOptions_(i)}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.applyOptions_=function(t){var e={};e[Bo]=void 0!==t.center?t.center:null;var i=function(t){var e,i,r,n,o,s,a,h=void 0!==t.minZoom?t.minZoom:0,l=void 0!==t.maxZoom?t.maxZoom:28,u=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var c=t.resolutions;i=c[h],r=void 0!==c[l]?c[l]:c[c.length-1],a=c,e=function(t,e,i){if(void 0!==t){var r=sr(a,t,i);r=mt(r+e,0,a.length-1);var n=Math.floor(r);if(r!=n&&n<a.length-1){var o=a[n]/a[n+1];return a[n]/Math.pow(o,r-n)}return a[n]}}}else{var p=ne(t.projection,"EPSG:3857"),d=p.getExtent(),f=(d?Math.max(pt(d),ht(d)):360*Ot[Mt.DEGREES]/p.getMetersPerUnit())/ko/Math.pow(2,0),_=f/Math.pow(2,28);void 0!==(i=t.maxResolution)?h=0:i=f/Math.pow(u,h),void 0===(r=t.minResolution)&&(r=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(u,l):f/Math.pow(u,l):_),l=h+Math.floor(Math.log(i/r)/Math.log(u)),r=i/Math.pow(u,l-h),n=u,o=i,s=l-h,e=function(t,e,i){if(void 0!==t){var r=-i/2+.5,a=Math.floor(Math.log(o/t)/Math.log(n)+r),h=Math.max(a+e,0);return void 0!==s&&(h=Math.min(h,s)),o/Math.pow(n,h)}}}return{constraint:e,maxResolution:i,minResolution:r,minZoom:h,zoomFactor:u}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=i.minZoom;var r,n,o=void 0!==(r=t).extent?(n=r.extent,function(t){return t?[mt(t[0],n[0],n[2]),mt(t[1],n[1],n[3])]:void 0}):Do,s=i.constraint,a=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(n=Tt(5),function(t,e){return void 0!==t?Math.abs(t+e)<=n?0:t+e:void 0}):!1===e?Uo:"number"==typeof e?(i=e,r=2*Math.PI/i,function(t,e){return void 0!==t?t=Math.floor((t+e)/r+.5)*r:void 0}):Uo}return jo;var i,r,n}(t);this.constraints_={center:o,resolution:s,rotation:a},void 0!==t.resolution?e[Xo]=t.resolution:void 0!==t.zoom&&(e[Xo]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[Xo]=mt(Number(this.getResolution()||e[Xo]),this.minResolution_,this.maxResolution_))),e[zo]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},i.prototype.getUpdatedOptions_=function(t){var e=s({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),s({},e,t)},i.prototype.animate=function(t){var e,i=arguments,r=arguments.length;if(1<r&&"function"==typeof arguments[r-1]&&(e=arguments[r-1],--r),!this.isDef()){var n=arguments[r-1];return n.center&&this.setCenter(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(e&&Wo(e,!0))}for(var o=Date.now(),s=this.getCenter().slice(),a=this.getResolution(),h=this.getRotation(),l=[],u=0;u<r;++u){var c=i[u],p={start:o,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||On};if(c.center&&(p.sourceCenter=s,p.targetCenter=c.center,s=p.targetCenter),void 0!==c.zoom?(p.sourceResolution=a,p.targetResolution=this.constrainResolution(this.maxResolution_,c.zoom-this.minZoom_,0),a=p.targetResolution):c.resolution&&(p.sourceResolution=a,p.targetResolution=c.resolution,a=p.targetResolution),void 0!==c.rotation){p.sourceRotation=h;var d=wt(c.rotation-h+Math.PI,2*Math.PI)-Math.PI;p.targetRotation=h+d,h=p.targetRotation}p.callback=e,Ko(p)?p.complete=!0:o+=p.duration,l.push(p)}this.animations_.push(l),this.setHint(Yo.ANIMATING,1),this.updateAnimations_()},i.prototype.getAnimating=function(){return 0<this.hints_[Yo.ANIMATING]},i.prototype.getInteracting=function(){return 0<this.hints_[Yo.INTERACTING]},i.prototype.cancelAnimations=function(){this.setHint(Yo.ANIMATING,-this.hints_[Yo.ANIMATING]);for(var t=0,e=this.animations_.length;t<e;++t){var i=this.animations_[t];i[0].callback&&Wo(i[0].callback,!1)}this.animations_.length=0},i.prototype.updateAnimations_=function(){var t=this;if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var e=Date.now(),i=!1,r=this.animations_.length-1;0<=r;--r){for(var n=t.animations_[r],o=!0,s=0,a=n.length;s<a;++s){var h=n[s];if(!h.complete){var l=e-h.start,u=0<h.duration?l/h.duration:1;1<=u?(h.complete=!0,u=1):o=!1;var c=h.easing(u);if(h.sourceCenter){var p=h.sourceCenter[0],d=h.sourceCenter[1],f=p+c*(h.targetCenter[0]-p),_=d+c*(h.targetCenter[1]-d);t.set(Bo,[f,_])}if(h.sourceResolution&&h.targetResolution){var g=1===c?h.targetResolution:h.sourceResolution+c*(h.targetResolution-h.sourceResolution);h.anchor&&t.set(Bo,t.calculateCenterZoom(g,h.anchor)),t.set(Xo,g)}if(void 0!==h.sourceRotation&&void 0!==h.targetRotation){var y=1===c?wt(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+c*(h.targetRotation-h.sourceRotation);h.anchor&&t.set(Bo,t.calculateCenterRotate(y,h.anchor)),t.set(zo,y)}if(i=!0,!h.complete)break}}if(o){t.animations_[r]=null,t.setHint(Yo.ANIMATING,-1);var v=n[0].callback;v&&Wo(v,!0)}}this.animations_=this.animations_.filter(Boolean),i&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},i.prototype.calculateCenterRotate=function(t,e){var i,r=this.getCenter();return void 0!==r&&(hn(i=[r[0]-e[0],r[1]-e[1]],t-this.getRotation()),rn(i,e)),i},i.prototype.calculateCenterZoom=function(t,e){var i,r=this.getCenter(),n=this.getResolution();return void 0!==r&&void 0!==n&&(i=[e[0]-t*(e[0]-r[0])/n,e[1]-t*(e[1]-r[1])/n]),i},i.prototype.getSizeFromViewport_=function(){var t=[100,100],i='.ol-viewport[data-view="'+e(this)+'"]',r=document.querySelector(i);if(r){var n=getComputedStyle(r);t[0]=parseInt(n.width,10),t[1]=parseInt(n.height,10)}return t},i.prototype.constrainCenter=function(t){return this.constraints_.center(t)},i.prototype.constrainResolution=function(t,e,i){var r=e||0,n=i||0;return this.constraints_.resolution(t,r,n)},i.prototype.constrainRotation=function(t,e){var i=e||0;return this.constraints_.rotation(t,i)},i.prototype.getCenter=function(){return this.get(Bo)},i.prototype.getConstraints=function(){return this.constraints_},i.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},i.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),i=this.getCenter();A(i,1);var r=this.getResolution();A(void 0!==r,2);var n=this.getRotation();return A(void 0!==n,3),at(i,r,n,e)},i.prototype.getMaxResolution=function(){return this.maxResolution_},i.prototype.getMinResolution=function(){return this.minResolution_},i.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},i.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},i.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},i.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},i.prototype.getProjection=function(){return this.projection_},i.prototype.getResolution=function(){return this.get(Xo)},i.prototype.getResolutions=function(){return this.resolutions_},i.prototype.getResolutionForExtent=function(t,e){var i=e||this.getSizeFromViewport_(),r=pt(t)/i[0],n=ht(t)/i[1];return Math.max(r,n)},i.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.maxResolution_,r=this.minResolution_,n=Math.log(i/r)/Math.log(e);return function(t){return i/Math.pow(e,t*n)}},i.prototype.getRotation=function(){return this.get(zo)},i.prototype.getValueForResolutionFunction=function(t){var e=t||2,i=this.maxResolution_,r=this.minResolution_,n=Math.log(i/r)/Math.log(e);return function(t){return Math.log(i/t)/Math.log(e)/n}},i.prototype.getState=function(t){var e=this.getCenter(),i=this.getProjection(),r=this.getResolution(),n=r/t,o=this.getRotation();return{center:[Math.round(e[0]/n)*n,Math.round(e[1]/n)*n],projection:void 0!==i?i:null,resolution:r,rotation:o,zoom:this.getZoom()}},i.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},i.prototype.getZoomForResolution=function(t){var e,i,r=this.minZoom_||0;if(this.resolutions_){var n=sr(this.resolutions_,t,1);r=n,e=this.resolutions_[n],i=n==this.resolutions_.length-1?2:e/this.resolutions_[n+1]}else e=this.maxResolution_,i=this.zoomFactor_;return r+Math.log(e/t)/Math.log(i)},i.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},i.prototype.fit=function(t,e){var i,r=e||{},n=r.size;n||(n=this.getSizeFromViewport_()),t instanceof fr?t.getType()===It.CIRCLE?(i=qr(t=t.getExtent())).rotate(this.getRotation(),st(t)):i=t:(A(Array.isArray(t),24),A(!ft(t),25),i=qr(t));var o,s=void 0!==r.padding?r.padding:[0,0,0,0],a=void 0===r.constrainResolution||r.constrainResolution,h=void 0!==r.nearest&&r.nearest;o=void 0!==r.minResolution?r.minResolution:void 0!==r.maxZoom?this.constrainResolution(this.maxResolution_,r.maxZoom-this.minZoom_,0):0;for(var l=i.getFlatCoordinates(),u=this.getRotation(),c=Math.cos(-u),p=Math.sin(-u),d=1/0,f=1/0,_=-1/0,g=-1/0,y=i.getStride(),v=0,m=l.length;v<m;v+=y){var x=l[v]*c-l[v+1]*p,S=l[v]*p+l[v+1]*c;d=Math.min(d,x),f=Math.min(f,S),_=Math.max(_,x),g=Math.max(g,S)}var C=this.getResolutionForExtent([d,f,_,g],[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);if(C=isNaN(C)?o:Math.max(C,o),a){var T=this.constrainResolution(C,0,0);!h&&T<C&&(T=this.constrainResolution(T,-1,0)),C=T}p=-p;var w=(d+_)/2,R=(f+g)/2,I=[(w+=(s[1]-s[3])/2*C)*c-(R+=(s[0]-s[2])/2*C)*p,R*c+w*p],L=r.callback?r.callback:E;void 0!==r.duration?this.animate({resolution:C,center:I,duration:r.duration,easing:r.easing},L):(this.setResolution(C),this.setCenter(I),Wo(L,!0))},i.prototype.centerOn=function(t,e,i){var r=this.getRotation(),n=Math.cos(-r),o=Math.sin(-r),s=t[0]*n-t[1]*o,a=t[1]*n+t[0]*o,h=this.getResolution(),l=(s+=(e[0]/2-i[0])*h)*n-(a+=(i[1]-e[1]/2)*h)*(o=-o),u=a*n+s*o;this.setCenter([l,u])},i.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},i.prototype.rotate=function(t,e){if(void 0!==e){var i=this.calculateCenterRotate(t,e);this.setCenter(i)}this.setRotation(t)},i.prototype.setCenter=function(t){this.set(Bo,t),this.getAnimating()&&this.cancelAnimations()},i.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},i.prototype.setResolution=function(t){this.set(Xo,t),this.getAnimating()&&this.cancelAnimations()},i.prototype.setRotation=function(t){this.set(zo,t),this.getAnimating()&&this.cancelAnimations()},i.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},i}(b);function Wo(t,e){setTimeout(function(){t(e)},0)}function Ko(t){return!(t.sourceCenter&&t.targetCenter&&!an(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}var Ho="opacity",Zo="visible",qo="zIndex",Jo="maxResolution",Qo="minResolution",$o="source",ts=function(t){function e(e){t.call(this);var i=s({},e);i[Ho]=void 0!==e.opacity?e.opacity:1,i[Zo]=void 0===e.visible||e.visible,i[qo]=e.zIndex,i[Jo]=void 0!==e.maxResolution?e.maxResolution:1/0,i[Qo]=void 0!==e.minResolution?e.minResolution:0,this.setProperties(i),this.state_={layer:this,managed:!0},this.type}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getType=function(){return this.type},e.prototype.getLayerState=function(){return this.state_.opacity=mt(this.getOpacity(),0,1),this.state_.sourceState=this.getSourceState(),this.state_.visible=this.getVisible(),this.state_.extent=this.getExtent(),this.state_.zIndex=this.getZIndex()||0,this.state_.maxResolution=this.getMaxResolution(),this.state_.minResolution=Math.max(this.getMinResolution(),0),this.state_},e.prototype.getLayersArray=function(t){},e.prototype.getLayerStatesArray=function(t){},e.prototype.getExtent=function(){return this.get("extent")},e.prototype.getMaxResolution=function(){return this.get(Jo)},e.prototype.getMinResolution=function(){return this.get(Qo)},e.prototype.getOpacity=function(){return this.get(Ho)},e.prototype.getSourceState=function(){},e.prototype.getVisible=function(){return this.get(Zo)},e.prototype.getZIndex=function(){return this.get(qo)},e.prototype.setExtent=function(t){this.set("extent",t)},e.prototype.setMaxResolution=function(t){this.set(Jo,t)},e.prototype.setMinResolution=function(t){this.set(Qo,t)},e.prototype.setOpacity=function(t){this.set(Ho,t)},e.prototype.setVisible=function(t){this.set(Zo,t)},e.prototype.setZIndex=function(t){this.set(qo,t)},e}(b),es="loading",is="ready",rs="error",ns="layers",os=function(t){function i(e){var i=e||{},r=s({},i);delete r.layers;var n=i.layers;t.call(this,r),this.layersListenerKeys_=[],this.listenerKeys_={},f(this,P(ns),this.handleLayersChanged_,this),n?Array.isArray(n)?n=new N(n.slice(),{unique:!0}):(A(n instanceof N,43),n=n):n=new N(void 0,{unique:!0}),this.setLayers(n)}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.handleLayerChange_=function(){this.changed()},i.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(y),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var i in this.layersListenerKeys_.push(f(t,r,this.handleLayersAdd_,this),f(t,n,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[i].forEach(y);a(this.listenerKeys_);for(var s=t.getArray(),h=0,l=s.length;h<l;h++){var u=s[h];this.listenerKeys_[e(u).toString()]=[f(u,o,this.handleLayerChange_,this),f(u,R.CHANGE,this.handleLayerChange_,this)]}this.changed()},i.prototype.handleLayersAdd_=function(t){var i=t.element,r=e(i).toString();this.listenerKeys_[r]=[f(i,o,this.handleLayerChange_,this),f(i,R.CHANGE,this.handleLayerChange_,this)],this.changed()},i.prototype.handleLayersRemove_=function(t){var i=e(t.element).toString();this.listenerKeys_[i].forEach(y),delete this.listenerKeys_[i],this.changed()},i.prototype.getLayers=function(){return this.get(ns)},i.prototype.setLayers=function(t){this.set(ns,t)},i.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},i.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var r=this.getLayerState(),n=i,o=e.length;n<o;n++){var s=e[n];s.opacity*=r.opacity,s.visible=s.visible&&r.visible,s.maxResolution=Math.min(s.maxResolution,r.maxResolution),s.minResolution=Math.max(s.minResolution,r.minResolution),void 0!==r.extent&&(void 0!==s.extent?s.extent=lt(s.extent,r.extent):s.extent=r.extent)}return e},i.prototype.getSourceState=function(){return is},i}(ts);function ss(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*e,i[1]=t[1]+2*e,i}function as(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function hs(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}var ls=function(t){function i(e){t.call(this);var i=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,r,n,o={},s=t.layers instanceof os?t.layers:new os({layers:t.layers});return o[Oo.LAYERGROUP]=s,o[Oo.TARGET]=t.target,o[Oo.VIEW]=void 0!==t.view?t.view:new Vo,void 0!==t.controls&&(Array.isArray(t.controls)?i=new N(t.controls.slice()):(A(t.controls instanceof N,47),i=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new N(t.interactions.slice()):(A(t.interactions instanceof N,48),r=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?n=new N(t.overlays.slice()):(A(t.overlays instanceof N,49),n=t.overlays):n=new N,{controls:i,interactions:r,keyboardEventTarget:e,overlays:n,values:o}}(e);this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:ni,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+(ai?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var o=[R.CLICK,R.DBLCLICK,R.MOUSEDOWN,R.TOUCHSTART,R.MSPOINTERDOWN,Yn.POINTERDOWN,R.MOUSEWHEEL,R.WHEEL],s=0,a=o.length;s<a;++s)f(this.overlayContainerStopEvent_,o[s],T);for(var h in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new Po(this,e.moveTolerance),Yn)f(this.mapBrowserEventHandler_,Yn[h],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=i.keyboardEventTarget,this.keyHandlerKeys_=null,f(this.viewport_,R.CONTEXTMENU,this.handleBrowserEvent,this),f(this.viewport_,R.WHEEL,this.handleBrowserEvent,this),f(this.viewport_,R.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=i.controls||new N,this.interactions=i.interactions||new N,this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new Ao(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},f(this,P(Oo.LAYERGROUP),this.handleLayerGroupChanged_,this),f(this,P(Oo.VIEW),this.handleViewChanged_,this),f(this,P(Oo.SIZE),this.handleSizeChanged_,this),f(this,P(Oo.TARGET),this.handleTargetChanged_,this),this.setProperties(i.values),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),f(this.controls,r,function(t){t.element.setMap(this)},this),f(this.controls,n,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),f(this.interactions,r,function(t){t.element.setMap(this)},this),f(this.interactions,n,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),f(this.overlays_,r,function(t){this.addOverlayInternal_(t.element)},this),f(this.overlays_,n,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},i.prototype.addControl=function(t){this.getControls().push(t)},i.prototype.addInteraction=function(t){this.getInteractions().push(t)},i.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},i.prototype.addOverlay=function(t){this.getOverlays().push(t)},i.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},i.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),g(this.viewport_,R.CONTEXTMENU,this.handleBrowserEvent,this),g(this.viewport_,R.WHEEL,this.handleBrowserEvent,this),g(this.viewport_,R.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(R.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},i.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var r=this.getCoordinateFromPixel(t),n=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==i.layerFilter?i.layerFilter:x;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,n,e,null,o,null)}},i.prototype.getFeaturesAtPixel=function(t,e){var i=null;return this.forEachFeatureAtPixel(t,function(t){i||(i=[]),i.push(t)},e),i},i.prototype.forEachLayerAtPixel=function(t,e,i){if(this.frameState_){var r=i||{},n=void 0!==r.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=r.layerFilter||x;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,n,e,null,o,null)}},i.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixel(t),r=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:x,n=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,n,r,null)},i.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},i.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i=t.changedTouches?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},i.prototype.getTarget=function(){return this.get(Oo.TARGET)},i.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},i.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?ye(e.pixelToCoordinateTransform,t.slice()):null},i.prototype.getControls=function(){return this.controls},i.prototype.getOverlays=function(){return this.overlays_},i.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},i.prototype.getInteractions=function(){return this.interactions},i.prototype.getLayerGroup=function(){return this.get(Oo.LAYERGROUP)},i.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},i.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?ye(e.coordinateToPixelTransform,t.slice(0,2)):null},i.prototype.getRenderer=function(){return this.renderer_},i.prototype.getSize=function(){return this.get(Oo.SIZE)},i.prototype.getView=function(){return this.get(Oo.VIEW)},i.prototype.getViewport=function(){return this.viewport_},i.prototype.getOverlayContainer=function(){return this.overlayContainer_},i.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},i.prototype.getTilePriority=function(t,e,i,r){var n=this.frameState_;if(!(n&&e in n.wantedTiles))return 1/0;if(!n.wantedTiles[e][t.getKey()])return 1/0;var o=i[0]-n.focus[0],s=i[1]-n.focus[1];return 65536*Math.log(r)+Math.sqrt(o*o+s*s)/r},i.prototype.handleBrowserEvent=function(t,e){var i=e||t.type,r=new Un(i,this,t);this.handleMapBrowserEvent(r)},i.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var i=e.length-1;0<=i;i--){var r=e[i];if(r.getActive()&&!r.handleEvent(t))break}}},i.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=this.maxTilesLoading_,r=i;if(t){var n=t.viewHints;n[Yo.ANIMATING]&&(i=this.loadTilesWhileAnimating_?8:0,r=2),n[Yo.INTERACTING]&&(i=this.loadTilesWhileInteracting_?8:0,r=2)}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,r))}!t||!this.hasListener(Mo.RENDERCOMPLETE)||t.animate||this.tileQueue_.getTilesLoading()||function t(e){for(var i=0,r=e.length;i<r;++i){var n=e[i];if(n instanceof os)return t(n.getLayers().getArray());var o=e[i].getSource();if(o&&o.loading)return!0}return!1}(this.getLayers().getArray())||this.renderer_.dispatchRenderEvent("rendercomplete",t);for(var o=this.postRenderFunctions_,s=0,a=o.length;s<a;++s)o[s](this,t);o.length=0},i.prototype.handleSizeChanged_=function(){this.render()},i.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)y(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var r=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[f(r,R.KEYDOWN,this.handleBrowserEvent,this),f(r,R.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),addEventListener(R.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),ke(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(R.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},i.prototype.handleTileChange_=function(){this.render()},i.prototype.handleViewPropertyChanged_=function(){this.render()},i.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(y(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(y(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",e(t)),this.viewPropertyListenerKey_=f(t,o,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=f(t,R.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},i.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(y),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[f(t,o,this.render,this),f(t,R.CHANGE,this.render,this)]),this.render()},i.prototype.isRendered=function(){return!!this.frameState_},i.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},i.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},i.prototype.removeControl=function(t){return this.getControls().remove(t)},i.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},i.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},i.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},i.prototype.renderFrame_=function(t){var i,r,n=this.getSize(),o=this.getView(),s=[1/0,1/0,-1/0,-1/0],a=this.frameState_,h=null;if(void 0!==n&&0<(r=n)[0]&&0<r[1]&&o&&o.isDef()){for(var l=o.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=this.getLayerGroup().getLayerStatesArray(),c={},p=0,d=u.length;p<d;++p)c[e(u[p].layer)]=u[p];i=o.getState(this.pixelRatio_),h={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:s,focus:this.focus_?this.focus_:i.center,index:this.frameIndex_++,layerStates:c,layerStatesArray:u,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:i,viewHints:l,wantedTiles:{}}}h&&(h.extent=at(i.center,i.resolution,i.rotation,h.size,s)),this.frameState_=h,this.renderer_.renderFrame(h),h&&(h.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,h.postRenderFunctions),a&&(!this.previousExtent_||!ft(this.previousExtent_)&&!J(h.extent,this.previousExtent_))&&(this.dispatchEvent(new jn(Mo.MOVESTART,this,a)),this.previousExtent_=H(this.previousExtent_)),this.previousExtent_&&!h.viewHints[Yo.ANIMATING]&&!h.viewHints[Yo.INTERACTING]&&!J(h.extent,this.previousExtent_)&&(this.dispatchEvent(new jn(Mo.MOVEEND,this,h)),U(h.extent,this.previousExtent_))),this.dispatchEvent(new jn(Mo.POSTRENDER,this,h)),setTimeout(this.handlePostRender.bind(this),0)},i.prototype.setLayerGroup=function(t){this.set(Oo.LAYERGROUP,t)},i.prototype.setSize=function(t){this.set(Oo.SIZE,t)},i.prototype.setTarget=function(t){this.set(Oo.TARGET,t)},i.prototype.setView=function(t){this.set(Oo.VIEW,t)},i.prototype.skipFeature=function(t){var i=e(t).toString();this.skippedFeatureUids_[i]=!0,this.render()},i.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},i.prototype.unskipFeature=function(t){var i=e(t).toString();delete this.skippedFeatureUids_[i],this.render()},i}(b),us=function(t){function e(e){t.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:E,e.target&&this.setTarget(e.target)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.disposeInternal=function(){ke(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&ke(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)y(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==E&&this.listenerKeys.push(f(t,Mo.POSTRENDER,this.render,this)),t.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(b),cs=function(t){function i(e){var i=s({},e);delete i.source,t.call(this,i),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),f(this,P($o),this.handleSourcePropertyChange_,this);var r=e.source?e.source:null;this.setSource(r)}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},i.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},i.prototype.getSource=function(){return this.get($o)||null},i.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():"undefined"},i.prototype.handleSourceChange_=function(){this.changed()},i.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(y(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=f(t,R.CHANGE,this.handleSourceChange_,this)),this.changed()},i.prototype.setMap=function(t){this.mapPrecomposeKey_&&(y(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(y(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=f(t,xn,function(t){var i=this.getLayerState();i.managed=!1,void 0===this.getZIndex()&&(i.zIndex=1/0),t.frameState.layerStatesArray.push(i),t.frameState.layerStates[e(this)]=i},this),this.mapRenderKey_=f(this,R.CHANGE,t.render,t),this.changed())},i.prototype.setSource=function(t){this.set($o,t)},i}(ts);function ps(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}var ds=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||fs,target:i.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===i.collapsed||i.collapsed,this.collapsible_=void 0===i.collapsible||i.collapsible,this.collapsible_||(this.collapsed_=!1);var r=void 0!==i.className?i.className:"ol-attribution",n=void 0!==i.tipLabel?i.tipLabel:"Attributions",o=void 0!==i.collapseLabel?i.collapseLabel:"";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o):this.collapseLabel_=o;var s=void 0!==i.label?i.label:"i";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;var a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=n,h.appendChild(a),f(h,R.CLICK,this.handleClick_,this);var l=r+" "+pi+" "+di+(this.collapsed_&&this.collapsible_?" "+fi:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=l,u.appendChild(this.ulElement_),u.appendChild(h),this.renderedAttributions_=[],this.renderedVisible_=!0}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getSourceAttributions_=function(t){for(var e={},i=[],r=t.layerStatesArray,n=t.viewState.resolution,o=0,s=r.length;o<s;++o){var a=r[o];if(ps(a,n)){var h=a.layer.getSource();if(h){var l=h.getAttributions();if(l){var u=l(t);if(u)if(Array.isArray(u))for(var c=0,p=u.length;c<p;++c)u[c]in e||(i.push(u[c]),e[u[c]]=!0);else u in e||(i.push(u),e[u]=!0)}}}}return i},e.prototype.updateElement_=function(t){if(t){var e=this.getSourceAttributions_(t),i=0<e.length;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!ur(e,this.renderedAttributions_)){De(this.ulElement_);for(var r=0,n=e.length;r<n;++r){var o=document.createElement("li");o.innerHTML=e[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(fi),this.collapsed_?Ge(this.collapseLabel_,this.label_):Ge(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(us);function fs(t){this.updateElement_(t.frameState)}var _s=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||gs,target:i.target});var r=void 0!==i.className?i.className:"ol-rotate",n=void 0!==i.label?i.label:"";this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=n):(this.label_=n,this.label_.classList.add("ol-compass"));var o=i.tipLabel?i.tipLabel:"Reset rotation",s=document.createElement("button");s.className=r+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),f(s,R.CLICK,this.handleClick_,this);var a=r+" "+pi+" "+di,h=this.element;h.className=a,h.appendChild(s),this.callResetNorth_=i.resetNorth?i.resetNorth:void 0,this.duration_=void 0!==i.duration?i.duration:250,this.autoHide_=void 0===i.autoHide||i.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ci)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(0<this.duration_?t.animate({rotation:0,duration:this.duration_,easing:Mn}):t.setRotation(0))},e}(us);function gs(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var r="rotate("+i+"rad)";if(this.autoHide_){var n=this.element.classList.contains(ci);n||0!==i?n&&0!==i&&this.element.classList.remove(ci):this.element.classList.add(ci)}this.label_.style.msTransform=r,this.label_.style.webkitTransform=r,this.label_.style.transform=r}this.rotation_=i}}var ys=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),target:i.target});var r=void 0!==i.className?i.className:"ol-zoom",n=void 0!==i.delta?i.delta:1,o=void 0!==i.zoomInLabel?i.zoomInLabel:"+",s=void 0!==i.zoomOutLabel?i.zoomOutLabel:"",a=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",h=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",l=document.createElement("button");l.className=r+"-in",l.setAttribute("type","button"),l.title=a,l.appendChild("string"==typeof o?document.createTextNode(o):o),f(l,R.CLICK,this.handleClick_.bind(this,n));var u=document.createElement("button");u.className=r+"-out",u.setAttribute("type","button"),u.title=h,u.appendChild("string"==typeof s?document.createTextNode(s):s),f(u,R.CLICK,this.handleClick_.bind(this,-n));var c=r+" "+pi+" "+di,p=this.element;p.className=c,p.appendChild(l),p.appendChild(u),this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var i=e.getResolution();if(i){var r=e.constrainResolution(i,t);0<this.duration_?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:r,duration:this.duration_,easing:Mn})):e.setResolution(r)}}},e}(us);function vs(t){var e=t||{},i=new N;return(void 0===e.zoom||e.zoom)&&i.push(new ys(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new _s(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new ds(e.attributionOptions)),i}var ms="active",xs=function(t){function e(e){t.call(this),this.map_=null,this.setActive(!0),this.handleEvent=e.handleEvent}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getActive=function(){return this.get(ms)},e.prototype.getMap=function(){return this.map_},e.prototype.setActive=function(t){this.set(ms,t)},e.prototype.setMap=function(t){this.map_=t},e}(b);function Ss(t,e,i,r){Es(t,e=t.constrainRotation(e,0),i,r)}function Es(t,e,i,r){if(void 0!==e){var n=t.getRotation(),o=t.getCenter();void 0!==n&&o&&0<r?t.animate({rotation:e,anchor:i,duration:r,easing:Mn}):t.rotate(e,i)}}function Cs(t,e,i,r,n){ws(t,e=t.constrainResolution(e,0,n),i,r)}function Ts(t,e,i,r){var n=t.getResolution(),o=t.constrainResolution(n,e,0);if(void 0!==o){var s=t.getResolutions();o=mt(o,t.getMinResolution()||s[s.length-1],t.getMaxResolution()||s[0])}if(i&&void 0!==o&&o!==n){var a=t.getCenter(),h=t.calculateCenterZoom(o,i);h=t.constrainCenter(h),i=[(o*a[0]-n*h[0])/(o-n),(o*a[1]-n*h[1])/(o-n)]}ws(t,o,i,r)}function ws(t,e,i,r){if(e){var n=t.getResolution(),o=t.getCenter();if(void 0!==n&&o&&e!==n&&r)t.animate({resolution:e,anchor:i,duration:r,easing:Mn});else{if(i){var s=t.calculateCenterZoom(e,i);t.setCenter(s)}t.setResolution(e)}}}var Rs=function(t){function e(e){t.call(this,{handleEvent:Is});var i=e||{};this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(xs);function Is(t){var e=!1,i=t.originalEvent;if(t.type==Yn.DBLCLICK){var r=t.map,n=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_;Ts(r.getView(),o,n,this.duration_),t.preventDefault(),e=!0}return!e}var Ls=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},bs=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Fs=function(t){return t.target.getTargetElement()===document.activeElement},Ps=x,Ms=function(t){var e=t.originalEvent;return 0==e.button&&!(ii&&ri&&e.ctrlKey)},Os=S,Ns=function(t){return"pointermove"==t.type},As=function(t){return t.type==Yn.SINGLECLICK},Gs=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},ks=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ds=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},js=function(t){return A(t.pointerEvent,56),"mouse"==t.pointerEvent.pointerType},Us=function(t){var e=t.pointerEvent;return e.isPrimary&&0===e.button},Ys=E,Bs=S,Xs=S,zs=E,Vs=function(t){function e(e){var i=e||{};t.call(this,{handleEvent:i.handleEvent||Ks}),this.handleDownEvent_=i.handleDownEvent?i.handleDownEvent:Xs,this.handleDragEvent_=i.handleDragEvent?i.handleDragEvent:Ys,this.handleMoveEvent_=i.handleMoveEvent?i.handleMoveEvent:zs,this.handleUpEvent_=i.handleUpEvent?i.handleUpEvent:Bs,this.handlingDownUpSequence=!1,this.stopDown=i.stopDown?i.stopDown:Hs,this.trackedPointers_={},this.targetPointers=[]}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.updateTrackedPointers_=function(t){if((r=t.type)===Yn.POINTERDOWN||r===Yn.POINTERDRAG||r===Yn.POINTERUP){var e=t.pointerEvent,i=e.pointerId.toString();t.type==Yn.POINTERUP?delete this.trackedPointers_[i]:t.type==Yn.POINTERDOWN?this.trackedPointers_[i]=e:i in this.trackedPointers_&&(this.trackedPointers_[i]=e),this.targetPointers=h(this.trackedPointers_)}var r},e}(xs);function Ws(t){for(var e=t.length,i=0,r=0,n=0;n<e;n++)i+=t[n].clientX,r+=t[n].clientY;return[i/e,r/e]}function Ks(t){if(!(t instanceof Bn))return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Yn.POINTERDRAG)this.handleDragEvent_(t);else if(t.type==Yn.POINTERUP){var i=this.handleUpEvent_(t);this.handlingDownUpSequence=i&&0<this.targetPointers.length}}else if(t.type==Yn.POINTERDOWN){var r=this.handleDownEvent_(t);r&&t.preventDefault(),this.handlingDownUpSequence=r,e=this.stopDown(r)}else t.type==Yn.POINTERMOVE&&this.handleMoveEvent_(t);return!e}function Hs(t){return t}var Zs=function(t){function e(e){t.call(this,{handleDownEvent:Qs,handleDragEvent:qs,handleUpEvent:Js,stopDown:S});var i=e||{};this.kinetic_=i.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1,this.condition_=i.condition?i.condition:Gs,this.noKinetic_=!1}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Vs);function qs(t){this.panning_||(this.panning_=!0,this.getMap().getView().setHint(Yo.INTERACTING,1));var e=this.targetPointers,i=Ws(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var r=this.lastCentroid[0]-i[0],n=i[1]-this.lastCentroid[1],o=t.map.getView(),s=[r,n];ln(s,o.getResolution()),hn(s,o.getRotation()),rn(s,o.getCenter()),s=o.constrainCenter(s),o.setCenter(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length}function Js(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var r=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),o=i.getCenter(),s=e.getPixelFromCoordinate(o),a=e.getCoordinateFromPixel([s[0]-r*Math.cos(n),s[1]-r*Math.sin(n)]);i.animate({center:i.constrainCenter(a),duration:500,easing:Mn})}return this.panning_&&(this.panning_=!1,i.setHint(Yo.INTERACTING,-1)),!1}return this.kinetic_&&this.kinetic_.begin(),!(this.lastCentroid=null)}function Qs(t){if(0<this.targetPointers.length&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=1<this.targetPointers.length,!0}return!1}var $s=function(t){function e(e){var i=e||{};t.call(this,{handleDownEvent:ia,handleDragEvent:ta,handleUpEvent:ea,stopDown:S}),this.condition_=i.condition?i.condition:bs,this.lastAngle_=void 0,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Vs);function ta(t){if(js(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==jo){var r=e.getSize(),n=t.pixel,o=Math.atan2(r[1]/2-n[1],n[0]-r[0]/2);if(void 0!==this.lastAngle_){var s=o-this.lastAngle_;Es(i,i.getRotation()-s)}this.lastAngle_=o}}}function ea(t){if(!js(t))return!0;var e=t.map.getView();return e.setHint(Yo.INTERACTING,-1),Ss(e,e.getRotation(),void 0,this.duration_),!1}function ia(t){return!(!js(t)||!Ms(t)||!this.condition_(t)||(t.map.getView().setHint(Yo.INTERACTING,1),this.lastAngle_=void 0))}var ra=function(t){function e(e){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Hr([i])},e.prototype.getGeometry=function(){return this.geometry_},e}(m),na={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},oa=function(t){function e(e,i,r){t.call(this,e),this.coordinate=i,this.mapBrowserEvent=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(C),sa=function(t){function e(e){t.call(this,{handleDownEvent:ua,handleDragEvent:ha,handleUpEvent:la});var i=e||{};this.box_=new ra(i.className||"ol-dragbox"),this.minArea_=void 0!==i.minArea?i.minArea:64,this.onBoxEnd_=i.onBoxEnd?i.onBoxEnd:E,this.startPixel_=null,this.condition_=i.condition?i.condition:Ps,this.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:aa}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getGeometry=function(){return this.box_.getGeometry()},e}(Vs);function aa(t,e,i){var r=i[0]-e[0],n=i[1]-e[1];return r*r+n*n>=this.minArea_}function ha(t){js(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new oa(na.BOXDRAG,t.coordinate,t)))}function la(t){return!js(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new oa(na.BOXEND,t.coordinate,t))),!1)}function ua(t){return!(!js(t)||!Ms(t)||!this.condition_(t)||(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new oa(na.BOXSTART,t.coordinate,t)),0))}var ca=function(t){function e(e){var i=e||{},r=i.condition?i.condition:ks;t.call(this,{condition:r,className:i.className||"ol-dragzoom",onBoxEnd:pa}),this.duration_=void 0!==i.duration?i.duration:200,this.out_=void 0!==i.out&&i.out}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(sa);function pa(){var t=this.getMap(),e=t.getView(),i=t.getSize(),r=this.getGeometry().getExtent();if(this.out_){var n=e.calculateExtent(i),o=function(t,e){return function(t,e){for(var i=0,r=e.length;i<r;++i)$(t,e[i]);return t}(H(e),t)}([t.getPixelFromCoordinate(nt(r)),t.getPixelFromCoordinate(ct(r))]);_t(n,1/e.getResolutionForExtent(o,i)),r=n}var s=e.constrainResolution(e.getResolutionForExtent(r,i)),a=st(r);a=e.constrainCenter(a),e.animate({resolution:s,center:a,duration:this.duration_,easing:Mn})}var da={LEFT:37,UP:38,RIGHT:39,DOWN:40},fa=function(t){function e(e){t.call(this,{handleEvent:_a});var i=e||{};this.defaultCondition_=function(t){return Gs(t)&&Ds(t)},this.condition_=void 0!==i.condition?i.condition:this.defaultCondition_,this.duration_=void 0!==i.duration?i.duration:100,this.pixelDelta_=void 0!==i.pixelDelta?i.pixelDelta:128}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(xs);function _a(t){var e=!1;if(t.type==R.KEYDOWN){var i=t.originalEvent.keyCode;if(this.condition_(t)&&(i==da.DOWN||i==da.LEFT||i==da.RIGHT||i==da.UP)){var r=t.map.getView(),n=r.getResolution()*this.pixelDelta_,o=0,s=0;i==da.DOWN?s=-n:i==da.LEFT?o=-n:i==da.RIGHT?o=n:s=n;var a=[o,s];hn(a,r.getRotation()),function(t,e,i){var r=t.getCenter();if(r){var n=t.constrainCenter([r[0]+e[0],r[1]+e[1]]);i?t.animate({duration:i,easing:Nn,center:n}):t.setCenter(n)}}(r,a,this.duration_),t.preventDefault(),e=!0}}return!e}var ga=function(t){function e(e){t.call(this,{handleEvent:ya});var i=e||{};this.condition_=i.condition?i.condition:Ds,this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:100}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(xs);function ya(t){var e=!1;if(t.type==R.KEYDOWN||t.type==R.KEYPRESS){var i=t.originalEvent.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var r=t.map,n=i=="+".charCodeAt(0)?this.delta_:-this.delta_;Ts(r.getView(),n,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var va={TRACKPAD:"trackpad",WHEEL:"wheel"},ma=function(t){function e(e){t.call(this,{handleEvent:xa});var i=e||{};this.delta_=0,this.duration_=void 0!==i.duration?i.duration:250,this.timeout_=void 0!==i.timeout?i.timeout:80,this.useAnchor_=void 0===i.useAnchor||i.useAnchor,this.constrainResolution_=i.constrainResolution||!1,this.condition_=i.condition?i.condition:Ps,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_=void 0,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(Yo.INTERACTING,-1)},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations(),Ts(e,-mt(this.delta_,-1,1),this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){(this.useAnchor_=t)||(this.lastAnchor_=null)},e}(xs);function xa(t){if(!this.condition_(t))return!0;var e=t.type;if(e!==R.WHEEL&&e!==R.MOUSEWHEEL)return!0;t.preventDefault();var i,r=t.map,n=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==R.WHEEL?(i=n.deltaY,ti&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=ni),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)):t.type==R.MOUSEWHEEL&&(i=-n.wheelDeltaY,ei&&(i/=3)),0===i)return!1;var o=Date.now();if(void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?va.TRACKPAD:va.WHEEL),this.mode_===va.TRACKPAD){var s=r.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):s.setHint(Yo.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var a=s.getResolution()*Math.pow(2,i/this.trackpadDeltaPerZoom_),h=s.getMinResolution(),l=s.getMaxResolution(),u=0;if(a<h?(a=Math.max(a,h/this.trackpadZoomBuffer_),u=1):l<a&&(a=Math.min(a,l*this.trackpadZoomBuffer_),u=-1),this.lastAnchor_){var c=s.calculateCenterZoom(a,this.lastAnchor_);s.setCenter(s.constrainCenter(c))}return s.setResolution(a),0===u&&this.constrainResolution_&&s.animate({resolution:s.constrainResolution(a,0<i?-1:1),easing:Mn,anchor:this.lastAnchor_,duration:this.duration_}),0<u?s.animate({resolution:h,easing:Mn,anchor:this.lastAnchor_,duration:500}):u<0&&s.animate({resolution:l,easing:Mn,anchor:this.lastAnchor_,duration:500}),this.startTime_=o,!1}this.delta_+=i;var p=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),p),!1}var Sa=function(t){function e(e){t.call(this,{handleDownEvent:Ta,handleDragEvent:Ea,handleUpEvent:Ca,stopDown:S});var i=e||{};this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==i.threshold?i.threshold:.3,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Vs);function Ea(t){var e=0,i=this.targetPointers[0],r=this.targetPointers[1],n=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.lastAngle_){var o=n-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=n;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==jo){var h=s.getViewport().getBoundingClientRect(),l=Ws(this.targetPointers);if(l[0]-=h.left,l[1]-=h.top,this.anchor_=s.getCoordinateFromPixel(l),this.rotating_){var u=a.getRotation();s.render(),Es(a,u+e,this.anchor_)}}}function Ca(t){if(this.targetPointers.length<2){var e=t.map.getView();return e.setHint(Yo.INTERACTING,-1),this.rotating_&&Ss(e,e.getRotation(),this.anchor_,this.duration_),!1}return!0}function Ta(t){if(2<=this.targetPointers.length){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(Yo.INTERACTING,1),!0}return!1}var wa=function(t){function e(e){t.call(this,{handleDownEvent:La,handleDragEvent:Ra,handleUpEvent:Ia,stopDown:S});var i=e||{};this.constrainResolution_=i.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==i.duration?i.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Vs);function Ra(t){var e=1,i=this.targetPointers[0],r=this.targetPointers[1],n=i.clientX-r.clientX,o=i.clientY-r.clientY,s=Math.sqrt(n*n+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,h=a.getView(),l=h.getResolution(),u=h.getMaxResolution(),c=h.getMinResolution(),p=l*e;u<p?(e=u/l,p=u):p<c&&(e=c/l,p=c),1!=e&&(this.lastScaleDelta_=e);var d=a.getViewport().getBoundingClientRect(),f=Ws(this.targetPointers);f[0]-=d.left,f[1]-=d.top,this.anchor_=a.getCoordinateFromPixel(f),a.render(),ws(h,p,this.anchor_)}function Ia(t){if(this.targetPointers.length<2){var e=t.map.getView();e.setHint(Yo.INTERACTING,-1);var i=e.getResolution();if(this.constrainResolution_||i<e.getMinResolution()||i>e.getMaxResolution()){var r=this.lastScaleDelta_-1;Cs(e,i,this.anchor_,this.duration_,r)}return!1}return!0}function La(t){if(2<=this.targetPointers.length){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(Yo.INTERACTING,1),!0}return!1}var ba=function(t){function e(e,i,r,n){t.call(this,e),this.features=r,this.file=i,this.projection=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(C),Fa=function(t){function e(e){var i=e||{};t.call(this,{handleEvent:x}),this.formatConstructors_=i.formatConstructors?i.formatConstructors:[],this.projection_=i.projection?ee(i.projection):null,this.dropListenKeys_=null,this.source_=i.source||null,this.target=i.target?i.target:null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.handleResult_=function(t,e){var i=e.target.result,r=this.getMap(),n=this.projection_;n||(n=r.getView().getProjection());for(var o=this.formatConstructors_,s=[],a=0,h=o.length;a<h;++a){var l=new o[a];if((s=this.tryReadFeatures_(l,i,{featureProjection:n}))&&0<s.length)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(s)),this.dispatchEvent(new ba("addfeatures",t,s,n))},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[f(e,R.DROP,Pa,this),f(e,R.DRAGENTER,Ma,this),f(e,R.DRAGOVER,Ma,this),f(e,R.DROP,Ma,this)]}},e.prototype.setActive=function(e){t.prototype.setActive.call(this,e),e?this.registerListeners_():this.unregisterListeners_()},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,i){try{return t.readFeatures(e,i)}catch(t){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(y),this.dropListenKeys_=null)},e}(xs);function Pa(t){for(var e=t.dataTransfer.files,i=0,r=e.length;i<r;++i){var n=e.item(i),o=new FileReader;o.addEventListener(R.LOAD,this.handleResult_.bind(this,n)),o.readAsText(n)}}function Ma(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}var Oa=function(t){function e(e){var i=e||{};t.call(this,{handleDownEvent:Ga,handleDragEvent:Na,handleUpEvent:Aa}),this.condition_=i.condition?i.condition:ks,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==i.duration?i.duration:400}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Vs);function Na(t){if(js(t)){var e=t.map,i=e.getSize(),r=t.pixel,n=r[0]-i[0]/2,o=i[1]/2-r[1],s=Math.atan2(o,n),a=Math.sqrt(n*n+o*o),h=e.getView();if(h.getConstraints().rotation!==jo&&void 0!==this.lastAngle_){var l=s-this.lastAngle_;Es(h,h.getRotation()-l)}this.lastAngle_=s,void 0!==this.lastMagnitude_&&ws(h,this.lastMagnitude_*(h.getResolution()/a)),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/a),this.lastMagnitude_=a}}function Aa(t){if(!js(t))return!0;var e=t.map.getView();e.setHint(Yo.INTERACTING,-1);var i=this.lastScaleDelta_-1;return Ss(e,e.getRotation()),Cs(e,e.getResolution(),void 0,this.duration_,i),this.lastScaleDelta_=0,!1}function Ga(t){return!(!js(t)||!this.condition_(t)||(t.map.getView().setHint(Yo.INTERACTING,1),this.lastAngle_=void 0,this.lastMagnitude_=void 0))}var ka=function(t){function e(e,i,r){if(t.call(this),void 0!==r&&void 0===i)this.setFlatCoordinates(r,e);else{var n=i||0;this.setCenterAndRadius(e,n,r)}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,i,r){var n=this.flatCoordinates,o=t-n[0],s=e-n[1],a=o*o+s*s;if(a<r){if(0===a)for(var h=0;h<this.stride;++h)i[h]=n[h];else{var l=this.getRadius()/Math.sqrt(a);i[0]=n[0]+l*o,i[1]=n[1]+l*s;for(var u=2;u<this.stride;++u)i[u]=n[u]}return i.length=this.stride,a}return r},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,r=t-i[0],n=e-i[1];return r*r+n*n<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return K(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return It.CIRCLE},e.prototype.intersectsExtent=function(t){if(dt(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||it(t,this.intersectsCoordinate,this)}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],r=t.slice();r[e]=r[0]+i;for(var n=1;n<e;++n)r[e+n]=t[n];this.setFlatCoordinates(this.layout,r),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,n=Cr(r,0,t,this.stride);r[n++]=r[0]+e;for(var o=1,s=this.stride;o<s;++o)r[n++]=r[o];r.length=n,this.changed()},e.prototype.getCoordinates=function(){},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e}(fr);ka.prototype.transform;var Da=function(t){function e(e,i,r){if(t.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,i);else if(void 0!==i&&r)this.setFlatCoordinates(i,e),this.ends_=r;else{for(var n=this.getLayout(),o=[],s=[],a=0,h=e.length;a<h;++a){var l=e[a];0===a&&(n=l.getLayout()),hr(o,l.getFlatCoordinates()),s.push(o.length)}this.setFlatCoordinates(n,o),this.ends_=s}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.appendLineString=function(t){this.flatCoordinates?hr(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,r){return r<Y(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(xr(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Er(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,r))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=dr.XYM&&this.layout!=dr.XYZM||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,n=void 0!==i&&i;return function(t,e,i,r,n,o,s){if(s)return _n(t,e,i[i.length-1],r,n,o);var a;if(n<t[r-1])return o?((a=t.slice(0,r))[r-1]=n,a):null;if(t[t.length-1]<n)return o?((a=t.slice(t.length-r))[r-1]=n,a):null;for(var h=0,l=i.length;h<l;++h){var u=i[h];if(e!=u){if(n<t[e+r-1])return null;if(n<=t[u-1])return _n(t,e,u,r,n,!1);e=u}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,r,n)},e.prototype.getCoordinates=function(){return Ir(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new yn(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,r=[],n=0,o=0,s=e.length;o<s;++o){var a=e[o],h=new yn(t.slice(n,a),i);r.push(h),n=a}return r},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,r=this.ends_,n=this.stride,o=0,s=r.length;o<s;++o){var a=r[o];hr(t,fn(e,i,a,n,.5)),i=a}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=function(t,e,i,r,n,o,s,a){for(var h=0,l=i.length;h<l;++h){var u=i[h];s=br(t,e,u,r,n,o,s),a.push(s),e=u}return s}(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,r),new e(i,dr.XY,r)},e.prototype.getType=function(){return It.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){if(Yr(t,e,i[o],r,n))return!0;e=i[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=wr(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(fr),ja=function(t){function e(e,i){t.call(this),i&&!Array.isArray(e[0])?this.setFlatCoordinates(i,e):this.setCoordinates(e,i)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.appendPoint=function(t){this.flatCoordinates?hr(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,r){if(r<Y(this.getExtent(),t,e))return r;for(var n=this.flatCoordinates,o=this.stride,s=0,a=n.length;s<a;s+=o){var h=Et(t,e,n[s],n[s+1]);if(h<r){r=h;for(var l=0;l<o;++l)i[l]=n[s+l];i.length=o}}return r},e.prototype.getCoordinates=function(){return Rr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new Nr(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,r=[],n=0,o=t.length;n<o;n+=i){var s=new Nr(t.slice(n,n+i),e);r.push(s)}return r},e.prototype.getType=function(){return It.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,r=0,n=e.length;r<n;r+=i)if(z(t,e[r],e[r+1]))return!0;return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Tr(this.flatCoordinates,0,t,this.stride),this.changed()},e}(fr);function Ua(t,e,i,r){for(var n=[],o=[1/0,1/0,-1/0,-1/0],s=0,a=i.length;s<a;++s){var h=i[s];o=q(t,e,h[0],r),n.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=h[h.length-1]}return n}var Ya=function(t){function e(e,i,r){if(t.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){for(var n=this.getLayout(),o=[],s=[],a=0,h=e.length;a<h;++a){var l=e[a];0===a&&(n=l.getLayout());for(var u=o.length,c=l.getEnds(),p=0,d=c.length;p<d;++p)c[p]+=u;hr(o,l.getFlatCoordinates()),s.push(c)}i=n,e=o,r=s}void 0!==i&&r?(this.setFlatCoordinates(i,e),this.endss_=r):this.setCoordinates(e,i)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;hr(this.flatCoordinates,t.getFlatCoordinates());for(var r=0,n=(e=t.getEnds().slice()).length;r<n;++r)e[r]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),r=0;r<t;++r)i[r]=this.endss_[r].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,r){return r<Y(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){var a=i[o];n=xr(t,e,a,r,n),e=a[a.length-1]}return n}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,r,n,o,s,a,h,l,u){for(var c=[NaN,NaN],p=0,d=i.length;p<d;++p){var f=i[p];l=Er(t,e,f,r,n,!0,s,a,h,l,c),e=f[f.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,t,e,i,r))},e.prototype.containsXY=function(t,e){return function(t,e,i,r,n,o){if(0===i.length)return!1;for(var s=0,a=i.length;s<a;++s){var h=i[s];if(kr(t,e,h,r,n,o))return!0;e=h[h.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,i,r){for(var n=0,o=0,s=i.length;o<s;++o){var a=i[o];n+=yr(t,e,a,r),e=a[a.length-1]}return n}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Kr(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,Lr(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Ua(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=jr(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new ja(this.getFlatInteriorPoints().slice(),dr.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o)if(!Vr(t,0,i[o],r,void 0))return!1;return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Kr(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=function(t,e,i,r,n,o,s,a){for(var h=0,l=i.length;h<l;++h){var u=i[h],c=[];s=Mr(t,e,u,r,n,o,s,c),a.push(c),e=u[u.length-1]}return s}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,r),new e(i,dr.XY,r)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var r=this.endss_[t].slice(),n=r[r.length-1];if(0!==e)for(var o=0,s=r.length;o<s;++o)r[o]-=e;return new Hr(this.flatCoordinates.slice(e,n),this.layout,r)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,r=[],n=0,o=0,s=i.length;o<s;++o){var a=i[o].slice(),h=a[a.length-1];if(0!==n)for(var l=0,u=a.length;l<u;++l)a[l]-=n;var c=new Hr(e.slice(n,h),t,a);r.push(c),n=h}return r},e.prototype.getType=function(){return It.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){var a=i[o];if(Br(t,e,a,r,n))return!0;e=a[a.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=function(t,e,i,r,n){for(var o=n||[],s=0,a=0,h=i.length;a<h;++a){var l=wr(t,e,i[a],r,o[s]);e=(o[s++]=l)[l.length-1]}return o.length=s,o}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},e}(fr),Ba={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"},Xa="vector",za="renderOrder",Va=function(t){function e(e){var i=e||{},r=s({},i);delete r.style,delete r.renderBuffer,delete r.updateWhileAnimating,delete r.updateWhileInteracting,t.call(this,r),this.declutter_=void 0!==i.declutter&&i.declutter,this.renderBuffer_=void 0!==i.renderBuffer?i.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(i.style),this.updateWhileAnimating_=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,this.updateWhileInteracting_=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,this.renderMode_=i.renderMode||Xa,this.type=Ba.VECTOR}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDeclutter=function(){return this.declutter_},e.prototype.setDeclutter=function(t){this.declutter_=t},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(za)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(za,t)},e.prototype.setStyle=function(t){var e,i,r;this.style_=void 0!==t?t:Vi,this.styleFunction_=null===t?void 0:("function"==typeof(e=this.style_)?i=e:(Array.isArray(e)?r=e:(A(e instanceof Xi,41),r=[e]),i=function(){return r}),i),this.changed()},e.prototype.getRenderMode=function(){return this.renderMode_},e}(cs);Va.prototype.getSource;var Wa={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};function Ka(t,e,i,r){return function(n,o,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(n,o,s):t,!0),e.getType()==Wa.ARRAY_BUFFER&&(a.responseType="arraybuffer"),a.onload=function(t){if(!a.status||200<=a.status&&a.status<300){var n,o=e.getType();o==Wa.JSON||o==Wa.TEXT?n=a.responseText:o==Wa.XML?(n=a.responseXML)||(n=(new DOMParser).parseFromString(a.responseText,"application/xml")):o==Wa.ARRAY_BUFFER&&(n=a.response),n?i.call(this,e.readFeatures(n,{featureProjection:s}),e.readProjection(n),e.getLastExtent()):r.call(this)}else r.call(this)}.bind(this),a.onerror=function(){r.call(this)}.bind(this),a.send()}}function Ha(t,e){return Ka(t,e,function(t,e){this.addFeatures(t)},E)}function Za(t,e){return[[-1/0,-1/0,1/0,1/0]]}var qa=function(t){function e(e){t.call(this),this.projection_=ee(e.projection),this.attributions_=this.adaptAttributions_(e.attributions),this.loading=!1,this.state_=void 0!==e.state?e.state:is,this.wrapX_=void 0!==e.wrapX&&e.wrapX}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.adaptAttributions_=function(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null},e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=this.adaptAttributions_(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(b);qa.prototype.forEachFeatureAtCoordinate=E;var Ja="addfeature",Qa="removefeature";"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var $a,th=(function(t,e){t.exports=function(){function t(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function e(t,e){return t<e?-1:e<t?1:0}return function(i,r,n,o,s){!function e(i,r,n,o,s){for(;n<o;){if(600<o-n){var a=o-n+1,h=r-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(h-a/2<0?-1:1);e(i,r,Math.max(n,Math.floor(r-h*u/a+c)),Math.min(o,Math.floor(r+(a-h)*u/a+c)),s)}var p=i[r],d=n,f=o;for(t(i,n,r),0<s(i[o],p)&&t(i,n,o);d<f;){for(t(i,d,f),d++,f--;s(i[d],p)<0;)d++;for(;0<s(i[f],p);)f--}0===s(i[n],p)?t(i,n,f):t(i,++f,o),f<=r&&(n=f+1),r<=f&&(o=f-1)}}(i,r,n||0,o||i.length-1,s||e)}}()}($a={exports:{}}),$a.exports),eh=rh,ih=rh;function rh(t,e){if(!(this instanceof rh))return new rh(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function nh(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function oh(t,e){sh(t,0,t.children.length,e,t)}function sh(t,e,i,r,n){n||(n=fh(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o,s=e;s<i;s++)o=t.children[s],ah(n,t.leaf?r(o):o);return n}function ah(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function hh(t,e){return t.minX-e.minX}function lh(t,e){return t.minY-e.minY}function uh(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ch(t){return t.maxX-t.minX+(t.maxY-t.minY)}function ph(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function dh(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function fh(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _h(t,e,i,r,n){for(var o,s=[e,i];s.length;)(i=s.pop())-(e=s.pop())<=r||(o=e+Math.ceil((i-e)/r/2)*r,th(t,o,e,i,n),s.push(e,o,o,i))}rh.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!dh(t,e))return i;for(var n,o,s,a,h=[];e;){for(n=0,o=e.children.length;n<o;n++)s=e.children[n],dh(t,a=e.leaf?r(s):s)&&(e.leaf?i.push(s):ph(t,a)?this._all(s,i):h.push(s));e=h.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!dh(t,e))return!1;for(var r,n,o,s,a=[];e;){for(r=0,n=e.children.length;r<n;r++)if(o=e.children[r],dh(t,s=e.leaf?i(o):o)){if(e.leaf||ph(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=fh([]),this},remove:function(t,e){if(!t)return this;for(var i,r,n,o,s=this.data,a=this.toBBox(t),h=[],l=[];s||h.length;){if(s||(s=h.pop(),r=h[h.length-1],i=l.pop(),o=!0),s.leaf&&-1!==(n=nh(t,s.children,e)))return s.children.splice(n,1),h.push(s),this._condense(h),this;o||s.leaf||!ph(s,a)?r?(i++,s=r.children[i],o=!1):s=null:(h.push(s),l.push(i),i=0,s=(r=s).children[0])}return this},toBBox:function(t){return t},compareMinX:hh,compareMinY:lh,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,o=i-e+1,s=this._maxEntries;if(o<=s)return oh(n=fh(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(n=fh([])).leaf=!1,n.height=r;var a,h,l,u,c=Math.ceil(o/s),p=c*Math.ceil(Math.sqrt(s));for(_h(t,e,i,p,this.compareMinX),a=e;a<=i;a+=p)for(_h(t,a,l=Math.min(a+p-1,i),c,this.compareMinY),h=a;h<=l;h+=c)u=Math.min(h+c-1,l),n.children.push(this._build(t,h,u,r-1));return oh(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,o,s,a,h,l,u,c,p,d;r.push(e),!e.leaf&&r.length-1!==i;){for(u=c=1/0,n=0,o=e.children.length;n<o;n++)h=uh(s=e.children[n]),p=t,d=s,(l=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-h)<c?(c=l,u=h<u?h:u,a=s):l===c&&h<u&&(u=h,a=s);e=a||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),o=[],s=this._chooseSubtree(n,this.data,e,o);for(s.children.push(t),ah(s,n);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var o=this._chooseSplitIndex(i,n,r),s=fh(i.children.splice(o,i.children.length-o));s.height=i.height,s.leaf=i.leaf,oh(i,this.toBBox),oh(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},_splitRoot:function(t,e){this.data=fh([t,e]),this.data.height=t.height+1,this.data.leaf=!1,oh(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,o,s,a,h,l,u,c,p,d,f,_,g;for(h=l=1/0,r=e;r<=i-e;r++)c=n=sh(t,0,r,this.toBBox),p=o=sh(t,r,i,this.toBBox),d=Math.max(c.minX,p.minX),f=Math.max(c.minY,p.minY),_=Math.min(c.maxX,p.maxX),g=Math.min(c.maxY,p.maxY),s=Math.max(0,_-d)*Math.max(0,g-f),a=uh(n)+uh(o),s<h?(h=s,u=r,l=a<l?a:l):s===h&&a<l&&(l=a,u=r);return u},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:hh,n=t.leaf?this.compareMinY:lh;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,o,s=this.toBBox,a=sh(t,0,e,s),h=sh(t,i-e,i,s),l=ch(a)+ch(h);for(n=e;n<i-e;n++)o=t.children[n],ah(a,t.leaf?s(o):o),l+=ch(a);for(n=i-e-1;e<=n;n--)o=t.children[n],ah(h,t.leaf?s(o):o),l+=ch(h);return l},_adjustParentBBoxes:function(t,e,i){for(var r=i;0<=r;r--)ah(e[r],t)},_condense:function(t){for(var e,i=t.length-1;0<=i;i--)0===t[i].children.length?0<i?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():oh(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},eh.default=ih;var gh=function(t){this.rbush_=eh(t,void 0),this.items_={}};gh.prototype.insert=function(t,i){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:i};this.rbush_.insert(r),this.items_[e(i)]=r},gh.prototype.load=function(t,i){for(var r=new Array(i.length),n=0,o=i.length;n<o;n++){var s=t[n],a=i[n],h={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};r[n]=h,this.items_[e(a)]=h}this.rbush_.load(r)},gh.prototype.remove=function(t){var i=e(t),r=this.items_[i];return delete this.items_[i],null!==this.rbush_.remove(r)},gh.prototype.update=function(t,i){var r=this.items_[e(i)];J([r.minX,r.minY,r.maxX,r.maxY],t)||(this.remove(i),this.insert(t,i))},gh.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},gh.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},gh.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},gh.prototype.forEachInExtent=function(t,e,i){return this.forEach_(this.getInExtent(t),e,i)},gh.prototype.forEach_=function(t,e,i){for(var r,n=0,o=t.length;n<o;n++)if(r=e.call(i,t[n]))return r;return r},gh.prototype.isEmpty=function(){return l(this.items_)},gh.prototype.clear=function(){this.rbush_.clear(),this.items_={}},gh.prototype.getExtent=function(t){var e=this.rbush_.data;return K(e.minX,e.minY,e.maxX,e.maxY,t)},gh.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[0|e]=t.items_[0|e]};var yh=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(C),vh=function(t){function i(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:void 0,state:is,wrapX:void 0===i.wrapX||i.wrapX}),this.loader_=E,this.format_=i.format,this.overlaps_=null==i.overlaps||i.overlaps,this.url_=i.url,void 0!==i.loader?this.loader_=i.loader:void 0!==this.url_&&(A(this.format_,7),this.loader_=Ha(this.url_,this.format_)),this.strategy_=void 0!==i.strategy?i.strategy:Za;var r,n,o=void 0===i.useSpatialIndex||i.useSpatialIndex;this.featuresRtree_=o?new gh:null,this.loadedExtentsRtree_=new gh,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,i.features instanceof N?n=(r=i.features).getArray():Array.isArray(i.features)&&(n=i.features),o||void 0!==r||(r=new N(n)),void 0!==n&&this.addFeaturesInternal(n),void 0!==r&&this.bindFeaturesCollection_(r)}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},i.prototype.addFeatureInternal=function(t){var i=e(t).toString();if(this.addToIndex_(i,t)){this.setupChangeEvents_(i,t);var r=t.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[i]=t;this.dispatchEvent(new yh(Ja,t))}},i.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[f(e,R.CHANGE,this.handleFeatureChange_,this),f(e,o,this.handleFeatureChange_,this)]},i.prototype.addToIndex_=function(t,e){var i=!0,r=e.getId();return void 0!==r?r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=e:(A(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),i},i.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},i.prototype.addFeaturesInternal=function(t){for(var i=[],r=[],n=[],o=0,s=t.length;o<s;o++){var a=t[o],h=e(a).toString();this.addToIndex_(h,a)&&r.push(a)}for(var l=0,u=r.length;l<u;l++){var c=r[l],p=e(c).toString();this.setupChangeEvents_(p,c);var d=c.getGeometry();if(d){var f=d.getExtent();i.push(f),n.push(c)}else this.nullGeometryFeatures_[p]=c}this.featuresRtree_&&this.featuresRtree_.load(i,n);for(var _=0,g=r.length;_<g;_++)this.dispatchEvent(new yh(Ja,r[_]))},i.prototype.bindFeaturesCollection_=function(t){var e=!1;f(this,Ja,function(i){e||(e=!0,t.push(i.feature),e=!1)}),f(this,Qa,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),f(t,r,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),f(t,n,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},i.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(y);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var r=new yh("clear");this.dispatchEvent(r),this.changed()},i.prototype.forEachFeature=function(t){return this.featuresRtree_?this.featuresRtree_.forEach(t):this.featuresCollection_?this.featuresCollection_.forEach(t):void 0},i.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0})},i.prototype.forEachFeatureInExtent=function(t,e){return this.featuresRtree_?this.featuresRtree_.forEachInExtent(t,e):this.featuresCollection_?this.featuresCollection_.forEach(e):void 0},i.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){var r=e(i);if(r)return r}})},i.prototype.getFeaturesCollection=function(){return this.featuresCollection_},i.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),l(this.nullGeometryFeatures_)||hr(t,h(this.nullGeometryFeatures_))),t},i.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},i.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},i.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],r=t[1],n=null,o=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],h=e||x;return this.featuresRtree_.forEachInExtent(a,function(t){if(h(t)){var e=t.getGeometry(),l=s;if((s=e.closestPointXY(i,r,o,s))<l){n=t;var u=Math.sqrt(s);a[0]=i-u,a[1]=r-u,a[2]=i+u,a[3]=r+u}}}),n},i.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},i.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},i.prototype.getFormat=function(){return this.format_},i.prototype.getOverlaps=function(){return this.overlaps_},i.prototype.getResolutions=function(){},i.prototype.getUrl=function(){return this.url_},i.prototype.handleFeatureChange_=function(t){var i=t.target,r=e(i).toString(),n=i.getGeometry();if(n){var o=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,i)):this.featuresRtree_&&this.featuresRtree_.update(o,i)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(i),this.nullGeometryFeatures_[r]=i);var s=i.getId();if(void 0!==s){var a=s.toString();r in this.undefIdIndex_?(delete this.undefIdIndex_[r],this.idIndex_[a]=i):this.idIndex_[a]!==i&&(this.removeFromIdIndex_(i),this.idIndex_[a]=i)}else r in this.undefIdIndex_||(this.removeFromIdIndex_(i),this.undefIdIndex_[r]=i);this.changed(),this.dispatchEvent(new yh("changefeature",i))},i.prototype.hasFeature=function(t){var i=t.getId();return void 0!==i?i in this.idIndex_:e(t).toString()in this.undefIdIndex_},i.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&l(this.nullGeometryFeatures_)},i.prototype.loadFeatures=function(t,e,i){var r=this,n=this.loadedExtentsRtree_,o=this.strategy_(t,e);this.loading=!1;for(var s=function(t,s){var a=o[t];n.forEachInExtent(a,function(t){return X(t.extent,a)})||(r.loader_.call(r,a,e,i),n.insert(a,{extent:a.slice()}),r.loading=!0)},a=0,h=o.length;a<h;++a)s(a)},i.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,function(i){if(J(i.extent,t))return e=i,!0}),e&&i.remove(e)},i.prototype.removeFeature=function(t){var i=e(t).toString();i in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[i]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},i.prototype.removeFeatureInternal=function(t){var i=e(t).toString();this.featureChangeKeys_[i].forEach(y),delete this.featureChangeKeys_[i];var r=t.getId();void 0!==r?delete this.idIndex_[r.toString()]:delete this.undefIdIndex_[i],this.dispatchEvent(new yh(Qa,t))},i.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},i.prototype.setLoader=function(t){this.loader_=t},i}(qa),mh={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},xh="drawstart",Sh=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(C),Eh=function(t){function e(e){t.call(this,{handleDownEvent:Th,handleEvent:Ch,handleUpEvent:wh,stopDown:S}),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function(t){var e;return t===It.POINT||t===It.MULTI_POINT?e=mh.POINT:t===It.LINE_STRING||t===It.MULTI_LINE_STRING?e=mh.LINE_STRING:t===It.POLYGON||t===It.MULTI_POLYGON?e=mh.POLYGON:t===It.CIRCLE&&(e=mh.CIRCLE),e}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===mh.POLYGON?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:x;var i,r=e.geometryFunction;if(!r)if(this.type_===It.CIRCLE)r=function(t,e){var i=e||new ka([NaN,NaN]),r=un(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(r)),i};else{var n,o=this.mode_;o===mh.POINT?n=Nr:o===mh.LINE_STRING?n=yn:o===mh.POLYGON&&(n=Hr),r=function(t,e){var i=e;return i?o===mh.POLYGON?t[0].length?i.setCoordinates([t[0].concat([t[0][0]])]):i.setCoordinates([]):i.setCoordinates(t):i=new n(t),i}}this.geometryFunction_=r,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Va({source:new vh({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(i=Wi(),function(t,e){return i[t.getGeometry().getType()]}),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:Gs,this.freehandCondition_,e.freehand?this.freehandCondition_=Ps:this.freehandCondition_=e.freehandCondition?e.freehandCondition:ks,f(this,P(ms),this.updateState_,this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,r=e[0]-i[0],n=e[1]-i[1],o=r*r+n*n;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,r=[this.finishCoordinate_];if(this.mode_===mh.LINE_STRING?i=this.sketchCoords_.length>this.minPoints_:this.mode_===mh.POLYGON&&(i=this.sketchCoords_[0].length>this.minPoints_,r=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),i)for(var n=t.map,o=0,s=r.length;o<s;o++){var a=r[o],h=n.getPixelFromCoordinate(a),l=t.pixel,u=l[0]-h[0],c=l[1]-h[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(u*u+c*c)<=p){this.finishCoordinate_=a;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Hi(new Nr(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===mh.POINT?this.sketchCoords_=e.slice():this.mode_===mh.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Hi(new yn(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new Hi,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new Sh(xh,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,r,n=t.coordinate,o=this.sketchFeature_.getGeometry();if(this.mode_===mh.POINT?i=this.sketchCoords_:this.mode_===mh.POLYGON?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(n=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=n[0],i[1]=n[1],this.geometryFunction_(this.sketchCoords_,o),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(n),o instanceof Hr&&this.mode_!==mh.POLYGON){this.sketchLine_||(this.sketchLine_=new Hi);var s=o.getLinearRing(0);(r=this.sketchLine_.getGeometry())?(r.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates()),r.changed()):(r=new yn(s.getFlatCoordinates(),s.getLayout()),this.sketchLine_.setGeometry(r))}else this.sketchLineCoords_&&(r=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,r=t.coordinate,n=this.sketchFeature_.getGeometry();this.mode_===mh.LINE_STRING?(this.finishCoordinate_=r.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(r.slice()),this.geometryFunction_(i,n)):this.mode_===mh.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(r.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,n)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===mh.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),2<=t.length&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===mh.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry();this.mode_===mh.LINE_STRING?(e.pop(),this.geometryFunction_(e,i)):this.mode_===mh.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===It.MULTI_POINT?t.setGeometry(new ja([e])):this.type_===It.MULTI_LINE_STRING?t.setGeometry(new Da([e])):this.type_===It.MULTI_POLYGON&&t.setGeometry(new Ya([e])),this.dispatchEvent(new Sh("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new Sh(xh,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e}(Vs);function Ch(t){t.originalEvent.type===R.CONTEXTMENU&&t.preventDefault(),this.freehand_=this.mode_!==mh.POINT&&this.freehandCondition_(t);var e=t.type===Yn.POINTERMOVE,i=!0;return this.lastDragTime_&&t.type===Yn.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&t.type===Yn.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),i=!1):this.freehand_&&t.type===Yn.POINTERDOWN?i=!1:e?(i=t.type===Yn.POINTERMOVE)&&this.freehand_?i=this.handlePointerMove_(t):(t.pointerEvent.pointerType==Hn||t.type===Yn.POINTERDRAG&&!this.downTimeout_)&&this.handlePointerMove_(t):t.type===Yn.DBLCLICK&&(i=!1),Ks.call(this,t)&&i}function Th(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Bn(Yn.POINTERMOVE,t.map,t.pointerEvent,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)}function wh(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===mh.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===mh.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e}var Rh="extentchanged",Ih=function(t){function e(e){t.call(this,Rh),this.extent=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(C),Lh=function(t){function e(e){t.call(this,{handleDownEvent:Fh,handleDragEvent:Ph,handleEvent:bh,handleUpEvent:Mh});var i,r,n=e||{};this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,e||(e={}),this.extentOverlay_=new Va({source:new vh({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:(i=Wi(),function(t,e){return i[It.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new Va({source:new vh({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:(r=Wi(),function(t,e){return r[It.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&this.setExtent(e.extent)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.snapToVertex_=function(t,e){var i,r=e.getCoordinateFromPixel(t),n=this.getExtent();if(n){var o=[[[(i=n)[0],i[1]],[i[0],i[3]]],[[i[0],i[3]],[i[2],i[3]]],[[i[2],i[3]],[i[2],i[1]]],[[i[2],i[1]],[i[0],i[1]]]];o.sort(function(t,e){return pn(r,t)-pn(r,e)});var s=o[0],a=nn(r,s),h=e.getPixelFromCoordinate(a);if(cn(t,h)<=this.pixelTolerance_){var l=e.getPixelFromCoordinate(s[0]),u=e.getPixelFromCoordinate(s[1]),c=un(h,l),p=un(h,u),d=Math.sqrt(Math.min(c,p));return this.snappedToVertex_=d<=this.pixelTolerance_,this.snappedToVertex_&&(a=p<c?s[1]:s[0]),a}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,i=t.map,r=this.snapToVertex_(e,i);r||(r=i.getCoordinateFromPixel(e)),this.createOrUpdatePointerFeature_(r)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?t?e.setGeometry(qr(t)):e.setGeometry(void 0):(e=new Hi(t?qr(t):{}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new Hi(new Nr(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e)),e},e.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new Ih(this.extent_))},e}(Vs);function bh(t){return!(t instanceof Bn&&(t.type!=Yn.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),Ks.call(this,t),1))}function Fh(t){var e=t.pixel,i=t.map,r=this.getExtent(),n=this.snapToVertex_(e,i),o=function(t){var e=null,i=null;return t[0]==r[0]?e=r[2]:t[0]==r[2]&&(e=r[0]),t[1]==r[1]?i=r[3]:t[1]==r[3]&&(i=r[1]),null!==e&&null!==i?[e,i]:null};if(n&&r){var s=n[0]==r[0]||n[0]==r[2]?n[0]:null,a=n[1]==r[1]||n[1]==r[3]?n[1]:null;null!==s&&null!==a?this.pointerHandler_=Oh(o(n)):null!==s?this.pointerHandler_=Nh(o([s,r[1]]),o([s,r[3]])):null!==a&&(this.pointerHandler_=Nh(o([r[0],a]),o([r[2],a])))}else n=i.getCoordinateFromPixel(e),this.setExtent([n[0],n[1],n[0],n[1]]),this.pointerHandler_=Oh(n);return!0}function Ph(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0}function Mh(t){this.pointerHandler_=null;var e=this.getExtent();return e&&0!==rt(e)||this.setExtent(null),!1}function Oh(t){return function(e){return D([t,e])}}function Nh(t,e){return t[0]==e[0]?function(i){return D([t,[i[0],e[1]]])}:t[1]==e[1]?function(i){return D([t,[e[0],i[1]]])}:null}var Ah=0,Gh=1,kh={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},Dh=function(t){function e(e,i,r){t.call(this,e),this.features=i,this.mapBrowserEvent=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(C),jh=function(t){function i(e){var i,o;if(t.call(this,{handleDownEvent:Yh,handleDragEvent:Bh,handleEvent:zh,handleUpEvent:Xh}),this.condition_=e.condition?e.condition:Us,this.defaultDeleteCondition_=function(t){return Ls(t)&&As(t)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:Ps,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new gh,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Va({source:new vh({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(i=Wi(),function(t,e){return i[It.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,e.source?(this.source_=e.source,o=new N(this.source_.getFeatures()),f(this.source_,Ja,this.handleSourceAdd_,this),f(this.source_,Qa,this.handleSourceRemove_,this)):o=e.features,!o)throw new Error("The modify interaction requires features or a source");this.features_=o,this.features_.forEach(this.addFeature_.bind(this)),f(this.features_,r,this.handleFeatureAdd_,this),f(this.features_,n,this.handleFeatureRemove_,this),this.lastPointerEvent_=null}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.addFeature_=function(t){var e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);var i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),f(t,R.CHANGE,this.handleFeatureChange_,this)},i.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new Dh(kh.MODIFYSTART,this.features_,t)))},i.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),g(t,R.CHANGE,this.handleFeatureChange_,this)},i.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,i=[];e.forEach(function(e){t===e.feature&&i.push(e)});for(var r=i.length-1;0<=r;--r)e.remove(i[r])},i.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},i.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},i.prototype.getOverlay=function(){return this.overlay_},i.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},i.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},i.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},i.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},i.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},i.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),r={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),r)},i.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r){var o=i[r],s={feature:t,geometry:e,depth:[r],index:r,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},i.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length-1;r<n;++r){var o=i.slice(r,r+2),s={feature:t,geometry:e,index:r,segment:o};this.rBush_.insert(D(o),s)}},i.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),l={feature:t,geometry:e,depth:[r],index:s,segment:h};this.rBush_.insert(D(h),l)}},i.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),l={feature:t,geometry:e,depth:[r],index:s,segment:h};this.rBush_.insert(D(h),l)}},i.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length;s<a;++s)for(var h=o[s],l=0,u=h.length-1;l<u;++l){var c=h.slice(l,l+2),p={feature:t,geometry:e,depth:[s,r],index:l,segment:c};this.rBush_.insert(D(c),p)}},i.prototype.writeCircleGeometry_=function(t,e){var i=e.getCenter(),r={feature:t,geometry:e,index:Ah,segment:[i,i]},n={feature:t,geometry:e,index:Gh,segment:[i,i]},o=[r,n];r.featureSegments=n.featureSegments=o,this.rBush_.insert(Z(i),r),this.rBush_.insert(e.getExtent(),n)},i.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),r=0;r<i.length;++r)this.SEGMENT_WRITERS_[i[r].getType()].call(this,t,i[r])},i.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new Hi(new Nr(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e)),e},i.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},i.prototype.handlePointerAtPixel_=function(t,i){var r=i.getCoordinateFromPixel(t),n=j(Z(r),i.getView().getResolution()*this.pixelTolerance_),o=this.rBush_.getInExtent(n);if(0<o.length){o.sort(function(t,e){return Vh(r,t)-Vh(r,e)});var s=o[0],a=s.segment,h=Wh(r,s),l=i.getPixelFromCoordinate(h),u=cn(t,l);if(u<=this.pixelTolerance_){var c={};if(s.geometry.getType()===It.CIRCLE&&s.index===Gh)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h);else{var p=i.getPixelFromCoordinate(a[0]),d=i.getPixelFromCoordinate(a[1]),f=un(l,p),_=un(l,d);u=Math.sqrt(Math.min(f,_)),this.snappedToVertex_=u<=this.pixelTolerance_,this.snappedToVertex_&&(h=_<f?a[1]:a[0]),this.createOrUpdateVertexFeature_(h);for(var g=1,y=o.length;g<y;++g){var v=o[g].segment;if(!(an(a[0],v[0])&&an(a[1],v[1])||an(a[0],v[1])&&an(a[1],v[0])))break;c[e(v)]=!0}}return c[e(a)]=!0,void(this.vertexSegments_=c)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},i.prototype.insertVertex_=function(t,e){for(var i,r=t.segment,n=t.feature,o=t.geometry,s=t.depth,a=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case It.MULTI_LINE_STRING:case It.POLYGON:(i=o.getCoordinates())[s[0]].splice(a+1,0,e);break;case It.MULTI_POLYGON:(i=o.getCoordinates())[s[1]][s[0]].splice(a+1,0,e);break;case It.LINE_STRING:(i=o.getCoordinates()).splice(a+1,0,e);break;default:return}this.setGeometryCoordinates_(o,i);var h=this.rBush_;h.remove(t),this.updateSegmentIndices_(o,a,s,1);var l={segment:[r[0],e],feature:n,geometry:o,depth:s,index:a};h.insert(D(l.segment),l),this.dragSegments_.push([l,1]);var u={segment:[e,r[1]],feature:n,geometry:o,depth:s,index:a+1};h.insert(D(u.segment),u),this.dragSegments_.push([u,0]),this.ignoreNextSingleClick_=!0},i.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Yn.POINTERDRAG){var t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new Dh(kh.MODIFYEND,this.features_,t)),!(this.modified_=!1)}return!1},i.prototype.removeVertex_=function(){var t,i,r,n,o,s,a,h,l,u,c,p=this.dragSegments_,d={},f=!1;for(o=p.length-1;0<=o;--o)c=e((u=(r=p[o])[0]).feature),u.depth&&(c+="-"+u.depth.join("-")),c in d||(d[c]={}),0===r[1]?(d[c].right=u,d[c].index=u.index):1==r[1]&&(d[c].left=u,d[c].index=u.index+1);for(c in d){switch(l=d[c].right,a=d[c].left,(h=(s=d[c].index)-1)<0&&(h=0),t=i=(n=(u=void 0!==a?a:l).geometry).getCoordinates(),f=!1,n.getType()){case It.MULTI_LINE_STRING:2<i[u.depth[0]].length&&(i[u.depth[0]].splice(s,1),f=!0);break;case It.LINE_STRING:2<i.length&&(i.splice(s,1),f=!0);break;case It.MULTI_POLYGON:t=t[u.depth[1]];case It.POLYGON:4<(t=t[u.depth[0]]).length&&(s==t.length-1&&(s=0),t.splice(s,1),f=!0,0===s&&(t.pop(),t.push(t[0]),h=t.length-1))}if(f){this.setGeometryCoordinates_(n,i);var _=[];if(void 0!==a&&(this.rBush_.remove(a),_.push(a.segment[0])),void 0!==l&&(this.rBush_.remove(l),_.push(l.segment[1])),void 0!==a&&void 0!==l){var g={depth:u.depth,feature:u.feature,geometry:u.geometry,index:h,segment:_};this.rBush_.insert(D(g.segment),g)}this.updateSegmentIndices_(n,s,u.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),p.length=0}}return f},i.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},i.prototype.updateSegmentIndices_=function(t,e,i,r){this.rBush_.forEachInExtent(t.getExtent(),function(n){n.geometry===t&&(void 0===i||void 0===n.depth||ur(n.depth,i))&&n.index>e&&(n.index+=r)})},i}(Vs);function Uh(t,e){return t.index-e.index}function Yh(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var i=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var r=this.vertexFeature_;if(r){var n=[],o=r.getGeometry().getCoordinates(),s=D([o]),a=this.rBush_.getInExtent(s),h={};a.sort(Uh);for(var l=0,u=a.length;l<u;++l){var c=a[l],p=c.segment,d=e(c.feature),f=c.depth;if(f&&(d+="-"+f.join("-")),h[d]||(h[d]=new Array(2)),c.geometry.getType()===It.CIRCLE&&c.index===Gh)an(Wh(i,c),o)&&!h[d][0]&&(this.dragSegments_.push([c,0]),h[d][0]=c);else if(an(p[0],o)&&!h[d][0])this.dragSegments_.push([c,0]),h[d][0]=c;else if(an(p[1],o)&&!h[d][1]){if((c.geometry.getType()===It.LINE_STRING||c.geometry.getType()===It.MULTI_LINE_STRING)&&h[d][0]&&0===h[d][0].index)continue;this.dragSegments_.push([c,1]),h[d][1]=c}else this.insertVertexCondition_(t)&&e(p)in this.vertexSegments_&&!h[d][0]&&!h[d][1]&&n.push([c,o])}n.length&&this.willModifyFeatures_(t);for(var _=n.length-1;0<=_;--_)this.insertVertex_.apply(this,n[_])}return!!this.vertexFeature_}function Bh(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,i=0,r=this.dragSegments_.length;i<r;++i){for(var n=this.dragSegments_[i],o=n[0],s=o.depth,a=o.geometry,h=void 0,l=o.segment,u=n[1];e.length<a.getStride();)e.push(l[u][e.length]);switch(a.getType()){case It.POINT:h=e,l[0]=l[1]=e;break;case It.MULTI_POINT:(h=a.getCoordinates())[o.index]=e,l[0]=l[1]=e;break;case It.LINE_STRING:(h=a.getCoordinates())[o.index+u]=e,l[u]=e;break;case It.MULTI_LINE_STRING:case It.POLYGON:(h=a.getCoordinates())[s[0]][o.index+u]=e,l[u]=e;break;case It.MULTI_POLYGON:(h=a.getCoordinates())[s[1]][s[0]][o.index+u]=e,l[u]=e;break;case It.CIRCLE:l[0]=l[1]=e,o.index===Ah?(this.changingFeature_=!0,a.setCenter(e)):(this.changingFeature_=!0,a.setRadius(cn(a.getCenter(),e))),this.changingFeature_=!1}h&&this.setGeometryCoordinates_(a,h)}this.createOrUpdateVertexFeature_(e)}function Xh(t){for(var e=this.dragSegments_.length-1;0<=e;--e){var i=this.dragSegments_[e][0],r=i.geometry;if(r.getType()===It.CIRCLE){var n=r.getCenter(),o=i.featureSegments[0],s=i.featureSegments[1];o.segment[0]=o.segment[1]=n,s.segment[0]=s.segment[1]=n,this.rBush_.update(Z(n),o),this.rBush_.update(r.getExtent(),s)}else this.rBush_.update(D(i.segment),i)}return this.modified_&&(this.dispatchEvent(new Dh(kh.MODIFYEND,this.features_,t)),this.modified_=!1),!1}function zh(t){return!(t instanceof Bn)||((this.lastPointerEvent_=t).map.getView().getInteracting()||t.type!=Yn.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=Yn.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==Yn.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),Ks.call(this,t)&&!e);var e}function Vh(t,e){var i=e.geometry;if(i.getType()===It.CIRCLE){var r=i;if(e.index===Gh){var n=un(r.getCenter(),t),o=Math.sqrt(n)-r.getRadius();return o*o}}return pn(t,e.segment)}function Wh(t,e){var i=e.geometry;return i.getType()===It.CIRCLE&&e.index===Gh?i.getClosestPoint(t):nn(t,e.segment)}var Kh={SELECT:"select"},Hh=function(t){function e(e,i,r,n){t.call(this,e),this.selected=i,this.deselected=r,this.mapBrowserEvent=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(C),Zh=function(t){function i(e){t.call(this,{handleEvent:qh});var i=e||{};this.condition_=i.condition?i.condition:As,this.addCondition_=i.addCondition?i.addCondition:Os,this.removeCondition_=i.removeCondition?i.removeCondition:Os,this.toggleCondition_=i.toggleCondition?i.toggleCondition:ks,this.multi_=!!i.multi&&i.multi,this.filter_=i.filter?i.filter:x,this.hitTolerance_=i.hitTolerance?i.hitTolerance:0;var o,s,a=new Va({source:new vh({useSpatialIndex:!1,features:i.features,wrapX:i.wrapX}),style:i.style?i.style:(o=Wi(),hr(o[It.POLYGON],o[It.LINE_STRING]),hr(o[It.GEOMETRY_COLLECTION],o[It.LINE_STRING]),function(t,e){return t.getGeometry()?o[t.getGeometry().getType()]:null}),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=a,i.layers)if("function"==typeof i.layers)s=i.layers;else{var h=i.layers;s=function(t){return or(h,t)}}else s=x;this.layerFilter_=s,this.featureLayerAssociation_={};var l=this.featureOverlay_.getSource().getFeaturesCollection();f(l,r,this.addFeature_,this),f(l,n,this.removeFeature_,this)}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.addFeatureLayerAssociation_=function(t,i){var r=e(t);this.featureLayerAssociation_[r]=i},i.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},i.prototype.getHitTolerance=function(){return this.hitTolerance_},i.prototype.getLayer=function(t){var i=e(t);return this.featureLayerAssociation_[i]},i.prototype.getOverlay=function(){return this.featureOverlay_},i.prototype.setHitTolerance=function(t){this.hitTolerance_=t},i.prototype.setMap=function(e){var i=this.getMap(),r=this.featureOverlay_.getSource().getFeaturesCollection();i&&r.forEach(i.unskipFeature.bind(i)),t.prototype.setMap.call(this,e),this.featureOverlay_.setMap(e),e&&r.forEach(e.skipFeature.bind(e))},i.prototype.addFeature_=function(t){var e=this.getMap();e&&e.skipFeature(t.element)},i.prototype.removeFeature_=function(t){var e=this.getMap();e&&e.unskipFeature(t.element)},i.prototype.removeFeatureLayerAssociation_=function(t){var i=e(t);delete this.featureLayerAssociation_[i]},i}(xs);function qh(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),i=this.removeCondition_(t),r=this.toggleCondition_(t),n=!e&&!i&&!r,o=t.map,s=this.featureOverlay_.getSource().getFeaturesCollection(),h=[],l=[];if(n){a(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return l.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var u=s.getLength()-1;0<=u;--u){var c=s.item(u),p=l.indexOf(c);-1<p?l.splice(p,1):(s.remove(c),h.push(c))}0!==l.length&&s.extend(l)}else{o.forEachFeatureAtPixel(t.pixel,function(t,n){if(this.filter_(t,n))return!e&&!r||or(s.getArray(),t)?(i||r)&&or(s.getArray(),t)&&(h.push(t),this.removeFeatureLayerAssociation_(t)):(l.push(t),this.addFeatureLayerAssociation_(t,n)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var d=h.length-1;0<=d;--d)s.remove(h[d]);s.extend(l)}return(0<l.length||0<h.length)&&this.dispatchEvent(new Hh(Kh.SELECT,l,h,t)),Ns(t)}var Jh=function(t){function i(e){t.call(this,{handleEvent:Qh,handleDownEvent:x,handleUpEvent:$h,stopDown:S});var i=e||{};this.source_=i.source?i.source:null,this.vertex_=void 0===i.vertex||i.vertex,this.edge_=void 0===i.edge||i.edge,this.features_=i.features?i.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,this.sortByDistance_=function(t,e){return pn(this.pixelCoordinate_,t.segment)-pn(this.pixelCoordinate_,e.segment)}.bind(this),this.rBush_=new gh,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.addFeature=function(t,i){var r=void 0===i||i,n=e(t),o=t.getGeometry();if(o){var s=this.SEGMENT_WRITERS_[o.getType()];s&&(this.indexedFeaturesExtents_[n]=o.getExtent([1/0,1/0,-1/0,-1/0]),s.call(this,t,o))}r&&(this.featureChangeListenerKeys_[n]=f(t,R.CHANGE,this.handleFeatureChange_,this))},i.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},i.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},i.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},i.prototype.handleFeatureAdd_=function(t){var e;t instanceof yh?e=t.feature:t instanceof O&&(e=t.element),this.addFeature(e)},i.prototype.handleFeatureRemove_=function(t){var e;t instanceof yh?e=t.feature:t instanceof O&&(e=t.element),this.removeFeature(e)},i.prototype.handleFeatureChange_=function(t){var i=t.target;if(this.handlingDownUpSequence){var r=e(i);r in this.pendingFeatures_||(this.pendingFeatures_[r]=i)}else this.updateFeature_(i)},i.prototype.removeFeature=function(t,i){var r=void 0===i||i,n=e(t),o=this.indexedFeaturesExtents_[n];if(o){var s=this.rBush_,a=[];s.forEachInExtent(o,function(e){t===e.feature&&a.push(e)});for(var h=a.length-1;0<=h;--h)s.remove(a[h])}r&&(y(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},i.prototype.setMap=function(e){var i=this.getMap(),o=this.featuresListenerKeys_,s=this.getFeatures_();i&&(o.forEach(y),o.length=0,s.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?o.push(f(this.features_,r,this.handleFeatureAdd_,this),f(this.features_,n,this.handleFeatureRemove_,this)):this.source_&&o.push(f(this.source_,Ja,this.handleFeatureAdd_,this),f(this.source_,Qa,this.handleFeatureRemove_,this)),s.forEach(this.forEachFeatureAdd_.bind(this)))},i.prototype.snapTo=function(t,e,i){var r=D([i.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),i.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_])]),n=this.rBush_.getInExtent(r);this.vertex_&&!this.edge_&&(n=n.filter(function(t){return t.feature.getGeometry().getType()!==It.CIRCLE}));var o,s,a,h,l=!1,u=null,c=null;if(0<n.length){this.pixelCoordinate_=e,n.sort(this.sortByDistance_);var p=n[0].segment,d=n[0].feature.getGeometry().getType()===It.CIRCLE;this.vertex_&&!this.edge_?(o=i.getPixelFromCoordinate(p[0]),s=i.getPixelFromCoordinate(p[1]),a=un(t,o),h=un(t,s),Math.sqrt(Math.min(a,h))<=this.pixelTolerance_&&(l=!0,u=h<a?p[1]:p[0],c=i.getPixelFromCoordinate(u))):this.edge_&&(u=d?function(t,e){var i=e.getRadius(),r=e.getCenter(),n=r[0],o=r[1],s=t[0]-n,a=t[1]-o;0===s&&0===a&&(s=1);var h=Math.sqrt(s*s+a*a);return[n+i*s/h,o+i*a/h]}(e,n[0].feature.getGeometry()):nn(e,p),cn(t,c=i.getPixelFromCoordinate(u))<=this.pixelTolerance_&&(l=!0,this.vertex_&&!d&&(o=i.getPixelFromCoordinate(p[0]),s=i.getPixelFromCoordinate(p[1]),a=un(c,o),h=un(c,s),Math.sqrt(Math.min(a,h))<=this.pixelTolerance_&&(u=h<a?p[1]:p[0],c=i.getPixelFromCoordinate(u))))),l&&(c=[Math.round(c[0]),Math.round(c[1])])}return{snapped:l,vertex:u,vertexPixel:c}},i.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},i.prototype.writeCircleGeometry_=function(t,e){for(var i=Jr(e).getCoordinates()[0],r=0,n=i.length-1;r<n;++r){var o=i.slice(r,r+2),s={feature:t,segment:o};this.rBush_.insert(D(o),s)}},i.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),r=0;r<i.length;++r){var n=this.SEGMENT_WRITERS_[i[r].getType()];n&&n.call(this,t,i[r])}},i.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length-1;r<n;++r){var o=i.slice(r,r+2),s={feature:t,segment:o};this.rBush_.insert(D(o),s)}},i.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),l={feature:t,segment:h};this.rBush_.insert(D(h),l)}},i.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r){var o=i[r],s={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},i.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length;s<a;++s)for(var h=o[s],l=0,u=h.length-1;l<u;++l){var c=h.slice(l,l+2),p={feature:t,segment:c};this.rBush_.insert(D(c),p)}},i.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),r={feature:t,segment:[i,i]};this.rBush_.insert(e.getExtent(),r)},i.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),l={feature:t,segment:h};this.rBush_.insert(D(h),l)}},i}(Vs);function Qh(t){var e=this.snapTo(t.pixel,t.coordinate,t.map);return e.snapped&&(t.coordinate=e.vertex.slice(0,2),t.pixel=e.vertexPixel),Ks.call(this,t)}function $h(t){var e=h(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}var tl={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},el=function(t){function e(e,i,r){t.call(this,e),this.features=i,this.coordinate=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(C),il=function(t){function e(e){t.call(this,{handleDownEvent:rl,handleDragEvent:ol,handleMoveEvent:sl,handleUpEvent:nl});var i,r=e||{};if(this.lastCoordinate_=null,this.features_=void 0!==r.features?r.features:null,r.layers)if("function"==typeof r.layers)i=r.layers;else{var n=r.layers;i=function(t){return or(n,t)}}else i=x;this.layerFilter_=i,this.hitTolerance_=r.hitTolerance?r.hitTolerance:0,this.lastFeature_=null,f(this,P(ms),this.handleActiveChanged_,this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t){if(!this.features_||or(this.features_.getArray(),t))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(i)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),i=this.getActive();e&&i||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(Vs);function rl(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,sl.call(this,t);var e=this.features_||new N([this.lastFeature_]);return this.dispatchEvent(new el(tl.TRANSLATESTART,e,t.coordinate)),!0}return!1}function nl(t){if(this.lastCoordinate_){this.lastCoordinate_=null,sl.call(this,t);var e=this.features_||new N([this.lastFeature_]);return this.dispatchEvent(new el(tl.TRANSLATEEND,e,t.coordinate)),!0}return!1}function ol(t){if(this.lastCoordinate_){var e=t.coordinate,i=e[0]-this.lastCoordinate_[0],r=e[1]-this.lastCoordinate_[1],n=this.features_||new N([this.lastFeature_]);n.forEach(function(t){var e=t.getGeometry();e.translate(i,r),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new el(tl.TRANSLATING,n,e))}}function sl(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}function al(t){var e=t||{},i=new N,r=new Dn(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new $s),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new Rs({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new Zs({condition:e.onFocusOnly?Fs:void 0,kinetic:r})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new Sa),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new wa({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new fa),i.push(new ga({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new ma({condition:e.onFocusOnly?Fs:void 0,constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new ca({duration:e.zoomDuration})),i}var hl=function(t){function e(e,i,r,n,o){var s=void 0!==o?ui.IDLE:ui.LOADED;t.call(this,e,i,r,s),this.loader_=void 0!==o?o:null,this.canvas_=n,this.error_=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=ui.ERROR):this.state=ui.LOADED,this.changed()},e.prototype.load=function(){this.state==ui.IDLE&&(this.state=ui.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(Rn),ll=function(t){function e(e,i,r,n,o){t.call(this,e),this.vectorContext=i,this.frameState=r,this.context=n,this.glContext=o}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(C),ul=function(){};ul.prototype.drawCustom=function(t,e,i){},ul.prototype.drawGeometry=function(t){},ul.prototype.setStyle=function(t){},ul.prototype.drawCircle=function(t,e){},ul.prototype.drawFeature=function(t,e){},ul.prototype.drawGeometryCollection=function(t,e){},ul.prototype.drawLineString=function(t,e){},ul.prototype.drawMultiLineString=function(t,e){},ul.prototype.drawMultiPoint=function(t,e){},ul.prototype.drawMultiPolygon=function(t,e){},ul.prototype.drawPoint=function(t,e){},ul.prototype.drawPolygon=function(t,e){},ul.prototype.drawText=function(t,e){},ul.prototype.setFillStrokeStyle=function(t,e){},ul.prototype.setImageStyle=function(t,e){},ul.prototype.setTextStyle=function(t,e){};var cl=function(t){function e(e,i,r,n,o){t.call(this),this.context_=e,this.pixelRatio_=i,this.extent_=r,this.transform_=n,this.viewRotation_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.drawImages_=function(t,e,i,r){var n=this;if(this.image_){var o=yt(t,e,i,2,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,h=s.globalAlpha;1!=this.imageOpacity_&&(s.globalAlpha=h*this.imageOpacity_);var l=this.imageRotation_;this.imageRotateWithView_&&(l+=this.viewRotation_);for(var u=0,c=o.length;u<c;u+=2){var p=o[u]-n.imageAnchorX_,d=o[u+1]-n.imageAnchorY_;if(0!==l||1!=n.imageScale_){var f=p+n.imageAnchorX_,_=d+n.imageAnchorY_;Se(a,f,_,n.imageScale_,n.imageScale_,l,-f,-_),s.setTransform.apply(s,a)}s.drawImage(n.image_,n.imageOriginX_,n.imageOriginY_,n.imageWidth_,n.imageHeight_,p,d,n.imageWidth_,n.imageHeight_)}0===l&&1==this.imageScale_||s.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(s.globalAlpha=h)}},e.prototype.drawText_=function(t,e,i,r){var n=this;if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var o=yt(t,e,i,r,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=r){var h=o[e]+n.textOffsetX_,l=o[e+1]+n.textOffsetY_;if(0!==a||1!=n.textScale_){var u=Se(n.tmpLocalTransform_,h,l,n.textScale_,n.textScale_,a,-h,-l);s.setTransform.apply(s,u)}n.textStrokeState_&&s.strokeText(n.text_,h,l),n.textFillState_&&s.fillText(n.text_,h,l)}0===a&&1==this.textScale_||s.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,i,r,n){var o=this.context_,s=yt(t,e,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(s[0],s[1]);var a=s.length;n&&(a-=2);for(var h=2;h<a;h+=2)o.lineTo(s[h],s[h+1]);return n&&o.closePath(),i},e.prototype.drawRings_=function(t,e,i,r){for(var n=0,o=i.length;n<o;++n)e=this.moveToLineTo_(t,e,i[n],r,!0);return e},e.prototype.drawCircle=function(t){if(dt(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,i){var r=t.getFlatCoordinates();if(r){var n=t.getStride();return yt(r,0,r.length,n,e,i)}return null}(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],r=e[3]-e[1],n=Math.sqrt(i*i+r*r),o=this.context_;o.beginPath(),o.arc(e[0],e[1],n,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case It.POINT:this.drawPoint(t);break;case It.LINE_STRING:this.drawLineString(t);break;case It.POLYGON:this.drawPolygon(t);break;case It.MULTI_POINT:this.drawMultiPoint(t);break;case It.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case It.MULTI_POLYGON:this.drawMultiPolygon(t);break;case It.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case It.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&dt(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,r=e.length;i<r;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(dt(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var r=t.getFlatMidpoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(dt(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,r=t.getFlatCoordinates(),n=0,o=t.getEnds(),s=t.getStride();i.beginPath();for(var a=0,h=o.length;a<h;++a)n=this.moveToLineTo_(r,n,o[a],s,!1);i.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if(dt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(dt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),r=0,n=t.getEndss(),o=t.getStride();e.beginPath();for(var s=0,a=n.length;s<a;++s){var h=n[s];r=this.drawRings_(i,r,h,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=e.lineCap=t.lineCap),oi&&(ur(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,oi&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:Ci;i?(i.font!=t.font&&(i.font=e.font=t.font),i.textAlign!=r&&(i.textAlign=e.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:Ne(i||vi)}}else this.fillState_=null;if(e){var r=e.getColor(),n=e.getLineCap(),o=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),h=e.getWidth(),l=e.getMiterLimit();this.strokeState_={lineCap:void 0!==n?n:mi,lineDash:o||xi,lineDashOffset:s||0,lineJoin:void 0!==a?a:Si,lineWidth:this.pixelRatio_*(void 0!==h?h:1),miterLimit:void 0!==l?l:10,strokeStyle:Ne(r||Ei)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),r=t.getOrigin(),n=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=n[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=n[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:Ne(i||vi)}}else this.textFillState_=null;var r=t.getStroke();if(r){var n=r.getColor(),o=r.getLineCap(),s=r.getLineDash(),a=r.getLineDashOffset(),h=r.getLineJoin(),l=r.getWidth(),u=r.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:mi,lineDash:s||xi,lineDashOffset:a||0,lineJoin:void 0!==h?h:Si,lineWidth:void 0!==l?l:1,miterLimit:void 0!==u?u:10,strokeStyle:Ne(n||Ei)}}else this.textStrokeState_=null;var c=t.getFont(),p=t.getOffsetX(),d=t.getOffsetY(),f=t.getRotateWithView(),_=t.getRotation(),g=t.getScale(),y=t.getText(),v=t.getTextAlign(),m=t.getTextBaseline();this.textState_={font:void 0!==c?c:yi,textAlign:void 0!==v?v:Ci,textBaseline:void 0!==m?m:"middle"},this.text_=void 0!==y?y:"",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==d?this.pixelRatio_*d:0,this.textRotateWithView_=void 0!==f&&f,this.textRotation_=void 0!==_?_:0,this.textScale_=this.pixelRatio_*(void 0!==g?g:1)}else this.text_=""},e}(ul),pl=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function dl(t,e,i){return e+":"+t+":"+(i?Ie(i):"null")}pl.prototype.clear=function(){this.cache_={},this.cacheSize_=0},pl.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t=0;for(var e in this.cache_){var i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},pl.prototype.get=function(t,e,i){var r=dl(t,e,i);return r in this.cache_?this.cache_[r]:null},pl.prototype.set=function(t,e,i,r){var n=dl(t,e,i);this.cache_[n]=r,++this.cacheSize_},pl.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()};var fl=new pl,_l=function(t){function i(e){t.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},i.prototype.getLayerRendererConstructors=function(){return this.layerRendererConstructors_},i.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;Se(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Ee(ge(r,i))},i.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},i.prototype.forEachFeatureAtCoordinate=function(t,i,r,n,o,s,a){var h,l=i.viewState,u=l.resolution;function c(t,r){var s=e(t).toString(),a=i.layerStates[e(r)].managed;if(!(s in i.skippedFeatureUids)||a)return n.call(o,t,a?r:null)}var p=l.projection,d=t;if(p.canWrapX()){var f=p.getExtent(),_=pt(f),g=t[0];(g<f[0]||g>f[2])&&(d=[g+_*Math.ceil((f[0]-g)/_),t[1]])}var y,v=i.layerStatesArray;for(y=v.length-1;0<=y;--y){var m=v[y],x=m.layer;if(ps(m,u)&&s.call(a,x)){var S=this.getLayerRenderer(x);if(x.getSource()&&(h=S.forEachFeatureAtCoordinate(x.getSource().getWrapX()?d:t,i,r,c,o)),h)return h}}},i.prototype.forEachLayerAtPixel=function(t,e,i,r,n,o,s){},i.prototype.hasFeatureAtCoordinate=function(t,e,i,r,n){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,x,this,r,n)},i.prototype.getLayerRenderer=function(t){var i=e(t).toString();if(i in this.layerRenderers_)return this.layerRenderers_[i];for(var r,n=0,o=this.layerRendererConstructors_.length;n<o;++n){var s=this.layerRendererConstructors_[n];if(s.handles(t)){r=s.create(this,t);break}}if(!r)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[i]=r,this.layerRendererListeners_[i]=f(r,R.CHANGE,this.handleLayerRendererChange_,this),r},i.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},i.prototype.getLayerRenderers=function(){return this.layerRenderers_},i.prototype.getMap=function(){return this.map_},i.prototype.handleLayerRendererChange_=function(){this.map_.render()},i.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],y(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},i.prototype.removeUnusedLayerRenderers_=function(t,e){for(var i in this.layerRenderers_)e&&i in e.layerStates||this.removeLayerRendererByKey_(i).dispose()},i.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(gl)},i.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},i}(m);function gl(t,e){fl.expire()}function yl(t,e){return t.zIndex-e.zIndex}_l.prototype.renderFrame=E,_l.prototype.dispatchRenderEvent=E;var vl=[],ml=function(t){function e(e){t.call(this,e);var i=e.getViewport();this.context_=Ae(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=pi,i.insertBefore(this.canvas_,i.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.dispatchRenderEvent=function(t,e){var i=this.getMap(),r=this.context_;if(i.hasListener(t)){var n=e.extent,o=e.pixelRatio,s=e.viewState.rotation,a=this.getTransform(e),h=new cl(r,o,n,a,s),l=new ll(t,h,e,r,null);i.dispatchEvent(l)}},e.prototype.getTransform=function(t){var e=t.viewState,i=this.canvas_.width/2,r=this.canvas_.height/2,n=t.pixelRatio/e.resolution,o=-n,s=-e.rotation,a=-e.center[0],h=-e.center[1];return Se(this.transform_,i,r,n,o,s,a,h)},e.prototype.renderFrame=function(t){if(t){var e=this.context_,i=t.pixelRatio,r=Math.round(t.size[0]*i),n=Math.round(t.size[1]*i);this.canvas_.width!=r||this.canvas_.height!=n?(this.canvas_.width=r,this.canvas_.height=n):e.clearRect(0,0,r,n);var o=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchRenderEvent(xn,t);var s=t.layerStatesArray;cr(s,yl),o&&(e.save(),Ai(e,o,r/2,n/2));var a,h,l,u,c,p=t.viewState.resolution;for(a=0,h=s.length;a<h;++a)l=(c=s[a]).layer,u=this.getLayerRenderer(l),ps(c,p)&&c.sourceState==is&&u.prepareFrame(t,c)&&u.composeFrame(t,c,e);o&&e.restore(),this.dispatchRenderEvent(mn,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,i,r,n,o,s){var a,h,l=e.viewState.resolution,u=e.layerStatesArray,c=u.length,p=ye(e.pixelToCoordinateTransform,t.slice());for(h=c-1;0<=h;--h){var d=u[h],f=d.layer;if(ps(d,l)&&o.call(s,f)&&(a=this.getLayerRenderer(f).forEachLayerAtCoordinate(p,e,i,r,n)))return a}},e.prototype.registerLayerRenderers=function(e){t.prototype.registerLayerRenderers.call(this,e);for(var i=0,r=e.length;i<r;++i){var n=e[i];or(vl,n)||vl.push(n)}},e}(_l),xl=function(t){function i(e){t.call(this),this.layer_=e}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.createLoadedTileFinder=function(t,e,i){return function(r,n){return t.forEachLoadedTile(e,r,n,function(t){i[r]||(i[r]={}),i[r][t.tileCoord.toString()]=t})}},i.prototype.getLayer=function(){return this.layer_},i.prototype.handleImageChange_=function(t){t.target.getState()===ui.LOADED&&this.renderIfReadyAndVisible()},i.prototype.loadImage=function(t){var e=t.getState();return e!=ui.LOADED&&e!=ui.ERROR&&f(t,R.CHANGE,this.handleImageChange_,this),e==ui.IDLE&&(t.load(),e=t.getState()),e==ui.LOADED},i.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==is&&this.changed()},i.prototype.scheduleExpireCache=function(t,i){if(i.canExpireCache()){var r=function(t,i,r){var n=e(t).toString();n in r.usedTiles&&t.expireCache(r.viewState.projection,r.usedTiles[n])}.bind(null,i);t.postRenderFunctions.push(r)}},i.prototype.updateUsedTiles=function(t,i,r,n){var o=e(i).toString(),s=r.toString();o in t?s in t[o]?t[o][s].extend(n):t[o][s]=n:(t[o]={},t[o][s]=n)},i.prototype.manageTilePyramid=function(t,i,r,n,o,s,a,h,l,u){var c=e(i).toString();c in t.wantedTiles||(t.wantedTiles[c]={});var p,d,f,_,g,y,v=t.wantedTiles[c],m=t.tileQueue;for(y=r.getMinZoom();y<=a;++y)for(d=r.getTileRangeForExtentAndZ(s,y,d),f=r.getResolution(y),_=d.minX;_<=d.maxX;++_)for(g=d.minY;g<=d.maxY;++g)a-y<=h?((p=i.getTile(y,_,g,n,o)).getState()==Ln&&(v[p.getKey()]=!0,m.isKeyQueued(p.getKey())||m.enqueue([p,c,r.getTileCoordCenter(p.tileCoord),f])),void 0!==l&&l.call(u,p)):i.useTile(y,_,g,o)},i}(I);xl.prototype.forEachFeatureAtCoordinate=E,xl.prototype.hasFeatureAtCoordinate=S;var Sl=function(t){function e(e){t.call(this,e),this.renderedResolution,this.transform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.clip=function(t,e,i){var r=e.pixelRatio,n=e.size[0]*r,o=e.size[1]*r,s=e.viewState.rotation,a=ut(i),h=ct(i),l=ot(i),u=nt(i);ye(e.coordinateToPixelTransform,a),ye(e.coordinateToPixelTransform,h),ye(e.coordinateToPixelTransform,l),ye(e.coordinateToPixelTransform,u),t.save(),Ai(t,-s,n/2,o/2),t.beginPath(),t.moveTo(a[0]*r,a[1]*r),t.lineTo(h[0]*r,h[1]*r),t.lineTo(l[0]*r,l[1]*r),t.lineTo(u[0]*r,u[1]*r),t.clip(),Ai(t,s,n/2,o/2)},e.prototype.dispatchComposeEvent_=function(t,e,i,r){var n=this.getLayer();if(n.hasListener(t)){var o=i.size[0]*i.pixelRatio,s=i.size[1]*i.pixelRatio,a=i.viewState.rotation;Ai(e,-a,o/2,s/2);var h=void 0!==r?r:this.getTransform(i,0),l=new cl(e,i.pixelRatio,i.extent,h,i.viewState.rotation),u=new ll(t,l,i,e,null);n.dispatchEvent(u),Ai(e,a,o/2,s/2)}},e.prototype.forEachLayerAtCoordinate=function(t,e,i,r,n){return this.forEachFeatureAtCoordinate(t,e,i,x,this)?r.call(n,this.getLayer(),null):void 0},e.prototype.postCompose=function(t,e,i,r){this.dispatchComposeEvent_(mn,t,e,r)},e.prototype.preCompose=function(t,e,i){this.dispatchComposeEvent_(xn,t,e,i)},e.prototype.dispatchRenderEvent=function(t,e,i){this.dispatchComposeEvent_(Sn,t,e,i)},e.prototype.getTransform=function(t,e){var i=t.viewState,r=t.pixelRatio,n=r*t.size[0]/2,o=r*t.size[1]/2,s=r/i.resolution,a=-s,h=-i.rotation,l=-i.center[0]+e,u=-i.center[1];return Se(this.transform_,n,o,s,a,h,l,u)},e.prototype.composeFrame=function(t,e,i){},e.prototype.prepareFrame=function(t,e){},e}(xl),El=function(t){function e(e){t.call(this,e),this.coordinateToCanvasPixelTransform=[1,0,0,1,0,0],this.hitCanvasContext_=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.composeFrame=function(t,e,i){this.preCompose(i,t);var r=this.getImage();if(r){var n=e.extent,o=void 0!==n&&!X(n,t.extent)&&dt(n,t.extent);o&&this.clip(i,t,n);var s=this.getImageTransform(),a=i.globalAlpha;i.globalAlpha=e.opacity;var h=s[4],l=s[5],u=r.width*s[0],c=r.height*s[3];i.drawImage(r,0,0,+r.width,+r.height,Math.round(h),Math.round(l),Math.round(u),Math.round(c)),i.globalAlpha=a,o&&i.restore()}this.postCompose(i,t,e)},e.prototype.getImage=function(){},e.prototype.getImageTransform=function(){},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n){var o=this.getLayer(),s=o.getSource(),a=e.viewState.resolution,h=e.viewState.rotation,l=e.skippedFeatureUids;return s.forEachFeatureAtCoordinate(t,a,h,i,l,function(t){return r.call(n,t,o)})},e.prototype.forEachLayerAtCoordinate=function(e,i,r,n,o){if(this.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==E)return t.prototype.forEachLayerAtCoordinate.call(this,arguments);var s=ye(this.coordinateToCanvasPixelTransform,e.slice());ln(s,i.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=Ae(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),s[0],s[1],1,1,0,0,1,1);var a=this.hitCanvasContext_.getImageData(0,0,1,1).data;return 0<a[3]?n.call(o,this.getLayer(),a):void 0}},e}(Sl),Cl=function(t){function e(i){if(t.call(this,i),this.image_=null,this.imageTransform_=[1,0,0,1,0,0],this.skippedFeatures_=[],this.vectorRenderer_=null,i.getType()===Ba.VECTOR)for(var r=0,n=vl.length;r<n;++r){var o=vl[r];if(o!==e&&o.handles(i)){this.vectorRenderer_=new o(i);break}}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.prepareFrame=function(t,e){var i,r=t.pixelRatio,n=t.size,o=t.viewState,a=o.center,h=o.resolution,l=this.getLayer().getSource(),u=t.viewHints,c=this.vectorRenderer_,p=t.extent;if(c||void 0===e.extent||(p=lt(p,e.extent)),!u[Yo.ANIMATING]&&!u[Yo.INTERACTING]&&!ft(p)){var d=o.projection,f=this.skippedFeatures_;if(c){var _=c.context,g=s({},t,{size:[pt(p)/h,ht(p)/h],viewState:s({},t.viewState,{rotation:0})}),y=Object.keys(g.skippedFeatureUids).sort();i=new hl(p,h,r,_.canvas,function(t){!c.prepareFrame(g,e)||!c.replayGroupChanged&&ur(f,y)||(_.canvas.width=g.size[0]*r,_.canvas.height=g.size[1]*r,c.compose(_,g,e),f=y,t())})}else i=l.getImage(p,h,r,d);i&&this.loadImage(i)&&(this.image_=i,this.skippedFeatures_=f)}if(this.image_){var v=(i=this.image_).getExtent(),m=i.getResolution(),x=i.getPixelRatio(),S=r*m/(h*x),E=Se(this.imageTransform_,r*n[0]/2,r*n[1]/2,S,S,0,x*(v[0]-a[0])/m,x*(a[1]-v[3])/m);Se(this.coordinateToCanvasPixelTransform,r*n[0]/2-E[4],r*n[1]/2-E[5],r/h,-r/h,0,-a[0],-a[1]),this.renderedResolution=m*r/x}return!!this.image_},e.prototype.forEachFeatureAtCoordinate=function(e,i,r,n,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,i,r,n,o):t.prototype.forEachFeatureAtCoordinate.call(this,e,i,r,n,o)},e}(El);Cl.handles=function(t){return t.getType()===Ba.IMAGE||t.getType()===Ba.VECTOR&&"image"===t.getRenderMode()},Cl.create=function(t,e){return new Cl(e)};var Tl=function(t,e,i,r){this.minX=t,this.maxX=e,this.minY=i,this.maxY=r};function wl(t,e,i,r,n){return void 0!==n?(n.minX=t,n.maxX=e,n.minY=i,n.maxY=r,n):new Tl(t,e,i,r)}Tl.prototype.contains=function(t){return this.containsXY(t[1],t[2])},Tl.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},Tl.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},Tl.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},Tl.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},Tl.prototype.getHeight=function(){return this.maxY-this.minY+1},Tl.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},Tl.prototype.getWidth=function(){return this.maxX-this.minX+1},Tl.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY};var Rl=function(t){function i(e,i){t.call(this,e),this.context=i?null:Ae(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new Tl(0,0,0,0),this.imageTransform_=[1,0,0,1,0,0],this.zDirection=0}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.isDrawableTile_=function(t){var e=t.getState(),i=this.getLayer().getUseInterimTilesOnError();return e==bn||e==Fn||3==e&&!i},i.prototype.getTile=function(t,e,i,r,n){var o=this.getLayer(),s=o.getSource().getTile(t,e,i,r,n);return 3==s.getState()&&(o.getUseInterimTilesOnError()?0<o.getPreload()&&(this.newTiles_=!0):s.setState(bn)),this.isDrawableTile_(s)||(s=s.getInterimTile()),s},i.prototype.prepareFrame=function(t,i){var r=t.pixelRatio,n=t.size,o=t.viewState,s=o.projection,a=o.resolution,h=o.center,l=this.getLayer(),u=l.getSource(),c=u.getRevision(),p=u.getTileGridForProjection(s),d=p.getZForResolution(a,this.zDirection),f=p.getResolution(d),_=Math.round(a/f)||1,g=t.extent;if(void 0!==i.extent&&(g=lt(g,i.extent)),ft(g))return!1;var y=p.getTileRangeForExtentAndZ(g,d),v=p.getTileRangeExtent(d,y),m=u.getTilePixelRatio(r),x={};x[d]={};var S,E,C,T=this.createLoadedTileFinder(u,s,x),w=t.viewHints,R=w[Yo.ANIMATING]||w[Yo.INTERACTING],I=this.tmpExtent,L=this.tmpTileRange_;for(this.newTiles_=!1,E=y.minX;E<=y.maxX;++E)for(C=y.minY;C<=y.maxY;++C)if(!(16<Date.now()-t.time&&R)){if(S=this.getTile(d,E,C,r,s),this.isDrawableTile_(S)){var b=e(this);if(S.getState()==bn){var F=(x[d][S.tileCoord.toString()]=S).inTransition(b);this.newTiles_||!F&&-1!==this.renderedTiles.indexOf(S)||(this.newTiles_=!0)}if(1===S.getAlpha(b,t.time))continue}var P=p.getTileCoordChildTileRange(S.tileCoord,L,I),M=!1;P&&(M=T(d+1,P)),M||p.forEachTileCoordParentTileRange(S.tileCoord,T,null,L,I)}var O=f*r/m*_;if(!(this.renderedResolution&&16<Date.now()-t.time&&R)&&(this.newTiles_||!this.renderedExtent_||!X(this.renderedExtent_,g)||this.renderedRevision!=c||_!=this.oversampling_||!R&&O!=this.renderedResolution)){var N=this.context;if(N){var A=u.getTilePixelSize(d,r,s),G=Math.round(y.getWidth()*A[0]/_),k=Math.round(y.getHeight()*A[1]/_),D=N.canvas;D.width!=G||D.height!=k?(this.oversampling_=_,D.width=G,D.height=k):(this.renderedExtent_&&!J(v,this.renderedExtent_)&&N.clearRect(0,0,G,k),_=this.oversampling_)}this.renderedTiles.length=0;var j,U,Y,B,z,V,W,K,H,Z,q=Object.keys(x).map(Number);for(q.sort(function(t,e){return t===d?1:e===d?-1:e<t?1:t<e?-1:0}),B=0,z=q.length;B<z;++B)for(var Q in Y=q[B],U=u.getTilePixelSize(Y,r,s),j=p.getResolution(Y)/f,W=m*u.getGutterForProjection(s),K=x[Y])S=K[Q],E=((V=p.getTileCoordExtent(S.getTileCoord(),I))[0]-v[0])/f*m/_,C=(v[3]-V[3])/f*m/_,H=U[0]*j/_,Z=U[1]*j/_,this.drawTileImage(S,t,i,E,C,H,Z,W,d===Y),this.renderedTiles.push(S);this.renderedRevision=c,this.renderedResolution=f*r/m*_,this.renderedExtent_=v}var $=this.renderedResolution/a,tt=Se(this.imageTransform_,r*n[0]/2,r*n[1]/2,$,$,0,(this.renderedExtent_[0]-h[0])/this.renderedResolution*r,(h[1]-this.renderedExtent_[3])/this.renderedResolution*r);return Se(this.coordinateToCanvasPixelTransform,r*n[0]/2-tt[4],r*n[1]/2-tt[5],r/a,-r/a,0,-h[0],-h[1]),this.updateUsedTiles(t.usedTiles,u,d,y),this.manageTilePyramid(t,u,p,r,s,g,d,l.getPreload()),this.scheduleExpireCache(t,u),0<this.renderedTiles.length},i.prototype.drawTileImage=function(t,i,r,n,o,s,a,h,l){var u=t.getImage(this.getLayer());if(u){var c=e(this),p=l?t.getAlpha(c,i.time):1;1!==p||this.getLayer().getSource().getOpaque(i.viewState.projection)||this.context.clearRect(n,o,s,a);var d=p!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(u,h,h,u.width-2*h,u.height-2*h,n,o,s,a),d&&this.context.restore(),1!==p?i.animate=!0:l&&t.endTransition(c)}},i.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},i.prototype.getImageTransform=function(){return this.imageTransform_},i}(El);Rl.handles=function(t){return t.getType()===Ba.TILE},Rl.create=function(t,e){return new Rl(e)},Rl.prototype.getLayer;var Il=function(){};Il.prototype.getReplay=function(t,e){},Il.prototype.isEmpty=function(){};var Ll={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function bl(t,e,i,r,n,o,s,a){for(var h,l,u,c=[],p=t[e]>t[i-r],d=n.length,f=t[e],_=t[e+1],g=t[e+=r],y=t[e+1],v=0,m=Math.sqrt(Math.pow(g-f,2)+Math.pow(y-_,2)),x="",S=0,E=0;E<d;++E){l=p?d-E-1:E;var C=n.charAt(l),T=o(x=p?C+x:x+C)-S;S+=T;for(var w=s+T/2;e<i-r&&v+m<w;)f=g,_=y,g=t[e+=r],y=t[e+1],v+=m,m=Math.sqrt(Math.pow(g-f,2)+Math.pow(y-_,2));var R=w-v,I=Math.atan2(y-_,g-f);if(p&&(I+=0<I?-Math.PI:Math.PI),void 0!==u){var L=I-u;if(L+=L>Math.PI?-2*Math.PI:L<-Math.PI?2*Math.PI:0,Math.abs(L)>a)return null}var b=R/m,F=Rt(f,g,b),P=Rt(_,y,b);u==I?(p&&(h[0]=F,h[1]=P,h[2]=T/2),h[4]=x):(h=[F,P,(S=T)/2,I,x=C],p?c.unshift(h):c.push(h),u=I),s+=T}return c}var Fl=[8],Pl=[12],Ml=[1],Ol=[3],Nl=[Ll.POLYGON,Ll.CIRCLE,Ll.LINE_STRING,Ll.IMAGE,Ll.TEXT,Ll.DEFAULT],Al={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},Gl=[1/0,1/0,-1/0,-1/0],kl=[1,0,0,1,0,0],Dl=function(t){function i(e,i,r,n,o,s){t.call(this),this.declutterTree=s,this.tolerance=e,this.maxExtent=i,this.overlaps=o,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=r,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.replayTextBackground_=function(t,e,i,r,n,o,s){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},i.prototype.replayImage_=function(t,e,i,r,n,o,s,a,h,l,u,c,p,d,f,_,g,y){var v=g||y;e-=n*=p,i-=o*=p;var m,x,S,E,C=f+l>r.width?r.width-l:f,T=a+u>r.height?r.height-u:a,w=_[3]+C*p+_[1],R=_[0]+T*p+_[2],I=e-_[3],L=i-_[0];(v||0!==c)&&(m=[I,L],x=[I+w,L],S=[I+w,L+R],E=[I,L+R]);var b=null;if(0!==c){var F=e+n,P=i+o;b=Se(kl,F,P,1,1,c,-F,-P),H(Gl),$(Gl,ye(kl,m)),$(Gl,ye(kl,x)),$(Gl,ye(kl,S)),$(Gl,ye(kl,E))}else K(I,L,I+w,L+R,Gl);var M=t.canvas,O=y?y[2]*p/2:0,N=Gl[0]-O<=M.width&&0<=Gl[2]+O&&Gl[1]-O<=M.height&&0<=Gl[3]+O;if(d&&(e=Math.round(e),i=Math.round(i)),s){if(!N&&1==s[4])return;Q(s,Gl);var A=N?[t,b?b.slice(0):null,h,r,l,u,C,T,e,i,p]:null;A&&v&&A.push(g,y,m,x,S,E),s.push(A)}else N&&(v&&this.replayTextBackground_(t,m,x,S,E,g,y),ki(t,b,h,r,l,u,C,T,e,i,p))},i.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},i.prototype.appendFlatCoordinates=function(t,e,i,r,n,o){var s=this.coordinates.length,a=this.getBufferedMaxExtent();o&&(e+=r);var h,l,u,c=[t[e],t[e+1]],p=[NaN,NaN],d=!0;for(h=e+r;h<i;h+=r)p[0]=t[h],p[1]=t[h+1],(u=V(a,p))!==l?(d&&(this.coordinates[s++]=c[0],this.coordinates[s++]=c[1]),this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],d=!1):u===k.INTERSECTING?(this.coordinates[s++]=p[0],this.coordinates[s++]=p[1],d=!1):d=!0,c[0]=p[0],c[1]=p[1],l=u;return(n&&d||h===e+r)&&(this.coordinates[s++]=c[0],this.coordinates[s++]=c[1]),s},i.prototype.drawCustomCoordinates_=function(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){var a=i[o],h=this.appendFlatCoordinates(t,e,a,r,!1,!1);n.push(h),e=a}return e},i.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var r,n,o,s,a,h=t.getType(),l=t.getStride(),u=this.coordinates.length;if(h==It.MULTI_POLYGON){r=(t=t).getOrientedFlatCoordinates(),s=[];for(var c=t.getEndss(),p=a=0,d=c.length;p<d;++p){var f=[];a=this.drawCustomCoordinates_(r,a,c[p],l,f),s.push(f)}this.instructions.push([4,u,s,t,i,Lr])}else h==It.POLYGON||h==It.MULTI_LINE_STRING?(o=[],r=h==It.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),a=this.drawCustomCoordinates_(r,0,t.getEnds(),l,o),this.instructions.push([4,u,o,t,i,Ir])):h==It.LINE_STRING||h==It.MULTI_POINT?(r=t.getFlatCoordinates(),n=this.appendFlatCoordinates(r,0,r.length,l,!1,!1),this.instructions.push([4,u,n,t,i,Rr])):h==It.POINT&&(r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),n=this.coordinates.length,this.instructions.push([4,u,n,t,i]));this.endGeometry(t,e)},i.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[0,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[0,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},i.prototype.fill_=function(t){if(this.alignFill_){var e=ye(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,Gi)},i.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],oi&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},i.prototype.renderDeclutter_=function(t,e){if(t&&5<t.length){var i=t[4];if(1==i||i==t.length-5){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(r)){this.declutterTree.insert(r);for(var n=5,o=t.length;n<o;++n){var s=t[n];s&&(11<s.length&&this.replayTextBackground_(s[0],s[13],s[14],s[15],s[16],s[11],s[12]),ki.apply(void 0,s))}}t.length=5,H(t)}}},i.prototype.replay_=function(t,i,r,n,o,s,a){var h,u=this;this.pixelCoordinates_&&ur(i,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=yt(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),ge(this.renderedTransform_,i));for(var c,p,d,f,_,g,y,v,m,x,S,E,C=!l(r),T=0,w=n.length,R=0,I=0,L=0,b=null,F=null,P=this.coordinateCache_,M=this.viewRotation_,O={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:M},N=this.instructions!=n||this.overlaps?0:200;T<w;){var A=n[T];switch(A[0]){case 0:x=A[1],C&&r[e(x).toString()]||!x.getGeometry()?T=A[2]:void 0===a||dt(a,x.getGeometry().getExtent())?++T:T=A[2]+1;break;case 1:N<I&&(u.fill_(t),I=0),N<L&&(t.stroke(),L=0),I||L||(t.beginPath(),f=_=NaN),++T;break;case 2:var G=h[R=A[1]],k=h[R+1],D=h[R+2]-G,j=h[R+3]-k,U=Math.sqrt(D*D+j*j);t.moveTo(G+U,k),t.arc(G,k,U,0,2*Math.PI,!0),++T;break;case 3:t.closePath(),++T;break;case 4:R=A[1],c=A[2];var Y=A[3],B=A[4],X=6==A.length?A[5]:void 0;O.geometry=Y,O.feature=x,T in P||(P[T]=[]);var z=P[T];X?X(h,R,c,2,z):(z[0]=h[R],z[1]=h[R+1],z.length=2),B(z,O),++T;break;case 6:R=A[1],c=A[2],m=A[3],p=A[4],d=A[5],v=s?null:A[6];var V=A[7],W=A[8],K=A[9],H=A[10],Z=A[11],q=A[12],J=A[13],Q=A[14],$=void 0,tt=void 0,et=void 0;for(16<A.length?($=A[15],tt=A[16],et=A[17]):($=Ti,tt=et=!1),Z&&(q+=M);R<c;R+=2)u.replayImage_(t,h[R],h[R+1],m,p,d,v,V,W,K,H,q,J,o,Q,$,tt?b:null,et?F:null);u.renderDeclutter_(v,x),++T;break;case 5:var it=A[1],rt=A[2],nt=A[3];v=s?null:A[4];var ot=A[5],st=A[6],at=A[7],ht=A[8],lt=A[9],ut=A[10],ct=A[11],pt=A[12],ft=A[13],_t=A[14],gt=gn(h,it,rt,2),vt=ht(pt);if(ot||vt<=gt){var mt=u.textStates[ft].textAlign,xt=bl(h,it,rt,2,pt,ht,(gt-vt)*Al[mt],at);if(xt){var St=void 0,Et=void 0,Ct=void 0,Tt=void 0,wt=void 0;if(ut)for(St=0,Et=xt.length;St<Et;++St)Ct=(wt=xt[St])[4],Tt=u.getImage(Ct,ft,"",ut),p=wt[2]+ct,d=nt*Tt.height+2*(.5-nt)*ct-lt,u.replayImage_(t,wt[0],wt[1],Tt,p,d,v,Tt.height,1,0,0,wt[3],_t,!1,Tt.width,Ti,null,null);if(st)for(St=0,Et=xt.length;St<Et;++St)Ct=(wt=xt[St])[4],Tt=u.getImage(Ct,ft,st,""),p=wt[2],d=nt*Tt.height-lt,u.replayImage_(t,wt[0],wt[1],Tt,p,d,v,Tt.height,1,0,0,wt[3],_t,!1,Tt.width,Ti,null,null)}}u.renderDeclutter_(v,x),++T;break;case 7:if(void 0!==s){var Rt=s(x=A[1]);if(Rt)return Rt}++T;break;case 8:N?I++:u.fill_(t),++T;break;case 9:for(R=A[1],c=A[2],S=h[R],y=(E=h[R+1])+.5|0,(g=S+.5|0)===f&&y===_||(t.moveTo(S,E),f=g,_=y),R+=2;R<c;R+=2)g=(S=h[R])+.5|0,y=(E=h[R+1])+.5|0,R!=c-2&&g===f&&y===_||(t.lineTo(S,E),f=g,_=y);++T;break;case 10:b=A,u.alignFill_=A[2],I&&(u.fill_(t),I=0,L&&(t.stroke(),L=0)),t.fillStyle=A[1],++T;break;case 11:F=A,L&&(t.stroke(),L=0),u.setStrokeStyle_(t,A),++T;break;case 12:N?L++:t.stroke(),++T;break;default:++T}}I&&this.fill_(t),L&&t.stroke()},i.prototype.replay=function(t,e,i,r,n){this.viewRotation_=i,this.replay_(t,e,r,this.instructions,n,void 0,void 0)},i.prototype.replayHitDetection=function(t,e,i,r,n,o){return this.viewRotation_=i,this.replay_(t,e,r,this.hitDetectionInstructions,!0,n,o)},i.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,r,n=e.length,o=-1;for(t=0;t<n;++t)7==(r=(i=e[t])[0])?o=t:0==r&&(i[2]=t,ar(this.hitDetectionInstructions,o,t),o=-1)},i.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var r=t.getColor();i.fillStyle=Ne(r||vi)}else i.fillStyle=void 0;if(e){var n=e.getColor();i.strokeStyle=Ne(n||Ei);var o=e.getLineCap();i.lineCap=void 0!==o?o:mi;var s=e.getLineDash();i.lineDash=s?s.slice():xi;var a=e.getLineDashOffset();i.lineDashOffset=a||0;var h=e.getLineJoin();i.lineJoin=void 0!==h?h:Si;var l=e.getWidth();i.lineWidth=void 0!==l?l:1;var u=e.getMiterLimit();i.miterLimit=void 0!==u?u:10,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},i.prototype.createFill=function(t,e){var i=t.fillStyle,r=[10,i];return"string"!=typeof i&&r.push(!0),r},i.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},i.prototype.createStroke=function(t){return[11,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},i.prototype.updateFillStyle=function(t,e,i){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(e.call(this,t,i)),t.currentFillStyle=r)},i.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,r=t.lineCap,n=t.lineDash,o=t.lineDashOffset,s=t.lineJoin,a=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=r||n!=t.currentLineDash&&!ur(t.currentLineDash,n)||t.currentLineDashOffset!=o||t.currentLineJoin!=s||t.currentLineWidth!=a||t.currentMiterLimit!=h)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=n,t.currentLineDashOffset=o,t.currentLineJoin=s,t.currentLineWidth=a,t.currentMiterLimit=h)},i.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[7,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},i.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=U(this.maxExtent),0<this.maxLineWidth)){var t=this.resolution*(this.maxLineWidth+1)/2;j(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},i}(ul);Dl.prototype.finish=E;var jl=function(t){function e(e,i,r,n,o,s){t.call(this,e,i,r,n,o,s),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.drawCoordinates_=function(t,e,i,r){return this.appendFlatCoordinates(t,e,i,r,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,r);this.instructions.push([6,n,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([6,n,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,r);this.instructions.push([6,n,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([6,n,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),r=t.getSize(),n=t.getHitDetectionImage(1),o=t.getImage(1),s=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroup_=e,this.hitDetectionImage_=n,this.image_=o,this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=r[0]},e}(Dl),Ul=function(t){function e(e,i,r,n,o,s){t.call(this,e,i,r,n,o,s)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.drawFlatCoordinates_=function(t,e,i,r){var n=[9,this.coordinates.length,this.appendFlatCoordinates(t,e,i,r,!1,!1)];return this.instructions.push(n),this.hitDetectionInstructions.push(n),i},e.prototype.drawLineString=function(t,e){var i=this.state,r=i.strokeStyle,n=i.lineWidth;if(void 0!==r&&void 0!==n){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([11,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Ml);var o=t.getFlatCoordinates(),s=t.getStride();this.drawFlatCoordinates_(o,0,o.length,s),this.hitDetectionInstructions.push(Pl),this.endGeometry(t,e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,r=i.strokeStyle,n=i.lineWidth;if(void 0!==r&&void 0!==n){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([11,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Ml);for(var o=t.getEnds(),s=t.getFlatCoordinates(),a=t.getStride(),h=0,l=0,u=o.length;l<u;++l)h=this.drawFlatCoordinates_(s,h,o[l],a);this.hitDetectionInstructions.push(Pl),this.endGeometry(t,e)}},e.prototype.finish=function(){var t=this.state;null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Pl),this.reverseHitDetectionInstructions(),this.state=null},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Pl),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(Ml)},e}(Dl),Yl=function(t){function e(e,i,r,n,o,s){t.call(this,e,i,r,n,o,s)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.drawFlatCoordinatess_=function(t,e,i,r){var n=this.state,o=void 0!==n.fillStyle,s=null!=n.strokeStyle,a=i.length;this.instructions.push(Ml),this.hitDetectionInstructions.push(Ml);for(var h=0;h<a;++h){var l=i[h],u=[9,this.coordinates.length,this.appendFlatCoordinates(t,e,l,r,!0,!s)];this.instructions.push(u),this.hitDetectionInstructions.push(u),s&&(this.instructions.push(Ol),this.hitDetectionInstructions.push(Ol)),e=l}return o&&(this.instructions.push(Fl),this.hitDetectionInstructions.push(Fl)),s&&(this.instructions.push(Pl),this.hitDetectionInstructions.push(Pl)),e},e.prototype.drawCircle=function(t,e){var i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0!==r||void 0!==n){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([10,Ie(vi)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([11,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),s=t.getStride(),a=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,s,!1,!1);var h=[2,a];this.instructions.push(Ml,h),this.hitDetectionInstructions.push(Ml,h),this.hitDetectionInstructions.push(Fl),void 0!==i.fillStyle&&this.instructions.push(Fl),void 0!==i.strokeStyle&&(this.instructions.push(Pl),this.hitDetectionInstructions.push(Pl)),this.endGeometry(t,e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0!==r||void 0!==n){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([10,Ie(vi)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([11,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),s=t.getOrientedFlatCoordinates(),a=t.getStride();this.drawFlatCoordinatess_(s,0,o,a),this.endGeometry(t,e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0!==r||void 0!==n){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([10,Ie(vi)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([11,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),s=t.getOrientedFlatCoordinates(),a=t.getStride(),h=0,l=0,u=o.length;l<u;++l)h=this.drawFlatCoordinatess_(s,h,o[l],a);this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,i=0,r=e.length;i<r;++i)e[i]=Fr(e[i],t)},e.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},e}(Dl);function Bl(t,e,i,r,n){var o,s,a,h,l,u,c,p,d,f=i,_=i,g=0,y=0,v=i;for(o=i;o<r;o+=n){var m=e[o],x=e[o+1];void 0!==h&&(p=m-h,d=x-l,a=Math.sqrt(p*p+d*d),void 0!==u&&(y+=s,t<Math.acos((u*p+c*d)/(s*a))&&(g<y&&(g=y,f=v,_=o),y=0,v=o-n)),s=a,u=p,c=d),h=m,l=x}return g<(y+=a)?[v,o]:[f,_]}var Xl={Circle:Yl,Default:Dl,Image:jl,LineString:Ul,Polygon:Yl,Text:function(t){function i(e,i,r,n,o,s){t.call(this,e,i,r,n,o,s),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},wi.prune()}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.drawText=function(t,e){var i=this.textFillState_,r=this.textStrokeState_,n=this.textState_;if(""!==this.text_&&n&&(i||r)){var o,s,a=this.coordinates.length,h=t.getType(),l=null,u=2,c=2;if("line"===n.placement){if(!dt(this.getBufferedMaxExtent(),t.getExtent()))return;var p;if(l=t.getFlatCoordinates(),c=t.getStride(),h==It.LINE_STRING)p=[l.length];else if(h==It.MULTI_LINE_STRING)p=t.getEnds();else if(h==It.POLYGON)p=t.getEnds().slice(0,1);else if(h==It.MULTI_POLYGON){var d=t.getEndss();for(p=[],o=0,s=d.length;o<s;++o)p.push(d[o][0])}this.beginGeometry(t,e);for(var f,_=n.textAlign,g=0,y=0,v=p.length;y<v;++y){if(null==_){var m=Bl(n.maxAngle,l,g,p[y],c);g=m[0],f=m[1]}else f=p[y];for(o=g;o<f;o+=c)this.coordinates.push(l[o],l[o+1]);u=this.coordinates.length,g=p[y],this.drawChars_(a,u,this.declutterGroup_),a=u}this.endGeometry(t,e)}else{var x=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),S=x.width/this.pixelRatio;switch(h){case It.POINT:case It.MULTI_POINT:u=(l=t.getFlatCoordinates()).length;break;case It.LINE_STRING:l=t.getFlatMidpoint();break;case It.CIRCLE:l=t.getCenter();break;case It.MULTI_LINE_STRING:u=(l=t.getFlatMidpoints()).length;break;case It.POLYGON:if(l=t.getFlatInteriorPoint(),!n.overflow&&l[2]/this.resolution<S)return;c=3;break;case It.MULTI_POLYGON:var E=t.getFlatInteriorPoints();for(l=[],o=0,s=E.length;o<s;o+=3)(n.overflow||E[o+2]/this.resolution>=S)&&l.push(E[o],E[o+1]);if(0==(u=l.length))return}u=this.appendFlatCoordinates(l,0,u,c,!1,!1),(n.backgroundFill||n.backgroundStroke)&&(this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke),n.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),n.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(x,a,u),this.endGeometry(t,e)}}},i.prototype.getImage=function(t,e,i,r){var n,o=r+e+t+i+this.pixelRatio;if(!wi.containsKey(o)){var s=r?this.strokeStates[r]||this.textStrokeState_:null,a=i?this.fillStates[i]||this.textFillState_:null,h=this.textStates[e]||this.textState_,l=this.pixelRatio,u=h.scale*l,c=Al[h.textAlign||Ci],p=r&&s.lineWidth?s.lineWidth:0,d=t.split("\n"),f=d.length,_=[],g=function(t,e,i){for(var r=e.length,n=0,o=0;o<r;++o){var s=Ni(t,e[o]);n=Math.max(n,s),i.push(s)}return n}(h.font,d,_),y=Oi(h.font),v=y*f,m=g+p,x=Ae(Math.ceil(m*u),Math.ceil((v+p)*u));n=x.canvas,wi.set(o,n),1!=u&&x.scale(u,u),x.font=h.font,r&&(x.strokeStyle=s.strokeStyle,x.lineWidth=p,x.lineCap=s.lineCap,x.lineJoin=s.lineJoin,x.miterLimit=s.miterLimit,oi&&s.lineDash.length&&(x.setLineDash(s.lineDash),x.lineDashOffset=s.lineDashOffset)),i&&(x.fillStyle=a.fillStyle),x.textBaseline="middle",x.textAlign="center";var S,E=.5-c,C=c*n.width/u+E*p;if(r)for(S=0;S<f;++S)x.strokeText(d[S],C+E*_[S],.5*(p+y)+S*y);if(i)for(S=0;S<f;++S)x.fillText(d[S],C+E*_[S],.5*(p+y)+S*y)}return wi.get(o)},i.prototype.drawTextImage_=function(t,e,i){var r=this.textState_,n=this.textStrokeState_,o=this.pixelRatio,s=Al[r.textAlign||Ci],a=Al[r.textBaseline],h=n&&n.lineWidth?n.lineWidth:0,l=s*t.width/o+2*(.5-s)*h,u=a*t.height/o+2*(.5-a)*h;this.instructions.push([6,e,i,t,(l-this.textOffsetX_)*o,(u-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,t.width,r.padding==Ti?Ti:r.padding.map(function(t){return t*o}),!!r.backgroundFill,!!r.backgroundStroke]),this.hitDetectionInstructions.push([6,e,i,t,(l-this.textOffsetX_)*o,(u-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/o,t.width,r.padding,!!r.backgroundFill,!!r.backgroundStroke])},i.prototype.drawChars_=function(t,e,i){var r=this.textStrokeState_,n=this.textState_,o=this.textFillState_,s=this.strokeKey_;r&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:r.strokeStyle,lineCap:r.lineCap,lineDashOffset:r.lineDashOffset,lineWidth:r.lineWidth,lineJoin:r.lineJoin,miterLimit:r.miterLimit,lineDash:r.lineDash}));var a=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:n.font,textAlign:n.textAlign||Ci,scale:n.scale});var h=this.fillKey_;o&&(h in this.fillStates||(this.fillStates[h]={fillStyle:o.fillStyle}));var l=this.pixelRatio,u=Al[n.textBaseline],c=this.textOffsetY_*l,p=this.text_,d=n.font,f=n.scale,_=r?r.lineWidth*f/2:0,g=this.widths_[d];g||(this.widths_[d]=g={}),this.instructions.push([5,t,e,u,i,n.overflow,h,n.maxAngle,function(t){var e=g[t];return e||(e=g[t]=Ni(d,t)),e*f*l},c,s,_*l,p,a,1]),this.hitDetectionInstructions.push([5,t,e,u,i,n.overflow,h,n.maxAngle,function(t){var e=g[t];return e||(e=g[t]=Ni(d,t)),e*f},c,s,_,p,a,1/l])},i.prototype.setTextStyle=function(t,i){var r,n,o;if(t){this.declutterGroup_=i;var s=t.getFill();s?((n=this.textFillState_)||(n=this.textFillState_={}),n.fillStyle=Ne(s.getColor()||vi)):n=this.textFillState_=null;var a=t.getStroke();if(a){(o=this.textStrokeState_)||(o=this.textStrokeState_={});var h=a.getLineDash(),l=a.getLineDashOffset(),u=a.getWidth(),c=a.getMiterLimit();o.lineCap=a.getLineCap()||mi,o.lineDash=h?h.slice():xi,o.lineDashOffset=void 0===l?0:l,o.lineJoin=a.getLineJoin()||Si,o.lineWidth=void 0===u?1:u,o.miterLimit=void 0===c?10:c,o.strokeStyle=Ne(a.getColor()||Ei)}else o=this.textStrokeState_=null;r=this.textState_;var p=t.getFont()||yi;bi(p);var d=t.getScale();r.overflow=t.getOverflow(),r.font=p,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.textBaseline=t.getTextBaseline()||"middle",r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||Ti,r.scale=void 0===d?1:d;var f=t.getOffsetX(),_=t.getOffsetY(),g=t.getRotateWithView(),y=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===_?0:_,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0===y?0:y,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:e(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+e(n.fillStyle):""}else this.text_=""},i}(Dl)},zl=function(t){function e(e,i,r,n,o,s,a){t.call(this),this.declutterTree_=s,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=i,this.overlaps_=o,this.pixelRatio_=n,this.resolution_=r,this.renderBuffer_=a,this.replaysByZIndex_={},this.hitDetectionContext_=Ae(1,1),this.hitDetectionTransform_=[1,0,0,1,0,0]}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=[1/0,1/0,-1/0,-1/0]).push(1)),e},e.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},e.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var i=this.replaysByZIndex_[e],r=0,n=t.length;r<n;++r)if(t[r]in i)return!0;return!1},e.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e=this.replaysByZIndex_[t];for(var i in e)e[i].finish()}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n,o,s){var a,h=2*(r=Math.round(r))+1,l=Se(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-i,-t[0],-t[1]),u=this.hitDetectionContext_;u.canvas.width!==h||u.canvas.height!==h?(u.canvas.width=h,u.canvas.height=h):u.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&($(a=[1/0,1/0,-1/0,-1/0],t),j(a,e*(this.renderBuffer_+r),a));var c,p,d=function(t){if(void 0!==Vl[t])return Vl[t];for(var e=2*t+1,i=new Array(e),r=0;r<e;r++)i[r]=new Array(e);for(var n=t,o=0,s=0;o<=n;)Wl(i,t+n,t+o),Wl(i,t+o,t+n),Wl(i,t-o,t+n),Wl(i,t-n,t+o),Wl(i,t-n,t-o),Wl(i,t-o,t-n),Wl(i,t+o,t-n),Wl(i,t+n,t-o),0<2*((s+=1+2*++o)-n)+1&&(s+=1-2*(n-=1));return Vl[t]=i}(r);function f(t){for(var e=u.getImageData(0,0,h,h).data,i=0;i<h;i++)for(var r=0;r<h;r++)if(d[i][r]&&0<e[4*(r*h+i)+3]){var n=void 0;return(!c||p!=Ll.IMAGE&&p!=Ll.TEXT||-1!==c.indexOf(t))&&(n=o(t)),n||void u.clearRect(0,0,h,h)}}this.declutterTree_&&(c=this.declutterTree_.all().map(function(t){return t.value}));var _,g,y,v,m,x=Object.keys(this.replaysByZIndex_).map(Number);for(x.sort(nr),_=x.length-1;0<=_;--_){var S=x[_].toString();for(y=this.replaysByZIndex_[S],g=Nl.length-1;0<=g;--g)if(void 0!==(v=y[p=Nl[g]]))if(!s||p!=Ll.IMAGE&&p!=Ll.TEXT){if(m=v.replayHitDetection(u,l,i,n,f,a))return m}else{var E=s[S];E?E.push(v,l.slice(0)):s[S]=[v,l.slice(0)]}}},e.prototype.getClipCoords=function(t){var e=this.maxExtent_,i=e[0],r=e[1],n=e[2],o=e[3],s=[i,r,i,o,n,o,n,r];return yt(s,0,8,2,t,s),s},e.prototype.getReplay=function(t,e){var i=void 0!==t?t.toString():"0",r=this.replaysByZIndex_[i];void 0===r&&(r={},this.replaysByZIndex_[i]=r);var n=r[e];return void 0===n&&(n=new Xl[e](this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),r[e]=n),n},e.prototype.getReplays=function(){return this.replaysByZIndex_},e.prototype.isEmpty=function(){return l(this.replaysByZIndex_)},e.prototype.replay=function(t,e,i,r,n,o,s){var a=Object.keys(this.replaysByZIndex_).map(Number);a.sort(nr),t.save(),this.clip(t,e);var h,l,u,c,p,d,f=o||Nl;for(h=0,l=a.length;h<l;++h){var _=a[h].toString();for(p=this.replaysByZIndex_[_],u=0,c=f.length;u<c;++u){var g=f[u];if(void 0!==(d=p[g]))if(!s||g!=Ll.IMAGE&&g!=Ll.TEXT)d.replay(t,e,i,r,n);else{var y=s[_];y?y.push(d,e.slice(0)):s[_]=[d,e.slice(0)]}}}t.restore()},e}(Il),Vl={0:[[!0]]};function Wl(t,e,i){var r,n=Math.floor(t.length/2);if(n<=e)for(r=n;r<e;r++)t[r][i]=!0;else if(e<n)for(r=e+1;r<n;r++)t[r][i]=!0}var Kl=.5,Hl={Point:function(t,e,i,r){var n=i.getImage();if(n){if(n.getImageState()!=ui.LOADED)return;var o=t.getReplay(i.getZIndex(),Ll.IMAGE);o.setImageStyle(n,t.addDeclutter(!1)),o.drawPoint(e,r)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),Ll.TEXT);a.setTextStyle(s,t.addDeclutter(!!n)),a.drawText(e,r)}},LineString:function(t,e,i,r){var n=i.getStroke();if(n){var o=t.getReplay(i.getZIndex(),Ll.LINE_STRING);o.setFillStrokeStyle(null,n),o.drawLineString(e,r)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),Ll.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,r)}},Polygon:function(t,e,i,r){var n=i.getFill(),o=i.getStroke();if(n||o){var s=t.getReplay(i.getZIndex(),Ll.POLYGON);s.setFillStrokeStyle(n,o),s.drawPolygon(e,r)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),Ll.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,r)}},MultiPoint:function(t,e,i,r){var n=i.getImage();if(n){if(n.getImageState()!=ui.LOADED)return;var o=t.getReplay(i.getZIndex(),Ll.IMAGE);o.setImageStyle(n,t.addDeclutter(!1)),o.drawMultiPoint(e,r)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),Ll.TEXT);a.setTextStyle(s,t.addDeclutter(!!n)),a.drawText(e,r)}},MultiLineString:function(t,e,i,r){var n=i.getStroke();if(n){var o=t.getReplay(i.getZIndex(),Ll.LINE_STRING);o.setFillStrokeStyle(null,n),o.drawMultiLineString(e,r)}var s=i.getText();if(s){var a=t.getReplay(i.getZIndex(),Ll.TEXT);a.setTextStyle(s,t.addDeclutter(!1)),a.drawText(e,r)}},MultiPolygon:function(t,e,i,r){var n=i.getFill(),o=i.getStroke();if(o||n){var s=t.getReplay(i.getZIndex(),Ll.POLYGON);s.setFillStrokeStyle(n,o),s.drawMultiPolygon(e,r)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),Ll.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,r)}},GeometryCollection:function(t,e,i,r){var n,o,s=e.getGeometriesArray();for(n=0,o=s.length;n<o;++n){(0,Hl[s[n].getType()])(t,s[n],i,r)}},Circle:function(t,e,i,r){var n=i.getFill(),o=i.getStroke();if(n||o){var s=t.getReplay(i.getZIndex(),Ll.CIRCLE);s.setFillStrokeStyle(n,o),s.drawCircle(e,r)}var a=i.getText();if(a){var h=t.getReplay(i.getZIndex(),Ll.TEXT);h.setTextStyle(a,t.addDeclutter(!1)),h.drawText(e,r)}}};function Zl(t,i){return e(t)-e(i)}function ql(t,e){var i=Jl(t,e);return i*i}function Jl(t,e){return Kl*t/e}function Ql(t,e,i,r,n,o){var s=!1,a=i.getImage();if(a){var h=a.getImageState();h==ui.LOADED||h==ui.ERROR?a.unlistenImageChange(n,o):(h==ui.IDLE&&a.load(),h=a.getImageState(),a.listenImageChange(n,o),s=!0)}return function(t,e,i,r){var n=i.getGeometryFunction()(e);if(n){var o=n.getSimplifiedGeometry(r);if(i.getRenderer())!function t(e,i,r,n){if(i.getType()!=It.GEOMETRY_COLLECTION)e.getReplay(r.getZIndex(),Ll.DEFAULT).drawCustom(i,n,r.getRenderer());else for(var o=i.getGeometries(),s=0,a=o.length;s<a;++s)t(e,o[s],r,n)}(t,o,i,e);else(0,Hl[o.getType()])(t,o,i,e)}}(t,e,i,r),s}var $l=function(t){function i(e){t.call(this,e),this.declutterTree_=e.getDeclutter()?eh(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=Ae(),f(wi,R.CLEAR,this.handleFontsChanged_,this)}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.disposeInternal=function(){g(wi,R.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},i.prototype.compose=function(t,e,i){var r=e.extent,n=e.pixelRatio,o=i.managed?e.skippedFeatureUids:{},s=e.viewState,a=s.projection,h=s.rotation,l=a.getExtent(),u=this.getLayer().getSource(),c=this.getTransform(e,0),p=i.extent,d=void 0!==p;d&&this.clip(t,e,p);var f=this.replayGroup_;if(f&&!f.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var _,g=this.getLayer(),y=0,v=0,m=1!==i.opacity,x=g.hasListener(Sn);if(m||x){var S=t.canvas.width,E=t.canvas.height;if(h){var C=Math.round(Math.sqrt(S*S+E*E));y=(C-S)/2,v=(C-E)/2,S=E=C}this.context.canvas.width=S,this.context.canvas.height=E,_=this.context}else _=t;var T=_.globalAlpha;m||(_.globalAlpha=i.opacity),_!=t&&_.translate(y,v);var w=e.viewHints,R=!(w[Yo.ANIMATING]||w[Yo.INTERACTING]),I=e.size[0]*n,L=e.size[1]*n;if(Ai(_,-h,I/2,L/2),f.replay(_,c,h,o,R),u.getWrapX()&&a.canWrapX()&&!X(l,r)){for(var b,F=r[0],P=pt(l),M=0;F<l[0];)b=P*--M,c=this.getTransform(e,b),f.replay(_,c,h,o,R),F+=P;for(M=0,F=r[2];F>l[2];)b=P*++M,c=this.getTransform(e,b),f.replay(_,c,h,o,R),F-=P}if(Ai(_,h,I/2,L/2),x&&this.dispatchRenderEvent(_,e,c),_!=t){if(m){var O=t.globalAlpha;t.globalAlpha=i.opacity,t.drawImage(_.canvas,-y,-v),t.globalAlpha=O}else t.drawImage(_.canvas,-y,-v);_.translate(-y,-v)}m||(_.globalAlpha=T)}d&&t.restore()},i.prototype.composeFrame=function(t,e,i){var r=this.getTransform(t,0);this.preCompose(i,t,r),this.compose(i,t,e),this.postCompose(i,t,e,r)},i.prototype.forEachFeatureAtCoordinate=function(t,i,r,n,o){if(this.replayGroup_){var s=i.viewState.resolution,a=i.viewState.rotation,h=this.getLayer(),l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,s,a,r,{},function(t){var i=e(t).toString();if(!(i in l))return l[i]=!0,n.call(o,t,h)},null)}},i.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},i.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},i.prototype.prepareFrame=function(t,e){var i=this.getLayer(),r=i.getSource(),n=t.viewHints[Yo.ANIMATING],o=t.viewHints[Yo.INTERACTING],s=i.getUpdateWhileAnimating(),a=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&n||!a&&o)return!0;var h=t.extent,l=t.viewState,u=l.projection,c=l.resolution,p=t.pixelRatio,d=i.getRevision(),f=i.getRenderBuffer(),_=i.getRenderOrder();void 0===_&&(_=Zl);var g=j(h,f*c),y=l.projection.getExtent();if(r.getWrapX()&&l.projection.canWrapX()&&!X(y,t.extent)){var v=pt(y),m=Math.max(pt(g)/2,v);g[0]=y[0]-m,g[2]=y[2]+m}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==d&&this.renderedRenderOrder_==_&&X(this.renderedExtent_,g))return!(this.replayGroupChanged=!1);this.replayGroup_=null,this.dirty_=!1;var x=new zl(Jl(c,p),g,c,p,r.getOverlaps(),this.declutterTree_,i.getRenderBuffer());r.loadFeatures(g,c,u);var S=function(t){var e,r=t.getStyleFunction()||i.getStyleFunction();if(r&&(e=r(t,c)),e){var n=this.renderFeature(t,c,p,e,x);this.dirty_=this.dirty_||n}}.bind(this);if(_){var E=[];r.forEachFeatureInExtent(g,function(t){E.push(t)},this),E.sort(_);for(var C=0,T=E.length;C<T;++C)S(E[C])}else r.forEachFeatureInExtent(g,S,this);return x.finish(),this.renderedResolution_=c,this.renderedRevision_=d,this.renderedRenderOrder_=_,this.renderedExtent_=g,this.replayGroup_=x,this.replayGroupChanged=!0},i.prototype.renderFeature=function(t,e,i,r,n){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var s=0,a=r.length;s<a;++s)o=Ql(n,t,r[s],ql(e,i),this.handleStyleImageChange_,this)||o;else o=Ql(n,t,r,ql(e,i),this.handleStyleImageChange_,this);return o},i}(Sl);$l.handles=function(t){return t.getType()===Ba.VECTOR},$l.create=function(t,e){return new $l(e)};var tu="image",eu="hybrid",iu="vector",ru={image:[Ll.POLYGON,Ll.CIRCLE,Ll.LINE_STRING,Ll.IMAGE,Ll.TEXT],hybrid:[Ll.POLYGON,Ll.LINE_STRING]},nu={image:[Ll.DEFAULT],hybrid:[Ll.IMAGE,Ll.TEXT,Ll.DEFAULT],vector:Nl},ou=function(t){function i(e){t.call(this,e,!0),this.declutterTree_=e.getDeclutter()?eh(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=[1,0,0,1,0,0],this.zDirection=e.getRenderMode()==iu?1:0,f(wi,R.CLEAR,this.handleFontsChanged_,this)}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.disposeInternal=function(){g(wi,R.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},i.prototype.getTile=function(e,i,r,n,o){var s=t.prototype.getTile.call(this,e,i,r,n,o);return s.getState()===bn&&(this.createReplayGroup_(s,n,o),this.context&&this.renderTileImage_(s,n,o)),s},i.prototype.prepareFrame=function(e,i){var r=this.getLayer(),n=r.getRevision();if(this.renderedLayerRevision_!=n){this.renderedTiles.length=0;var o=r.getRenderMode();this.context||o==iu||(this.context=Ae()),this.context&&o==iu&&(this.context=null)}return this.renderedLayerRevision_=n,t.prototype.prepareFrame.call(this,e,i)},i.prototype.createReplayGroup_=function(t,e,i){var r=this,n=this.getLayer(),o=n.getRevision(),s=n.getRenderOrder()||null,a=t.getReplayState(n);if(a.dirty||a.renderedRevision!=o||a.renderedRenderOrder!=s){for(var h=n.getSource(),l=h.getTileGrid(),u=h.getTileGridForProjection(i).getResolution(t.tileCoord[0]),c=t.extent,p=function(o,p){var d=t.getTile(t.tileKeys[o]);if(d.getState()==bn){var f=d.tileCoord,_=l.getTileCoordExtent(f),g=lt(c,_),y=J(_,g)?null:j(g,n.getRenderBuffer()*u,r.tmpExtent),v=d.getProjection(),m=!1;ae(i,v)||(m=!0,d.setProjection(i)),a.dirty=!1;var x=new zl(0,g,u,e,h.getOverlaps(),r.declutterTree_,n.getRenderBuffer()),S=ql(u,e),E=function(t){var e,i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,u)),e){var r=this.renderFeature(t,S,e,x);this.dirty_=this.dirty_||r,a.dirty=a.dirty||r}},C=d.getFeatures();s&&s!==a.renderedRenderOrder&&C.sort(s);for(var T=0,w=C.length;T<w;++T){var R=C[T];m&&(v.getUnits()==Mt.TILE_PIXELS&&(v.setWorldExtent(_),v.setExtent(d.getExtent())),R.getGeometry().transform(v,i)),y&&!dt(y,R.getGeometry().getExtent())||E.call(r,R)}for(var I in x.finish(),x.getReplays());d.setReplayGroup(n,t.tileCoord.toString(),x)}},d=0,f=t.tileKeys.length;d<f;++d)p(d);a.renderedRevision=o,a.renderedRenderOrder=s}},i.prototype.forEachFeatureAtCoordinate=function(t,i,r,n,o){var s=i.viewState.resolution,a=i.viewState.rotation;r=null==r?0:r;var h,l,u,c,p,d=this.getLayer(),f={},_=this.renderedTiles;for(u=0,c=_.length;u<c;++u){var g=_[u];if(B(h=j(g.extent,r*s,h),t))for(var y=0,v=g.tileKeys.length;y<v;++y){var m=g.getTile(g.tileKeys[y]);m.getState()==bn&&(p=m.getReplayGroup(d,g.tileCoord.toString()),l=l||p.forEachFeatureAtCoordinate(t,s,a,r,{},function(t){var i=e(t).toString();if(!(i in f))return f[i]=!0,n.call(o,t,d)},null))}}return l},i.prototype.getReplayTransform_=function(t,e){var i=this.getLayer().getSource().getTileGrid(),r=t.tileCoord,n=i.getResolution(r[0]),o=e.viewState,s=e.pixelRatio,a=o.resolution/s,h=i.getTileCoordExtent(r,this.tmpExtent),l=o.center,u=ut(h),c=e.size,p=Math.round(s*c[0]/2),d=Math.round(s*c[1]/2);return Se(this.tmpTransform_,p,d,n/a,n/a,o.rotation,(u[0]-l[0])/n,(l[1]-u[1])/n)},i.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},i.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},i.prototype.postCompose=function(e,i,r){var n=this.getLayer(),o=n.getRenderMode();if(o!=tu){var s,a,h=n.getDeclutter()?{}:null,l=n.getSource(),u=nu[o],c=i.pixelRatio,p=i.viewState.rotation,d=i.size;p&&Ai(e,-p,s=Math.round(c*d[0]/2),a=Math.round(c*d[1]/2)),h&&this.declutterTree_.clear();for(var f=i.viewHints,_=!(f[Yo.ANIMATING]||f[Yo.INTERACTING]),g=this.renderedTiles,y=l.getTileGridForProjection(i.viewState.projection),v=[],m=[],x=g.length-1;0<=x;--x){var S=g[x];if(5!=S.getState())for(var E=S.tileCoord,C=y.getTileCoordExtent(E,this.tmpExtent)[0]-S.extent[0],T=void 0,w=0,R=S.tileKeys.length;w<R;++w){var I=S.getTile(S.tileKeys[w]);if(I.getState()==bn){var L=I.getReplayGroup(n,E.toString());if(L&&L.hasReplays(u)){T||(T=this.getTransform(i,C));var b=I.tileCoord[0],F=L.getClipCoords(T);e.save(),e.globalAlpha=r.opacity;for(var P=0,M=v.length;P<M;++P){var O=v[P];b<m[P]&&(e.beginPath(),e.moveTo(F[0],F[1]),e.lineTo(F[2],F[3]),e.lineTo(F[4],F[5]),e.lineTo(F[6],F[7]),e.moveTo(O[6],O[7]),e.lineTo(O[4],O[5]),e.lineTo(O[2],O[3]),e.lineTo(O[0],O[1]),e.clip())}L.replay(e,T,p,{},_,u,h),e.restore(),v.push(F),m.push(b)}}}}h&&function(t,e,i,r){for(var n=Object.keys(t).map(Number).sort(nr),o={},s=0,a=n.length;s<a;++s)for(var h=t[n[s].toString()],l=0,u=h.length;l<u;){var c=h[l++],p=h[l++];c.replay(e,p,i,o,r)}}(h,e,p,_),p&&Ai(e,p,s,a)}t.prototype.postCompose.call(this,e,i,r)},i.prototype.renderFeature=function(t,e,i,r){if(!i)return!1;var n=!1;if(Array.isArray(i))for(var o=0,s=i.length;o<s;++o)n=Ql(r,t,i[o],e,this.handleStyleImageChange_,this)||n;else n=Ql(r,t,i,e,this.handleStyleImageChange_,this);return n},i.prototype.renderTileImage_=function(t,e,i){var r=this.getLayer(),n=t.getReplayState(r),o=r.getRevision(),s=ru[r.getRenderMode()];if(s&&n.renderedTileRevision!==o){n.renderedTileRevision=o;var a=t.wrappedTileCoord,h=a[0],l=r.getSource(),u=l.getTileGridForProjection(i),c=u.getResolution(h),p=t.getContext(r),d=l.getTilePixelSize(h,e,i);p.canvas.width=d[0],p.canvas.height=d[1];for(var f=u.getTileCoordExtent(a,this.tmpExtent),_=0,g=t.tileKeys.length;_<g;++_){var y=t.getTile(t.tileKeys[_]);if(y.getState()==bn){var v=e/c,m=de(this.tmpTransform_);me(m,v,-v),xe(m,-f[0],-f[3]),y.getReplayGroup(r,t.tileCoord.toString()).replay(p,m,0,{},!0,s)}}}},i}(Rl);ou.handles=function(t){return t.getType()===Ba.VECTOR_TILE},ou.create=function(t,e){return new ou(e)};var su,au=function(t){function e(e){(e=s({},e)).controls||(e.controls=vs()),e.interactions||(e.interactions=al()),t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.createRenderer=function(){var t=new ml(this);return t.registerLayerRenderers([Cl,Rl,$l,ou]),t},e}(ls),hu="bottom-left",lu="bottom-center",uu="bottom-right",cu="center-center",pu="center-right",du="top-left",fu="element",_u="map",gu="offset",yu="position",vu="positioning",mu=function(t){function e(e){t.call(this),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.autoPan=void 0!==e.autoPan&&e.autoPan,this.autoPanAnimation=e.autoPanAnimation||{},this.autoPanMargin=void 0!==e.autoPanMargin?e.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,f(this,P(fu),this.handleElementChanged,this),f(this,P(_u),this.handleMapChanged,this),f(this,P(gu),this.handleOffsetChanged,this),f(this,P(yu),this.handlePositionChanged,this),f(this,P(vu),this.handlePositioningChanged,this),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:du),void 0!==e.position&&this.setPosition(e.position)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getElement=function(){return this.get(fu)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(_u)},e.prototype.getOffset=function(){return this.get(gu)},e.prototype.getPosition=function(){return this.get(yu)},e.prototype.getPositioning=function(){return this.get(vu)},e.prototype.handleElementChanged=function(){De(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(ke(this.element),y(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=f(t,Mo.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(yu)&&this.autoPan&&this.panIntoView()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(fu,t)},e.prototype.setMap=function(t){this.set(_u,t)},e.prototype.setOffset=function(t){this.set(gu,t)},e.prototype.setPosition=function(t){this.set(yu,t)},e.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e,i,r,n,o,s,a=this.getRect(t.getTargetElement(),t.getSize()),h=this.getElement(),l=this.getRect(h,[(n=h,o=n.offsetWidth,s=getComputedStyle(n),o+=parseInt(s.marginLeft,10)+parseInt(s.marginRight,10)),(e=h,i=e.offsetHeight,r=getComputedStyle(e),i+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10))]),u=this.autoPanMargin;if(!X(a,l)){var c=l[0]-a[0],p=a[2]-l[2],d=l[1]-a[1],f=a[3]-l[3],_=[0,0];if(c<0?_[0]=c-u:p<0&&(_[0]=Math.abs(p)+u),d<0?_[1]=d-u:f<0&&(_[1]=Math.abs(f)+u),0!==_[0]||0!==_[1]){var g=t.getView().getCenter(),y=t.getPixelFromCoordinate(g),v=[y[0]+_[0],y[1]+_[1]];t.getView().animate({center:t.getCoordinateFromPixel(v),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,n=i.top+window.pageYOffset;return[r,n,r+e[0],n+e[1]]},e.prototype.setPositioning=function(t){this.set(vu,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),r=t.getSize();this.updateRenderedPosition(i,r)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,r=this.getOffset(),n=this.getPositioning();this.setVisible(!0);var o=r[0],s=r[1];if(n==uu||n==pu||"top-right"==n){""!==this.rendered.left_&&(this.rendered.left_=i.left="");var a=Math.round(e[0]-t[0]-o)+"px";this.rendered.right_!=a&&(this.rendered.right_=i.right=a)}else{""!==this.rendered.right_&&(this.rendered.right_=i.right=""),n!=lu&&n!=cu&&"top-center"!=n||(o-=this.element.offsetWidth/2);var h=Math.round(t[0]+o)+"px";this.rendered.left_!=h&&(this.rendered.left_=i.left=h)}if(n==hu||n==lu||n==uu){""!==this.rendered.top_&&(this.rendered.top_=i.top="");var l=Math.round(e[1]-t[1]-s)+"px";this.rendered.bottom_!=l&&(this.rendered.bottom_=i.bottom=l)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=i.bottom=""),"center-left"!=n&&n!=cu&&n!=pu||(s-=this.element.offsetHeight/2);var u=Math.round(t[1]+s)+"px";this.rendered.top_!=u&&(this.rendered.top_=i.top=u)}},e.prototype.getOptions=function(){return this.options},e}(b),xu=[0,0,4096,4096],Su=function(t){function i(e,i,r,n,o,s){t.call(this,e,i,s),this.consumers=0,this.extent_=null,this.format_=n,this.features_=null,this.loader_,this.projection_=null,this.replayGroups_={},this.tileLoadFunction_=o,this.url_=r}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.disposeInternal=function(){this.features_=null,this.replayGroups_={},this.state=5,this.changed(),t.prototype.disposeInternal.call(this)},i.prototype.getExtent=function(){return this.extent_||xu},i.prototype.getFormat=function(){return this.format_},i.prototype.getFeatures=function(){return this.features_},i.prototype.getKey=function(){return this.url_},i.prototype.getProjection=function(){return this.projection_},i.prototype.getReplayGroup=function(t,i){return this.replayGroups_[e(t)+","+i]},i.prototype.load=function(){this.state==Ln&&(this.setState(1),this.tileLoadFunction_(this,this.url_),this.loader_(null,NaN,null))},i.prototype.onLoad=function(t,e,i){this.setProjection(e),this.setFeatures(t),this.setExtent(i)},i.prototype.onError=function(){this.setState(3)},i.prototype.setExtent=function(t){this.extent_=t},i.prototype.setFeatures=function(t){this.features_=t,this.setState(bn)},i.prototype.setProjection=function(t){this.projection_=t},i.prototype.setReplayGroup=function(t,i,r){this.replayGroups_[e(t)+","+i]=r},i.prototype.setLoader=function(t){this.loader_=t},i}(An),Eu=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),target:i.target}),this.cssClassName_=void 0!==i.className?i.className:"ol-full-screen";var r=void 0!==i.label?i.label:"";this.labelNode_="string"==typeof r?document.createTextNode(r):r;var n=void 0!==i.labelActive?i.labelActive:"";this.labelActiveNode_="string"==typeof n?document.createTextNode(n):n;var o=i.tipLabel?i.tipLabel:"Toggle full-screen",s=document.createElement("button");s.className=this.cssClassName_+"-"+Tu(),s.setAttribute("type","button"),s.title=o,s.appendChild(this.labelNode_),f(s,R.CLICK,this.handleClick_,this);var a=this.cssClassName_+" "+pi+" "+di+" "+(Cu()?"":"ol-unsupported"),h=this.element;h.className=a,h.appendChild(s),this.keys_=void 0!==i.keys&&i.keys,this.source_=i.source}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){if(Cu()){var t,e,i=this.getMap();i&&(Tu()?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(t=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:i.getTargetElement(),this.keys_?(e=t).mozRequestFullScreenWithKeys?e.mozRequestFullScreenWithKeys():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):wu(e):wu(t)))}},e.prototype.handleFullScreenChange_=function(){var t=this.element.firstElementChild,e=this.getMap();Tu()?(t.className=this.cssClassName_+"-true",Ge(this.labelActiveNode_,this.labelNode_)):(t.className=this.cssClassName_+"-false",Ge(this.labelNode_,this.labelActiveNode_)),e&&e.updateSize()},e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&this.listenerKeys.push(f(document,function(){if(!su){var t=document.body;t.webkitRequestFullscreen?su="webkitfullscreenchange":t.mozRequestFullScreen?su="mozfullscreenchange":t.msRequestFullscreen?su="MSFullscreenChange":t.requestFullscreen&&(su="fullscreenchange")}return su}(),this.handleFullScreenChange_,this))},e}(us);function Cu(){var t=document.body;return!!(t.webkitRequestFullscreen||t.mozRequestFullScreen&&document.mozFullScreenEnabled||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function Tu(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}function wu(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var Ru=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||Iu,target:i.target}),this.collapsed_=void 0===i.collapsed||i.collapsed,this.collapsible_=void 0===i.collapsible||i.collapsible,this.collapsible_||(this.collapsed_=!1);var r=void 0!==i.className?i.className:"ol-overviewmap",n=void 0!==i.tipLabel?i.tipLabel:"Overview map",o=void 0!==i.collapseLabel?i.collapseLabel:"";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o):this.collapseLabel_=o;var s=void 0!==i.label?i.label:"";"string"==typeof s?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;var a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=n,h.appendChild(a),f(h,R.CLICK,this.handleClick_,this),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.ovmap_=new au({controls:new N,interactions:new N,view:i.view});var l=this.ovmap_;i.layers&&i.layers.forEach(function(t){l.addLayer(t)}.bind(this));var u=document.createElement("div");u.className="ol-overviewmap-box",u.style.boxSizing="border-box",this.boxOverlay_=new mu({position:[0,0],positioning:hu,element:u}),this.ovmap_.addOverlay(this.boxOverlay_);var c=r+" "+pi+" "+di+(this.collapsed_&&this.collapsible_?" "+fi:"")+(this.collapsible_?"":" ol-uncollapsible"),p=this.element;p.className=c,p.appendChild(this.ovmapDiv_),p.appendChild(h);var d=this,_=this.boxOverlay_,g=this.boxOverlay_.getElement(),y=function(t){var e,i=l.getEventCoordinate({clientX:(e=t).clientX-g.offsetWidth/2,clientY:e.clientY+g.offsetHeight/2});_.setPosition(i)},v=function(t){var e=l.getEventCoordinate(t);d.getMap().getView().setCenter(e),window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",v)};g.addEventListener("mousedown",function(){window.addEventListener("mousemove",y),window.addEventListener("mouseup",v)})}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.setMap=function(e){var i=this.getMap();if(e!==i){if(i){var r=i.getView();r&&this.unbindView_(r),this.ovmap_.setTarget(null)}if(t.prototype.setMap.call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(f(e,o,this.handleMapPropertyChange_,this)),0===this.ovmap_.getLayers().getLength()&&this.ovmap_.setLayerGroup(e.getLayerGroup());var n=e.getView();n&&(this.bindView_(n),n.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},e.prototype.handleMapPropertyChange_=function(t){if(t.key===Oo.VIEW){var e=t.oldValue;e&&this.unbindView_(e);var i=this.getMap().getView();this.bindView_(i)}},e.prototype.bindView_=function(t){f(t,P(zo),this.handleRotationChanged_,this)},e.prototype.unbindView_=function(t){g(t,P(zo),this.handleRotationChanged_,this)},e.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.validateExtent_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var i=t.getSize(),r=t.getView().calculateExtent(i),n=e.getSize(),o=e.getView().calculateExtent(n),s=e.getPixelFromCoordinate(ut(r)),a=e.getPixelFromCoordinate(ot(r)),h=Math.abs(s[0]-a[0]),l=Math.abs(s[1]-a[1]),u=n[0],c=n[1];h<.1*u||l<.1*c||.75*u<h||.75*c<l?this.resetExtent_():X(o,r)||this.recenter_()}},e.prototype.resetExtent_=function(){var t=this.getMap(),e=this.ovmap_,i=t.getSize(),r=t.getView().calculateExtent(i),n=e.getView(),o=Math.log(7.5)/Math.LN2;_t(r,1/(.1*Math.pow(2,o/2))),n.fit(r)},e.prototype.recenter_=function(){var t=this.getMap(),e=this.ovmap_,i=t.getView();e.getView().setCenter(i.getCenter())},e.prototype.updateBox_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var i=t.getSize(),r=t.getView(),n=e.getView(),o=r.getRotation(),s=this.boxOverlay_,a=this.boxOverlay_.getElement(),h=r.calculateExtent(i),l=n.getResolution(),u=nt(h),c=ct(h),p=this.calculateCoordinateRotate_(o,u);s.setPosition(p),a&&(a.style.width=Math.abs((u[0]-c[0])/l)+"px",a.style.height=Math.abs((c[1]-u[1])/l)+"px")}},e.prototype.calculateCoordinateRotate_=function(t,e){var i,r=this.getMap().getView().getCenter();return r&&(hn(i=[e[0]-r[0],e[1]-r[1]],t),rn(i,r)),i},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(fi),this.collapsed_?Ge(this.collapseLabel_,this.label_):Ge(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var t=this.ovmap_;this.collapsed_||t.isRendered()||(t.updateSize(),this.resetExtent_(),_(t,Mo.POSTRENDER,function(t){this.updateBox_()},this))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.getOverviewMap=function(){return this.ovmap_},e}(us);function Iu(t){this.validateExtent_(),this.updateBox_()}var Lu="units",bu="degrees",Fu="metric",Pu=[1,2,5],Mu=function(t){function e(e){var i=e||{},r=void 0!==i.className?i.className:"ol-scale-line";t.call(this,{element:document.createElement("div"),render:i.render||Ou,target:i.target}),this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+pi,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==i.minWidth?i.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",f(this,P(Lu),this.handleUnitsChanged_,this),this.setUnits(i.units||Fu)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getUnits=function(){return this.get(Lu)},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set(Lu,t)},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,i=t.projection,r=this.getUnits(),n=r==bu?Mt.DEGREES:Mt.METERS,o=ie(i,t.resolution,e,n);i.getUnits()!=Mt.DEGREES&&i.getMetersPerUnit()&&n==Mt.METERS&&(o*=i.getMetersPerUnit());var s=this.minWidth_*o,a="";if(r==bu){var h=Ot[Mt.DEGREES];i.getUnits()==Mt.DEGREES?s*=h:o/=h,s<h/60?(a="",o*=3600):s<h?(a="",o*=60):a=""}else"imperial"==r?s<.9144?(a="in",o/=.0254):s<1609.344?(a="ft",o/=.3048):(a="mi",o/=1609.344):"nautical"==r?(o/=1852,a="nm"):r==Fu?s<.001?(a="m",o*=1e6):s<1?(a="mm",o*=1e3):s<1e3?a="m":(a="km",o/=1e3):"us"==r?s<.9144?(a="in",o*=39.37):s<1609.344?(a="ft",o/=.30480061):(a="mi",o/=1609.3472):A(!1,33);for(var l,u,c=3*Math.floor(Math.log(this.minWidth_*o)/Math.log(10));;){if(l=Pu[(c%3+3)%3]*Math.pow(10,Math.floor(c/3)),u=Math.round(l/o),isNaN(u))return this.element.style.display="none",void(this.renderedVisible_=!1);if(u>=this.minWidth_)break;++c}var p=l+" "+a;this.renderedHTML_!=p&&(this.innerElement_.innerHTML=p,this.renderedHTML_=p),this.renderedWidth_!=u&&(this.innerElement_.style.width=u+"px",this.renderedWidth_=u),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e}(us);function Ou(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}var Nu=0,Au=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||Gu}),this.currentResolution_=void 0,this.direction_=Nu,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.previousX_,this.previousY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==i.duration?i.duration:200;var r=void 0!==i.className?i.className:"ol-zoomslider",n=document.createElement("button");n.setAttribute("type","button"),n.className=r+"-thumb "+pi;var o=this.element;o.className=r+" "+pi+" "+di,o.appendChild(n),this.dragger_=new Fo(o),f(this.dragger_,zn,this.handleDraggerStart_,this),f(this.dragger_,Xn,this.handleDraggerDrag_,this),f(this.dragger_,Vn,this.handleDraggerEnd_,this),f(o,R.CLICK,this.handleContainerClick_,this),f(n,R.CLICK,T)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.disposeInternal=function(){this.dragger_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,i=t.offsetHeight,r=t.firstElementChild,n=getComputedStyle(r),o=r.offsetWidth+parseFloat(n.marginRight)+parseFloat(n.marginLeft),s=r.offsetHeight+parseFloat(n.marginTop)+parseFloat(n.marginBottom);this.thumbSize_=[o,s],i<e?(this.direction_=1,this.widthLimit_=e-o):(this.direction_=Nu,this.heightLimit_=i-s),this.sliderInitialized_=!0},e.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),r=this.getResolutionForPosition_(i);e.animate({resolution:e.constrainResolution(r),duration:this.duration_,easing:Mn})},e.prototype.handleDraggerStart_=function(t){this.dragging_||t.originalEvent.target!==this.element.firstElementChild||(this.getMap().getView().setHint(Yo.INTERACTING,1),this.previousX_=t.clientX,this.previousY_=t.clientY,this.dragging_=!0)},e.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=this.element.firstElementChild,i=t.clientX-this.previousX_+parseInt(e.style.left,10),r=t.clientY-this.previousY_+parseInt(e.style.top,10),n=this.getRelativePosition_(i,r);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_),this.setThumbPosition_(this.currentResolution_),this.previousX_=t.clientX,this.previousY_=t.clientY}},e.prototype.handleDraggerEnd_=function(t){if(this.dragging_){var e=this.getMap().getView();e.setHint(Yo.INTERACTING,-1),e.animate({resolution:e.constrainResolution(this.currentResolution_),duration:this.duration_,easing:Mn}),this.dragging_=!1,this.previousX_=void 0,this.previousY_=void 0}},e.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),i=this.element.firstElementChild;1==this.direction_?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"},e.prototype.getRelativePosition_=function(t,e){return mt(1===this.direction_?t/this.widthLimit_:e/this.heightLimit_,0,1)},e.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.getPositionForResolution_=function(t){return 1-this.getMap().getView().getValueForResolutionFunction()(t)},e}(us);function Gu(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;e!==this.currentResolution_&&(this.currentResolution_=e,this.setThumbPosition_(e))}}var ku=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),target:i.target}),this.extent=i.extent?i.extent:null;var r=void 0!==i.className?i.className:"ol-zoom-extent",n=void 0!==i.label?i.label:"E",o=void 0!==i.tipLabel?i.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=o,s.appendChild("string"==typeof n?document.createTextNode(n):n),f(s,R.CLICK,this.handleClick_,this);var a=r+" "+pi+" "+di,h=this.element;h.className=a,h.appendChild(s)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fit(e)},e}(us),Du=function(t){this.source_=t};Du.prototype.getType=function(){},Du.prototype.getSource=function(){return this.source_},Du.prototype.isAnimated=S;var ju=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getType=function(){return 35632},e}(Du),Uu=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getType=function(){return 35633},e}(Du),Yu=new ju("precision mediump float;\nvarying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_fillColor;\nuniform vec4 u_strokeColor;\nuniform vec2 u_size;\n\nvoid main(void) {\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  float radius = length(windowCenter - windowOffset);\n  float dist = length(windowCenter - gl_FragCoord.xy);\n  if (dist > radius + v_halfWidth) {\n    if (u_strokeColor.a == 0.0) {\n      gl_FragColor = u_fillColor;\n    } else {\n      gl_FragColor = u_strokeColor;\n    }\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\n  } else if (u_fillColor.a == 0.0) {\n    // Hooray, no fill, just stroke. We can use real antialiasing.\n    gl_FragColor = u_strokeColor;\n    if (dist < radius - v_halfWidth) {\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\n    }\n  } else {\n    gl_FragColor = u_fillColor;\n    float strokeDist = radius - v_halfWidth;\n    float antialias = 2.0 * v_pixelRatio;\n    if (dist > strokeDist) {\n      gl_FragColor = u_strokeColor;\n    } else if (dist >= strokeDist - antialias) {\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\n    }\n  }\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\n  if (gl_FragColor.a <= 0.0) {\n    discard;\n  }\n}\n"),Bu=new Uu("varying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\nattribute vec2 a_position;\nattribute float a_instruction;\nattribute float a_radius;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\n  v_pixelRatio = u_pixelRatio;\n  float lineWidth = u_lineWidth * u_pixelRatio;\n  v_halfWidth = lineWidth / 2.0;\n  if (lineWidth == 0.0) {\n    lineWidth = 2.0 * u_pixelRatio;\n  }\n  vec2 offset;\n  // Radius with anitaliasing (roughly).\n  float radius = a_radius + 3.0 * u_pixelRatio;\n  // Until we get gl_VertexID in WebGL, we store an instruction.\n  if (a_instruction == 0.0) {\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\n    offset = vec2(-1.0, 1.0);\n  } else if (a_instruction == 1.0) {\n    offset = vec2(-1.0, -1.0);\n  } else if (a_instruction == 2.0) {\n    offset = vec2(1.0, -1.0);\n  } else {\n    offset = vec2(1.0, 1.0);\n  }\n\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\n      0.0, 1.0)).xy;\n\n  if (distance(v_center, v_offset) > 20000.0) {\n    gl_Position = vec4(v_center, 0.0, 1.0);\n  }\n}\n\n\n"),Xu=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_offsetScaleMatrix=t.getUniformLocation(e,"u_offsetScaleMatrix"),this.u_offsetRotateMatrix=t.getUniformLocation(e,"u_offsetRotateMatrix"),this.u_lineWidth=t.getUniformLocation(e,"u_lineWidth"),this.u_pixelRatio=t.getUniformLocation(e,"u_pixelRatio"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.u_fillColor=t.getUniformLocation(e,"u_fillColor"),this.u_strokeColor=t.getUniformLocation(e,"u_strokeColor"),this.u_size=t.getUniformLocation(e,"u_size"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_instruction=t.getAttribLocation(e,"a_instruction"),this.a_radius=t.getAttribLocation(e,"a_radius")};function zu(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}var Vu=function(t){function e(e,i){t.call(this),this.tolerance=e,this.maxExtent=i,this.origin=st(i),this.projectionMatrix_=[1,0,0,1,0,0],this.offsetRotateMatrix_=[1,0,0,1,0,0],this.offsetScaleMatrix_=[1,0,0,1,0,0],this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.indices=[],this.indicesBuffer=null,this.startIndices=[],this.startIndicesFeature=[],this.vertices=[],this.verticesBuffer=null,this.lineStringReplay=void 0}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getDeleteResourcesFunction=function(t){},e.prototype.finish=function(t){},e.prototype.setUpProgram=function(t,e,i,r){},e.prototype.shutDownProgram=function(t,e){},e.prototype.drawReplay=function(t,e,i,r){},e.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,r,n){},e.prototype.drawHitDetectionReplay=function(t,e,i,r,n,o){return n?this.drawHitDetectionReplayOneByOne(t,e,i,r,o):this.drawHitDetectionReplayAll(t,e,i,r)},e.prototype.drawHitDetectionReplayAll=function(t,e,i,r){return t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawReplay(t,e,i,!0),r(null)||void 0},e.prototype.replay=function(t,e,i,r,n,o,s,a,h,l,u){var c,p,d,f,_,g,y,v,m=t.getGL();this.lineStringReplay&&(c=m.isEnabled(m.STENCIL_TEST),p=m.getParameter(m.STENCIL_FUNC),d=m.getParameter(m.STENCIL_VALUE_MASK),f=m.getParameter(m.STENCIL_REF),_=m.getParameter(m.STENCIL_WRITEMASK),g=m.getParameter(m.STENCIL_FAIL),y=m.getParameter(m.STENCIL_PASS_DEPTH_PASS),v=m.getParameter(m.STENCIL_PASS_DEPTH_FAIL),m.enable(m.STENCIL_TEST),m.clear(m.STENCIL_BUFFER_BIT),m.stencilMask(255),m.stencilFunc(m.ALWAYS,1,255),m.stencilOp(m.KEEP,m.KEEP,m.REPLACE),this.lineStringReplay.replay(t,e,i,r,n,o,s,a,h,l,u),m.stencilMask(0),m.stencilFunc(m.NOTEQUAL,1,255)),t.bindBuffer(Ye,this.verticesBuffer),t.bindBuffer(34963,this.indicesBuffer);var x=this.setUpProgram(m,t,n,o),S=de(this.projectionMatrix_);me(S,2/(i*n[0]),2/(i*n[1])),ve(S,-r),xe(S,-(e[0]-this.origin[0]),-(e[1]-this.origin[1]));var E=de(this.offsetScaleMatrix_);me(E,2/n[0],2/n[1]);var C,T=de(this.offsetRotateMatrix_);return 0!==r&&ve(T,-r),m.uniformMatrix4fv(x.u_projectionMatrix,!1,zu(this.tmpMat4_,S)),m.uniformMatrix4fv(x.u_offsetScaleMatrix,!1,zu(this.tmpMat4_,E)),m.uniformMatrix4fv(x.u_offsetRotateMatrix,!1,zu(this.tmpMat4_,T)),m.uniform1f(x.u_opacity,s),void 0===h?this.drawReplay(m,t,a,!1):C=this.drawHitDetectionReplay(m,t,a,h,l,u),this.shutDownProgram(m,x),this.lineStringReplay&&(c||m.disable(m.STENCIL_TEST),m.clear(m.STENCIL_BUFFER_BIT),m.stencilFunc(p,f,d),m.stencilMask(_),m.stencilOp(g,v,y)),C},e.prototype.drawElements=function(t,e,i,r){var n=e.hasOESElementIndexUint?5125:5123,o=r-i,s=i*(e.hasOESElementIndexUint?4:2);t.drawElements(4,o,n,s)},e}(ul),Wu=[0,0,0,1],Ku=[],Hu=[0,0,0,1],Zu=Number.EPSILON||2.220446049250313e-16,qu=function(t,e,i,r,n,o){var s=(i-t)*(o-e)-(n-t)*(r-e);return s<=Zu&&-Zu<=s?void 0:0<s},Ju=function(t,e){this.arr_=void 0!==t?t:[],this.usage_=void 0!==e?e:35044};Ju.prototype.getArray=function(){return this.arr_},Ju.prototype.getUsage=function(){return this.usage_};var Qu=function(t){function i(e,i){t.call(this,e,i),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.radius_=0,this.state_={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,changed:!1}}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.drawCoordinates_=function(t,e,i,r){var n,o,s=this,a=this.vertices.length,h=this.indices.length,l=a/4;for(n=e,o=i;n<o;n+=r)s.vertices[a++]=t[n],s.vertices[a++]=t[n+1],s.vertices[a++]=0,s.vertices[a++]=s.radius_,s.vertices[a++]=t[n],s.vertices[a++]=t[n+1],s.vertices[a++]=1,s.vertices[a++]=s.radius_,s.vertices[a++]=t[n],s.vertices[a++]=t[n+1],s.vertices[a++]=2,s.vertices[a++]=s.radius_,s.vertices[a++]=t[n],s.vertices[a++]=t[n+1],s.vertices[a++]=3,s.vertices[a++]=s.radius_,s.indices[h++]=l,s.indices[h++]=l+1,s.indices[h++]=l+2,s.indices[h++]=l+2,s.indices[h++]=l+3,s.indices[h++]=l,l+=4},i.prototype.drawCircle=function(t,e){var i=t.getRadius(),r=t.getStride();if(i){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.radius_=i;var n=t.getFlatCoordinates();n=vt(n,0,2,r,-this.origin[0],-this.origin[1]),this.drawCoordinates_(n,0,2,r)}else if(this.state_.changed&&(this.styles_.pop(),this.styles_.length)){var o=this.styles_[this.styles_.length-1];this.state_.fillColor=o[0],this.state_.strokeColor=o[1],this.state_.lineWidth=o[2],this.state_.changed=!1}},i.prototype.finish=function(t){this.verticesBuffer=new Ju(this.vertices),this.indicesBuffer=new Ju(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&0<this.styles_.length&&(this.styles_=[]),this.vertices=null,this.indices=null},i.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(i)}},i.prototype.setUpProgram=function(t,e,i,r){var n,o=e.getProgram(Yu,Bu);return this.defaultLocations_?n=this.defaultLocations_:(n=new Xu(t,o),this.defaultLocations_=n),e.useProgram(o),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,Be,!1,16,0),t.enableVertexAttribArray(n.a_instruction),t.vertexAttribPointer(n.a_instruction,1,Be,!1,16,8),t.enableVertexAttribArray(n.a_radius),t.vertexAttribPointer(n.a_radius,1,Be,!1,16,12),t.uniform2fv(n.u_size,i),t.uniform1f(n.u_pixelRatio,r),n},i.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_instruction),t.disableVertexAttribArray(e.a_radius)},i.prototype.drawReplay=function(t,e,i,r){var n,o,s,a;if(l(i))for(s=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;0<=n;--n)o=this.styleIndices_[n],a=this.styles_[n],this.setFillStyle_(t,a[0]),this.setStrokeStyle_(t,a[1],a[2]),this.drawElements(t,e,o,s),s=o;else this.drawReplaySkipping_(t,e,i)},i.prototype.drawHitDetectionReplayOneByOne=function(t,i,r,n,o){var s,a,h,l,u,c,p;for(p=this.startIndices.length-2,h=this.startIndices[p+1],s=this.styleIndices_.length-1;0<=s;--s)for(l=this.styles_[s],this.setFillStyle_(t,l[0]),this.setStrokeStyle_(t,l[1],l[2]),u=this.styleIndices_[s];0<=p&&this.startIndices[p]>=u;){if(a=this.startIndices[p],void 0===r[e(c=this.startIndicesFeature[p]).toString()]&&c.getGeometry()&&(void 0===o||dt(o,c.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,i,a,h);var d=n(c);if(d)return d}p--,h=a}},i.prototype.drawReplaySkipping_=function(t,i,r){var n,o,s,a,h,l,u;for(l=this.startIndices.length-2,s=o=this.startIndices[l+1],n=this.styleIndices_.length-1;0<=n;--n){for(a=this.styles_[n],this.setFillStyle_(t,a[0]),this.setStrokeStyle_(t,a[1],a[2]),h=this.styleIndices_[n];0<=l&&this.startIndices[l]>=h;)u=this.startIndices[l],r[e(this.startIndicesFeature[l]).toString()]&&(o!==s&&this.drawElements(t,i,o,s),s=u),l--,o=u;o!==s&&this.drawElements(t,i,o,s),o=s=h}},i.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_fillColor,e)},i.prototype.setStrokeStyle_=function(t,e,i){t.uniform4fv(this.defaultLocations_.u_strokeColor,e),t.uniform1f(this.defaultLocations_.u_lineWidth,i)},i.prototype.setFillStrokeStyle=function(t,e){var i,r;if(e){var n=e.getLineDash();this.state_.lineDash=n||Ku;var o=e.getLineDashOffset();this.state_.lineDashOffset=o||0,i=(i=e.getColor())instanceof CanvasGradient||i instanceof CanvasPattern?Hu:Pe(i).map(function(t,e){return 3!=e?t/255:t})||Hu,r=void 0!==(r=e.getWidth())?r:1}else i=[0,0,0,0],r=0;var s=t?t.getColor():[0,0,0,0];s=s instanceof CanvasGradient||s instanceof CanvasPattern?Wu:Pe(s).map(function(t,e){return 3!=e?t/255:t})||Wu,this.state_.strokeColor&&ur(this.state_.strokeColor,i)&&this.state_.fillColor&&ur(this.state_.fillColor,s)&&this.state_.lineWidth===r||(this.state_.changed=!0,this.state_.fillColor=s,this.state_.strokeColor=i,this.state_.lineWidth=r,this.styles_.push([s,i,r]))},i}(Vu),$u=new ju("precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),tc=new Uu("varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n"),ec=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_offsetScaleMatrix=t.getUniformLocation(e,"u_offsetScaleMatrix"),this.u_offsetRotateMatrix=t.getUniformLocation(e,"u_offsetRotateMatrix"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.u_image=t.getUniformLocation(e,"u_image"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_texCoord=t.getAttribLocation(e,"a_texCoord"),this.a_offsets=t.getAttribLocation(e,"a_offsets"),this.a_opacity=t.getAttribLocation(e,"a_opacity"),this.a_rotateWithView=t.getAttribLocation(e,"a_rotateWithView")},ic="webglcontextlost",rc="webglcontextrestored",nc=function(t){function i(e,i){t.call(this),this.canvas_=e,this.gl_=i,this.bufferCache_={},this.shaderCache_={},this.programCache_={},this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null,this.hasOESElementIndexUint=or(Ue,"OES_element_index_uint"),this.hasOESElementIndexUint&&i.getExtension("OES_element_index_uint"),f(this.canvas_,ic,this.handleWebGLContextLost,this),f(this.canvas_,rc,this.handleWebGLContextRestored,this)}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.bindBuffer=function(t,i){var r=this.getGL(),n=i.getArray(),o=String(e(i));if(o in this.bufferCache_){var s=this.bufferCache_[o];r.bindBuffer(t,s.buffer)}else{var a,h=r.createBuffer();r.bindBuffer(t,h),t==Ye?a=new Float32Array(n):34963==t&&(a=this.hasOESElementIndexUint?new Uint32Array(n):new Uint16Array(n)),r.bufferData(t,a,i.getUsage()),this.bufferCache_[o]={buf:i,buffer:h}}},i.prototype.deleteBuffer=function(t){var i=this.getGL(),r=String(e(t)),n=this.bufferCache_[r];i.isContextLost()||i.deleteBuffer(n.buffer),delete this.bufferCache_[r]},i.prototype.disposeInternal=function(){v(this.canvas_);var t=this.getGL();if(!t.isContextLost()){for(var e in this.bufferCache_)t.deleteBuffer(this.bufferCache_[e].buffer);for(var i in this.programCache_)t.deleteProgram(this.programCache_[i]);for(var r in this.shaderCache_)t.deleteShader(this.shaderCache_[r]);t.deleteFramebuffer(this.hitDetectionFramebuffer_),t.deleteRenderbuffer(this.hitDetectionRenderbuffer_),t.deleteTexture(this.hitDetectionTexture_)}},i.prototype.getCanvas=function(){return this.canvas_},i.prototype.getGL=function(){return this.gl_},i.prototype.getHitDetectionFramebuffer=function(){return this.hitDetectionFramebuffer_||this.initHitDetectionFramebuffer_(),this.hitDetectionFramebuffer_},i.prototype.getShader=function(t){var i=String(e(t));if(i in this.shaderCache_)return this.shaderCache_[i];var r=this.getGL(),n=r.createShader(t.getType());return r.shaderSource(n,t.getSource()),r.compileShader(n),this.shaderCache_[i]=n},i.prototype.getProgram=function(t,i){var r=e(t)+"/"+e(i);if(r in this.programCache_)return this.programCache_[r];var n=this.getGL(),o=n.createProgram();return n.attachShader(o,this.getShader(t)),n.attachShader(o,this.getShader(i)),n.linkProgram(o),this.programCache_[r]=o},i.prototype.handleWebGLContextLost=function(){a(this.bufferCache_),a(this.shaderCache_),a(this.programCache_),this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null},i.prototype.handleWebGLContextRestored=function(){},i.prototype.initHitDetectionFramebuffer_=function(){var t=this.gl_,e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var i=sc(t,1,1),r=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,r),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,1,1),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,r),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.hitDetectionFramebuffer_=e,this.hitDetectionTexture_=i,this.hitDetectionRenderbuffer_=r},i.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,!0)},i}(m);function oc(t,e,i){var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),void 0!==e&&t.texParameteri(Ve,Xe,e),void 0!==i&&t.texParameteri(Ve,ze,i),r}function sc(t,e,i,r,n){var o=oc(t,r,n);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),o}function ac(t,e,i,r){var n=oc(t,i,r);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),n}var hc=function(t){function i(e,i){t.call(this,e,i),this.anchorX=void 0,this.anchorY=void 0,this.groupIndices=[],this.hitDetectionGroupIndices=[],this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.defaultLocations=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.width=void 0}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer,r=this.getTextures(!0),n=t.getGL();return function(){var o,s;if(!n.isContextLost())for(o=0,s=r.length;o<s;++o)n.deleteTexture(r[o]);t.deleteBuffer(e),t.deleteBuffer(i)}},i.prototype.drawCoordinates=function(t,e,i,r){var n,o,s,a,h,l,u=this,c=this.anchorX,p=this.anchorY,d=this.height,f=this.imageHeight,_=this.imageWidth,g=this.opacity,y=this.originX,v=this.originY,m=this.rotateWithView?1:0,x=-this.rotation,S=this.scale,E=this.width,C=Math.cos(x),T=Math.sin(x),w=this.indices.length,R=this.vertices.length;for(n=e;n<i;n+=r)h=t[n]-u.origin[0],l=t[n+1]-u.origin[1],o=R/8,s=-S*c,a=-S*(d-p),u.vertices[R++]=h,u.vertices[R++]=l,u.vertices[R++]=s*C-a*T,u.vertices[R++]=s*T+a*C,u.vertices[R++]=y/_,u.vertices[R++]=(v+d)/f,u.vertices[R++]=g,u.vertices[R++]=m,s=S*(E-c),a=-S*(d-p),u.vertices[R++]=h,u.vertices[R++]=l,u.vertices[R++]=s*C-a*T,u.vertices[R++]=s*T+a*C,u.vertices[R++]=(y+E)/_,u.vertices[R++]=(v+d)/f,u.vertices[R++]=g,u.vertices[R++]=m,s=S*(E-c),a=S*p,u.vertices[R++]=h,u.vertices[R++]=l,u.vertices[R++]=s*C-a*T,u.vertices[R++]=s*T+a*C,u.vertices[R++]=(y+E)/_,u.vertices[R++]=v/f,u.vertices[R++]=g,u.vertices[R++]=m,s=-S*c,a=S*p,u.vertices[R++]=h,u.vertices[R++]=l,u.vertices[R++]=s*C-a*T,u.vertices[R++]=s*T+a*C,u.vertices[R++]=y/_,u.vertices[R++]=v/f,u.vertices[R++]=g,u.vertices[R++]=m,u.indices[w++]=o,u.indices[w++]=o+1,u.indices[w++]=o+2,u.indices[w++]=o,u.indices[w++]=o+2,u.indices[w++]=o+3;return R},i.prototype.createTextures=function(t,i,r,n){var o,s,a,h,l=i.length;for(h=0;h<l;++h)(a=e(s=i[h]).toString())in r?o=r[a]:(o=ac(n,s,We,We),r[a]=o),t[h]=o},i.prototype.setUpProgram=function(t,e,i,r){var n,o=e.getProgram($u,tc);return this.defaultLocations?n=this.defaultLocations:(n=new ec(t,o),this.defaultLocations=n),e.useProgram(o),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,Be,!1,32,0),t.enableVertexAttribArray(n.a_offsets),t.vertexAttribPointer(n.a_offsets,2,Be,!1,32,8),t.enableVertexAttribArray(n.a_texCoord),t.vertexAttribPointer(n.a_texCoord,2,Be,!1,32,16),t.enableVertexAttribArray(n.a_opacity),t.vertexAttribPointer(n.a_opacity,1,Be,!1,32,24),t.enableVertexAttribArray(n.a_rotateWithView),t.vertexAttribPointer(n.a_rotateWithView,1,Be,!1,32,28),n},i.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_offsets),t.disableVertexAttribArray(e.a_texCoord),t.disableVertexAttribArray(e.a_opacity),t.disableVertexAttribArray(e.a_rotateWithView)},i.prototype.drawReplay=function(t,e,i,r){var n,o,s,a=r?this.getHitDetectionTextures():this.getTextures(),h=r?this.hitDetectionGroupIndices:this.groupIndices;if(l(i))for(n=0,o=a.length,s=0;n<o;++n){t.bindTexture(Ve,a[n]);var u=h[n];this.drawElements(t,e,s,u),s=u}else this.drawReplaySkipping(t,e,i,a,h)},i.prototype.drawReplaySkipping=function(t,i,r,n,o){var s,a,h=0;for(s=0,a=n.length;s<a;++s){t.bindTexture(Ve,n[s]);for(var l=0<s?o[s-1]:0,u=o[s],c=l,p=l;h<this.startIndices.length&&this.startIndices[h]<=u;)void 0!==r[e(this.startIndicesFeature[h]).toString()]?(c!==p&&this.drawElements(t,i,c,p),p=c=h===this.startIndices.length-1?u:this.startIndices[h+1]):p=h===this.startIndices.length-1?u:this.startIndices[h+1],h++;c!==p&&this.drawElements(t,i,c,p)}},i.prototype.drawHitDetectionReplayOneByOne=function(t,i,r,n,o){var s,a,h,l,u,c=this.startIndices.length-1,p=this.getHitDetectionTextures();for(s=p.length-1;0<=s;--s)for(t.bindTexture(Ve,p[s]),a=0<s?this.hitDetectionGroupIndices[s-1]:0,l=this.hitDetectionGroupIndices[s];0<=c&&this.startIndices[c]>=a;){if(h=this.startIndices[c],void 0===r[e(u=this.startIndicesFeature[c]).toString()]&&u.getGeometry()&&(void 0===o||dt(o,u.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,i,h,l);var d=n(u);if(d)return d}l=h,c--}},i.prototype.finish=function(t){this.anchorX=void 0,this.anchorY=void 0,this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.indices=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.vertices=null,this.width=void 0},i.prototype.getTextures=function(t){},i.prototype.getHitDetectionTextures=function(){},i}(Vu),lc=function(t){function i(e,i){t.call(this,e,i),this.images_=[],this.hitDetectionImages_=[],this.textures_=[],this.hitDetectionTextures_=[]}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.drawMultiPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var i=t.getFlatCoordinates(),r=t.getStride();this.drawCoordinates(i,0,i.length,r)},i.prototype.drawPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var i=t.getFlatCoordinates(),r=t.getStride();this.drawCoordinates(i,0,i.length,r)},i.prototype.finish=function(e){var i=e.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices.push(this.indices.length),this.verticesBuffer=new Ju(this.vertices);var r=this.indices;this.indicesBuffer=new Ju(r);var n={};this.createTextures(this.textures_,this.images_,n,i),this.createTextures(this.hitDetectionTextures_,this.hitDetectionImages_,n,i),this.images_=null,this.hitDetectionImages_=null,t.prototype.finish.call(this,e)},i.prototype.setImageStyle=function(t){var i=t.getAnchor(),r=t.getImage(1),n=t.getImageSize(),o=t.getHitDetectionImage(1),s=t.getOpacity(),a=t.getOrigin(),h=t.getRotateWithView(),l=t.getRotation(),u=t.getSize(),c=t.getScale();0===this.images_.length?this.images_.push(r):e(this.images_[this.images_.length-1])!=e(r)&&(this.groupIndices.push(this.indices.length),this.images_.push(r)),0===this.hitDetectionImages_.length?this.hitDetectionImages_.push(o):e(this.hitDetectionImages_[this.hitDetectionImages_.length-1])!=e(o)&&(this.hitDetectionGroupIndices.push(this.indices.length),this.hitDetectionImages_.push(o)),this.anchorX=i[0],this.anchorY=i[1],this.height=u[1],this.imageHeight=n[1],this.imageWidth=n[0],this.opacity=s,this.originX=a[0],this.originY=a[1],this.rotation=l,this.rotateWithView=h,this.scale=c,this.width=u[0]},i.prototype.getTextures=function(t){return t?this.textures_.concat(this.hitDetectionTextures_):this.textures_},i.prototype.getHitDetectionTextures=function(){return this.hitDetectionTextures_},i}(hc);function uc(t,e,i,r){var n=i-r;return t[e]===t[n]&&t[e+1]===t[n+1]&&3<(i-e)/r&&!!gr(t,e,i,r)}var cc=new ju("precision mediump float;\nvarying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_color;\nuniform vec2 u_size;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  if (v_round > 0.0) {\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\n      discard;\n    }\n  }\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),pc=new Uu("varying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\nattribute vec2 a_lastPos;\nattribute vec2 a_position;\nattribute vec2 a_nextPos;\nattribute float a_direction;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_miterLimit;\n\nbool nearlyEquals(in float value, in float ref) {\n  float epsilon = 0.000000000001;\n  return value >= ref - epsilon && value <= ref + epsilon;\n}\n\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\n  vec2 dirVect = nextP - a_position;\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\n  offset = u_lineWidth / 2.0 * normal * direction;\n}\n\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\n  float halfWidth = u_lineWidth / 2.0;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_nextPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n  offset = normal * direction * miterLength;\n  round = 0.0;\n  if (isRound) {\n    round = 1.0;\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\n    offset = halfWidth * tmpNormal * direction;\n  }\n}\n\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\n  bool degenerate = false;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_lastPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  vec2 longOffset, shortOffset, longVertex;\n  vec4 shortProjVertex;\n  float halfWidth = u_lineWidth / 2.0;\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\n    longOffset = tmpNormal * direction * halfWidth;\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_nextPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\n  } else {\n    shortOffset = tmpNormal * direction * halfWidth;\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_lastPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\n  }\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n  float epsilon = 0.000000000001;\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\n    offset = shortProjVertex.xy;\n    degenerate = true;\n  } else {\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n    offset = normal * direction * miterLength;\n  }\n  return degenerate;\n}\n\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\n    in float turnDir, in float direction) {\n  round = 0.0;\n  vec2 dirVect = a_position - nextP;\n  vec2 firstNormal = normalize(dirVect);\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\n  offset = normal * length;\n  if (isRound) {\n    round = 1.0;\n  }\n}\n\nvoid main(void) {\n  bool degenerate = false;\n  float direction = float(sign(a_direction));\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  vec2 offset;\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\n\n  v_round = 0.0;\n  v_halfWidth = u_lineWidth / 2.0;\n  v_roundVertex = projPos.xy;\n\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\n    alongNormal(offset, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\n    alongNormal(offset, a_lastPos, -1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\n    miterUp(offset, v_round, round, direction);\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\n  }\n  if (!degenerate) {\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\n    gl_Position = projPos + offsets;\n  } else {\n    gl_Position = vec4(offset, 0.0, 1.0);\n  }\n}\n\n\n"),dc=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_offsetScaleMatrix=t.getUniformLocation(e,"u_offsetScaleMatrix"),this.u_offsetRotateMatrix=t.getUniformLocation(e,"u_offsetRotateMatrix"),this.u_lineWidth=t.getUniformLocation(e,"u_lineWidth"),this.u_miterLimit=t.getUniformLocation(e,"u_miterLimit"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.u_color=t.getUniformLocation(e,"u_color"),this.u_size=t.getUniformLocation(e,"u_size"),this.u_pixelRatio=t.getUniformLocation(e,"u_pixelRatio"),this.a_lastPos=t.getAttribLocation(e,"a_lastPos"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_nextPos=t.getAttribLocation(e,"a_nextPos"),this.a_direction=t.getAttribLocation(e,"a_direction")},fc=function(t){function i(e,i){t.call(this,e,i),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,changed:!1}}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.drawCoordinates_=function(t,e,i,r){var n,o,s,a,h,l,u,c,p=this,d=this.vertices.length,f=this.indices.length,_="bevel"===this.state_.lineJoin?0:"miter"===this.state_.lineJoin?1:2,g="butt"===this.state_.lineCap?0:"square"===this.state_.lineCap?1:2,y=uc(t,e,i,r),v=f,m=1;for(n=e,o=i;n<o;n+=r){if(h=d/7,l=u,u=c||[t[n],t[n+1]],n===e){if(c=[t[n+r],t[n+r+1]],i-e==2*r&&ur(u,c))break;if(!y){g&&(d=p.addVertices_([0,0],u,c,7*m*g,d),d=p.addVertices_([0,0],u,c,7*-m*g,d),p.indices[f++]=h+2,p.indices[f++]=h,p.indices[f++]=h+1,p.indices[f++]=h+1,p.indices[f++]=h+3,p.indices[f++]=h+2),d=p.addVertices_([0,0],u,c,3*m*(g||1),d),v=(d=p.addVertices_([0,0],u,c,3*-m*(g||1),d))/7-1;continue}l=[t[i-2*r],t[i-2*r+1]],s=c}else{if(n===i-r){if(y){c=s;break}l=l||[0,0],d=p.addVertices_(l,u,[0,0],5*m*(g||1),d),d=p.addVertices_(l,u,[0,0],5*-m*(g||1),d),p.indices[f++]=h,p.indices[f++]=v-1,p.indices[f++]=v,p.indices[f++]=v,p.indices[f++]=h+1,p.indices[f++]=h,g&&(d=p.addVertices_(l,u,[0,0],11*m*g,d),d=p.addVertices_(l,u,[0,0],11*-m*g,d),p.indices[f++]=h+2,p.indices[f++]=h,p.indices[f++]=h+1,p.indices[f++]=h+1,p.indices[f++]=h+3,p.indices[f++]=h+2);break}c=[t[n+r],t[n+r+1]]}a=qu(l[0],l[1],u[0],u[1],c[0],c[1])?-1:1,d=p.addVertices_(l,u,c,13*a*(_||1),d),d=p.addVertices_(l,u,c,17*a*(_||1),d),d=p.addVertices_(l,u,c,19*-a*(_||1),d),e<n&&(p.indices[f++]=h,p.indices[f++]=v-1,p.indices[f++]=v,p.indices[f++]=h+2,p.indices[f++]=h,p.indices[f++]=0<m*a?v:v-1),p.indices[f++]=h,p.indices[f++]=h+2,p.indices[f++]=h+1,v=h+2,m=a,_&&(d=p.addVertices_(l,u,c,23*a*_,d),p.indices[f++]=h+1,p.indices[f++]=h+3,p.indices[f++]=h)}y&&(h=h||d/7,a=zr([l[0],l[1],u[0],u[1],c[0],c[1]],0,6,2)?1:-1,d=this.addVertices_(l,u,c,13*a*(_||1),d),d=this.addVertices_(l,u,c,19*-a*(_||1),d),this.indices[f++]=h,this.indices[f++]=v-1,this.indices[f++]=v,this.indices[f++]=h+1,this.indices[f++]=h,this.indices[f++]=0<m*a?v:v-1)},i.prototype.addVertices_=function(t,e,i,r,n){return this.vertices[n++]=t[0],this.vertices[n++]=t[1],this.vertices[n++]=e[0],this.vertices[n++]=e[1],this.vertices[n++]=i[0],this.vertices[n++]=i[1],this.vertices[n++]=r,n},i.prototype.isValid_=function(t,e,i,r){var n=i-e;return!(n<2*r||n===2*r&&ur([t[e],t[e+1]],[t[e+r],t[e+r+1]]))},i.prototype.drawLineString=function(t,e){var i=t.getFlatCoordinates(),r=t.getStride();this.isValid_(i,0,i.length,r)&&(i=vt(i,0,i.length,r,-this.origin[0],-this.origin[1]),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.drawCoordinates_(i,0,i.length,r))},i.prototype.drawMultiLineString=function(t,e){var i=this.indices.length,r=t.getEnds();r.unshift(0);var n,o,s=t.getFlatCoordinates(),a=t.getStride();if(1<r.length)for(n=1,o=r.length;n<o;++n)if(this.isValid_(s,r[n-1],r[n],a)){var h=vt(s,r[n-1],r[n],a,-this.origin[0],-this.origin[1]);this.drawCoordinates_(h,0,h.length,a)}this.indices.length>i&&(this.startIndices.push(i),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(i),this.state_.changed=!1))},i.prototype.drawPolygonCoordinates=function(t,e,i){var r,n;if(uc(t,0,t.length,i)||(t.push(t[0]),t.push(t[1])),this.drawCoordinates_(t,0,t.length,i),e.length)for(r=0,n=e.length;r<n;++r)uc(e[r],0,e[r].length,i)||(e[r].push(e[r][0]),e[r].push(e[r][1])),this.drawCoordinates_(e[r],0,e[r].length,i)},i.prototype.setPolygonStyle=function(t,e){var i=void 0===e?this.indices.length:e;this.startIndices.push(i),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(i),this.state_.changed=!1)},i.prototype.getCurrentIndex=function(){return this.indices.length},i.prototype.finish=function(t){this.verticesBuffer=new Ju(this.vertices),this.indicesBuffer=new Ju(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&0<this.styles_.length&&(this.styles_=[]),this.vertices=null,this.indices=null},i.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(i)}},i.prototype.setUpProgram=function(t,e,i,r){var n,o=e.getProgram(cc,pc);return this.defaultLocations_?n=this.defaultLocations_:(n=new dc(t,o),this.defaultLocations_=n),e.useProgram(o),t.enableVertexAttribArray(n.a_lastPos),t.vertexAttribPointer(n.a_lastPos,2,Be,!1,28,0),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,Be,!1,28,8),t.enableVertexAttribArray(n.a_nextPos),t.vertexAttribPointer(n.a_nextPos,2,Be,!1,28,16),t.enableVertexAttribArray(n.a_direction),t.vertexAttribPointer(n.a_direction,1,Be,!1,28,24),t.uniform2fv(n.u_size,i),t.uniform1f(n.u_pixelRatio,r),n},i.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_lastPos),t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_nextPos),t.disableVertexAttribArray(e.a_direction)},i.prototype.drawReplay=function(t,e,i,r){var n,o,s,a,h=t.getParameter(t.DEPTH_FUNC),u=t.getParameter(t.DEPTH_WRITEMASK);if(r||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),l(i))for(s=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;0<=n;--n)o=this.styleIndices_[n],a=this.styles_[n],this.setStrokeStyle_(t,a[0],a[1],a[2]),this.drawElements(t,e,o,s),t.clear(t.DEPTH_BUFFER_BIT),s=o;else this.drawReplaySkipping_(t,e,i);r||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(u),t.depthFunc(h))},i.prototype.drawReplaySkipping_=function(t,i,r){var n,o,s,a,h,l,u;for(l=this.startIndices.length-2,s=o=this.startIndices[l+1],n=this.styleIndices_.length-1;0<=n;--n){for(a=this.styles_[n],this.setStrokeStyle_(t,a[0],a[1],a[2]),h=this.styleIndices_[n];0<=l&&this.startIndices[l]>=h;)u=this.startIndices[l],r[e(this.startIndicesFeature[l]).toString()]&&(o!==s&&(this.drawElements(t,i,o,s),t.clear(t.DEPTH_BUFFER_BIT)),s=u),l--,o=u;o!==s&&(this.drawElements(t,i,o,s),t.clear(t.DEPTH_BUFFER_BIT)),o=s=h}},i.prototype.drawHitDetectionReplayOneByOne=function(t,i,r,n,o){var s,a,h,l,u,c,p;for(p=this.startIndices.length-2,h=this.startIndices[p+1],s=this.styleIndices_.length-1;0<=s;--s)for(l=this.styles_[s],this.setStrokeStyle_(t,l[0],l[1],l[2]),u=this.styleIndices_[s];0<=p&&this.startIndices[p]>=u;){if(a=this.startIndices[p],void 0===r[e(c=this.startIndicesFeature[p]).toString()]&&c.getGeometry()&&(void 0===o||dt(o,c.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,i,a,h);var d=n(c);if(d)return d}p--,h=a}},i.prototype.setStrokeStyle_=function(t,e,i,r){t.uniform4fv(this.defaultLocations_.u_color,e),t.uniform1f(this.defaultLocations_.u_lineWidth,i),t.uniform1f(this.defaultLocations_.u_miterLimit,r)},i.prototype.setFillStrokeStyle=function(t,e){var i=e.getLineCap();this.state_.lineCap=void 0!==i?i:"round";var r=e.getLineDash();this.state_.lineDash=r||Ku;var n=e.getLineDashOffset();this.state_.lineDashOffset=n||0;var o=e.getLineJoin();this.state_.lineJoin=void 0!==o?o:"round";var s=e.getColor();s=s instanceof CanvasGradient||s instanceof CanvasPattern?Hu:Pe(s).map(function(t,e){return 3!=e?t/255:t})||Hu;var a=e.getWidth();a=void 0!==a?a:1;var h=e.getMiterLimit();h=void 0!==h?h:10,this.state_.strokeColor&&ur(this.state_.strokeColor,s)&&this.state_.lineWidth===a&&this.state_.miterLimit===h||(this.state_.changed=!0,this.state_.strokeColor=s,this.state_.lineWidth=a,this.state_.miterLimit=h,this.styles_.push([s,a,h]))},i}(Vu),_c=new ju("precision mediump float;\n\n\n\nuniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main(void) {\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),gc=new Uu("\n\nattribute vec2 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n}\n\n\n"),yc=function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_offsetScaleMatrix=t.getUniformLocation(e,"u_offsetScaleMatrix"),this.u_offsetRotateMatrix=t.getUniformLocation(e,"u_offsetRotateMatrix"),this.u_color=t.getUniformLocation(e,"u_color"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.a_position=t.getAttribLocation(e,"a_position")},vc=function(t){this.first_,this.last_,this.head_,this.circular_=void 0===t||t,this.length_=0};vc.prototype.insertItem=function(t){var e={prev:void 0,next:void 0,data:t},i=this.head_;if(i){var r=i.next;e.prev=i,e.next=r,i.next=e,r&&(r.prev=e),i===this.last_&&(this.last_=e)}else this.first_=e,this.last_=e,this.circular_&&((e.next=e).prev=e);this.head_=e,this.length_++},vc.prototype.removeItem=function(){var t=this.head_;if(t){var e=t.next,i=t.prev;e&&(e.prev=i),i&&(i.next=e),this.head_=e||i,this.first_===this.last_?(this.head_=void 0,this.first_=void 0,this.last_=void 0):this.first_===t?this.first_=this.head_:this.last_===t&&(this.last_=i?this.head_.prev:this.head_),this.length_--}},vc.prototype.firstItem=function(){if(this.head_=this.first_,this.head_)return this.head_.data},vc.prototype.lastItem=function(){if(this.head_=this.last_,this.head_)return this.head_.data},vc.prototype.nextItem=function(){if(this.head_&&this.head_.next)return this.head_=this.head_.next,this.head_.data},vc.prototype.getNextItem=function(){if(this.head_&&this.head_.next)return this.head_.next.data},vc.prototype.prevItem=function(){if(this.head_&&this.head_.prev)return this.head_=this.head_.prev,this.head_.data},vc.prototype.getPrevItem=function(){if(this.head_&&this.head_.prev)return this.head_.prev.data},vc.prototype.getCurrItem=function(){if(this.head_)return this.head_.data},vc.prototype.setFirstItem=function(){this.circular_&&this.head_&&(this.first_=this.head_,this.last_=this.head_.prev)},vc.prototype.concat=function(t){if(t.head_){if(this.head_){var e=this.head_.next;this.head_.next=t.first_,t.first_.prev=this.head_,e.prev=t.last_,t.last_.next=e,this.length_+=t.length_}else this.head_=t.head_,this.first_=t.first_,this.last_=t.last_,this.length_=t.length_;t.head_=void 0,t.first_=void 0,t.last_=void 0,t.length_=0}},vc.prototype.getLength=function(){return this.length_};var mc=function(t){function i(e,i){t.call(this,e,i),this.lineStringReplay=new fc(e,i),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={fillColor:null,changed:!1}}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.drawCoordinates_=function(t,e,i){var r=new vc,n=new gh;this.processFlatCoordinates_(t,i,r,n,!0);var o=this.getMaxCoords_(r);if(e.length){var s,a,h=[];for(s=0,a=e.length;s<a;++s){var l={list:new vc,maxCoords:void 0,rtree:new gh};h.push(l),this.processFlatCoordinates_(e[s],i,l.list,l.rtree,!1),this.classifyPoints_(l.list,l.rtree,!0),l.maxCoords=this.getMaxCoords_(l.list)}for(h.sort(function(t,e){return e.maxCoords[0]===t.maxCoords[0]?t.maxCoords[1]-e.maxCoords[1]:e.maxCoords[0]-t.maxCoords[0]}),s=0;s<h.length;++s){var u=h[s].list,c=u.firstItem(),p=c,d=void 0;do{if(this.getIntersections_(p,n).length){d=!0;break}p=u.nextItem()}while(c!==p);d||this.bridgeHole_(u,h[s].maxCoords[0],r,o[0],n)&&(n.concat(h[s].rtree),this.classifyPoints_(r,n,!1))}}else this.classifyPoints_(r,n,!1);this.triangulate_(r,n)},i.prototype.processFlatCoordinates_=function(t,e,i,r,n){var o,s,a,h,l,u=zr(t,0,t.length,e),c=this.vertices.length/2,p=[],d=[];if(n===u){for(h=a=this.createPoint_(t[0],t[1],c++),o=e,s=t.length;o<s;o+=e)l=this.createPoint_(t[o],t[o+1],c++),d.push(this.insertItem_(h,l,i)),p.push([Math.min(h.x,l.x),Math.min(h.y,l.y),Math.max(h.x,l.x),Math.max(h.y,l.y)]),h=l;d.push(this.insertItem_(l,a,i)),p.push([Math.min(h.x,l.x),Math.min(h.y,l.y),Math.max(h.x,l.x),Math.max(h.y,l.y)])}else{var f=t.length-e;for(h=a=this.createPoint_(t[f],t[f+1],c++),o=f-e,s=0;s<=o;o-=e)l=this.createPoint_(t[o],t[o+1],c++),d.push(this.insertItem_(h,l,i)),p.push([Math.min(h.x,l.x),Math.min(h.y,l.y),Math.max(h.x,l.x),Math.max(h.y,l.y)]),h=l;d.push(this.insertItem_(l,a,i)),p.push([Math.min(h.x,l.x),Math.min(h.y,l.y),Math.max(h.x,l.x),Math.max(h.y,l.y)])}r.load(p,d)},i.prototype.getMaxCoords_=function(t){for(var e=t.firstItem(),i=e,r=[i.p0.x,i.p0.y];(i=t.nextItem()).p0.x>r[0]&&(r=[i.p0.x,i.p0.y]),i!==e;);return r},i.prototype.classifyPoints_=function(t,e,i){var r=t.firstItem(),n=r,o=t.nextItem(),s=!1;do{var a=i?qu(o.p1.x,o.p1.y,n.p1.x,n.p1.y,n.p0.x,n.p0.y):qu(n.p0.x,n.p0.y,n.p1.x,n.p1.y,o.p1.x,o.p1.y);void 0===a?(this.removeItem_(n,o,t,e),s=!0,o===r&&(r=t.getNextItem()),o=n,t.prevItem()):n.p1.reflex!==a&&(n.p1.reflex=a,s=!0),n=o,o=t.nextItem()}while(n!==r);return s},i.prototype.bridgeHole_=function(t,e,i,r,n){for(var o=t.firstItem();o.p1.x!==e;)o=t.nextItem();var s,a,h,l,u=o.p1,c={x:r,y:u.y,i:-1},p=1/0,d=this.getIntersections_({p0:u,p1:c},n,!0);for(s=0,a=d.length;s<a;++s){var f=d[s],_=this.calculateIntersection_(u,c,f.p0,f.p1,!0),g=Math.abs(u.x-_[0]);g<p&&void 0!==qu(u.x,u.y,f.p0.x,f.p0.y,f.p1.x,f.p1.y)&&(p=g,l={x:_[0],y:_[1],i:-1},o=f)}if(p===1/0)return!1;if(h=o.p1,0<p){var y=this.getPointsInTriangle_(u,l,o.p1,n);if(y.length){var v=1/0;for(s=0,a=y.length;s<a;++s){var m=y[s],x=Math.atan2(u.y-m.y,c.x-m.x);(x<v||x===v&&m.x<h.x)&&(v=x,h=m)}}}for(o=i.firstItem();o.p1.x!==h.x||o.p1.y!==h.y;)o=i.nextItem();var S={x:u.x,y:u.y,i:u.i,reflex:void 0},E={x:o.p1.x,y:o.p1.y,i:o.p1.i,reflex:void 0};return t.getNextItem().p0=S,this.insertItem_(u,o.p1,t,n),this.insertItem_(E,S,t,n),o.p1=E,t.setFirstItem(),i.concat(t),!0},i.prototype.triangulate_=function(t,e){for(var i=this,r=!1,n=this.isSimple_(t,e);3<t.getLength();)if(n){if(!i.clipEars_(t,e,n,r)&&!i.classifyPoints_(t,e,r)&&!i.resolveSelfIntersections_(t,e,!0))break}else if(!i.clipEars_(t,e,n,r)&&!i.classifyPoints_(t,e,r)&&!i.resolveSelfIntersections_(t,e)){if(!(n=i.isSimple_(t,e))){i.splitPolygon_(t,e);break}r=!i.isClockwise_(t),i.classifyPoints_(t,e,r)}if(3===t.getLength()){var o=this.indices.length;this.indices[o++]=t.getPrevItem().p0.i,this.indices[o++]=t.getCurrItem().p0.i,this.indices[o++]=t.getNextItem().p0.i}},i.prototype.clipEars_=function(t,e,i,r){var n,o,s,a=this.indices.length,h=t.firstItem(),l=t.getPrevItem(),u=h,c=t.nextItem(),p=t.getNextItem(),d=!1;do{if(n=u.p0,o=u.p1,s=c.p1,!1===o.reflex){var f;f=i?0===this.getPointsInTriangle_(n,o,s,e,!0).length:r?this.diagonalIsInside_(p.p1,s,o,n,l.p0):this.diagonalIsInside_(l.p0,n,o,s,p.p1),(i||0===this.getIntersections_({p0:n,p1:s},e).length)&&f&&(i||!1===n.reflex||!1===s.reflex||zr([l.p0.x,l.p0.y,n.x,n.y,o.x,o.y,s.x,s.y,p.p1.x,p.p1.y],0,10,2)===!r)&&(this.indices[a++]=n.i,this.indices[a++]=o.i,this.indices[a++]=s.i,this.removeItem_(u,c,t,e),c===h&&(h=p),d=!0)}l=t.getPrevItem(),u=t.getCurrItem(),c=t.nextItem(),p=t.getNextItem()}while(u!==h&&3<t.getLength());return d},i.prototype.resolveSelfIntersections_=function(t,e,i){var r=t.firstItem();t.nextItem();var n=r,o=t.nextItem(),s=!1;do{var a=this.calculateIntersection_(n.p0,n.p1,o.p0,o.p1,i);if(a){var h=!1,l=this.vertices.length,u=this.indices.length,c=l/2,p=t.prevItem();t.removeItem(),e.remove(p),h=p===r;var d=void 0;if(i?(a[0]===n.p0.x&&a[1]===n.p0.y?(t.prevItem(),d=n.p0,o.p0=d,e.remove(n),h=h||n===r):(d=o.p1,n.p1=d,e.remove(o),h=h||o===r),t.removeItem()):(d=this.createPoint_(a[0],a[1],c),n.p1=d,o.p0=d,e.update([Math.min(n.p0.x,n.p1.x),Math.min(n.p0.y,n.p1.y),Math.max(n.p0.x,n.p1.x),Math.max(n.p0.y,n.p1.y)],n),e.update([Math.min(o.p0.x,o.p1.x),Math.min(o.p0.y,o.p1.y),Math.max(o.p0.x,o.p1.x),Math.max(o.p0.y,o.p1.y)],o)),this.indices[u++]=p.p0.i,this.indices[u++]=p.p1.i,this.indices[u++]=d.i,s=!0,h)break}n=t.getPrevItem(),o=t.nextItem()}while(n!==r);return s},i.prototype.isSimple_=function(t,e){var i=t.firstItem(),r=i;do{if(this.getIntersections_(r,e).length)return!1;r=t.nextItem()}while(r!==i);return!0},i.prototype.isClockwise_=function(t){for(var e=2*t.getLength(),i=new Array(e),r=t.firstItem(),n=r,o=0;i[o++]=n.p0.x,i[o++]=n.p0.y,(n=t.nextItem())!==r;);return zr(i,0,e,2)},i.prototype.splitPolygon_=function(t,e){var i=this,r=t.firstItem(),n=r;do{var o=i.getIntersections_(n,e);if(o.length){var s=o[0],a=i.vertices.length/2,h=i.calculateIntersection_(n.p0,n.p1,s.p0,s.p1),l=i.createPoint_(h[0],h[1],a),u=new vc,c=new gh;i.insertItem_(l,n.p1,u,c),n.p1=l,e.update([Math.min(n.p0.x,l.x),Math.min(n.p0.y,l.y),Math.max(n.p0.x,l.x),Math.max(n.p0.y,l.y)],n);for(var p=t.nextItem();p!==s;)i.insertItem_(p.p0,p.p1,u,c),e.remove(p),t.removeItem(),p=t.getCurrItem();i.insertItem_(s.p0,l,u,c),s.p0=l,e.update([Math.min(s.p1.x,l.x),Math.min(s.p1.y,l.y),Math.max(s.p1.x,l.x),Math.max(s.p1.y,l.y)],s),i.classifyPoints_(t,e,!1),i.triangulate_(t,e),i.classifyPoints_(u,c,!1),i.triangulate_(u,c);break}n=t.nextItem()}while(n!==r)},i.prototype.createPoint_=function(t,e,i){var r=this.vertices.length;return{x:this.vertices[r++]=t,y:this.vertices[r++]=e,i:i,reflex:void 0}},i.prototype.insertItem_=function(t,e,i,r){var n={p0:t,p1:e};return i.insertItem(n),r&&r.insert([Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y)],n),n},i.prototype.removeItem_=function(t,e,i,r){i.getCurrItem()===e&&(i.removeItem(),t.p1=e.p1,r.remove(e),r.update([Math.min(t.p0.x,t.p1.x),Math.min(t.p0.y,t.p1.y),Math.max(t.p0.x,t.p1.x),Math.max(t.p0.y,t.p1.y)],t))},i.prototype.getPointsInTriangle_=function(t,e,i,r,n){for(var o=[],s=r.getInExtent([Math.min(t.x,e.x,i.x),Math.min(t.y,e.y,i.y),Math.max(t.x,e.x,i.x),Math.max(t.y,e.y,i.y)]),a=0,h=s.length;a<h;++a)for(var l in s[a]){var u=s[a][l];"object"!=typeof u||n&&!u.reflex||u.x===t.x&&u.y===t.y||u.x===e.x&&u.y===e.y||u.x===i.x&&u.y===i.y||-1!==o.indexOf(u)||!Gr([t.x,t.y,e.x,e.y,i.x,i.y],0,6,2,u.x,u.y)||o.push(u)}return o},i.prototype.getIntersections_=function(t,e,i){for(var r=t.p0,n=t.p1,o=e.getInExtent([Math.min(r.x,n.x),Math.min(r.y,n.y),Math.max(r.x,n.x),Math.max(r.y,n.y)]),s=[],a=0,h=o.length;a<h;++a){var l=o[a];t!==l&&(i||l.p0!==n||l.p1!==r)&&this.calculateIntersection_(r,n,l.p0,l.p1,i)&&s.push(l)}return s},i.prototype.calculateIntersection_=function(t,e,i,r,n){var o=(r.y-i.y)*(e.x-t.x)-(r.x-i.x)*(e.y-t.y);if(0!==o){var s=((r.x-i.x)*(t.y-i.y)-(r.y-i.y)*(t.x-i.x))/o,a=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/o;if(!n&&Zu<s&&s<1-Zu&&Zu<a&&a<1-Zu||n&&0<=s&&s<=1&&0<=a&&a<=1)return[t.x+s*(e.x-t.x),t.y+s*(e.y-t.y)]}},i.prototype.diagonalIsInside_=function(t,e,i,r,n){if(void 0===e.reflex||void 0===r.reflex)return!1;var o=(i.x-r.x)*(e.y-r.y)>(i.y-r.y)*(e.x-r.x),s=(n.x-r.x)*(e.y-r.y)<(n.y-r.y)*(e.x-r.x),a=(t.x-e.x)*(r.y-e.y)>(t.y-e.y)*(r.x-e.x),h=(i.x-e.x)*(r.y-e.y)<(i.y-e.y)*(r.x-e.x),l=r.reflex?s||o:s&&o,u=e.reflex?h||a:h&&a;return l&&u},i.prototype.drawMultiPolygon=function(t,e){var i,r,n,o,s=t.getEndss(),a=t.getStride(),h=this.indices.length,l=this.lineStringReplay.getCurrentIndex(),u=t.getFlatCoordinates(),c=0;for(i=0,r=s.length;i<r;++i){var p=s[i];if(0<p.length){var d=vt(u,c,p[0],a,-this.origin[0],-this.origin[1]);if(d.length){var f=[],_=void 0;for(n=1,o=p.length;n<o;++n)p[n]!==p[n-1]&&(_=vt(u,p[n-1],p[n],a,-this.origin[0],-this.origin[1]),f.push(_));this.lineStringReplay.drawPolygonCoordinates(d,f,a),this.drawCoordinates_(d,f,a)}}c=p[p.length-1]}this.indices.length>h&&(this.startIndices.push(h),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(h),this.state_.changed=!1)),this.lineStringReplay.getCurrentIndex()>l&&this.lineStringReplay.setPolygonStyle(e,l)},i.prototype.drawPolygon=function(t,e){var i=t.getEnds(),r=t.getStride();if(0<i.length){var n=t.getFlatCoordinates().map(Number),o=vt(n,0,i[0],r,-this.origin[0],-this.origin[1]);if(o.length){var s,a,h,l=[];for(s=1,a=i.length;s<a;++s)i[s]!==i[s-1]&&(h=vt(n,i[s-1],i[s],r,-this.origin[0],-this.origin[1]),l.push(h));this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.lineStringReplay.setPolygonStyle(e),this.lineStringReplay.drawPolygonCoordinates(o,l,r),this.drawCoordinates_(o,l,r)}}},i.prototype.finish=function(t){this.verticesBuffer=new Ju(this.vertices),this.indicesBuffer=new Ju(this.indices),this.startIndices.push(this.indices.length),this.lineStringReplay.finish(t),0===this.styleIndices_.length&&0<this.styles_.length&&(this.styles_=[]),this.vertices=null,this.indices=null},i.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer,r=this.lineStringReplay.getDeleteResourcesFunction(t);return function(){t.deleteBuffer(e),t.deleteBuffer(i),r()}},i.prototype.setUpProgram=function(t,e,i,r){var n,o=e.getProgram(_c,gc);return this.defaultLocations_?n=this.defaultLocations_:(n=new yc(t,o),this.defaultLocations_=n),e.useProgram(o),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,Be,!1,8,0),n},i.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position)},i.prototype.drawReplay=function(t,e,i,r){var n,o,s,a,h=t.getParameter(t.DEPTH_FUNC),u=t.getParameter(t.DEPTH_WRITEMASK);if(r||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),l(i))for(s=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;0<=n;--n)o=this.styleIndices_[n],a=this.styles_[n],this.setFillStyle_(t,a),this.drawElements(t,e,o,s),s=o;else this.drawReplaySkipping_(t,e,i);r||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(u),t.depthFunc(h))},i.prototype.drawHitDetectionReplayOneByOne=function(t,i,r,n,o){var s,a,h,l,u,c,p;for(p=this.startIndices.length-2,h=this.startIndices[p+1],s=this.styleIndices_.length-1;0<=s;--s)for(l=this.styles_[s],this.setFillStyle_(t,l),u=this.styleIndices_[s];0<=p&&this.startIndices[p]>=u;){if(a=this.startIndices[p],void 0===r[e(c=this.startIndicesFeature[p]).toString()]&&c.getGeometry()&&(void 0===o||dt(o,c.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,i,a,h);var d=n(c);if(d)return d}p--,h=a}},i.prototype.drawReplaySkipping_=function(t,i,r){var n,o,s,a,h,l,u;for(l=this.startIndices.length-2,s=o=this.startIndices[l+1],n=this.styleIndices_.length-1;0<=n;--n){for(a=this.styles_[n],this.setFillStyle_(t,a),h=this.styleIndices_[n];0<=l&&this.startIndices[l]>=h;)u=this.startIndices[l],r[e(this.startIndicesFeature[l]).toString()]&&(o!==s&&(this.drawElements(t,i,o,s),t.clear(t.DEPTH_BUFFER_BIT)),s=u),l--,o=u;o!==s&&(this.drawElements(t,i,o,s),t.clear(t.DEPTH_BUFFER_BIT)),o=s=h}},i.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_color,e)},i.prototype.setFillStrokeStyle=function(t,e){var i=t?t.getColor():[0,0,0,0];if(i=i instanceof CanvasGradient||i instanceof CanvasPattern?Wu:Pe(i).map(function(t,e){return 3!=e?t/255:t})||Wu,this.state_.fillColor&&ur(i,this.state_.fillColor)||(this.state_.fillColor=i,this.state_.changed=!0,this.styles_.push(i)),e)this.lineStringReplay.setFillStrokeStyle(null,e);else{var r=new Bi({color:[0,0,0,0],lineWidth:0});this.lineStringReplay.setFillStrokeStyle(null,r)}},i}(Vu),xc=function(t,e){this.space_=e,this.emptyBlocks_=[{x:0,y:0,width:t,height:t}],this.entries_={},this.context_=Ae(t,t),this.canvas_=this.context_.canvas};xc.prototype.get=function(t){return this.entries_[t]||null},xc.prototype.add=function(t,e,i,r,n){for(var o=this,s=0,a=this.emptyBlocks_.length;s<a;++s){var h=o.emptyBlocks_[s];if(h.width>=e+o.space_&&h.height>=i+o.space_){var l={offsetX:h.x+o.space_,offsetY:h.y+o.space_,image:o.canvas_};return o.entries_[t]=l,r.call(n,o.context_,h.x+o.space_,h.y+o.space_),o.split_(s,h,e+o.space_,i+o.space_),l}}return null},xc.prototype.split_=function(t,e,i,r){var n,o,s=e.width-i;e.height-r<s?(n={x:e.x+i,y:e.y,width:e.width-i,height:e.height},o={x:e.x,y:e.y+r,width:i,height:e.height-r}):(n={x:e.x+i,y:e.y,width:e.width-i,height:r},o={x:e.x,y:e.y+r,width:e.width,height:e.height-r}),this.updateBlocks_(t,n,o)},xc.prototype.updateBlocks_=function(t,e,i){var r=[t,1];0<e.width&&0<e.height&&r.push(e),0<i.width&&0<i.height&&r.push(i),this.emptyBlocks_.splice.apply(this.emptyBlocks_,r)};var Sc=function(t){var e=t||{};this.currentSize_=void 0!==e.initialSize?e.initialSize:256,this.maxSize_=void 0!==e.maxSize?e.maxSize:void 0!==je?je:2048,this.space_=void 0!==e.space?e.space:1,this.atlases_=[new xc(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new xc(this.currentHitSize_,this.space_)]};Sc.prototype.getInfo=function(t){var e=this.getInfo_(this.atlases_,t);if(!e)return null;var i=this.getInfo_(this.hitAtlases_,t);return this.mergeInfos_(e,i)},Sc.prototype.getInfo_=function(t,e){for(var i=0,r=t.length;i<r;++i){var n=t[i].get(e);if(n)return n}return null},Sc.prototype.mergeInfos_=function(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,hitImage:e.image}},Sc.prototype.add=function(t,e,i,r,n,o){if(e+this.space_>this.maxSize_||i+this.space_>this.maxSize_)return null;var s=this.add_(!1,t,e,i,r,o);if(!s)return null;var a=void 0!==n?n:E,h=this.add_(!0,t,e,i,a,o);return this.mergeInfos_(s,h)},Sc.prototype.add_=function(t,e,i,r,n,o){var s,a,h,l,u=t?this.hitAtlases_:this.atlases_;for(h=0,l=u.length;h<l;++h){if(a=(s=u[h]).add(e,i,r,n,o))return a;if(!a&&h===l-1){var c=void 0;t?(c=Math.min(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=c):(c=Math.min(2*this.currentSize_,this.maxSize_),this.currentSize_=c),s=new xc(c,this.space_),u.push(s),++l}}return null};var Ec=function(t){function i(e,i){t.call(this,e,i),this.images_=[],this.textures_=[],this.measureCanvas_=Ae(0,0).canvas,this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.atlases_={},this.currAtlas_=void 0,this.scale=1,this.opacity=1}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.drawText=function(t,i){var r=this;if(this.text_){var n=null,o=2,s=2;switch(t.getType()){case It.POINT:case It.MULTI_POINT:o=(n=t.getFlatCoordinates()).length,s=t.getStride();break;case It.CIRCLE:n=t.getCenter();break;case It.LINE_STRING:n=t.getFlatMidpoint();break;case It.MULTI_LINE_STRING:o=(n=t.getFlatMidpoints()).length;break;case It.POLYGON:n=t.getFlatInteriorPoint();break;case It.MULTI_POLYGON:o=(n=t.getFlatInteriorPoints()).length}this.startIndices.push(this.indices.length),this.startIndicesFeature.push(i);var a,h,l,u,c,p,d,f,_=this.currAtlas_,g=this.text_.split("\n"),y=this.getTextSize_(g),v=Math.round(y[0]*this.textAlign_-this.offsetX_),m=Math.round(y[1]*this.textBaseline_-this.offsetY_),x=this.state_.lineWidth/2*this.state_.scale;for(a=0,h=g.length;a<h;++a)for(c=0,p=_.height*a,l=0,u=(d=g[a].split("")).length;l<u;++l){if(f=_.atlas.getInfo(d[l])){var S=f.image;r.anchorX=v-c,r.anchorY=m-p,r.originX=0===l?f.offsetX-x:f.offsetX,r.originY=f.offsetY,r.height=_.height,r.width=0===l||l===d.length-1?_.width[d[l]]+x:_.width[d[l]],r.imageHeight=S.height,r.imageWidth=S.width,0===r.images_.length?r.images_.push(S):e(r.images_[r.images_.length-1])!=e(S)&&(r.groupIndices.push(r.indices.length),r.images_.push(S)),r.drawText_(n,0,o,s)}c+=r.width}}},i.prototype.getTextSize_=function(t){var e=this,i=this.currAtlas_,r=t.length*i.height;return[t.map(function(t){for(var r=0,n=0,o=t.length;n<o;++n){var s=t[n];i.width[s]||e.addCharToAtlas_(s),r+=i.width[s]?i.width[s]:0}return r}).reduce(function(t,e){return Math.max(t,e)}),r]},i.prototype.drawText_=function(t,e,i,r){for(var n=e,o=i;n<o;n+=r)this.drawCoordinates(t,e,i,r)},i.prototype.addCharToAtlas_=function(t){if(1===t.length){var e=this.currAtlas_,i=this.state_,r=this.measureCanvas_.getContext("2d");r.font=i.font;var n=Math.ceil(r.measureText(t).width*i.scale);e.atlas.add(t,n,e.height,function(e,r,n){e.font=i.font,e.fillStyle=i.fillColor,e.strokeStyle=i.strokeColor,e.lineWidth=i.lineWidth,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.miterLimit=i.miterLimit,e.textAlign="left",e.textBaseline="top",oi&&i.lineDash&&(e.setLineDash(i.lineDash),e.lineDashOffset=i.lineDashOffset),1!==i.scale&&e.setTransform(i.scale,0,0,i.scale,0,0),i.strokeColor&&e.strokeText(t,r,n),i.fillColor&&e.fillText(t,r,n)})&&(e.width[t]=n)}},i.prototype.finish=function(e){var i=e.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices=this.groupIndices,this.verticesBuffer=new Ju(this.vertices),this.indicesBuffer=new Ju(this.indices),this.createTextures(this.textures_,this.images_,{},i),this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.images_=null,this.atlases_={},this.currAtlas_=void 0,t.prototype.finish.call(this,e)},i.prototype.setTextStyle=function(t){var e=this.state_,i=t.getFill(),r=t.getStroke();if(t&&t.getText()&&(i||r)){if(i){var n=i.getColor();e.fillColor=Ne(n||Wu)}else e.fillColor=null;if(r){var o=r.getColor();e.strokeColor=Ne(o||Hu),e.lineWidth=r.getWidth()||1,e.lineCap=r.getLineCap()||"round",e.lineDashOffset=r.getLineDashOffset()||0,e.lineJoin=r.getLineJoin()||"round",e.miterLimit=r.getMiterLimit()||10;var s=r.getLineDash();e.lineDash=s?s.slice():Ku}else e.strokeColor=null,e.lineWidth=0;e.font=t.getFont()||"10px sans-serif",e.scale=t.getScale()||1,this.text_=t.getText();var a=Al[t.getTextAlign()],h=Al[t.getTextBaseline()];this.textAlign_=void 0===a?.5:a,this.textBaseline_=void 0===h?.5:h,this.offsetX_=t.getOffsetX()||0,this.offsetY_=t.getOffsetY()||0,this.rotateWithView=!!t.getRotateWithView(),this.rotation=t.getRotation()||0,this.currAtlas_=this.getAtlas_(e)}else this.text_=""},i.prototype.getAtlas_=function(t){var e=[];for(var i in t)(t[i]||0===t[i])&&(Array.isArray(t[i])?e=e.concat(t[i]):e.push(t[i]));var r=this.calculateHash_(e);if(!this.atlases_[r]){var n=this.measureCanvas_.getContext("2d");n.font=t.font;var o=Math.ceil((1.5*n.measureText("M").width+t.lineWidth/2)*t.scale);this.atlases_[r]={atlas:new Sc({space:t.lineWidth+1}),width:{},height:o}}return this.atlases_[r]},i.prototype.calculateHash_=function(t){for(var e="",i=0,r=t.length;i<r;++i)e+=t[i];return e},i.prototype.getTextures=function(t){return this.textures_},i.prototype.getHitDetectionTextures=function(){return this.textures_},i}(hc),Cc=[1,1],Tc={Circle:Qu,Image:lc,LineString:fc,Polygon:mc,Text:Ec},wc=function(t){function e(e,i,r){t.call(this),this.maxExtent_=i,this.tolerance_=e,this.renderBuffer_=r,this.replaysByZIndex_={}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.addDeclutter=function(t,e){},e.prototype.getDeleteResourcesFunction=function(t){var e,i=[];for(e in this.replaysByZIndex_){var r=this.replaysByZIndex_[e];for(var n in r)i.push(r[n].getDeleteResourcesFunction(t))}return function(){for(var t,e=arguments,r=i.length,n=0;n<r;n++)t=i[n].apply(this,e);return t}},e.prototype.finish=function(t){var e;for(e in this.replaysByZIndex_){var i=this.replaysByZIndex_[e];for(var r in i)i[r].finish(t)}},e.prototype.getReplay=function(t,e){var i=void 0!==t?t.toString():"0",r=this.replaysByZIndex_[i];void 0===r&&(r={},this.replaysByZIndex_[i]=r);var n=r[e];return void 0===n&&(n=new Tc[e](this.tolerance_,this.maxExtent_),r[e]=n),n},e.prototype.isEmpty=function(){return l(this.replaysByZIndex_)},e.prototype.replay=function(t,e,i,r,n,o,s,a){var h,l,u,c,p,d,f=Object.keys(this.replaysByZIndex_).map(Number);for(f.sort(nr),h=0,l=f.length;h<l;++h)for(p=this.replaysByZIndex_[f[h].toString()],u=0,c=Nl.length;u<c;++u)void 0!==(d=p[Nl[u]])&&d.replay(t,e,i,r,n,o,s,a,void 0,!1)},e.prototype.replayHitDetection_=function(t,e,i,r,n,o,s,a,h,l,u){var c,p,d,f,_,g,y=Object.keys(this.replaysByZIndex_).map(Number);for(y.sort(function(t,e){return e-t}),c=0,p=y.length;c<p;++c)for(f=this.replaysByZIndex_[y[c].toString()],d=Nl.length-1;0<=d;--d)if(void 0!==(_=f[Nl[d]])&&(g=_.replay(t,e,i,r,n,o,s,a,h,l,u)))return g},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n,o,s,a,h,l){var u,c=e.getGL();return c.bindFramebuffer(c.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.renderBuffer_&&(u=j(Z(t),r*this.renderBuffer_)),this.replayHitDetection_(e,t,r,n,Cc,s,a,h,function(t){var e=new Uint8Array(4);if(c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,e),0<e[3]){var i=l(t);if(i)return i}},!0,u)},e.prototype.hasFeatureAtCoordinate=function(t,e,i,r,n,o,s,a,h){var l=e.getGL();return l.bindFramebuffer(l.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.replayHitDetection_(e,t,r,n,Cc,s,a,h,function(t){var e=new Uint8Array(4);return l.readPixels(0,0,1,1,l.RGBA,l.UNSIGNED_BYTE,e),0<e[3]},!1)},e}(Il),Rc=function(t){function e(e,i,r,n,o,s,a){t.call(this),this.context_=e,this.center_=i,this.extent_=s,this.pixelRatio_=a,this.size_=o,this.rotation_=n,this.resolution_=r,this.imageStyle_=null,this.fillStyle_=null,this.strokeStyle_=null,this.textStyle_=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.drawText_=function(t,e){var i=this.context_,r=t.getReplay(0,Ll.TEXT);r.setTextStyle(this.textStyle_),r.drawText(e,null),r.finish(i),r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)()},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case It.POINT:this.drawPoint(t,null);break;case It.LINE_STRING:this.drawLineString(t,null);break;case It.POLYGON:this.drawPolygon(t,null);break;case It.MULTI_POINT:this.drawMultiPoint(t,null);break;case It.MULTI_LINE_STRING:this.drawMultiLineString(t,null);break;case It.MULTI_POLYGON:this.drawMultiPolygon(t,null);break;case It.GEOMETRY_COLLECTION:this.drawGeometryCollection(t,null);break;case It.CIRCLE:this.drawCircle(t,null)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&dt(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t,e){var i,r,n=t.getGeometriesArray();for(i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])},e.prototype.drawPoint=function(t,e){var i=this.context_,r=new wc(1,this.extent_),n=r.getReplay(0,Ll.IMAGE);n.setImageStyle(this.imageStyle_),n.drawPoint(t,e),n.finish(i),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawMultiPoint=function(t,e){var i=this.context_,r=new wc(1,this.extent_),n=r.getReplay(0,Ll.IMAGE);n.setImageStyle(this.imageStyle_),n.drawMultiPoint(t,e),n.finish(i),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawLineString=function(t,e){var i=this.context_,r=new wc(1,this.extent_),n=r.getReplay(0,Ll.LINE_STRING);n.setFillStrokeStyle(null,this.strokeStyle_),n.drawLineString(t,e),n.finish(i),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawMultiLineString=function(t,e){var i=this.context_,r=new wc(1,this.extent_),n=r.getReplay(0,Ll.LINE_STRING);n.setFillStrokeStyle(null,this.strokeStyle_),n.drawMultiLineString(t,e),n.finish(i),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawPolygon=function(t,e){var i=this.context_,r=new wc(1,this.extent_),n=r.getReplay(0,Ll.POLYGON);n.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),n.drawPolygon(t,e),n.finish(i),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawMultiPolygon=function(t,e){var i=this.context_,r=new wc(1,this.extent_),n=r.getReplay(0,Ll.POLYGON);n.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),n.drawMultiPolygon(t,e),n.finish(i),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawCircle=function(t,e){var i=this.context_,r=new wc(1,this.extent_),n=r.getReplay(0,Ll.CIRCLE);n.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),n.drawCircle(t,e),n.finish(i),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.setImageStyle=function(t){this.imageStyle_=t},e.prototype.setFillStrokeStyle=function(t,e){this.fillStyle_=t,this.strokeStyle_=e},e.prototype.setTextStyle=function(t){this.textStyle_=t},e}(ul),Ic=new ju("precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n"),Lc=new Uu("varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n"),bc=function(t,e){this.u_texCoordMatrix=t.getUniformLocation(e,"u_texCoordMatrix"),this.u_projectionMatrix=t.getUniformLocation(e,"u_projectionMatrix"),this.u_opacity=t.getUniformLocation(e,"u_opacity"),this.u_texture=t.getUniformLocation(e,"u_texture"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_texCoord=t.getAttribLocation(e,"a_texCoord")},Fc=function(t){function e(e,i){t.call(this,i),this.mapRenderer=e,this.arrayBuffer_=new Ju([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0,this.texCoordMatrix=[1,0,0,1,0,0],this.projectionMatrix=[1,0,0,1,0,0],this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.defaultLocations_=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.bindFramebuffer=function(t,e){var i=this.mapRenderer.getGL();if(void 0===this.framebufferDimension||this.framebufferDimension!=e){var r=function(t,e,i){t.isContextLost()||(t.deleteFramebuffer(e),t.deleteTexture(i))}.bind(null,i,this.framebuffer,this.texture);t.postRenderFunctions.push(r);var n=sc(i,e,e),o=i.createFramebuffer();i.bindFramebuffer(Ke,o),i.framebufferTexture2D(Ke,36064,Ve,n,0),this.texture=n,this.framebuffer=o,this.framebufferDimension=e}else i.bindFramebuffer(Ke,this.framebuffer)},e.prototype.composeFrame=function(t,e,i){this.dispatchComposeEvent_(xn,i,t),i.bindBuffer(Ye,this.arrayBuffer_);var r,n=i.getGL(),o=i.getProgram(Ic,Lc);this.defaultLocations_?r=this.defaultLocations_:(r=new bc(n,o),this.defaultLocations_=r),i.useProgram(o)&&(n.enableVertexAttribArray(r.a_position),n.vertexAttribPointer(r.a_position,2,Be,!1,16,0),n.enableVertexAttribArray(r.a_texCoord),n.vertexAttribPointer(r.a_texCoord,2,Be,!1,16,8),n.uniform1i(r.u_texture,0)),n.uniformMatrix4fv(r.u_texCoordMatrix,!1,zu(this.tmpMat4_,this.getTexCoordMatrix())),n.uniformMatrix4fv(r.u_projectionMatrix,!1,zu(this.tmpMat4_,this.getProjectionMatrix())),n.uniform1f(r.u_opacity,e.opacity),n.bindTexture(Ve,this.getTexture()),n.drawArrays(5,0,4),this.dispatchComposeEvent_(mn,i,t)},e.prototype.dispatchComposeEvent_=function(t,e,i){var r=this.getLayer();if(r.hasListener(t)){var n=i.viewState,o=n.resolution,s=i.pixelRatio,a=i.extent,h=n.center,l=n.rotation,u=i.size,c=new Rc(e,h,o,l,u,a,s),p=new ll(t,c,i,null,e);r.dispatchEvent(p)}},e.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix},e.prototype.getTexture=function(){return this.texture},e.prototype.getProjectionMatrix=function(){return this.projectionMatrix},e.prototype.handleWebGLContextLost=function(){this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0},e.prototype.prepareFrame=function(t,e,i){},e.prototype.forEachLayerAtPixel=function(t,e,i,r){},e}(xl),Pc=function(t){function e(e,i){t.call(this,e,i),this.image_=null,this.hitCanvasContext_=null,this.hitTransformationMatrix_=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.createTexture_=function(t){var e=t.getImage();return ac(this.mapRenderer.getGL(),e,We,We)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n){var o=this.getLayer(),s=o.getSource(),a=e.viewState.resolution,h=e.viewState.rotation,l=e.skippedFeatureUids;return s.forEachFeatureAtCoordinate(t,a,h,i,l,function(t){return r.call(n,t,o)})},e.prototype.prepareFrame=function(t,e,i){var r=this.mapRenderer.getGL(),n=t.pixelRatio,o=t.viewState,s=o.center,a=o.resolution,h=o.rotation,l=this.image_,u=this.texture,c=this.getLayer().getSource(),p=t.viewHints,d=t.extent;if(void 0!==e.extent&&(d=lt(d,e.extent)),!p[Yo.ANIMATING]&&!p[Yo.INTERACTING]&&!ft(d)){var f=o.projection,_=c.getImage(d,a,n,f);if(_&&this.loadImage(_)&&(l=_,u=this.createTexture_(_),this.texture)){var g=function(t,e){t.isContextLost()||t.deleteTexture(e)}.bind(null,r,this.texture);t.postRenderFunctions.push(g)}}if(l){var y=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(y.width,y.height,n,s,a,h,l.getExtent()),this.hitTransformationMatrix_=null;var v=this.texCoordMatrix;de(v),me(v,1,-1),xe(v,0,-1),this.image_=l,this.texture=u}return!!l},e.prototype.updateProjectionMatrix_=function(t,e,i,r,n,o,s){var a=t*n,h=e*n,l=this.projectionMatrix;de(l),me(l,2*i/a,2*i/h),ve(l,-o),xe(l,s[0]-r[0],s[1]-r[1]),me(l,(s[2]-s[0])/2,(s[3]-s[1])/2),xe(l,1,1)},e.prototype.hasFeatureAtCoordinate=function(t,e){return void 0!==this.forEachFeatureAtCoordinate(t,e,0,x,this)},e.prototype.forEachLayerAtPixel=function(t,e,i,r){if(this.image_&&this.image_.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==E){var n=ye(e.pixelToCoordinateTransform,t.slice());return this.forEachFeatureAtCoordinate(n,e,0,x,this)?i.call(r,this.getLayer(),null):void 0}var o=[this.image_.getImage().width,this.image_.getImage().height];this.hitTransformationMatrix_||(this.hitTransformationMatrix_=this.getHitTransformationMatrix_(e.size,o));var s=ye(this.hitTransformationMatrix_,t.slice());if(!(s[0]<0||s[0]>o[0]||s[1]<0||s[1]>o[1])){this.hitCanvasContext_||(this.hitCanvasContext_=Ae(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.image_.getImage(),s[0],s[1],1,1,0,0,1,1);var a=this.hitCanvasContext_.getImageData(0,0,1,1).data;return 0<a[3]?i.call(r,this.getLayer(),a):void 0}}},e.prototype.getHitTransformationMatrix_=function(t,e){var i=[1,0,0,1,0,0];xe(i,-1,-1),me(i,2/t[0],2/t[1]),xe(i,0,t[1]),me(i,1,-1);var r=Ee(this.projectionMatrix.slice()),n=[1,0,0,1,0,0];return xe(n,0,e[1]),me(n,1,-1),me(n,e[0]/2,e[1]/2),xe(n,1,1),fe(n,r),fe(n,i),n},e}(Fc);Pc.handles=function(t){return t.getType()===Ba.IMAGE},Pc.create=function(t,e){return new Pc(t,e)};var Mc=function(t){function e(e){t.call(this,e);var i=e.getViewport();this.canvas_=document.createElement("canvas"),this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=pi,i.insertBefore(this.canvas_,i.childNodes[0]||null),this.clipTileCanvasWidth_=0,this.clipTileCanvasHeight_=0,this.clipTileContext_=Ae(),this.renderedVisible_=!0,this.gl_=Ze(this.canvas_,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.context_=new nc(this.canvas_,this.gl_),f(this.canvas_,ic,this.handleWebGLContextLost,this),f(this.canvas_,rc,this.handleWebGLContextRestored,this),this.textureCache_=new gi,this.focus_=null,this.tileTextureQueue_=new No(function(t){var e=t[1],i=t[2],r=e[0]-this.focus_[0],n=e[1]-this.focus_[1];return 65536*Math.log(i)+Math.sqrt(r*r+n*n)/i}.bind(this),function(t){return t[0].getKey()}),this.loadNextTileTexture_=function(t,e){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();var i=this.tileTextureQueue_.dequeue(),r=i[0],n=i[3],o=i[4];this.bindTileTexture(r,n,o,9729,9729)}return!1}.bind(this),this.textureCacheFrameMarkerCount_=0,this.initializeGL_()}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.bindTileTexture=function(t,e,i,r,n){var o=this.getGL(),s=t.getKey();if(this.textureCache_.containsKey(s)){var a=this.textureCache_.get(s);o.bindTexture(Ve,a.texture),a.magFilter!=r&&(o.texParameteri(Ve,10240,r),a.magFilter=r),a.minFilter!=n&&(o.texParameteri(Ve,10241,n),a.minFilter=n)}else{var h=o.createTexture();if(o.bindTexture(Ve,h),0<i){var l=this.clipTileContext_.canvas,u=this.clipTileContext_;this.clipTileCanvasWidth_!==e[0]||this.clipTileCanvasHeight_!==e[1]?(l.width=e[0],l.height=e[1],this.clipTileCanvasWidth_=e[0],this.clipTileCanvasHeight_=e[1]):u.clearRect(0,0,e[0],e[1]),u.drawImage(t.getImage(),i,i,e[0],e[1],0,0,e[0],e[1]),o.texImage2D(Ve,0,6408,6408,5121,l)}else o.texImage2D(Ve,0,6408,6408,5121,t.getImage());o.texParameteri(Ve,10240,r),o.texParameteri(Ve,10241,n),o.texParameteri(Ve,Xe,We),o.texParameteri(Ve,ze,We),this.textureCache_.set(s,{texture:h,magFilter:r,minFilter:n})}},e.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap();if(i.hasListener(t)){var r=this.context_,n=e.extent,o=e.size,s=e.viewState,a=e.pixelRatio,h=s.resolution,l=s.center,u=s.rotation,c=new Rc(r,l,h,u,o,n,a),p=new ll(t,c,e,null,r);i.dispatchEvent(p)}},e.prototype.disposeInternal=function(){var e=this.getGL();e.isContextLost()||this.textureCache_.forEach(function(t){t&&e.deleteTexture(t.texture)}),this.context_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.expireCache_=function(t,e){for(var i,r=this.getGL();1024<this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_;){if(i=this.textureCache_.peekLast())r.deleteTexture(i.texture);else{if(+this.textureCache_.peekLastKey()==e.index)break;--this.textureCacheFrameMarkerCount_}this.textureCache_.pop()}},e.prototype.getContext=function(){return this.context_},e.prototype.getGL=function(){return this.gl_},e.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_},e.prototype.handleWebGLContextLost=function(t){t.preventDefault(),this.textureCache_.clear(),this.textureCacheFrameMarkerCount_=0;var e=this.getLayerRenderers();for(var i in e)e[i].handleWebGLContextLost()},e.prototype.handleWebGLContextRestored=function(){this.initializeGL_(),this.getMap().render()},e.prototype.initializeGL_=function(){var t=this.gl_;t.activeTexture(33984),t.blendFuncSeparate(770,771,1,771),t.disable(2884),t.disable(2929),t.disable(3089),t.disable(2960)},e.prototype.isTileTextureLoaded=function(t){return this.textureCache_.containsKey(t.getKey())},e.prototype.renderFrame=function(t){var e=this.getContext(),i=this.getGL();if(i.isContextLost())return!1;if(!t)return this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1),!1;this.focus_=t.focus,this.textureCache_.set((-t.index).toString(),null),++this.textureCacheFrameMarkerCount_,this.dispatchRenderEvent(xn,t);var r=[],n=t.layerStatesArray;cr(n,yl);var o,s,a,h=t.viewState.resolution;for(o=0,s=n.length;o<s;++o)ps(a=n[o],h)&&a.sourceState==is&&this.getLayerRenderer(a.layer).prepareFrame(t,a,e)&&r.push(a);var l=t.size[0]*t.pixelRatio,u=t.size[1]*t.pixelRatio;for(this.canvas_.width==l&&this.canvas_.height==u||(this.canvas_.width=l,this.canvas_.height=u),i.bindFramebuffer(Ke,null),i.clearColor(0,0,0,0),i.clear(16384),i.enable(3042),i.viewport(0,0,this.canvas_.width,this.canvas_.height),o=0,s=r.length;o<s;++o)a=r[o],this.getLayerRenderer(a.layer).composeFrame(t,a,e);this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.calculateMatrices2D(t),1024<this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_&&t.postRenderFunctions.push(this.expireCache_.bind(this)),this.tileTextureQueue_.isEmpty()||(t.postRenderFunctions.push(this.loadNextTileTexture_),t.animate=!0),this.dispatchRenderEvent(mn,t),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n,o,s){var a;if(this.getGL().isContextLost())return!1;var h,l=e.viewState,u=e.layerStatesArray;for(h=u.length-1;0<=h;--h){var c=u[h],p=c.layer;if(ps(c,l.resolution)&&o.call(s,p)&&(a=this.getLayerRenderer(p).forEachFeatureAtCoordinate(t,e,i,r,n)))return a}},e.prototype.hasFeatureAtCoordinate=function(t,e,i,r,n){var o=!1;if(this.getGL().isContextLost())return!1;var s,a=e.viewState,h=e.layerStatesArray;for(s=h.length-1;0<=s;--s){var l=h[s],u=l.layer;if(ps(l,a.resolution)&&r.call(n,u)&&(o=this.getLayerRenderer(u).hasFeatureAtCoordinate(t,e)))return!0}return o},e.prototype.forEachLayerAtPixel=function(t,e,i,r,n,o,s){if(this.getGL().isContextLost())return!1;var a,h,l=e.viewState,u=e.layerStatesArray;for(h=u.length-1;0<=h;--h){var c=u[h],p=c.layer;if(ps(c,l.resolution)&&o.call(n,p)&&(a=this.getLayerRenderer(p).forEachLayerAtPixel(t,e,r,n)))return a}},e}(_l),Oc=new ju("precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n"),Nc=new Uu("varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n"),Ac=function(t,e){this.u_tileOffset=t.getUniformLocation(e,"u_tileOffset"),this.u_texture=t.getUniformLocation(e,"u_texture"),this.a_position=t.getAttribLocation(e,"a_position"),this.a_texCoord=t.getAttribLocation(e,"a_texCoord")},Gc=function(t){function e(e,i){t.call(this,e,i),this.fragmentShader_=Oc,this.vertexShader_=Nc,this.locations_=null,this.renderArrayBuffer_=new Ju([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,this.tmpSize_=[0,0]}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.disposeInternal=function(){this.mapRenderer.getContext().deleteBuffer(this.renderArrayBuffer_),t.prototype.disposeInternal.call(this)},e.prototype.createLoadedTileFinder=function(t,e,i){var r=this.mapRenderer;return function(n,o){return t.forEachLoadedTile(e,n,o,function(t){var e=r.isTileTextureLoaded(t);return e&&(i[n]||(i[n]={}),i[n][t.tileCoord.toString()]=t),e})}},e.prototype.handleWebGLContextLost=function(){t.prototype.handleWebGLContextLost.call(this),this.locations_=null},e.prototype.prepareFrame=function(t,e,i){var r,n,o=this.mapRenderer,s=i.getGL(),a=t.viewState,h=a.projection,l=this.getLayer(),u=l.getSource(),c=u.getTileGridForProjection(h),p=c.getZForResolution(a.resolution),d=c.getResolution(p),f=u.getTilePixelSize(p,t.pixelRatio,h),_=f[0]/hs(c.getTileSize(p),this.tmpSize_)[0],g=d/_,y=u.getTilePixelRatio(_)*u.getGutterForProjection(h),v=a.center,m=t.extent,x=c.getTileRangeForExtentAndZ(m,p);if(this.renderedTileRange_&&this.renderedTileRange_.equals(x)&&this.renderedRevision_==u.getRevision())r=this.renderedFramebufferExtent_;else{var S=x.getSize(),E=(A(0<(n=Math.max(S[0]*f[0],S[1]*f[1])),29),Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))),C=g*E,T=c.getOrigin(p),w=T[0]+x.minX*f[0]*g,R=T[1]+x.minY*f[1]*g;r=[w,R,w+C,R+C],this.bindFramebuffer(t,E),s.viewport(0,0,E,E),s.clearColor(0,0,0,0),s.clear(16384),s.disable(3042);var I=i.getProgram(this.fragmentShader_,this.vertexShader_);i.useProgram(I),this.locations_||(this.locations_=new Ac(s,I)),i.bindBuffer(Ye,this.renderArrayBuffer_),s.enableVertexAttribArray(this.locations_.a_position),s.vertexAttribPointer(this.locations_.a_position,2,Be,!1,16,0),s.enableVertexAttribArray(this.locations_.a_texCoord),s.vertexAttribPointer(this.locations_.a_texCoord,2,Be,!1,16,8),s.uniform1i(this.locations_.u_texture,0);var L={};L[p]={};var b,F,P,M,O,N,G=this.createLoadedTileFinder(u,h,L),k=l.getUseInterimTilesOnError(),D=!0,j=[1/0,1/0,-1/0,-1/0],U=new Tl(0,0,0,0);for(M=x.minX;M<=x.maxX;++M)for(O=x.minY;O<=x.maxY;++O)if(F=u.getTile(p,M,O,_,h),void 0===e.extent||dt(N=c.getTileCoordExtent(F.tileCoord,j),e.extent)){if((P=F.getState())==bn||P==Fn||3==P&&!k||(F=F.getInterimTile()),(P=F.getState())==bn){if(o.isTileTextureLoaded(F)){L[p][F.tileCoord.toString()]=F;continue}}else if(P==Fn||3==P&&!k)continue;D=!1,c.forEachTileCoordParentTileRange(F.tileCoord,G,null,U,j)||(b=c.getTileCoordChildTileRange(F.tileCoord,U,j))&&G(p+1,b)}var Y=Object.keys(L).map(Number);Y.sort(nr);for(var B=new Float32Array(4),X=0,z=Y.length;X<z;++X){var V=L[Y[X]];for(var W in V)F=V[W],N=c.getTileCoordExtent(F.tileCoord,j),B[0]=2*(N[2]-N[0])/C,B[1]=2*(N[3]-N[1])/C,B[2]=2*(N[0]-r[0])/C-1,B[3]=2*(N[1]-r[1])/C-1,s.uniform4fv(this.locations_.u_tileOffset,B),o.bindTileTexture(F,f,y*_,9729,9729),s.drawArrays(5,0,4)}D?(this.renderedTileRange_=x,this.renderedFramebufferExtent_=r,this.renderedRevision_=u.getRevision()):(this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,t.animate=!0)}this.updateUsedTiles(t.usedTiles,u,p,x);var K=o.getTileTextureQueue();this.manageTilePyramid(t,u,c,_,h,m,p,l.getPreload(),function(t){t.getState()!=bn||o.isTileTextureLoaded(t)||K.isKeyQueued(t.getKey())||K.enqueue([t,c.getTileCoordCenter(t.tileCoord),c.getResolution(t.tileCoord[0]),f,y*_])},this),this.scheduleExpireCache(t,u);var H=this.texCoordMatrix;return de(H),xe(H,(Math.round(v[0]/d)*d-r[0])/(r[2]-r[0]),(Math.round(v[1]/d)*d-r[1])/(r[3]-r[1])),0!==a.rotation&&ve(H,a.rotation),me(H,t.size[0]*a.resolution/(r[2]-r[0]),t.size[1]*a.resolution/(r[3]-r[1])),xe(H,-.5,-.5),!0},e.prototype.forEachLayerAtPixel=function(t,e,i,r){if(this.framebuffer){var n=[t[0]/e.size[0],(e.size[1]-t[1])/e.size[1]],o=ye(this.texCoordMatrix,n.slice()),s=[o[0]*this.framebufferDimension,o[1]*this.framebufferDimension],a=this.mapRenderer.getContext().getGL();a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer);var h=new Uint8Array(4);return a.readPixels(s[0],s[1],1,1,a.RGBA,a.UNSIGNED_BYTE,h),0<h[3]?i.call(r,this.getLayer(),h):void 0}},e}(Fc);Gc.handles=function(t){return t.getType()===Ba.TILE},Gc.create=function(t,e){return new Gc(t,e)};var kc=function(t){function i(e,i){t.call(this,e,i),this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedRenderOrder_=null,this.replayGroup_=null,this.layerState_=null}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.composeFrame=function(t,e,i){this.layerState_=e;var r=t.viewState,n=this.replayGroup_,o=t.size,s=t.pixelRatio,a=this.mapRenderer.getGL();n&&!n.isEmpty()&&(a.enable(a.SCISSOR_TEST),a.scissor(0,0,o[0]*s,o[1]*s),n.replay(i,r.center,r.resolution,r.rotation,o,s,e.opacity,e.managed?t.skippedFeatureUids:{}),a.disable(a.SCISSOR_TEST))},i.prototype.disposeInternal=function(){var e=this.replayGroup_;if(e){var i=this.mapRenderer.getContext();e.getDeleteResourcesFunction(i)(),this.replayGroup_=null}t.prototype.disposeInternal.call(this)},i.prototype.forEachFeatureAtCoordinate=function(t,i,r,n,o){if(this.replayGroup_&&this.layerState_){var s=this.mapRenderer.getContext(),a=i.viewState,h=this.getLayer(),l=this.layerState_,u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,s,a.center,a.resolution,a.rotation,i.size,i.pixelRatio,l.opacity,{},function(t){var i=e(t).toString();if(!(i in u))return u[i]=!0,n.call(o,t,h)})}},i.prototype.hasFeatureAtCoordinate=function(t,e){if(this.replayGroup_&&this.layerState_){var i=this.mapRenderer.getContext(),r=e.viewState,n=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(t,i,r.center,r.resolution,r.rotation,e.size,e.pixelRatio,n.opacity,e.skippedFeatureUids)}return!1},i.prototype.forEachLayerAtPixel=function(t,e,i,r){var n=ye(e.pixelToCoordinateTransform,t.slice());return this.hasFeatureAtCoordinate(n,e)?i.call(r,this.getLayer(),null):void 0},i.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},i.prototype.prepareFrame=function(t,e,i){var r=this.getLayer(),n=r.getSource(),o=t.viewHints[Yo.ANIMATING],s=t.viewHints[Yo.INTERACTING],a=r.getUpdateWhileAnimating(),h=r.getUpdateWhileInteracting();if(!this.dirty_&&!a&&o||!h&&s)return!0;var l=t.extent,u=t.viewState,c=u.projection,p=u.resolution,d=t.pixelRatio,f=r.getRevision(),_=r.getRenderBuffer(),g=r.getRenderOrder();void 0===g&&(g=Zl);var y=j(l,_*p);if(!this.dirty_&&this.renderedResolution_==p&&this.renderedRevision_==f&&this.renderedRenderOrder_==g&&X(this.renderedExtent_,y))return!0;this.replayGroup_&&t.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(i)),this.dirty_=!1;var v=new wc(Jl(p,d),y,r.getRenderBuffer());n.loadFeatures(y,p,c);var m=function(t){var e,i=t.getStyleFunction()||r.getStyleFunction();if(i&&(e=i(t,p)),e){var n=this.renderFeature(t,p,d,e,v);this.dirty_=this.dirty_||n}};if(g){var x=[];n.forEachFeatureInExtent(y,function(t){x.push(t)},this),x.sort(g),x.forEach(m.bind(this))}else n.forEachFeatureInExtent(y,m,this);return v.finish(i),this.renderedResolution_=p,this.renderedRevision_=f,this.renderedRenderOrder_=g,this.renderedExtent_=y,this.replayGroup_=v,!0},i.prototype.renderFeature=function(t,e,i,r,n){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var s=r.length-1;0<=s;--s)o=Ql(n,t,r[s],ql(e,i),this.handleStyleImageChange_,this)||o;else o=Ql(n,t,r,ql(e,i),this.handleStyleImageChange_,this)||o;return o},i}(Fc);kc.handles=function(t){return t.getType()===Ba.VECTOR},kc.create=function(t,e){return new kc(t,e)};var Dc=function(t){function e(e){(e=s({},e)).controls||(e.controls=vs()),e.interactions||(e.interactions=al()),t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.createRenderer=function(){var t=new Mc(this);return t.registerLayerRenderers([Pc,Gc,kc]),t},e}(ls),jc="projection",Uc="coordinateFormat",Yc=function(t){function e(e){var i=e||{},r=document.createElement("div");r.className=void 0!==i.className?i.className:"ol-mouse-position",t.call(this,{element:r,render:i.render||Bc,target:i.target}),f(this,P(jc),this.handleProjectionChanged_,this),i.coordinateFormat&&this.setCoordinateFormat(i.coordinateFormat),i.projection&&this.setProjection(i.projection),this.undefinedHTML_="undefinedHTML"in i?i.undefinedHTML:"&#160;",this.renderOnMouseOut_=!!this.undefinedHTML_,this.renderedHTML_=r.innerHTML,this.mapProjection_=null,this.transform_=null,this.lastMouseMovePixel_=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get(Uc)},e.prototype.getProjection=function(){return this.get(jc)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.lastMouseMovePixel_=e.getEventPixel(t),this.updateHTML_(this.lastMouseMovePixel_)},e.prototype.handleMouseOut=function(t){this.updateHTML_(null),this.lastMouseMovePixel_=null},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var i=e.getViewport();this.listenerKeys.push(f(i,R.MOUSEMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(f(i,R.MOUSEOUT,this.handleMouseOut,this))}},e.prototype.setCoordinateFormat=function(t){this.set(Uc,t)},e.prototype.setProjection=function(t){this.set(jc,ee(t))},e.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var i=this.getProjection();this.transform_=i?he(this.mapProjection_,i):$t}var r=this.getMap().getCoordinateFromPixel(t);if(r){this.transform_(r,r);var n=this.getCoordinateFormat();e=n?n(r):r.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e}(us);function Bc(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null,this.updateHTML_(this.lastMouseMovePixel_)}var Xc=function(){this.dataProjection=null,this.defaultFeatureProjection=null};function zc(t,e,i){var r,n=i?ee(i.featureProjection):null,o=i?ee(i.dataProjection):null;if(r=n&&o&&!ae(n,o)?t instanceof Te?(e?t.clone():t).transform(e?n:o,e?o:n):ce(t,o,n):t,e&&i&&void 0!==i.decimals){var s=Math.pow(10,i.decimals);r===t&&(r=r.clone()),r.applyTransform(function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*s)/s;return t})}return r}Xc.prototype.getReadOptions=function(t,e){var i;return e&&(i={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}),this.adaptOptions(i)},Xc.prototype.adaptOptions=function(t){return s({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},Xc.prototype.getLastExtent=function(){return null},Xc.prototype.getType=function(){},Xc.prototype.readFeature=function(t,e){},Xc.prototype.readFeatures=function(t,e){},Xc.prototype.readGeometry=function(t,e){},Xc.prototype.readProjection=function(t){},Xc.prototype.writeFeature=function(t,e){},Xc.prototype.writeFeatures=function(t,e){},Xc.prototype.writeGeometry=function(t,e){};var Vc=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getType=function(){return Wa.JSON},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(Wc(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(Wc(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){},e.prototype.readFeaturesFromObject=function(t,e){},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(Wc(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){},e.prototype.readProjection=function(t){return this.readProjectionFromObject(Wc(t))},e.prototype.readProjectionFromObject=function(t){},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){},e}(Xc);function Wc(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}var Kc={};Kc[It.POINT]=function(t){return void 0!==t.m&&void 0!==t.z?new Nr([t.x,t.y,t.z,t.m],dr.XYZM):void 0!==t.z?new Nr([t.x,t.y,t.z],dr.XYZ):void 0!==t.m?new Nr([t.x,t.y,t.m],dr.XYM):new Nr([t.x,t.y])},Kc[It.LINE_STRING]=function(t){var e=Jc(t);return new yn(t.paths[0],e)},Kc[It.POLYGON]=function(t){var e=Jc(t);return new Hr(t.rings,e)},Kc[It.MULTI_POINT]=function(t){var e=Jc(t);return new ja(t.points,e)},Kc[It.MULTI_LINE_STRING]=function(t){var e=Jc(t);return new Da(t.paths,e)},Kc[It.MULTI_POLYGON]=function(t){var e=Jc(t);return new Ya(t.rings,e)};var Hc={};Hc[It.POINT]=function(t,e){var i,r=t.getCoordinates(),n=t.getLayout();return n===dr.XYZ?i={x:r[0],y:r[1],z:r[2]}:n===dr.XYM?i={x:r[0],y:r[1],m:r[2]}:n===dr.XYZM?i={x:r[0],y:r[1],z:r[2],m:r[3]}:n===dr.XY?i={x:r[0],y:r[1]}:A(!1,34),i},Hc[It.LINE_STRING]=function(t,e){var i=Qc(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:[t.getCoordinates()]}},Hc[It.POLYGON]=function(t,e){var i=Qc(t);return{hasZ:i.hasZ,hasM:i.hasM,rings:t.getCoordinates(!1)}},Hc[It.MULTI_POINT]=function(t,e){var i=Qc(t);return{hasZ:i.hasZ,hasM:i.hasM,points:t.getCoordinates()}},Hc[It.MULTI_LINE_STRING]=function(t,e){var i=Qc(t);return{hasZ:i.hasZ,hasM:i.hasM,paths:t.getCoordinates()}},Hc[It.MULTI_POLYGON]=function(t,e){for(var i=Qc(t),r=t.getCoordinates(!1),n=[],o=0;o<r.length;o++)for(var s=r[o].length-1;0<=s;s--)n.push(r[o][s]);return{hasZ:i.hasZ,hasM:i.hasM,rings:n}};var Zc=function(t){function e(e){var i=e||{};t.call(this),this.geometryName_=i.geometryName}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.readFeatureFromObject=function(t,e){var i=t,r=qc(i.geometry,e),n=new Hi;return this.geometryName_&&n.setGeometryName(this.geometryName_),n.setGeometry(r),e&&e.idField&&i.attributes[e.idField]&&n.setId(i.attributes[e.idField]),i.attributes&&n.setProperties(i.attributes),n},e.prototype.readFeaturesFromObject=function(t,e){var i=e||{};if(t.features){var r=[],n=t.features;i.idField=t.objectIdFieldName;for(var o=0,s=n.length;o<s;++o)r.push(this.readFeatureFromObject(n[o],i));return r}return[this.readFeatureFromObject(t,i)]},e.prototype.readGeometryFromObject=function(t,e){return qc(t,e)},e.prototype.readProjectionFromObject=function(t){var e=t;return e.spatialReference&&e.spatialReference.wkid?ee("EPSG:"+e.spatialReference.wkid):null},e.prototype.writeGeometryObject=function(t,e){return $c(t,this.adaptOptions(e))},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={},r=t.getGeometry();r&&(i.geometry=$c(r,e),e&&e.featureProjection&&(i.geometry.spatialReference={wkid:ee(e.featureProjection).getCode().split(":").pop()}));var n=t.getProperties();return delete n[t.getGeometryName()],l(n)?i.attributes={}:i.attributes=n,i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],r=0,n=t.length;r<n;++r)i.push(this.writeFeatureObject(t[r],e));return{features:i}},e}(Vc);function qc(t,e){if(!t)return null;var i;if("number"==typeof t.x&&"number"==typeof t.y)i=It.POINT;else if(t.points)i=It.MULTI_POINT;else if(t.paths)i=1===t.paths.length?It.LINE_STRING:It.MULTI_LINE_STRING;else if(t.rings){var r=Jc(t),n=function(t,e){var i,r,n=[],o=[],s=[];for(i=0,r=t.length;i<r;++i){n.length=0,Tr(n,0,t[i],e.length),zr(n,0,n.length,e.length)?o.push([t[i]]):s.push(t[i])}for(;s.length;){var a=s.shift(),h=!1;for(i=o.length-1;0<=i;i--){var l=o[i][0];if(X(new Or(l).getExtent(),new Or(a).getExtent())){o[i].push(a),h=!0;break}}h||o.push([a.reverse()])}return o}(t.rings,r);t=s({},t),1===n.length?(i=It.POLYGON,t.rings=n[0]):(i=It.MULTI_POLYGON,t.rings=n)}return zc((0,Kc[i])(t),!1,e)}function Jc(t){var e=dr.XY;return!0===t.hasZ&&!0===t.hasM?e=dr.XYZM:!0===t.hasZ?e=dr.XYZ:!0===t.hasM&&(e=dr.XYM),e}function Qc(t){var e=t.getLayout();return{hasZ:e===dr.XYZ||e===dr.XYZM,hasM:e===dr.XYM||e===dr.XYZM}}function $c(t,e){return(0,Hc[t.getType()])(zc(t,!0,e),e)}var tp=document.implementation.createDocument("","",null),ep="http://www.w3.org/2001/XMLSchema-instance";function ip(t,e){return tp.createElementNS(t,e)}function rp(t,e){return function t(e,i,r){var n;if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)i?r.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(e.nodeValue);else for(n=e.firstChild;n;n=n.nextSibling)t(n,i,r);return r}(t,e,[]).join("")}function np(t){return t instanceof Document}function op(t){return t instanceof Node}function sp(t){return(new DOMParser).parseFromString(t,"application/xml")}function ap(t,e){return function(i,r){var n=t.call(void 0!==e?e:this,i,r);void 0!==n&&hr(r[r.length-1],n)}}function hp(t,e){return function(i,r){var n=t.call(void 0!==e?e:this,i,r);void 0!==n&&r[r.length-1].push(n)}}function lp(t,e){return function(i,r){var n=t.call(void 0!==e?e:this,i,r);void 0!==n&&(r[r.length-1]=n)}}function up(t,e,i){return function(r,n){var o=t.call(void 0!==i?i:this,r,n);if(void 0!==o){var s=n[n.length-1],a=void 0!==e?e:r.localName;(a in s?s[a]:s[a]=[]).push(o)}}}function cp(t,e,i){return function(r,n){var o=t.call(void 0!==i?i:this,r,n);void 0!==o&&(n[n.length-1][void 0!==e?e:r.localName]=o)}}function pp(t,e){return function(i,r,n){t.call(void 0!==e?e:this,i,r,n),n[n.length-1].node.appendChild(i)}}function dp(t,e){var i,r;return function(e,n,o){if(void 0===i){i={};var s={};s[e.localName]=t,i[e.namespaceURI]=s,r=fp(e.localName)}xp(i,r,n,o)}}function fp(t,e){var i=t;return function(t,r,n){var o=r[r.length-1].node,s=i;return void 0===s&&(s=n),ip(void 0!==e?e:o.namespaceURI,s)}}var _p=fp();function gp(t,e){for(var i=e.length,r=new Array(i),n=0;n<i;++n)r[n]=t[e[n]];return r}function yp(t,e,i){var r,n,o=void 0!==i?i:{};for(r=0,n=t.length;r<n;++r)o[t[r]]=e;return o}function vp(t,e,i,r){var n;for(n=e.firstElementChild;n;n=n.nextElementSibling){var o=t[n.namespaceURI];if(void 0!==o){var s=o[n.localName];void 0!==s&&s.call(r,n,i)}}}function mp(t,e,i,r,n){return r.push(t),vp(e,i,r,n),r.pop()}function xp(t,e,i,r,n,o){for(var s,a,h=(void 0!==n?n:i).length,l=0;l<h;++l)void 0!==(s=i[l])&&void 0!==(a=e.call(void 0!==o?o:this,s,r,void 0!==n?n[l]:void 0))&&t[a.namespaceURI][a.localName].call(o,a,s,r)}function Sp(t,e,i,r,n,o,s){return n.push(t),xp(e,i,r,n,o,s),n.pop()}var Ep=function(t){function e(){t.call(this),this.xmlSerializer_=new XMLSerializer}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getType=function(){return Wa.XML},e.prototype.readFeature=function(t,e){if(np(t))return this.readFeatureFromDocument(t,e);if(op(t))return this.readFeatureFromNode(t,e);if("string"==typeof t){var i=sp(t);return this.readFeatureFromDocument(i,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var i=this.readFeaturesFromDocument(t,e);return 0<i.length?i[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(np(t))return this.readFeaturesFromDocument(t,e);if(op(t))return this.readFeaturesFromNode(t,e);if("string"==typeof t){var i=sp(t);return this.readFeaturesFromDocument(i,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var i=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&hr(i,this.readFeaturesFromNode(r,e));return i},e.prototype.readFeaturesFromNode=function(t,e){},e.prototype.readGeometry=function(t,e){if(np(t))return this.readGeometryFromDocument(t,e);if(op(t))return this.readGeometryFromNode(t,e);if("string"==typeof t){var i=sp(t);return this.readGeometryFromDocument(i,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(np(t))return this.readProjectionFromDocument(t);if(op(t))return this.readProjectionFromNode(t);if("string"==typeof t){var e=sp(t);return this.readProjectionFromDocument(e)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var i=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var i=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var i=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeGeometryNode=function(t,e){return null},e}(Xc),Cp="http://www.opengis.net/gml",Tp=/^[\s\xa0]*$/,wp=function(t){function e(e){t.call(this);var i=e||{};this.featureType=i.featureType,this.featureNS=i.featureNS,this.srsName=i.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[Cp]={featureMember:lp(this.readFeaturesInternal),featureMembers:lp(this.readFeaturesInternal)}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.readFeaturesInternal=function(t,e){var i=t.localName,r=null;if("FeatureCollection"==i)r="http://www.opengis.net/wfs"===t.namespaceURI?mp([],this.FEATURE_COLLECTION_PARSERS,t,e,this):mp(null,this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==i||"featureMember"==i){var n=e[0],o=n.featureType,s=n.featureNS;if(!o&&t.childNodes){o=[],s={};for(var a=0,h=t.childNodes.length;a<h;++a){var l=t.childNodes[a];if(1===l.nodeType){var u=l.nodeName.split(":").pop();if(-1===o.indexOf(u)){var c="",p=0,d=l.namespaceURI;for(var f in s){if(s[f]===d){c=f;break}++p}c||(s[c="p"+p]=d),o.push(c+":"+u)}}}"featureMember"!=i&&(n.featureType=o,n.featureNS=s)}if("string"==typeof s){var _=s;(s={}).p0=_}var g={},y=Array.isArray(o)?o:[o];for(var v in s){for(var m={},x=0,S=y.length;x<S;++x)(-1===y[x].indexOf(":")?"p0":y[x].split(":")[0])===v&&(m[y[x].split(":").pop()]="featureMembers"==i?hp(this.readFeatureElement,this):lp(this.readFeatureElement,this));g[s[v]]=m}r=mp("featureMember"==i?void 0:[],g,t,e)}return null===r&&(r=[]),r},e.prototype.readGeometryElement=function(t,e){var i=e[0];i.srsName=t.firstElementChild.getAttribute("srsName"),i.srsDimension=t.firstElementChild.getAttribute("srsDimension");var r=mp(null,this.GEOMETRY_PARSERS_,t,e,this);return r?zc(r,!1,i):void 0},e.prototype.readFeatureElement=function(t,e){var i,r,n,o=t.getAttribute("fid")||(r=Cp,"id",t.getAttributeNS(r,"id")||""),s={};for(i=t.firstElementChild;i;i=i.nextElementSibling){var a=i.localName;if(0===i.childNodes.length||1===i.childNodes.length&&(3===i.firstChild.nodeType||4===i.firstChild.nodeType)){var h=rp(i,!1);Tp.test(h)&&(h=void 0),s[a]=h}else"boundedBy"!==a&&(n=a),s[a]=this.readGeometryElement(i,e)}var l=new Hi(s);return n&&l.setGeometryName(n),o&&l.setId(o),l},e.prototype.readPoint=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);if(i)return new Nr(i,dr.XYZ)},e.prototype.readMultiPoint=function(t,e){var i=mp([],this.MULTIPOINT_PARSERS_,t,e,this);return i?new ja(i):void 0},e.prototype.readMultiLineString=function(t,e){var i=mp([],this.MULTILINESTRING_PARSERS_,t,e,this);if(i)return new Da(i)},e.prototype.readMultiPolygon=function(t,e){var i=mp([],this.MULTIPOLYGON_PARSERS_,t,e,this);if(i)return new Ya(i)},e.prototype.pointMemberParser_=function(t,e){vp(this.POINTMEMBER_PARSERS_,t,e,this)},e.prototype.lineStringMemberParser_=function(t,e){vp(this.LINESTRINGMEMBER_PARSERS_,t,e,this)},e.prototype.polygonMemberParser_=function(t,e){vp(this.POLYGONMEMBER_PARSERS_,t,e,this)},e.prototype.readLineString=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);return i?new yn(i,dr.XYZ):void 0},e.prototype.readFlatLinearRing_=function(t,e){return mp(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,t,e,this)||void 0},e.prototype.readLinearRing=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);if(i)return new Or(i,dr.XYZ)},e.prototype.readPolygon=function(t,e){var i=mp([null],this.FLAT_LINEAR_RINGS_PARSERS_,t,e,this);if(i&&i[0]){var r,n,o=i[0],s=[o.length];for(r=1,n=i.length;r<n;++r)hr(o,i[r]),s.push(o.length);return new Hr(o,dr.XYZ,s)}},e.prototype.readFlatCoordinatesFromNode_=function(t,e){return mp(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){return this.readGeometryElement(t,[this.getReadOptions(t,e||{})])||null},e.prototype.readFeaturesFromNode=function(t,e){var i={featureType:this.featureType,featureNS:this.featureNS};return e&&s(i,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[i])||[]},e.prototype.readProjectionFromNode=function(t){return ee(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(Ep);function Rp(t){return Ip(rp(t,!1))}function Ip(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function Lp(t){var e=rp(t,!1),i=Date.parse(e);return isNaN(i)?void 0:i/1e3}function bp(t){return Fp(rp(t,!1))}function Fp(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function Pp(t){return Mp(rp(t,!1))}function Mp(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function Op(t){return rp(t,!1).trim()}function Np(t,e){kp(t,e?"1":"0")}function Ap(t,e){var i=e.toPrecision();t.appendChild(tp.createTextNode(i))}function Gp(t,e){var i=e.toString();t.appendChild(tp.createTextNode(i))}function kp(t,e){t.appendChild(tp.createTextNode(e))}wp.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:hp(wp.prototype.pointMemberParser_),pointMembers:hp(wp.prototype.pointMemberParser_)}},wp.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:hp(wp.prototype.lineStringMemberParser_),lineStringMembers:hp(wp.prototype.lineStringMemberParser_)}},wp.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:hp(wp.prototype.polygonMemberParser_),polygonMembers:hp(wp.prototype.polygonMemberParser_)}},wp.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:hp(wp.prototype.readFlatCoordinatesFromNode_)}},wp.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:hp(wp.prototype.readLineString)}},wp.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:hp(wp.prototype.readPolygon)}},wp.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:lp(wp.prototype.readFlatLinearRing_)}};var Dp=Cp+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",jp={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},Up=function(t){function e(e){var i=e||{};t.call(this,i),this.surface_=void 0!==i.surface&&i.surface,this.curve_=void 0!==i.curve&&i.curve,this.multiCurve_=void 0===i.multiCurve||i.multiCurve,this.multiSurface_=void 0===i.multiSurface||i.multiSurface,this.schemaLocation=i.schemaLocation?i.schemaLocation:Dp,this.hasZ=void 0!==i.hasZ&&i.hasZ}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.readMultiCurve_=function(t,e){var i=mp([],this.MULTICURVE_PARSERS_,t,e,this);return i?new Da(i):void 0},e.prototype.readMultiSurface_=function(t,e){var i=mp([],this.MULTISURFACE_PARSERS_,t,e,this);if(i)return new Ya(i)},e.prototype.curveMemberParser_=function(t,e){vp(this.CURVEMEMBER_PARSERS_,t,e,this)},e.prototype.surfaceMemberParser_=function(t,e){vp(this.SURFACEMEMBER_PARSERS_,t,e,this)},e.prototype.readPatch_=function(t,e){return mp([null],this.PATCHES_PARSERS_,t,e,this)},e.prototype.readSegment_=function(t,e){return mp([null],this.SEGMENTS_PARSERS_,t,e,this)},e.prototype.readPolygonPatch_=function(t,e){return mp([null],this.FLAT_LINEAR_RINGS_PARSERS_,t,e,this)},e.prototype.readLineStringSegment_=function(t,e){return mp([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS_,t,e,this)},e.prototype.interiorParser_=function(t,e){var i=mp(void 0,this.RING_PARSERS,t,e,this);i&&e[e.length-1].push(i)},e.prototype.exteriorParser_=function(t,e){var i=mp(void 0,this.RING_PARSERS,t,e,this);i&&(e[e.length-1][0]=i)},e.prototype.readSurface_=function(t,e){var i=mp([null],this.SURFACE_PARSERS_,t,e,this);if(i&&i[0]){var r,n,o=i[0],s=[o.length];for(r=1,n=i.length;r<n;++r)hr(o,i[r]),s.push(o.length);return new Hr(o,dr.XYZ,s)}},e.prototype.readCurve_=function(t,e){var i=mp([null],this.CURVE_PARSERS_,t,e,this);return i?new yn(i,dr.XYZ):void 0},e.prototype.readEnvelope_=function(t,e){var i=mp([null],this.ENVELOPE_PARSERS_,t,e,this);return K(i[1][0],i[1][1],i[2][0],i[2][1])},e.prototype.readFlatPos_=function(t,e){for(var i,r=rp(t,!1),n=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];i=n.exec(r);)o.push(parseFloat(i[1])),r=r.substr(i[0].length);if(""===r){var s,a,h=e[0].srsName,l="enu";if(h&&(l=ee(h).getAxisOrientation()),"neu"===l)for(s=0,a=o.length;s<a;s+=3){var u=o[s],c=o[s+1];o[s]=c,o[s+1]=u}var p=o.length;if(2==p&&o.push(0),0!==p)return o}},e.prototype.readFlatPosList_=function(t,e){var i=rp(t,!1).replace(/^\s*|\s*$/g,""),r=e[0],n=r.srsName,o=r.srsDimension,s="enu";n&&(s=ee(n).getAxisOrientation());var a,h,l,u=i.split(/\s+/),c=2;t.getAttribute("srsDimension")?c=Mp(t.getAttribute("srsDimension")):t.getAttribute("dimension")?c=Mp(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?c=Mp(t.parentNode.getAttribute("srsDimension")):o&&(c=Mp(o));for(var p=[],d=0,f=u.length;d<f;d+=c)a=parseFloat(u[d]),h=parseFloat(u[d+1]),l=3===c?parseFloat(u[d+2]):0,"en"===s.substr(0,2)?p.push(a,h,l):p.push(h,a,l);return p},e.prototype.writePos_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=n?3:2;t.setAttribute("srsDimension",o);var s=r.srsName,a="enu";s&&(a=ee(s).getAxisOrientation());var h,l=e.getCoordinates();h="en"===a.substr(0,2)?l[0]+" "+l[1]:l[1]+" "+l[0],n&&(h+=" "+(l[2]||0)),kp(t,h)},e.prototype.getCoords_=function(t,e,i){var r="enu";e&&(r=ee(e).getAxisOrientation());var n="en"===r.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];return i&&(n+=" "+(t[2]||0)),n},e.prototype.writePosList_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=n?3:2;t.setAttribute("srsDimension",o);for(var s,a=r.srsName,h=e.getCoordinates(),l=h.length,u=new Array(l),c=0;c<l;++c)s=h[c],u[c]=this.getCoords_(s,a,n);kp(t,u.join(" "))},e.prototype.writePoint_=function(t,e,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var n=ip(t.namespaceURI,"pos");t.appendChild(n),this.writePos_(n,e,i)},e.prototype.writeEnvelope=function(t,e,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var n=[e[0]+" "+e[1],e[2]+" "+e[3]];Sp({node:t},this.ENVELOPE_SERIALIZERS_,_p,n,i,["lowerCorner","upperCorner"],this)},e.prototype.writeLinearRing_=function(t,e,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var n=ip(t.namespaceURI,"posList");t.appendChild(n),this.writePosList_(n,e,i)},e.prototype.RING_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1],n=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),ip(n.namespaceURI,void 0!==o?"interior":"exterior")},e.prototype.writeSurfaceOrPolygon_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var s=e.getLinearRings();Sp({node:t,hasZ:n,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,s,i,void 0,this)}else if("Surface"===t.nodeName){var a=ip(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,e,i)}},e.prototype.writeCurveOrLineString_=function(t,e,i){var r=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var n=ip(t.namespaceURI,"posList");t.appendChild(n),this.writePosList_(n,e,i)}else if("Curve"===t.nodeName){var o=ip(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,i)}},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName,s=r.surface;o&&t.setAttribute("srsName",o);var a=e.getPolygons();Sp({node:t,hasZ:n,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)},e.prototype.writeMultiPoint_=function(t,e,i){var r=i[i.length-1],n=r.srsName,o=r.hasZ;n&&t.setAttribute("srsName",n);var s=e.getPoints();Sp({node:t,hasZ:o,srsName:n},this.POINTMEMBER_SERIALIZERS_,fp("pointMember"),s,i,void 0,this)},e.prototype.writeMultiCurveOrLineString_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName,s=r.curve;o&&t.setAttribute("srsName",o);var a=e.getLineStrings();Sp({node:t,hasZ:n,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)},e.prototype.writeRing_=function(t,e,i){var r=ip(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing_(r,e,i)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,i){var r=this.GEOMETRY_NODE_FACTORY_(e,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon_(r,e,i))},e.prototype.writePointMember_=function(t,e,i){var r=ip(t.namespaceURI,"Point");t.appendChild(r),this.writePoint_(r,e,i)},e.prototype.writeLineStringOrCurveMember_=function(t,e,i){var r=this.GEOMETRY_NODE_FACTORY_(e,i);r&&(t.appendChild(r),this.writeCurveOrLineString_(r,e,i))},e.prototype.writeSurfacePatches_=function(t,e,i){var r=ip(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon_(r,e,i)},e.prototype.writeCurveSegments_=function(t,e,i){var r=ip(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString_(r,e,i)},e.prototype.writeGeometryElement=function(t,e,i){var r,n=i[i.length-1],o=s({},n);o.node=t,r=Array.isArray(e)?n.dataProjection?ce(e,n.featureProjection,n.dataProjection):e:zc(e,!0,n),Sp(o,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[r],i,void 0,this)},e.prototype.writeFeatureElement=function(t,e,i){var r=e.getId();r&&t.setAttribute("fid",r);var n=i[i.length-1],o=n.featureNS,a=e.getGeometryName();n.serializers||(n.serializers={},n.serializers[o]={});var h=e.getProperties(),l=[],u=[];for(var c in h){var p=h[c];null!==p&&(l.push(c),u.push(p),c==a||p instanceof Te?c in n.serializers[o]||(n.serializers[o][c]=pp(this.writeGeometryElement,this)):c in n.serializers[o]||(n.serializers[o][c]=pp(kp)))}var d=s({},n);d.node=t,Sp(d,n.serializers,fp(void 0,o),u,i,l)},e.prototype.writeFeatureMembers_=function(t,e,i){var r=i[i.length-1],n=r.featureType,o=r.featureNS,a={};a[o]={},a[o][n]=pp(this.writeFeatureElement,this);var h=s({},r);h.node=t,Sp(h,a,fp(n,o),e,i)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1].node;return ip("http://www.opengis.net/gml",jp[r.nodeName])},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,i){var r,n=e[e.length-1],o=n.multiSurface,s=n.surface,a=n.curve,h=n.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===s?r="Surface":"LineString"===r&&!0===a?r="Curve":"MultiLineString"===r&&!0===h&&(r="MultiCurve"),ip("http://www.opengis.net/gml",r)},e.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var i=ip("http://www.opengis.net/gml","geom"),r={node:i,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&s(r,e),this.writeGeometryElement(i,t,[r]),i},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=ip("http://www.opengis.net/gml","featureMembers");i.setAttributeNS(ep,"xsi:schemaLocation",this.schemaLocation);var r={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&s(r,e),this.writeFeatureMembers_(i,t,[r]),i},e}(wp);Up.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_={"http://www.opengis.net/gml":{pos:lp(Up.prototype.readFlatPos_),posList:lp(Up.prototype.readFlatPosList_)}},Up.prototype.FLAT_LINEAR_RINGS_PARSERS_={"http://www.opengis.net/gml":{interior:Up.prototype.interiorParser_,exterior:Up.prototype.exteriorParser_}},Up.prototype.GEOMETRY_PARSERS_={"http://www.opengis.net/gml":{Point:lp(wp.prototype.readPoint),MultiPoint:lp(wp.prototype.readMultiPoint),LineString:lp(wp.prototype.readLineString),MultiLineString:lp(wp.prototype.readMultiLineString),LinearRing:lp(wp.prototype.readLinearRing),Polygon:lp(wp.prototype.readPolygon),MultiPolygon:lp(wp.prototype.readMultiPolygon),Surface:lp(Up.prototype.readSurface_),MultiSurface:lp(Up.prototype.readMultiSurface_),Curve:lp(Up.prototype.readCurve_),MultiCurve:lp(Up.prototype.readMultiCurve_),Envelope:lp(Up.prototype.readEnvelope_)}},Up.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:hp(Up.prototype.curveMemberParser_),curveMembers:hp(Up.prototype.curveMemberParser_)}},Up.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:hp(Up.prototype.surfaceMemberParser_),surfaceMembers:hp(Up.prototype.surfaceMemberParser_)}},Up.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:hp(wp.prototype.readLineString),Curve:hp(Up.prototype.readCurve_)}},Up.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:hp(wp.prototype.readPolygon),Surface:hp(Up.prototype.readSurface_)}},Up.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:lp(Up.prototype.readPatch_)}},Up.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:lp(Up.prototype.readSegment_)}},Up.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:hp(Up.prototype.readFlatPosList_),upperCorner:hp(Up.prototype.readFlatPosList_)}},Up.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:lp(Up.prototype.readPolygonPatch_)}},Up.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:lp(Up.prototype.readLineStringSegment_)}},Up.prototype.writeFeatures,Up.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:pp(Up.prototype.writeRing_),interior:pp(Up.prototype.writeRing_)}},Up.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:pp(kp),upperCorner:pp(kp)}},Up.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:pp(Up.prototype.writeSurfaceOrPolygonMember_),polygonMember:pp(Up.prototype.writeSurfaceOrPolygonMember_)}},Up.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:pp(Up.prototype.writePointMember_)}},Up.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:pp(Up.prototype.writeLineStringOrCurveMember_),curveMember:pp(Up.prototype.writeLineStringOrCurveMember_)}},Up.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:pp(Up.prototype.writeCurveOrLineString_),MultiCurve:pp(Up.prototype.writeMultiCurveOrLineString_),Point:pp(Up.prototype.writePoint_),MultiPoint:pp(Up.prototype.writeMultiPoint_),LineString:pp(Up.prototype.writeCurveOrLineString_),MultiLineString:pp(Up.prototype.writeMultiCurveOrLineString_),LinearRing:pp(Up.prototype.writeLinearRing_),Polygon:pp(Up.prototype.writeSurfaceOrPolygon_),MultiPolygon:pp(Up.prototype.writeMultiSurfaceOrPolygon_),Surface:pp(Up.prototype.writeSurfaceOrPolygon_),MultiSurface:pp(Up.prototype.writeMultiSurfaceOrPolygon_),Envelope:pp(Up.prototype.writeEnvelope)}};var Yp=Up;Yp.prototype.writeFeatures,Yp.prototype.writeFeaturesNode;var Bp=Cp+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",Xp={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},zp=function(t){function e(e){var i=e||{};t.call(this,i),this.FEATURE_COLLECTION_PARSERS[Cp].featureMember=hp(this.readFeaturesInternal),this.schemaLocation=i.schemaLocation?i.schemaLocation:Bp}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.readFlatCoordinates_=function(t,e){var i=rp(t,!1).replace(/^\s*|\s*$/g,""),r=e[0].srsName,n="enu";if(r){var o=ee(r);o&&(n=o.getAxisOrientation())}for(var s=i.trim().split(/\s+/),a=[],h=0,l=s.length;h<l;h++){var u=s[h].split(/,+/),c=parseFloat(u[0]),p=parseFloat(u[1]),d=3===u.length?parseFloat(u[2]):0;"en"===n.substr(0,2)?a.push(c,p,d):a.push(p,c,d)}return a},e.prototype.readBox_=function(t,e){var i=mp([null],this.BOX_PARSERS_,t,e,this);return K(i[1][0],i[1][1],i[1][3],i[1][4])},e.prototype.innerBoundaryIsParser_=function(t,e){var i=mp(void 0,this.RING_PARSERS,t,e,this);i&&e[e.length-1].push(i)},e.prototype.outerBoundaryIsParser_=function(t,e){var i=mp(void 0,this.RING_PARSERS,t,e,this);i&&(e[e.length-1][0]=i)},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,i){var r,n=e[e.length-1],o=n.multiSurface,s=n.surface,a=n.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===s?r="Surface":"MultiLineString"===r&&!0===a&&(r="MultiCurve"),ip("http://www.opengis.net/gml",r)},e.prototype.writeFeatureElement=function(t,e,i){var r=e.getId();r&&t.setAttribute("fid",r);var n=i[i.length-1],o=n.featureNS,a=e.getGeometryName();n.serializers||(n.serializers={},n.serializers[o]={});var h=e.getProperties(),l=[],u=[];for(var c in h){var p=h[c];null!==p&&(l.push(c),u.push(p),c==a||p instanceof Te?c in n.serializers[o]||(n.serializers[o][c]=pp(this.writeGeometryElement,this)):c in n.serializers[o]||(n.serializers[o][c]=pp(kp)))}var d=s({},n);d.node=t,Sp(d,n.serializers,fp(void 0,o),u,i,l)},e.prototype.writeCurveOrLineString_=function(t,e,i){var r=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var n=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(n),this.writeCoordinates_(n,e,i)}else if("Curve"===t.nodeName){var o=ip(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,i)}},e.prototype.writeLineStringOrCurveMember_=function(t,e,i){var r=this.GEOMETRY_NODE_FACTORY_(e,i);r&&(t.appendChild(r),this.writeCurveOrLineString_(r,e,i))},e.prototype.writeMultiCurveOrLineString_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName,s=r.curve;o&&t.setAttribute("srsName",o);var a=e.getLineStrings();Sp({node:t,hasZ:n,srsName:o,curve:s},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)},e.prototype.writeGeometryElement=function(t,e,i){var r,n=i[i.length-1],o=s({},n);o.node=t,r=Array.isArray(e)?n.dataProjection?ce(e,n.featureProjection,n.dataProjection):e:zc(e,!0,n),Sp(o,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[r],i,void 0,this)},e.prototype.createCoordinatesNode_=function(t){var e=ip(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.writeCoordinates_=function(t,e,i){for(var r=i[i.length-1],n=r.hasZ,o=r.srsName,s=e.getCoordinates(),a=s.length,h=new Array(a),l=0;l<a;++l){var u=s[l];h[l]=this.getCoords_(u,o,n)}kp(t,h.join(" "))},e.prototype.writeCurveSegments_=function(t,e,i){var r=ip(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString_(r,e,i)},e.prototype.writeSurfaceOrPolygon_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var s=e.getLinearRings();Sp({node:t,hasZ:n,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,s,i,void 0,this)}else if("Surface"===t.nodeName){var a=ip(t.namespaceURI,"patches");t.appendChild(a),this.writeSurfacePatches_(a,e,i)}},e.prototype.RING_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1],n=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),ip(n.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.writeSurfacePatches_=function(t,e,i){var r=ip(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon_(r,e,i)},e.prototype.writeRing_=function(t,e,i){var r=ip(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing_(r,e,i)},e.prototype.getCoords_=function(t,e,i){var r="enu";e&&(r=ee(e).getAxisOrientation());var n="en"===r.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];return i&&(n+=","+(t[2]||0)),n},e.prototype.writePoint_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var s=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(s);var a=e.getCoordinates();kp(s,this.getCoords_(a,o,n))},e.prototype.writeMultiPoint_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var s=e.getPoints();Sp({node:t,hasZ:n,srsName:o},this.POINTMEMBER_SERIALIZERS_,fp("pointMember"),s,i,void 0,this)},e.prototype.writePointMember_=function(t,e,i){var r=ip(t.namespaceURI,"Point");t.appendChild(r),this.writePoint_(r,e,i)},e.prototype.writeLinearRing_=function(t,e,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var n=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(n),this.writeCoordinates_(n,e,i)},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName,s=r.surface;o&&t.setAttribute("srsName",o);var a=e.getPolygons();Sp({node:t,hasZ:n,srsName:o,surface:s},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,i,void 0,this)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,i){var r=this.GEOMETRY_NODE_FACTORY_(e,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon_(r,e,i))},e.prototype.writeEnvelope=function(t,e,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var n=[e[0]+" "+e[1],e[2]+" "+e[3]];Sp({node:t},this.ENVELOPE_SERIALIZERS_,_p,n,i,["lowerCorner","upperCorner"],this)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1].node;return ip("http://www.opengis.net/gml",Xp[r.nodeName])},e}(wp);zp.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_={"http://www.opengis.net/gml":{coordinates:lp(zp.prototype.readFlatCoordinates_)}},zp.prototype.FLAT_LINEAR_RINGS_PARSERS_={"http://www.opengis.net/gml":{innerBoundaryIs:zp.prototype.innerBoundaryIsParser_,outerBoundaryIs:zp.prototype.outerBoundaryIsParser_}},zp.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:hp(zp.prototype.readFlatCoordinates_)}},zp.prototype.GEOMETRY_PARSERS_={"http://www.opengis.net/gml":{Point:lp(wp.prototype.readPoint),MultiPoint:lp(wp.prototype.readMultiPoint),LineString:lp(wp.prototype.readLineString),MultiLineString:lp(wp.prototype.readMultiLineString),LinearRing:lp(wp.prototype.readLinearRing),Polygon:lp(wp.prototype.readPolygon),MultiPolygon:lp(wp.prototype.readMultiPolygon),Box:lp(zp.prototype.readBox_)}},zp.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:pp(zp.prototype.writeCurveOrLineString_),MultiCurve:pp(zp.prototype.writeMultiCurveOrLineString_),Point:pp(zp.prototype.writePoint_),MultiPoint:pp(zp.prototype.writeMultiPoint_),LineString:pp(zp.prototype.writeCurveOrLineString_),MultiLineString:pp(zp.prototype.writeMultiCurveOrLineString_),LinearRing:pp(zp.prototype.writeLinearRing_),Polygon:pp(zp.prototype.writeSurfaceOrPolygon_),MultiPolygon:pp(zp.prototype.writeMultiSurfaceOrPolygon_),Surface:pp(zp.prototype.writeSurfaceOrPolygon_),MultiSurface:pp(zp.prototype.writeMultiSurfaceOrPolygon_),Envelope:pp(zp.prototype.writeEnvelope)}},zp.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:pp(zp.prototype.writeLineStringOrCurveMember_),curveMember:pp(zp.prototype.writeLineStringOrCurveMember_)}},zp.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:pp(zp.prototype.writeRing_),innerBoundaryIs:pp(zp.prototype.writeRing_)}},zp.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:pp(zp.prototype.writePointMember_)}},zp.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:pp(zp.prototype.writeSurfaceOrPolygonMember_),polygonMember:pp(zp.prototype.writeSurfaceOrPolygonMember_)}},zp.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:pp(kp),upperCorner:pp(kp)}};var Vp=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Wp={rte:xd,trk:Sd,wpt:Ed},Kp=yp(Vp,{rte:hp(xd),trk:hp(Sd),wpt:hp(Ed)}),Hp=yp(Vp,{text:cp(Op,"linkText"),type:cp(Op,"linkType")}),Zp=yp(Vp,{rte:pp(function(t,e,i){var r=i[0],n=e.getProperties(),o={node:t,properties:n},s=e.getGeometry();s&&(s=zc(s,!0,r),o.geometryLayout=s.getLayout(),n.rtept=s.getCoordinates());var a=i[i.length-1].node,h=od[a.namespaceURI],l=gp(n,h);Sp(o,sd,_p,l,i,h)}),trk:pp(function(t,e,i){var r=i[0],n=e.getProperties(),o={node:t,properties:n},s=e.getGeometry();s&&(s=zc(s,!0,r),n.trkseg=s.getLineStrings());var a=i[i.length-1].node,h=hd[a.namespaceURI],l=gp(n,h);Sp(o,ld,_p,l,i,h)}),wpt:pp(function(t,e,i){var r=i[0],n=i[i.length-1];n.properties=e.getProperties();var o=e.getGeometry();o&&(o=zc(o,!0,r),n.geometryLayout=o.getLayout(),Td(t,o.getCoordinates(),i))})}),qp=function(t){function e(e){t.call(this);var i=e||{};this.dataProjection=ee("EPSG:4326"),this.readExtensions_=i.readExtensions}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.handleReadExtensions_=function(t){t||(t=[]);for(var e=0,i=t.length;e<i;++e){var r=t[e];if(this.readExtensions_){var n=r.get("extensionsNode_")||null;this.readExtensions_(r,n)}r.set("extensionsNode_",void 0)}},e.prototype.readFeatureFromNode=function(t,e){if(!or(Vp,t.namespaceURI))return null;var i=Wp[t.localName];if(!i)return null;var r=i(t,[this.getReadOptions(t,e)]);return r?(this.handleReadExtensions_([r]),r):null},e.prototype.readFeaturesFromNode=function(t,e){if(!or(Vp,t.namespaceURI))return[];if("gpx"==t.localName){var i=mp([],Kp,t,[this.getReadOptions(t,e)]);return i?(this.handleReadExtensions_(i),i):[]}return[]},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=ip("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",ep),i.setAttributeNS(ep,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),Sp({node:i},Zp,_d,t,[e]),i},e}(Ep),Jp=yp(Vp,{name:cp(Op),cmt:cp(Op),desc:cp(Op),src:cp(Op),link:vd,number:cp(Pp),extensions:md,type:cp(Op),rtept:function(t,e){var i=mp({},Qp,t,e);if(i){var r=e[e.length-1];gd(r.flatCoordinates,r.layoutOptions,t,i)}}}),Qp=yp(Vp,{ele:cp(bp),time:cp(Lp)}),$p=yp(Vp,{name:cp(Op),cmt:cp(Op),desc:cp(Op),src:cp(Op),link:vd,number:cp(Pp),type:cp(Op),extensions:md,trkseg:function(t,e){var i=e[e.length-1];vp(td,t,e);var r=i.flatCoordinates;i.ends.push(r.length)}}),td=yp(Vp,{trkpt:function(t,e){var i=mp({},ed,t,e);if(i){var r=e[e.length-1];gd(r.flatCoordinates,r.layoutOptions,t,i)}}}),ed=yp(Vp,{ele:cp(bp),time:cp(Lp)}),id=yp(Vp,{ele:cp(bp),time:cp(Lp),magvar:cp(bp),geoidheight:cp(bp),name:cp(Op),cmt:cp(Op),desc:cp(Op),src:cp(Op),link:vd,sym:cp(Op),type:cp(Op),fix:cp(Op),sat:cp(Pp),hdop:cp(bp),vdop:cp(bp),pdop:cp(bp),ageofdgpsdata:cp(bp),dgpsid:cp(Pp),extensions:md}),rd=["text","type"],nd=yp(Vp,{text:pp(kp),type:pp(kp)}),od=yp(Vp,["name","cmt","desc","src","link","number","type","rtept"]),sd=yp(Vp,{name:pp(kp),cmt:pp(kp),desc:pp(kp),src:pp(kp),link:pp(Cd),number:pp(Gp),type:pp(kp),rtept:dp(pp(Td))}),ad=yp(Vp,["ele","time"]),hd=yp(Vp,["name","cmt","desc","src","link","number","type","trkseg"]),ld=yp(Vp,{name:pp(kp),cmt:pp(kp),desc:pp(kp),src:pp(kp),link:pp(Cd),number:pp(Gp),type:pp(kp),trkseg:dp(pp(function(t,e,i){Sp({node:t,geometryLayout:e.getLayout(),properties:{}},cd,ud,e.getCoordinates(),i)}))}),ud=fp("trkpt"),cd=yp(Vp,{trkpt:pp(Td)}),pd=yp(Vp,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),dd=yp(Vp,{ele:pp(Ap),time:pp(function(t,e){var i=new Date(1e3*e),r=i.getUTCFullYear()+"-"+tn(i.getUTCMonth()+1,2)+"-"+tn(i.getUTCDate(),2)+"T"+tn(i.getUTCHours(),2)+":"+tn(i.getUTCMinutes(),2)+":"+tn(i.getUTCSeconds(),2)+"Z";t.appendChild(tp.createTextNode(r))}),magvar:pp(Ap),geoidheight:pp(Ap),name:pp(kp),cmt:pp(kp),desc:pp(kp),src:pp(kp),link:pp(Cd),sym:pp(kp),type:pp(kp),fix:pp(kp),sat:pp(Gp),hdop:pp(Ap),vdop:pp(Ap),pdop:pp(Ap),ageofdgpsdata:pp(Ap),dgpsid:pp(Gp)}),fd={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function _d(t,e,i){var r=t.getGeometry();if(r){var n=fd[r.getType()];if(n)return ip(e[e.length-1].node.namespaceURI,n)}}function gd(t,e,i,r){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,e.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,e.hasM=!0):t.push(0),t}function yd(t,e,i){var r=dr.XY,n=2;if(t.hasZ&&t.hasM?(r=dr.XYZM,n=4):t.hasZ?(r=dr.XYZ,n=3):t.hasM&&(r=dr.XYM,n=3),4!==n){for(var o=0,s=e.length/4;o<s;o++)e[o*n]=e[4*o],e[o*n+1]=e[4*o+1],t.hasZ&&(e[o*n+2]=e[4*o+2]),t.hasM&&(e[o*n+2]=e[4*o+3]);if(e.length=e.length/4*n,i)for(var a=0,h=i.length;a<h;a++)i[a]=i[a]/4*n}return r}function vd(t,e){var i=e[e.length-1],r=t.getAttribute("href");null!==r&&(i.link=r),vp(Hp,t,e)}function md(t,e){e[e.length-1].extensionsNode_=t}function xd(t,e){var i=e[0],r=mp({flatCoordinates:[],layoutOptions:{}},Jp,t,e);if(r){var n=r.flatCoordinates;delete r.flatCoordinates;var o=r.layoutOptions;delete r.layoutOptions;var s=yd(o,n),a=new yn(n,s);zc(a,!1,i);var h=new Hi(a);return h.setProperties(r),h}}function Sd(t,e){var i=e[0],r=mp({flatCoordinates:[],ends:[],layoutOptions:{}},$p,t,e);if(r){var n=r.flatCoordinates;delete r.flatCoordinates;var o=r.ends;delete r.ends;var s=r.layoutOptions;delete r.layoutOptions;var a=yd(s,n,o),h=new Da(n,a,o);zc(h,!1,i);var l=new Hi(h);return l.setProperties(r),l}}function Ed(t,e){var i=e[0],r=mp({},id,t,e);if(r){var n={},o=gd([],n,t,r),s=yd(n,o),a=new Nr(o,s);zc(a,!1,i);var h=new Hi(a);return h.setProperties(r),h}}function Cd(t,e,i){t.setAttribute("href",e);var r=i[i.length-1].properties,n=[r.linkText,r.linkType];Sp({node:t},nd,_p,n,i,rd)}function Td(t,e,i){var r=i[i.length-1],n=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",e[1]),t.setAttributeNS(null,"lon",e[0]),r.geometryLayout){case dr.XYZM:0!==e[3]&&(o.time=e[3]);case dr.XYZ:0!==e[2]&&(o.ele=e[2]);break;case dr.XYM:0!==e[2]&&(o.time=e[2])}var s="rtept"==t.nodeName?ad[n]:pd[n],a=gp(o,s);Sp({node:t,properties:o},dd,_p,a,i,s)}var wd=function(t){function e(e){t.call(this),this.geometries_=e||null,this.listenGeometriesChange_()}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.unlistenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)g(this.geometries_[t],R.CHANGE,this.changed,this)},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)f(this.geometries_[t],R.CHANGE,this.changed,this)},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,i,r){if(r<Y(this.getExtent(),t,e))return r;for(var n=this.geometries_,o=0,s=n.length;o<s;++o)r=n[o].closestPointXY(t,e,i,r);return r},e.prototype.containsXY=function(t,e){for(var i=this.geometries_,r=0,n=i.length;r<n;++r)if(i[r].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){H(t);for(var e=this.geometries_,i=0,r=e.length;i<r;++i)Q(t,e[i].getExtent());return t},e.prototype.getGeometries=function(){return Rd(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(a(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var i=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(i))return this.simplifiedGeometryCache[i];for(var r=[],n=this.geometries_,o=!1,s=0,h=n.length;s<h;++s){var l=n[s],u=l.getSimplifiedGeometry(t);r.push(u),u!==l&&(o=!0)}if(o){var c=new e(null);return c.setGeometriesArray(r),this.simplifiedGeometryCache[i]=c}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return It.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,i=0,r=e.length;i<r;++i)if(e[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var i=this.geometries_,r=0,n=i.length;r<n;++r)i[r].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,i){var r=i;r||(r=st(this.getExtent()));for(var n=this.geometries_,o=0,s=n.length;o<s;++o)n[o].scale(t,e,r);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(Rd(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,i=0,r=e.length;i<r;++i)e[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var i=this.geometries_,r=0,n=i.length;r<n;++r)i[r].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(Te);function Rd(t){for(var e=[],i=0,r=t.length;i<r;++i)e.push(t[i].clone());return e}var Id=function(t){function e(e){var i=e||{};t.call(this),this.dataProjection=ee(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(this.defaultFeatureProjection=ee(i.featureProjection)),this.geometryName_=i.geometryName,this.extractGeometryName_=i.extractGeometryName}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.readFeatureFromObject=function(t,e){var i,r=Fd((i="Feature"===t.type?t:{type:"Feature",geometry:t}).geometry,e),n=new Hi;return this.geometryName_?n.setGeometryName(this.geometryName_):this.extractGeometryName_&&void 0!==i.geometry_name&&n.setGeometryName(i.geometry_name),n.setGeometry(r),void 0!==i.id&&n.setId(i.id),i.properties&&n.setProperties(i.properties),n},e.prototype.readFeaturesFromObject=function(t,e){var i=null;if("FeatureCollection"===t.type){i=[];for(var r=t.features,n=0,o=r.length;n<o;++n)i.push(this.readFeatureFromObject(r[n],e))}else i=[this.readFeatureFromObject(t,e)];return i},e.prototype.readGeometryFromObject=function(t,e){return Fd(t,e)},e.prototype.readProjectionFromObject=function(t){var e,i=t.crs;return i?"name"==i.type?e=ee(i.properties.name):A(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={type:"Feature"},r=t.getId();void 0!==r&&(i.id=r);var n=t.getGeometry();i.geometry=n?Pd(n,e):null;var o=t.getProperties();return delete o[t.getGeometryName()],l(o)?i.properties=null:i.properties=o,i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],r=0,n=t.length;r<n;++r)i.push(this.writeFeatureObject(t[r],e));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(t,e){return Pd(t,this.adaptOptions(e))},e}(Vc),Ld={Point:function(t){return new Nr(t.coordinates)},LineString:function(t){return new yn(t.coordinates)},Polygon:function(t){return new Hr(t.coordinates)},MultiPoint:function(t){return new ja(t.coordinates)},MultiLineString:function(t){return new Da(t.coordinates)},MultiPolygon:function(t){return new Ya(t.coordinates)},GeometryCollection:function(t,e){var i=t.geometries.map(function(t){return Fd(t,e)});return new wd(i)}},bd={Point:function(t,e){return{type:"Point",coordinates:t.getCoordinates()}},LineString:function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}},Polygon:function(t,e){var i;return e&&(i=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(i)}},MultiPoint:function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}},MultiLineString:function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}},MultiPolygon:function(t,e){var i;return e&&(i=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(i)}},GeometryCollection:function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var i=s({},e);return delete i.featureProjection,Pd(t,i)})}},Circle:function(t){return{type:"GeometryCollection",geometries:[]}}};function Fd(t,e){return t?zc((0,Ld[t.type])(t),!1,e):null}function Pd(t,e){return(0,bd[t.getType()])(zc(t,!0,e),e)}var Md=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getType=function(){return Wa.TEXT},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(Od(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(Od(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(Od(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){},e.prototype.readProjection=function(t){return this.readProjectionFromText(Od(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){},e}(Xc);function Od(t){return"string"==typeof t?t:""}var Nd,Ad,Gd,kd,Dd,jd,Ud,Yd,Bd,Xd="none",zd=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,Vd=/^H.([A-Z]{3}).*?:(.*)/,Wd=/^HFDTE(\d{2})(\d{2})(\d{2})/,Kd=/\r\n|\r|\n/,Hd=function(t){function e(e){t.call(this);var i=e||{};this.dataProjection=ee("EPSG:4326"),this.altitudeMode_=i.altitudeMode?i.altitudeMode:Xd}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.readFeatureFromText=function(t,e){var i,r,n=this.altitudeMode_,o=t.split(Kd),s={},a=[],h=2e3,l=0,u=1,c=-1;for(i=0,r=o.length;i<r;++i){var p=o[i],d=void 0;if("B"==p.charAt(0)){if(d=zd.exec(p)){var f=parseInt(d[1],10),_=parseInt(d[2],10),g=parseInt(d[3],10),y=parseInt(d[4],10)+parseInt(d[5],10)/6e4;"S"==d[6]&&(y=-y);var v=parseInt(d[7],10)+parseInt(d[8],10)/6e4;if("W"==d[9]&&(v=-v),a.push(v,y),n!=Xd){var m;m="gps"==n?parseInt(d[11],10):"barometric"==n?parseInt(d[12],10):0,a.push(m)}var x=Date.UTC(h,l,u,f,_,g);x<c&&(x=Date.UTC(h,l,u+1,f,_,g)),a.push(x/1e3),c=x}}else"H"==p.charAt(0)&&((d=Wd.exec(p))?(u=parseInt(d[1],10),l=parseInt(d[2],10)-1,h=2e3+parseInt(d[3],10)):(d=Vd.exec(p))&&(s[d[1]]=d[2].trim()))}if(0===a.length)return null;var S=n==Xd?dr.XYM:dr.XYZM,E=new yn(a,S),C=new Hi(zc(E,!1,e));return C.setProperties(s),C},e.prototype.readFeaturesFromText=function(t,e){var i=this.readFeatureFromText(t,e);return i?[i]:[]},e}(Md),Zd={FRACTION:"fraction",PIXELS:"pixels"},qd=function(t){function e(e,i,r,n,o,s){t.call(this),this.hitDetectionImage_=null,this.image_=e||new Image,null!==n&&(this.image_.crossOrigin=n),this.canvas_=s?document.createElement("canvas"):null,this.color_=s,this.imageListenerKeys_=null,this.imageState_=o,this.size_=r,this.src_=i,this.tainting_=!1,this.imageState_==ui.LOADED&&this.determineTainting_()}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.determineTainting_=function(){var t=Ae(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainting_=!0}},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(R.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=ui.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=ui.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.determineTainting_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.tainting_){var e=this.size_[0],i=this.size_[1],r=Ae(e,i);r.fillRect(0,0,e,i),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==ui.IDLE){this.imageState_=ui.LOADING,this.imageListenerKeys_=[_(this.image_,R.ERROR,this.handleImageError_,this),_(this.image_,R.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},e.prototype.replaceColor_=function(){if(!this.tainting_&&null!==this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,r=this.color_[0]/255,n=this.color_[1]/255,o=this.color_[2]/255,s=0,a=i.length;s<a;s+=4)i[s]*=r,i[s+1]*=n,i[s+2]*=o;t.putImageData(e,0,0)}},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(y),this.imageListenerKeys_=null},e}(w),Jd={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Qd=function(t){function i(i){var r=i||{},n=void 0!==r.opacity?r.opacity:1,o=void 0!==r.rotation?r.rotation:0,s=void 0!==r.scale?r.scale:1,a=void 0!==r.rotateWithView&&r.rotateWithView;t.call(this,{opacity:n,rotation:o,scale:s,rotateWithView:a}),this.anchor_=void 0!==r.anchor?r.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==r.anchorOrigin?r.anchorOrigin:Jd.TOP_LEFT,this.anchorXUnits_=void 0!==r.anchorXUnits?r.anchorXUnits:Zd.FRACTION,this.anchorYUnits_=void 0!==r.anchorYUnits?r.anchorYUnits:Zd.FRACTION,this.crossOrigin_=void 0!==r.crossOrigin?r.crossOrigin:null;var h=void 0!==r.img?r.img:null,l=void 0!==r.imgSize?r.imgSize:null,u=r.src;A(!(void 0!==u&&h),4),A(!h||h&&l,5),void 0!==u&&0!==u.length||!h||(u=h.src||e(h).toString()),A(void 0!==u&&0<u.length,6);var c,p,d,f,_,g,y,v=void 0!==r.src?ui.IDLE:ui.LOADED;this.color_=void 0!==r.color?Pe(r.color):null,this.iconImage_=(c=h,p=u,d=l,f=this.crossOrigin_,_=v,g=this.color_,(y=fl.get(p,f,g))||(y=new qd(c,p,d,f,_,g),fl.set(p,f,g,y)),y),this.offset_=void 0!==r.offset?r.offset:[0,0],this.offsetOrigin_=void 0!==r.offsetOrigin?r.offsetOrigin:Jd.TOP_LEFT,this.origin_=null,this.size_=void 0!==r.size?r.size:null}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.clone=function(){return new i({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},i.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==Zd.FRACTION||this.anchorYUnits_==Zd.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==Zd.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==Zd.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=Jd.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=Jd.TOP_RIGHT&&this.anchorOrigin_!=Jd.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=Jd.BOTTOM_LEFT&&this.anchorOrigin_!=Jd.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},i.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},i.prototype.getColor=function(){return this.color_},i.prototype.getImage=function(t){return this.iconImage_.getImage(t)},i.prototype.getImageSize=function(){return this.iconImage_.getSize()},i.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},i.prototype.getImageState=function(){return this.iconImage_.getImageState()},i.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},i.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=Jd.TOP_LEFT){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),this.offsetOrigin_!=Jd.TOP_RIGHT&&this.offsetOrigin_!=Jd.BOTTOM_RIGHT||(t[0]=i[0]-e[0]-t[0]),this.offsetOrigin_!=Jd.BOTTOM_LEFT&&this.offsetOrigin_!=Jd.BOTTOM_RIGHT||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},i.prototype.getSrc=function(){return this.iconImage_.getSrc()},i.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},i.prototype.listenImageChange=function(t,e){return f(this.iconImage_,R.CHANGE,t,e)},i.prototype.load=function(){this.iconImage_.load()},i.prototype.unlistenImageChange=function(t,e){g(this.iconImage_,R.CHANGE,t,e)},i}(Di),$d=["http://www.google.com/kml/ext/2.2"],tf=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],ef={fraction:Zd.FRACTION,pixels:Zd.PIXELS,insetPixels:Zd.PIXELS},rf=yp(tf,{ExtendedData:Hf,Region:Zf,MultiGeometry:cp(jf,"geometry"),LineString:cp(Gf,"geometry"),LinearRing:cp(kf,"geometry"),Point:cp(Uf,"geometry"),Polygon:cp(Bf,"geometry"),Style:cp(zf),StyleMap:function(t,e){var i=Ef(t,e);if(i){var r=e[e.length-1];Array.isArray(i)?r.Style=i:"string"==typeof i?r.styleUrl=i:A(!1,38)}},address:cp(Op),description:cp(Op),name:cp(Op),open:cp(Rp),phoneNumber:cp(Op),styleUrl:cp(mf),visibility:cp(Rp)},yp($d,{MultiTrack:cp(function(t,e){var i=mp([],bf,t,e);if(i)return new Da(i)},"geometry"),Track:cp(Pf,"geometry")})),nf=yp(tf,{ExtendedData:Hf,Region:Zf,Link:function(t,e){vp(of,t,e)},address:cp(Op),description:cp(Op),name:cp(Op),open:cp(Rp),phoneNumber:cp(Op),visibility:cp(Rp)}),of=yp(tf,{href:cp(mf)}),sf=yp(tf,{LatLonAltBox:function(t,e){var i=mp({},Qf,t,e);if(i){var r=e[e.length-1],n=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)];r.extent=n,r.altitudeMode=i.altitudeMode,r.minAltitude=parseFloat(i.minAltitude),r.maxAltitude=parseFloat(i.maxAltitude)}},Lod:function(t,e){var i=mp({},$f,t,e);if(i){var r=e[e.length-1];r.minLodPixels=parseFloat(i.minLodPixels),r.maxLodPixels=parseFloat(i.maxLodPixels),r.minFadeExtent=parseFloat(i.minFadeExtent),r.maxFadeExtent=parseFloat(i.maxFadeExtent)}}}),af=yp(tf,["Document","Placemark"]),hf=yp(tf,{Document:pp(function(t,e,i){Sp({node:t},n_,o_,e,i,void 0,this)}),Placemark:pp(b_)}),lf=null,uf=null,cf=null,pf=null,df=null,ff=null,_f=function(t){function e(e){t.call(this);var i=e||{};ff||(lf=new Yi({color:Nd=[255,255,255,1]}),Ad=[20,2],Gd=Zd.PIXELS,kd=Zd.PIXELS,Dd=[64,64],jd="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Ud=.5,uf=new Qd({anchor:Ad,anchorOrigin:Jd.BOTTOM_LEFT,anchorXUnits:Gd,anchorYUnits:kd,crossOrigin:"anonymous",rotation:0,scale:Ud,size:Dd,src:jd}),Yd="NO_IMAGE",cf=new Bi({color:Nd,width:1}),Bd=new Bi({color:[51,51,51,1],width:2}),pf=new En({font:"bold 16px Helvetica",fill:lf,stroke:Bd,scale:.8}),df=new Xi({fill:lf,image:uf,text:pf,stroke:cf,zIndex:0}),ff=[df]),this.dataProjection=ee("EPSG:4326"),this.defaultStyle_=i.defaultStyle?i.defaultStyle:ff,this.extractStyles_=void 0===i.extractStyles||i.extractStyles,this.writeStyles_=void 0===i.writeStyles||i.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===i.showPointNames||i.showPointNames}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.readDocumentOrFolder_=function(t,e){return mp([],yp(tf,{Document:ap(this.readDocumentOrFolder_,this),Folder:ap(this.readDocumentOrFolder_,this),Placemark:hp(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),t,e,this)||void 0},e.prototype.readPlacemark_=function(t,e){var i=mp({geometry:null},rf,t,e);if(i){var r=new Hi,n=t.getAttribute("id");null!==n&&r.setId(n);var o,s,a,h,l,u=e[0],c=i.geometry;if(c&&zc(c,!1,u),r.setGeometry(c),delete i.geometry,this.extractStyles_){var p=i.Style,d=i.styleUrl,f=(o=p,s=d,a=this.defaultStyle_,h=this.sharedStyles_,l=this.showPointNames_,function(t,e){var i,r=l,n="";if(r){var u=t.getGeometry();u&&(r=u.getType()===It.POINT)}if(r&&(n=t.get("name"),r=r&&n),o)return r?(i=gf(o[0],n),o.concat(i)):o;if(s){var c=function t(e,i,r){return Array.isArray(e)?e:"string"==typeof e?(!(e in r)&&"#"+e in r&&(e="#"+e),t(r[e],i,r)):i}(s,a,h);return r?(i=gf(c[0],n),c.concat(i)):c}return r?(i=gf(a[0],n),a.concat(i)):a});r.setStyle(f)}return delete i.Style,r.setProperties(i),r}},e.prototype.readSharedStyle_=function(t,e){var i=t.getAttribute("id");if(null!==i){var r=zf(t,e);if(r){var n,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),n=o?new URL("#"+i,o).href:"#"+i,this.sharedStyles_[n]=r}}},e.prototype.readSharedStyleMap_=function(t,e){var i=t.getAttribute("id");if(null!==i){var r=Ef(t,e);if(r){var n,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),n=o?new URL("#"+i,o).href:"#"+i,this.sharedStyles_[n]=r}}},e.prototype.readFeatureFromNode=function(t,e){return or(tf,t.namespaceURI)&&this.readPlacemark_(t,[this.getReadOptions(t,e)])||null},e.prototype.readFeaturesFromNode=function(t,e){var i;if(!or(tf,t.namespaceURI))return[];var r=t.localName;if("Document"==r||"Folder"==r)return(i=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==r){var n=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return n?[n]:[]}if("kml"==r){i=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var s=this.readFeaturesFromNode(o,e);s&&hr(i,s)}return i}return[]},e.prototype.readName=function(t){if(np(t))return this.readNameFromDocument(t);if(op(t))return this.readNameFromNode(t);if("string"==typeof t){var e=sp(t);return this.readNameFromDocument(e)}},e.prototype.readNameFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var i=this.readNameFromNode(e);if(i)return i}},e.prototype.readNameFromNode=function(t){for(var e=t.firstElementChild;e;e=e.nextElementSibling)if(or(tf,e.namespaceURI)&&"name"==e.localName)return Op(e);for(var i=t.firstElementChild;i;i=i.nextElementSibling){var r=i.localName;if(or(tf,i.namespaceURI)&&("Document"==r||"Folder"==r||"Placemark"==r||"kml"==r)){var n=this.readNameFromNode(i);if(n)return n}}},e.prototype.readNetworkLinks=function(t){var e=[];if(np(t))hr(e,this.readNetworkLinksFromDocument(t));else if(op(t))hr(e,this.readNetworkLinksFromNode(t));else if("string"==typeof t){var i=sp(t);hr(e,this.readNetworkLinksFromDocument(i))}return e},e.prototype.readNetworkLinksFromDocument=function(t){for(var e=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&hr(e,this.readNetworkLinksFromNode(i));return e},e.prototype.readNetworkLinksFromNode=function(t){for(var e=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(or(tf,i.namespaceURI)&&"NetworkLink"==i.localName){var r=mp({},nf,i,[]);e.push(r)}for(var n=t.firstElementChild;n;n=n.nextElementSibling){var o=n.localName;!or(tf,n.namespaceURI)||"Document"!=o&&"Folder"!=o&&"kml"!=o||hr(e,this.readNetworkLinksFromNode(n))}return e},e.prototype.readRegion=function(t){var e=[];if(np(t))hr(e,this.readRegionFromDocument(t));else if(op(t))hr(e,this.readRegionFromNode(t));else if("string"==typeof t){var i=sp(t);hr(e,this.readRegionFromDocument(i))}return e},e.prototype.readRegionFromDocument=function(t){for(var e=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&hr(e,this.readRegionFromNode(i));return e},e.prototype.readRegionFromNode=function(t){for(var e=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(or(tf,i.namespaceURI)&&"Region"==i.localName){var r=mp({},sf,i,[]);e.push(r)}for(var n=t.firstElementChild;n;n=n.nextElementSibling){var o=n.localName;!or(tf,n.namespaceURI)||"Document"!=o&&"Folder"!=o&&"kml"!=o||hr(e,this.readRegionFromNode(n))}return e},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=ip(tf[4],"kml"),r="http://www.w3.org/2000/xmlns/";i.setAttributeNS(r,"xmlns:gx",$d[0]),i.setAttributeNS(r,"xmlns:xsi",ep),i.setAttributeNS(ep,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var n={node:i},o={};1<t.length?o.Document=t:1==t.length&&(o.Placemark=t[0]);var s=af[i.namespaceURI],a=gp(o,s);return Sp(n,hf,_p,a,[e],s,this),i},e}(Ep);function gf(t,e){var i=null,r=[0,0],n="start";if(t.getImage()){var o=t.getImage().getImageSize();if(null===o&&(o=Dd),2==o.length){var s=t.getImage().getScale();r[0]=s*o[0]/2,r[1]=-s*o[1]/2,n="left"}}if(null!==t.getText()){var a=t.getText();(i=a.clone()).setFont(a.getFont()||pf.getFont()),i.setScale(a.getScale()||pf.getScale()),i.setFill(a.getFill()||pf.getFill()),i.setStroke(a.getStroke()||Bd)}else i=pf.clone();return i.setText(e),i.setOffsetX(r[0]),i.setOffsetY(r[1]),i.setTextAlign(n),new Xi({text:i})}function yf(t){var e=rp(t,!1),i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(i){var r=i[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function vf(t){for(var e,i=rp(t,!1),r=[],n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;e=n.exec(i);){var o=parseFloat(e[1]),s=parseFloat(e[2]),a=e[3]?parseFloat(e[3]):0;r.push(o,s,a),i=i.substr(e[0].length)}if(""===i)return r}function mf(t){var e=rp(t,!1).trim(),i=t.baseURI;return i&&"about:blank"!=i||(i=window.location.href),i?new URL(e,i).href:e}function xf(t){return bp(t)}var Sf=yp(tf,{Pair:function(t,e){var i=mp({},qf,t,e);if(i){var r=i.key;if(r&&"normal"==r){var n=i.styleUrl;n&&(e[e.length-1]=n);var o=i.Style;o&&(e[e.length-1]=o)}}}});function Ef(t,e){return mp(void 0,Sf,t,e)}var Cf=yp(tf,{Icon:cp(function(t,e){return mp({},Mf,t,e)||null}),heading:cp(bp),hotSpot:cp(function(t){var e,i=t.getAttribute("xunits"),r=t.getAttribute("yunits");return e="insetPixels"!==i?"insetPixels"!==r?Jd.BOTTOM_LEFT:Jd.TOP_LEFT:"insetPixels"!==r?Jd.BOTTOM_RIGHT:Jd.TOP_RIGHT,{x:parseFloat(t.getAttribute("x")),xunits:ef[i],y:parseFloat(t.getAttribute("y")),yunits:ef[r],origin:e}}),scale:cp(xf)}),Tf=yp(tf,{color:cp(yf),scale:cp(xf)}),wf=yp(tf,{color:cp(yf),width:cp(bp)}),Rf=yp(tf,{color:cp(yf),fill:cp(Rp),outline:cp(Rp)}),If=yp(tf,{coordinates:lp(vf)});function Lf(t,e){return mp(null,If,t,e)}var bf=yp($d,{Track:hp(Pf)}),Ff=yp(tf,{when:function(t,e){var i=e[e.length-1].whens,r=rp(t,!1),n=Date.parse(r);i.push(isNaN(n)?0:n)}},yp($d,{coord:function(t,e){var i=e[e.length-1].flatCoordinates,r=rp(t,!1),n=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(n){var o=parseFloat(n[1]),s=parseFloat(n[2]),a=parseFloat(n[3]);i.push(o,s,a,0)}else i.push(0,0,0,0)}}));function Pf(t,e){var i=mp({flatCoordinates:[],whens:[]},Ff,t,e);if(i){for(var r=i.flatCoordinates,n=i.whens,o=0,s=Math.min(r.length,n.length);o<s;++o)r[4*o+3]=n[o];return new yn(r,dr.XYZM)}}var Mf=yp(tf,{href:cp(mf)},yp($d,{x:cp(bp),y:cp(bp),w:cp(bp),h:cp(bp)})),Of=yp(tf,{coordinates:lp(vf)});function Nf(t,e){return mp(null,Of,t,e)}var Af=yp(tf,{extrude:cp(Rp),tessellate:cp(Rp),altitudeMode:cp(Op)});function Gf(t,e){var i=mp({},Af,t,e),r=Nf(t,e);if(r){var n=new yn(r,dr.XYZ);return n.setProperties(i),n}}function kf(t,e){var i=mp({},Af,t,e),r=Nf(t,e);if(r){var n=new Hr(r,dr.XYZ,[r.length]);return n.setProperties(i),n}}var Df=yp(tf,{LineString:hp(Gf),LinearRing:hp(kf),MultiGeometry:hp(jf),Point:hp(Uf),Polygon:hp(Bf)});function jf(t,e){var i,r=mp([],Df,t,e);if(!r)return null;if(0===r.length)return new wd(r);for(var n,o,s=!0,a=r[0].getType(),h=1,l=r.length;h<l;++h)if(r[h].getType()!=a){s=!1;break}if(s)if(a==It.POINT){var u=r[0];n=u.getLayout(),o=u.getFlatCoordinates();for(var c=1,p=r.length;c<p;++c)hr(o,r[c].getFlatCoordinates());Vf(i=new ja(o,n),r)}else a==It.LINE_STRING?Vf(i=new Da(r),r):a==It.POLYGON?Vf(i=new Ya(r),r):a==It.GEOMETRY_COLLECTION?i=new wd(r):A(!1,37);else i=new wd(r);return i}function Uf(t,e){var i=mp({},Af,t,e),r=Nf(t,e);if(r){var n=new Nr(r,dr.XYZ);return n.setProperties(i),n}}var Yf=yp(tf,{innerBoundaryIs:function(t,e){var i=mp(void 0,t_,t,e);i&&e[e.length-1].push(i)},outerBoundaryIs:function(t,e){var i=mp(void 0,e_,t,e);i&&(e[e.length-1][0]=i)}});function Bf(t,e){var i=mp({},Af,t,e),r=mp([null],Yf,t,e);if(r&&r[0]){for(var n=r[0],o=[n.length],s=1,a=r.length;s<a;++s)hr(n,r[s]),o.push(n.length);var h=new Hr(n,dr.XYZ,o);return h.setProperties(i),h}}var Xf=yp(tf,{IconStyle:function(t,e){var i=mp({},Cf,t,e);if(i){var r,n,o,s,a=e[e.length-1],h="Icon"in i?i.Icon:{},l=!("Icon"in i)||0<Object.keys(h).length,u=h.href;u?r=u:l&&(r=jd);var c,p=Jd.BOTTOM_LEFT,d=i.hotSpot;d?(n=[d.x,d.y],o=d.xunits,s=d.yunits,p=d.origin):r===jd?(n=Ad,o=Gd,s=kd):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(n=[.5,0],o=Zd.FRACTION,s=Zd.FRACTION);var f,_=h.x,g=h.y;void 0!==_&&void 0!==g&&(c=[_,g]);var y,v=h.w,m=h.h;void 0!==v&&void 0!==m&&(f=[v,m]);var x=i.heading;void 0!==x&&(y=Tt(x));var S=i.scale;if(l){r==jd&&(f=Dd,void 0===S&&(S=Ud));var E=new Qd({anchor:n,anchorOrigin:p,anchorXUnits:o,anchorYUnits:s,crossOrigin:"anonymous",offset:c,offsetOrigin:Jd.BOTTOM_LEFT,rotation:y,scale:S,size:f,src:r});a.imageStyle=E}else a.imageStyle=Yd}},LabelStyle:function(t,e){var i=mp({},Tf,t,e);if(i){var r=e[e.length-1],n=new En({fill:new Yi({color:"color"in i?i.color:Nd}),scale:i.scale});r.textStyle=n}},LineStyle:function(t,e){var i=mp({},wf,t,e);if(i){var r=e[e.length-1],n=new Bi({color:"color"in i?i.color:Nd,width:"width"in i?i.width:1});r.strokeStyle=n}},PolyStyle:function(t,e){var i=mp({},Rf,t,e);if(i){var r=e[e.length-1],n=new Yi({color:"color"in i?i.color:Nd});r.fillStyle=n;var o=i.fill;void 0!==o&&(r.fill=o);var s=i.outline;void 0!==s&&(r.outline=s)}}});function zf(t,e){var i=mp({},Xf,t,e);if(!i)return null;var r="fillStyle"in i?i.fillStyle:lf,n=i.fill;void 0===n||n||(r=null);var o="imageStyle"in i?i.imageStyle:uf;o==Yd&&(o=void 0);var s="textStyle"in i?i.textStyle:pf,a="strokeStyle"in i?i.strokeStyle:cf,h=i.outline;return void 0===h||h||(a=null),[new Xi({fill:r,image:o,stroke:a,text:s,zIndex:void 0})]}function Vf(t,e){var i,r,n,o=e.length,s=new Array(e.length),a=new Array(e.length),h=new Array(e.length);i=r=n=!1;for(var l=0;l<o;++l){var u=e[l];s[l]=u.get("extrude"),a[l]=u.get("tessellate"),h[l]=u.get("altitudeMode"),i=i||void 0!==s[l],r=r||void 0!==a[l],n=n||h[l]}i&&t.set("extrude",s),r&&t.set("tessellate",a),n&&t.set("altitudeMode",h)}var Wf=yp(tf,{displayName:cp(Op),value:cp(Op)}),Kf=yp(tf,{Data:function(t,e){var i=t.getAttribute("name");vp(Wf,t,e);var r=e[e.length-1];null!==i?r[i]=r.value:null!==r.displayName&&(r[r.displayName]=r.value),delete r.value},SchemaData:function(t,e){vp(Jf,t,e)}});function Hf(t,e){vp(Kf,t,e)}function Zf(t,e){vp(sf,t,e)}var qf=yp(tf,{Style:cp(zf),key:cp(Op),styleUrl:cp(mf)}),Jf=yp(tf,{SimpleData:function(t,e){var i=t.getAttribute("name");if(null!==i){var r=Op(t);e[e.length-1][i]=r}}}),Qf=yp(tf,{altitudeMode:cp(Op),minAltitude:cp(bp),maxAltitude:cp(bp),north:cp(bp),south:cp(bp),east:cp(bp),west:cp(bp)}),$f=yp(tf,{minLodPixels:cp(bp),maxLodPixels:cp(bp),minFadeExtent:cp(bp),maxFadeExtent:cp(bp)}),t_=yp(tf,{LinearRing:lp(Lf)}),e_=yp(tf,{LinearRing:lp(Lf)});function i_(t,e){for(var i=Pe(e),r=[255*(4==i.length?i[3]:1),i[2],i[1],i[0]],n=0;n<4;++n){var o=parseInt(r[n],10).toString(16);r[n]=1==o.length?"0"+o:o}kp(t,r.join(""))}var r_=yp(tf,{Data:pp(function(t,e,i){t.setAttribute("name",e.name);var r={node:t},n=e.value;"object"==typeof n?(null!==n&&n.displayName&&Sp(r,r_,_p,[n.displayName],i,["displayName"]),null!==n&&n.value&&Sp(r,r_,_p,[n.value],i,["value"])):Sp(r,r_,_p,[n],i,["value"])}),value:pp(function(t,e){kp(t,e)}),displayName:pp(function(t,e){var i;i=e,t.appendChild(tp.createCDATASection(i))})}),n_=yp(tf,{Placemark:pp(b_)}),o_=function(t,e,i){return ip(e[e.length-1].node.namespaceURI,"Placemark")},s_=fp("Data"),a_=yp(tf,["href"],yp($d,["x","y","w","h"])),h_=yp(tf,{href:pp(kp)},yp($d,{x:pp(Ap),y:pp(Ap),w:pp(Ap),h:pp(Ap)})),l_=function(t,e,i){return ip($d[0],"gx:"+i)},u_=yp(tf,["scale","heading","Icon","hotSpot"]),c_=yp(tf,{Icon:pp(function(t,e,i){var r={node:t},n=i[i.length-1].node,o=a_[n.namespaceURI],s=gp(e,o);Sp(r,h_,_p,s,i,o),s=gp(e,o=a_[$d[0]]),Sp(r,h_,l_,s,i,o)}),heading:pp(Ap),hotSpot:pp(function(t,e){t.setAttribute("x",e.x),t.setAttribute("y",e.y),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)}),scale:pp(j_)}),p_=yp(tf,["color","scale"]),d_=yp(tf,{color:pp(i_),scale:pp(j_)}),f_=yp(tf,["color","width"]),__=yp(tf,{color:pp(i_),width:pp(Ap)}),g_={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},y_=function(t,e,i){if(t)return ip(e[e.length-1].node.namespaceURI,g_[t.getType()])},v_=fp("Point"),m_=fp("LineString"),x_=fp("LinearRing"),S_=fp("Polygon"),E_=yp(tf,{LineString:pp(M_),Point:pp(M_),Polygon:pp(G_),GeometryCollection:pp(C_)});function C_(t,e,i){var r,n,o={node:t},s=e.getType();s==It.GEOMETRY_COLLECTION?(r=e.getGeometries(),n=y_):s==It.MULTI_POINT?(r=e.getPoints(),n=v_):s==It.MULTI_LINE_STRING?(r=e.getLineStrings(),n=m_):s==It.MULTI_POLYGON?(r=e.getPolygons(),n=S_):A(!1,39),Sp(o,E_,n,r,i)}var T_=yp(tf,{LinearRing:pp(M_)});function w_(t,e,i){Sp({node:t},T_,x_,[e],i)}var R_=yp(tf,{ExtendedData:pp(function(t,e,i){for(var r={node:t},n=e.names,o=e.values,s=n.length,a=0;a<s;a++)Sp(r,r_,s_,[{name:n[a],value:o[a]}],i)}),MultiGeometry:pp(C_),LineString:pp(M_),LinearRing:pp(M_),Point:pp(M_),Polygon:pp(G_),Style:pp(function(t,e,i){var r={node:t},n={},o=e.getFill(),s=e.getStroke(),a=e.getImage(),h=e.getText();a instanceof Qd&&(n.IconStyle=a),h&&(n.LabelStyle=h),s&&(n.LineStyle=s),o&&(n.PolyStyle=o);var l=i[i.length-1].node,u=U_[l.namespaceURI],c=gp(n,u);Sp(r,Y_,_p,c,i,u)}),address:pp(kp),description:pp(kp),name:pp(kp),open:pp(Np),phoneNumber:pp(kp),styleUrl:pp(kp),visibility:pp(Np)}),I_=yp(tf,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),L_=fp("ExtendedData");function b_(t,e,i){var r={node:t};e.getId()&&t.setAttribute("id",e.getId());var n=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;var s=Object.keys(n||{}).sort().filter(function(t){return!o[t]});if(0<s.length){var a=gp(n,s);Sp(r,R_,L_,[{names:s,values:a}],i)}var h=e.getStyleFunction();if(h){var l=h(e,0);if(l){var u=Array.isArray(l)?l[0]:l;this.writeStyles_&&(n.Style=u);var c=u.getText();c&&(n.name=c.getText())}}var p=i[i.length-1].node,d=I_[p.namespaceURI],f=gp(n,d);Sp(r,R_,_p,f,i,d);var _=i[0],g=e.getGeometry();g&&(g=zc(g,!0,_)),Sp(r,R_,y_,[g],i)}var F_=yp(tf,["extrude","tessellate","altitudeMode","coordinates"]),P_=yp(tf,{extrude:pp(Np),tessellate:pp(Np),altitudeMode:pp(kp),coordinates:pp(function(t,e,i){var r,n=i[i.length-1],o=n.layout,s=n.stride;o==dr.XY||o==dr.XYM?r=2:o==dr.XYZ||o==dr.XYZM?r=3:A(!1,34);var a=e.length,h="";if(0<a){h+=e[0];for(var l=1;l<r;++l)h+=","+e[l];for(var u=s;u<a;u+=s){h+=" "+e[u];for(var c=1;c<r;++c)h+=","+e[u+c]}}kp(t,h)})});function M_(t,e,i){var r=e.getFlatCoordinates(),n={node:t};n.layout=e.getLayout(),n.stride=e.getStride();var o=e.getProperties();o.coordinates=r;var s=i[i.length-1].node,a=F_[s.namespaceURI],h=gp(o,a);Sp(n,P_,_p,h,i,a)}var O_=yp(tf,{outerBoundaryIs:pp(w_),innerBoundaryIs:pp(w_)}),N_=fp("innerBoundaryIs"),A_=fp("outerBoundaryIs");function G_(t,e,i){var r=e.getLinearRings(),n=r.shift(),o={node:t};Sp(o,O_,N_,r,i),Sp(o,O_,A_,[n],i)}var k_=yp(tf,{color:pp(i_)}),D_=fp("color");function j_(t,e){Ap(t,Math.round(1e6*e)/1e6)}var U_=yp(tf,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Y_=yp(tf,{IconStyle:pp(function(t,e,i){var r={node:t},n={},o=e.getSrc(),s=e.getSize(),a=e.getImageSize(),h={href:o};if(s){h.w=s[0],h.h=s[1];var l=e.getAnchor(),u=e.getOrigin();if(u&&a&&0!==u[0]&&u[1]!==s[1]&&(h.x=u[0],h.y=a[1]-(u[1]+s[1])),l&&(l[0]!==s[0]/2||l[1]!==s[1]/2)){var c={x:l[0],xunits:Zd.PIXELS,y:s[1]-l[1],yunits:Zd.PIXELS};n.hotSpot=c}}n.Icon=h;var p=e.getScale();1!==p&&(n.scale=p);var d=e.getRotation();0!==d&&(n.heading=d);var f=i[i.length-1].node,_=u_[f.namespaceURI],g=gp(n,_);Sp(r,c_,_p,g,i,_)}),LabelStyle:pp(function(t,e,i){var r={node:t},n={},o=e.getFill();o&&(n.color=o.getColor());var s=e.getScale();s&&1!==s&&(n.scale=s);var a=i[i.length-1].node,h=p_[a.namespaceURI],l=gp(n,h);Sp(r,d_,_p,l,i,h)}),LineStyle:pp(function(t,e,i){var r={node:t},n={color:e.getColor(),width:e.getWidth()},o=i[i.length-1].node,s=f_[o.namespaceURI],a=gp(n,s);Sp(r,__,_p,a,i,s)}),PolyStyle:pp(function(t,e,i){Sp({node:t},k_,D_,[e.getColor()],i)})}),B_=function(t,e,i,r,n){var o,s,a=8*n-r-1,h=(1<<a)-1,l=h>>1,u=-7,c=i?n-1:0,p=i?-1:1,d=t[e+c];for(c+=p,o=d&(1<<-u)-1,d>>=-u,u+=a;0<u;o=256*o+t[e+c],c+=p,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;0<u;s=256*s+t[e+c],c+=p,u-=8);if(0===o)o=1-l;else{if(o===h)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=l}return(d?-1:1)*s*Math.pow(2,o-r)},X_=function(t,e,i,r,n,o){var s,a,h,l=8*o-n-1,u=(1<<l)-1,c=u>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-s))<1&&(s--,h*=2),2<=(e+=1<=s+c?p/h:p*Math.pow(2,1-c))*h&&(s++,h/=2),u<=s+c?(a=0,s=u):1<=s+c?(a=(e*h-1)*Math.pow(2,n),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,n),s=0));8<=n;t[i+d]=255&a,d+=f,a/=256,n-=8);for(s=s<<n|a,l+=n;0<l;t[i+d]=255&s,d+=f,s/=256,l-=8);t[i+d-f]|=128*_},z_=V_;function V_(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}V_.Varint=0,V_.Fixed64=1,V_.Bytes=2,V_.Fixed32=5;var W_=4294967296,K_=1/W_;function H_(t){return t.type===V_.Bytes?t.readVarint()+t.pos:t.pos+1}function Z_(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function q_(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;t<=n;n--)i.buf[n+r]=i.buf[n]}function J_(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function Q_(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function $_(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function tg(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function eg(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function ig(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function rg(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function ng(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function og(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function sg(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function ag(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function hg(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}V_.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,t(n,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=sg(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=hg(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=sg(this.buf,this.pos)+sg(this.buf,this.pos+4)*W_;return this.pos+=8,t},readSFixed64:function(){var t=sg(this.buf,this.pos)+hg(this.buf,this.pos+4)*W_;return this.pos+=8,t},readFloat:function(){var t=B_(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=B_(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,n,o=i.buf;if(r=(112&(n=o[i.pos++]))>>4,n<128)return Z_(t,r,e);if(r|=(127&(n=o[i.pos++]))<<3,n<128)return Z_(t,r,e);if(r|=(127&(n=o[i.pos++]))<<10,n<128)return Z_(t,r,e);if(r|=(127&(n=o[i.pos++]))<<17,n<128)return Z_(t,r,e);if(r|=(127&(n=o[i.pos++]))<<24,n<128)return Z_(t,r,e);if(r|=(1&(n=o[i.pos++]))<<31,n<128)return Z_(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,i){for(var r="",n=e;n<i;){var o,s,a,h=t[n],l=null,u=239<h?4:223<h?3:191<h?2:1;if(i<n+u)break;1===u?h<128&&(l=h):2===u?128==(192&(o=t[n+1]))&&(l=(31&h)<<6|63&o)<=127&&(l=null):3===u?(o=t[n+1],s=t[n+2],128==(192&o)&&128==(192&s)&&((l=(15&h)<<12|(63&o)<<6|63&s)<=2047||55296<=l&&l<=57343)&&(l=null)):4===u&&(o=t[n+1],s=t[n+2],a=t[n+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&((l=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||1114112<=l)&&(l=null)),null===l?(l=65533,u=1):65535<l&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),n+=u}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var i=H_(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=H_(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=H_(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=H_(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=H_(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=H_(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=H_(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=H_(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=H_(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===V_.Varint)for(;127<this.buf[this.pos++];);else if(e===V_.Bytes)this.pos=this.readVarint()+this.pos;else if(e===V_.Fixed32)this.pos+=4;else{if(e!==V_.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),ag(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),ag(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),ag(this.buf,-1&t,this.pos),ag(this.buf,Math.floor(t*K_),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),ag(this.buf,-1&t,this.pos),ag(this.buf,Math.floor(t*K_),this.pos+4),this.pos+=8},writeVarint:function(t){268435455<(t=+t||0)||t<0?function(t,e){var i,r,n,o;if(0<=t?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:r=r+1|(i=0)),0x10000000000000000<=t||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),n=i,(o=e).buf[o.pos++]=127&n|128,n>>>=7,o.buf[o.pos++]=127&n|128,n>>>=7,o.buf[o.pos++]=127&n|128,n>>>=7,o.buf[o.pos++]=127&n|128,n>>>=7,o.buf[o.pos]=127&n,function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,n,o=0;o<e.length;o++){if(55295<(r=e.charCodeAt(o))&&r<57344){if(!n){56319<r||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;128<=i&&q_(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),X_(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),X_(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;128<=r&&q_(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,V_.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){this.writeMessage(t,J_,e)},writePackedSVarint:function(t,e){this.writeMessage(t,Q_,e)},writePackedBoolean:function(t,e){this.writeMessage(t,eg,e)},writePackedFloat:function(t,e){this.writeMessage(t,$_,e)},writePackedDouble:function(t,e){this.writeMessage(t,tg,e)},writePackedFixed32:function(t,e){this.writeMessage(t,ig,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,rg,e)},writePackedFixed64:function(t,e){this.writeMessage(t,ng,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,og,e)},writeBytesField:function(t,e){this.writeTag(t,V_.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,V_.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,V_.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,V_.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,V_.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,V_.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,V_.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,V_.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,V_.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,V_.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var lg=[1,0,0,1,0,0],ug=function(t,e,i,r,n){this.extent_,this.id_=n,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=r};ug.prototype.get=function(t){return this.properties_[t]},ug.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===It.POINT?Z(this.flatCoordinates_):q(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},ug.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=st(this.getExtent());this.flatInteriorPoints_=Dr(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},ug.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=Ua(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=jr(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},ug.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=fn(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},ug.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,i=this.ends_,r=0,n=i.length;r<n;++r){var o=i[r],s=fn(t,e,o,2,.5);hr(this.flatMidpoints_,s),e=o}}return this.flatMidpoints_},ug.prototype.getId=function(){return this.id_},ug.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},ug.prototype.getGeometry=function(){return this},ug.prototype.getProperties=function(){return this.properties_},ug.prototype.getStride=function(){return 2},ug.prototype.getType=function(){return this.type_},ug.prototype.transform=function(t,e){var i=(t=ee(t)).getExtent(),r=t.getWorldExtent(),n=ht(r)/ht(i);Se(lg,r[0],r[3],n,-n,0,0,0),yt(this.flatCoordinates_,0,this.flatCoordinates_.length,2,lg,this.flatCoordinates_)},ug.prototype.getEnds=ug.prototype.getEndss=function(){return this.ends_},ug.prototype.getFlatCoordinates=ug.prototype.getOrientedFlatCoordinates,ug.prototype.getSimplifiedGeometry=ug.prototype.getGeometry,ug.prototype.getStyleFunction=E;var cg=function(t){function e(e){t.call(this);var i=e||{};this.dataProjection=new Nt({code:"",units:Mt.TILE_PIXELS}),this.featureClass_=i.featureClass?i.featureClass:ug,this.geometryName_=i.geometryName,this.layerName_=i.layerName?i.layerName:"layer",this.layers_=i.layers?i.layers:null,this.extent_=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.readRawGeometry_=function(t,e,i,r){t.pos=e.geometry;for(var n=t.readVarint()+t.pos,o=1,s=0,a=0,h=0,l=0,u=0;t.pos<n;){if(!s){var c=t.readVarint();o=7&c,s=c>>3}s--,1===o||2===o?(a+=t.readSVarint(),h+=t.readSVarint(),1===o&&u<l&&(r.push(l),u=l),i.push(a,h),l+=2):7===o?u<l&&(i.push(i[u],i[u+1]),l+=2):A(!1,59)}u<l&&(r.push(l),u=l)},e.prototype.createFeature_=function(t,e,i){var r,n=e.type;if(0===n)return null;var o=e.id,s=e.properties;s[this.layerName_]=e.layer.name;var a=[],h=[];this.readRawGeometry_(t,e,a,h);var l=function(t,e){var i;return 1===t?i=1===e?It.POINT:It.MULTI_POINT:2===t?i=1===e?It.LINE_STRING:It.MULTI_LINE_STRING:3===t&&(i=It.POLYGON),i}(n,h.length);if(this.featureClass_===ug)r=new this.featureClass_(l,a,h,s,o);else{var u;if(l==It.POLYGON){for(var c=[],p=0,d=0,f=0,_=h.length;f<_;++f){var g=h[f];zr(a,p,g,2)||(c.push(h.slice(d,f)),d=f),p=g}u=1<c.length?new Ya(a,dr.XY,c):new Hr(a,dr.XY,h)}else u=l===It.POINT?new Nr(a,dr.XY):l===It.LINE_STRING?new yn(a,dr.XY):l===It.POLYGON?new Hr(a,dr.XY,h):l===It.MULTI_POINT?new ja(a,dr.XY):l===It.MULTI_LINE_STRING?new Da(a,dr.XY,h):null;r=new this.featureClass_,this.geometryName_&&r.setGeometryName(this.geometryName_);var y=zc(u,!1,this.adaptOptions(i));r.setGeometry(y),r.setId(o),r.setProperties(s)}return r},e.prototype.getLastExtent=function(){return this.extent_},e.prototype.getType=function(){return Wa.ARRAY_BUFFER},e.prototype.readFeatures=function(t,e){var i=this.layers_,r=new z_(t),n=r.readFields(pg,{}),o=[];for(var s in n)if(!i||-1!=i.indexOf(s)){for(var a=n[s],h=0,l=a.length;h<l;++h){var u=_g(r,a,h);o.push(this.createFeature_(r,u))}this.extent_=a?[0,0,a.extent,a.extent]:null}return o},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.layers_=t},e}(Xc);function pg(t,e,i){if(3===t){var r={keys:[],values:[],features:[]},n=i.readVarint()+i.pos;i.readFields(dg,r,n),r.length=r.features.length,r.length&&(e[r.name]=r)}}function dg(t,e,i){if(15===t)e.version=i.readVarint();else if(1===t)e.name=i.readString();else if(5===t)e.extent=i.readVarint();else if(2===t)e.features.push(i.pos);else if(3===t)e.keys.push(i.readString());else if(4===t){for(var r=null,n=i.readVarint()+i.pos;i.pos<n;)r=1==(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;e.values.push(r)}}function fg(t,e,i){if(1==t)e.id=i.readVarint();else if(2==t)for(var r=i.readVarint()+i.pos;i.pos<r;){var n=e.layer.keys[i.readVarint()],o=e.layer.values[i.readVarint()];e.properties[n]=o}else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos)}function _g(t,e,i){t.pos=e.features[i];var r=t.readVarint()+t.pos,n={layer:e,type:0,properties:{}};return t.readFields(fg,n,r),n}var gg=[null],yg=yp(gg,{nd:function(t,e){e[e.length-1].ndrefs.push(t.getAttribute("ref"))},tag:Sg}),vg=yp(gg,{node:function(t,e){var i=e[0],r=e[e.length-1],n=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];r.nodes[n]=o;var s=mp({tags:{}},xg,t,e);if(!l(s.tags)){var a=new Nr(o);zc(a,!1,i);var h=new Hi(a);h.setId(n),h.setProperties(s.tags),r.features.push(h)}},way:function(t,e){var i=mp({id:t.getAttribute("id"),ndrefs:[],tags:{}},yg,t,e);e[e.length-1].ways.push(i)}}),mg=function(t){function e(){t.call(this),this.dataProjection=ee("EPSG:4326")}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.readFeaturesFromNode=function(t,e){var i=this.getReadOptions(t,e);if("osm"==t.localName){for(var r=mp({nodes:{},ways:[],features:[]},vg,t,[i]),n=0;n<r.ways.length;n++){for(var o=r.ways[n],s=[],a=0,h=o.ndrefs.length;a<h;a++)hr(s,r.nodes[o.ndrefs[a]]);var l;zc(l=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new Hr(s,dr.XY,[s.length]):new yn(s,dr.XY),!1,i);var u=new Hi(l);u.setId(o.id),u.setProperties(o.tags),r.features.push(u)}if(r.features)return r.features}return[]},e}(Ep),xg=yp(gg,{tag:Sg});function Sg(t,e){e[e.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}function Eg(t,e,i,r,n,o){var s,a;void 0!==n?(s=n,a=void 0!==o?o:0):(s=[],a=0);for(var h=e;h<i;){var l=t[h++];s[a++]=t[h++],s[a++]=l;for(var u=2;u<r;++u)s[a++]=t[h++]}return s.length=a,s}var Cg=function(t){function e(e){t.call(this);var i=e||{};this.dataProjection=ee("EPSG:4326"),this.factor_=i.factor?i.factor:1e5,this.geometryLayout_=i.geometryLayout?i.geometryLayout:dr.XY}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.readFeatureFromText=function(t,e){var i=this.readGeometryFromText(t,e);return new Hi(i)},e.prototype.readFeaturesFromText=function(t,e){return[this.readFeatureFromText(t,e)]},e.prototype.readGeometryFromText=function(t,e){var i=_r(this.geometryLayout_),r=wg(t,i,this.factor_);Eg(r,0,r.length,i,r);var n=Rr(r,0,r.length,i);return zc(new yn(n,this.geometryLayout_),!1,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){var i=t.getGeometry();return i?this.writeGeometryText(i,e):(A(!1,40),"")},e.prototype.writeFeaturesText=function(t,e){return this.writeFeatureText(t[0],e)},e.prototype.writeGeometryText=function(t,e){var i=(t=zc(t,!0,this.adaptOptions(e))).getFlatCoordinates(),r=t.getStride();return Eg(i,0,i.length,r,i),Tg(i,r,this.factor_)},e}(Md);function Tg(t,e,i){var r,n=i||1e5,o=new Array(e);for(r=0;r<e;++r)o[r]=0;for(var s=0,a=t.length;s<a;)for(r=0;r<e;++r,++s){var h=t[s],l=h-o[r];o[r]=h,t[s]=l}return Rg(t,n)}function wg(t,e,i){var r,n=i||1e5,o=new Array(e);for(r=0;r<e;++r)o[r]=0;for(var s=Ig(t,n),a=0,h=s.length;a<h;)for(r=0;r<e;++r,++a)o[r]+=s[a],s[a]=o[r];return s}function Rg(t,e){for(var i=e||1e5,r=0,n=t.length;r<n;++r)t[r]=Math.round(t[r]*i);return function(t){for(var e=0,i=t.length;e<i;++e){var r=t[e];t[e]=r<0?~(r<<1):r<<1}return function(t){for(var e="",i=0,r=t.length;i<r;++i)e+=Lg(t[i]);return e}(t)}(t)}function Ig(t,e){for(var i=e||1e5,r=function(t){for(var e=function(t){for(var e=[],i=0,r=0,n=0,o=t.length;n<o;++n){var s=t.charCodeAt(n)-63;i|=(31&s)<<r,s<32?(e.push(i),r=i=0):r+=5}return e}(t),i=0,r=e.length;i<r;++i){var n=e[i];e[i]=1&n?~(n>>1):n>>1}return e}(t),n=0,o=r.length;n<o;++n)r[n]/=i;return r}function Lg(t){for(var e,i="";32<=t;)e=63+(32|31&t),i+=String.fromCharCode(e),t>>=5;return e=t+63,i+String.fromCharCode(e)}var bg=function(t){function e(e){t.call(this);var i=e||{};this.layerName_=i.layerName,this.layers_=i.layers?i.layers:null,this.dataProjection=ee(i.dataProjection?i.dataProjection:"EPSG:4326")}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var i,r=t,n=null,o=null;r.transform&&(n=(i=r.transform).scale,o=i.translate);var s=r.arcs;i&&function(t,e,i){for(var r=0,n=t.length;r<n;++r)Ng(t[r],e,i)}(s,n,o);var a,h=[],l=r.objects,u=this.layerName_;for(var c in l)this.layers_&&-1==this.layers_.indexOf(c)||("GeometryCollection"===l[c].type?(a=l[c],h.push.apply(h,Mg(a,s,n,o,u,c,e))):(a=l[c],h.push(Og(a,s,n,o,u,c,e))));return h}return[]},e.prototype.readProjectionFromObject=function(t){return this.dataProjection},e}(Vc),Fg={Point:function(t,e,i){var r=t.coordinates;return e&&i&&Ag(r,e,i),new Nr(r)},LineString:function(t,e){var i=Pg(t.arcs,e);return new yn(i)},Polygon:function(t,e){for(var i=[],r=0,n=t.arcs.length;r<n;++r)i[r]=Pg(t.arcs[r],e);return new Hr(i)},MultiPoint:function(t,e,i){var r=t.coordinates;if(e&&i)for(var n=0,o=r.length;n<o;++n)Ag(r[n],e,i);return new ja(r)},MultiLineString:function(t,e){for(var i=[],r=0,n=t.arcs.length;r<n;++r)i[r]=Pg(t.arcs[r],e);return new Da(i)},MultiPolygon:function(t,e){for(var i=[],r=0,n=t.arcs.length;r<n;++r){for(var o=t.arcs[r],s=[],a=0,h=o.length;a<h;++a)s[a]=Pg(o[a],e);i[r]=s}return new Ya(i)}};function Pg(t,e){for(var i,r,n=[],o=0,s=t.length;o<s;++o)i=t[o],0<o&&n.pop(),r=0<=i?e[i]:e[~i].slice().reverse(),n.push.apply(n,r);for(var a=0,h=n.length;a<h;++a)n[a]=n[a].slice();return n}function Mg(t,e,i,r,n,o,s){for(var a=t.geometries,h=[],l=0,u=a.length;l<u;++l)h[l]=Og(a[l],e,i,r,n,o,s);return h}function Og(t,e,i,r,n,o,s){var a,h=t.type,l=Fg[h];a="Point"===h||"MultiPoint"===h?l(t,i,r):l(t,e);var u=new Hi;u.setGeometry(zc(a,!1,s)),void 0!==t.id&&u.setId(t.id);var c=t.properties;return n&&(c||(c={}),c[n]=o),c&&u.setProperties(c),u}function Ng(t,e,i){for(var r=0,n=0,o=0,s=t.length;o<s;++o){var a=t[o];r+=a[0],n+=a[1],a[0]=r,a[1]=n,Ag(a,e,i)}}function Ag(t,e,i){t[0]=t[0]*e[0]+i[0],t[1]=t[1]*e[1]+i[1]}var Gg=function(t){this.tagName_=t};Gg.prototype.getTagName=function(){return this.tagName_};var kg=function(t){function e(e,i){t.call(this,e),this.conditions=Array.prototype.slice.call(arguments,1),A(2<=this.conditions.length,57)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Gg),Dg=function(t){function e(e){var i=["And"].concat(Array.prototype.slice.call(arguments));t.apply(this,i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(kg),jg=function(t){function e(e,i,r){t.call(this,"BBOX"),this.geometryName=e,this.extent=i,this.srsName=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Gg),Ug=function(t){function e(e,i,r,n){t.call(this,e),this.geometryName=i||"the_geom",this.geometry=r,this.srsName=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Gg),Yg=function(t){function e(e,i,r){t.call(this,"Contains",e,i,r)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Ug),Bg=function(t){function e(e,i){t.call(this,e),this.propertyName=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Gg),Xg=function(t){function e(e,i,r){t.call(this,"During",e),this.begin=i,this.end=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Bg),zg=function(t){function e(e,i,r,n){t.call(this,e,i),this.expression=r,this.matchCase=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Bg),Vg=function(t){function e(e,i,r){t.call(this,"PropertyIsEqualTo",e,i,r)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(zg),Wg=function(t){function e(e,i){t.call(this,"PropertyIsGreaterThan",e,i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(zg),Kg=function(t){function e(e,i){t.call(this,"PropertyIsGreaterThanOrEqualTo",e,i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(zg),Hg=function(t){function e(e,i,r){t.call(this,"Intersects",e,i,r)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Ug),Zg=function(t){function e(e,i,r){t.call(this,"PropertyIsBetween",e),this.lowerBoundary=i,this.upperBoundary=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Bg),qg=function(t){function e(e,i,r,n,o,s){t.call(this,"PropertyIsLike",e),this.pattern=i,this.wildCard=void 0!==r?r:"*",this.singleChar=void 0!==n?n:".",this.escapeChar=void 0!==o?o:"!",this.matchCase=s}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Bg),Jg=function(t){function e(e){t.call(this,"PropertyIsNull",e)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Bg),Qg=function(t){function e(e,i){t.call(this,"PropertyIsLessThan",e,i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(zg),$g=function(t){function e(e,i){t.call(this,"PropertyIsLessThanOrEqualTo",e,i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(zg),ty=function(t){function e(e){t.call(this,"Not"),this.condition=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Gg),ey=function(t){function e(e,i,r){t.call(this,"PropertyIsNotEqualTo",e,i,r)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(zg),iy=function(t){function e(e){var i=["Or"].concat(Array.prototype.slice.call(arguments));t.apply(this,i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(kg),ry=function(t){function e(e,i,r){t.call(this,"Within",e,i,r)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Ug);function ny(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(Dg,e))}function oy(t,e,i){return new jg(t,e,i)}var sy={"http://www.opengis.net/gml":{boundedBy:cp(wp.prototype.readGeometryElement,"bounds")}},ay={"http://www.opengis.net/wfs":{totalInserted:cp(Pp),totalUpdated:cp(Pp),totalDeleted:cp(Pp)}},hy={"http://www.opengis.net/wfs":{TransactionSummary:cp(function(t,e){return mp({},ay,t,e)},"transactionSummary"),InsertResults:cp(function(t,e){return mp([],vy,t,e)},"insertIds")}},ly={"http://www.opengis.net/wfs":{PropertyName:pp(kp)}},uy={"http://www.opengis.net/wfs":{Insert:pp(function(t,e,i){var r=i[i.length-1],n=r.featureType,o=r.featureNS,s=r.gmlVersion,a=ip(o,n);t.appendChild(a),2===s?zp.prototype.writeFeatureElement(a,e,i):Up.prototype.writeFeatureElement(a,e,i)}),Update:pp(function(t,e,i){var r=i[i.length-1];A(void 0!==e.getId(),27);var n=r.featureType,o=r.featurePrefix,s=r.featureNS,a=xy(o,n),h=e.getGeometryName();t.setAttribute("typeName",a),t.setAttributeNS(py,"xmlns:"+o,s);var l=e.getId();if(void 0!==l){for(var u=e.getKeys(),c=[],p=0,d=u.length;p<d;p++){var f=e.get(u[p]);if(void 0!==f){var _=u[p];f instanceof Te&&(_=h),c.push({name:_,value:f})}}Sp({gmlVersion:r.gmlVersion,node:t,hasZ:r.hasZ,srsName:r.srsName},uy,fp("Property"),c,i),my(t,l,i)}}),Delete:pp(function(t,e,i){var r=i[i.length-1];A(void 0!==e.getId(),26);var n=r.featureType,o=r.featurePrefix,s=r.featureNS,a=xy(o,n);t.setAttribute("typeName",a),t.setAttributeNS(py,"xmlns:"+o,s);var h=e.getId();void 0!==h&&my(t,h,i)}),Property:pp(function(t,e,i){var r=ip(fy,"Name"),n=i[i.length-1].gmlVersion;if(t.appendChild(r),kp(r,e.name),void 0!==e.value&&null!==e.value){var o=ip(fy,"Value");t.appendChild(o),e.value instanceof Te?2===n?zp.prototype.writeGeometryElement(o,e.value,i):Up.prototype.writeGeometryElement(o,e.value,i):kp(o,e.value)}}),Native:pp(function(t,e,i){e.vendorId&&t.setAttribute("vendorId",e.vendorId),void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",e.safeToIgnore),void 0!==e.value&&kp(t,e.value)})}},cy="feature",py="http://www.w3.org/2000/xmlns/",dy="http://www.opengis.net/ogc",fy="http://www.opengis.net/wfs",_y={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},gy=function(t){function e(e){t.call(this);var i=e||{};this.featureType_=i.featureType,this.featureNS_=i.featureNS,this.gmlFormat_=i.gmlFormat?i.gmlFormat:new Up,this.schemaLocation_=i.schemaLocation?i.schemaLocation:_y["1.1.0"]}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getFeatureType=function(){return this.featureType_},e.prototype.setFeatureType=function(t){this.featureType_=t},e.prototype.readFeaturesFromNode=function(t,e){var i={featureType:this.featureType_,featureNS:this.featureNS_};s(i,this.getReadOptions(t,e||{}));var r=[i];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[Cp].featureMember=hp(wp.prototype.readFeaturesInternal);var n=mp([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,r,this.gmlFormat_);return n||(n=[]),n},e.prototype.readTransactionResponse=function(t){if(np(t))return this.readTransactionResponseFromDocument(t);if(op(t))return this.readTransactionResponseFromNode(t);if("string"==typeof t){var e=sp(t);return this.readTransactionResponseFromDocument(e)}},e.prototype.readFeatureCollectionMetadata=function(t){if(np(t))return this.readFeatureCollectionMetadataFromDocument(t);if(op(t))return this.readFeatureCollectionMetadataFromNode(t);if("string"==typeof t){var e=sp(t);return this.readFeatureCollectionMetadataFromDocument(e)}},e.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)},e.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={},i=Mp(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=i,mp(e,sy,t,[],this.gmlFormat_)},e.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},e.prototype.readTransactionResponseFromNode=function(t){return mp({},hy,t,[])},e.prototype.writeGetFeature=function(t){var e,i=ip(fy,"GetFeature");if(i.setAttribute("service","WFS"),i.setAttribute("version","1.1.0"),t&&(t.handle&&i.setAttribute("handle",t.handle),t.outputFormat&&i.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&i.setAttribute("maxFeatures",t.maxFeatures),t.resultType&&i.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&i.setAttribute("startIndex",t.startIndex),void 0!==t.count&&i.setAttribute("count",t.count),e=t.filter,t.bbox)){A(t.geometryName,12);var r=oy(t.geometryName,t.bbox,t.srsName);e=e?ny(e,r):r}i.setAttributeNS(ep,"xsi:schemaLocation",this.schemaLocation_);var n,o,a,h,l,u={node:i,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:e,propertyNames:t.propertyNames?t.propertyNames:[]};return A(Array.isArray(t.featureTypes),11),n=i,o=t.featureTypes,h=(a=[u])[a.length-1],(l=s({},h)).node=n,Sp(l,Sy,fp("Query"),o,a),i},e.prototype.writeTransaction=function(t,e,i,r){var n,o,a=[],h=ip(fy,"Transaction"),l=r.version?r.version:"1.1.0",u="1.0.0"===l?2:3;h.setAttribute("service","WFS"),h.setAttribute("version",l),r&&(n=r.gmlOptions?r.gmlOptions:{},r.handle&&h.setAttribute("handle",r.handle));var c=_y[l];h.setAttributeNS(ep,"xsi:schemaLocation",c);var p=r.featurePrefix?r.featurePrefix:cy;return t&&(o={node:h,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:p,gmlVersion:u,hasZ:r.hasZ,srsName:r.srsName},s(o,n),Sp(o,uy,fp("Insert"),t,a)),e&&(o={node:h,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:p,gmlVersion:u,hasZ:r.hasZ,srsName:r.srsName},s(o,n),Sp(o,uy,fp("Update"),e,a)),i&&Sp({node:h,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:p,gmlVersion:u,srsName:r.srsName},uy,fp("Delete"),i,a),r.nativeElements&&Sp({node:h,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:p,gmlVersion:u,srsName:r.srsName},uy,fp("Native"),r.nativeElements,a),h},e.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},e.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var i=[{}];return this.gmlFormat_.readGeometryElement(e,i),ee(i.pop().srsName)}return null},e}(Ep),yy={"http://www.opengis.net/ogc":{FeatureId:hp(function(t,e){return t.getAttribute("fid")})}},vy={"http://www.opengis.net/wfs":{Feature:function(t,e){vp(yy,t,e)}}};function my(t,e,i){var r=ip(dy,"Filter"),n=ip(dy,"FeatureId");r.appendChild(n),n.setAttribute("fid",e),t.appendChild(r)}function xy(t,e){var i=(t=t||cy)+":";return 0===e.indexOf(i)?e:i+e}var Sy={"http://www.opengis.net/wfs":{Query:pp(function(t,e,i){var r,n=i[i.length-1],o=n.featurePrefix,a=n.featureNS,h=n.propertyNames,l=n.srsName;r=o?xy(o,e):e,t.setAttribute("typeName",r),l&&t.setAttribute("srsName",l),a&&t.setAttributeNS(py,"xmlns:"+o,a);var u=s({},n);u.node=t,Sp(u,ly,fp("PropertyName"),h,i);var c=n.filter;if(c){var p=ip(dy,"Filter");t.appendChild(p),Ey(p,c,i)}})},"http://www.opengis.net/ogc":{During:pp(function(t,e,i){var r=ip("http://www.opengis.net/fes","ValueReference");kp(r,e.propertyName),t.appendChild(r);var n=ip(Cp,"TimePeriod");t.appendChild(n);var o=ip(Cp,"begin");n.appendChild(o),Ly(o,e.begin);var s=ip(Cp,"end");n.appendChild(s),Ly(s,e.end)}),And:pp(Cy),Or:pp(Cy),Not:pp(function(t,e,i){var r={node:t},n=e.condition;Sp(r,Sy,fp(n.getTagName()),[n],i)}),BBOX:pp(function(t,e,i){i[i.length-1].srsName=e.srsName,Ry(t,e.geometryName),Up.prototype.writeGeometryElement(t,e.extent,i)}),Contains:pp(function(t,e,i){i[i.length-1].srsName=e.srsName,Ry(t,e.geometryName),Up.prototype.writeGeometryElement(t,e.geometry,i)}),Intersects:pp(function(t,e,i){i[i.length-1].srsName=e.srsName,Ry(t,e.geometryName),Up.prototype.writeGeometryElement(t,e.geometry,i)}),Within:pp(function(t,e,i){i[i.length-1].srsName=e.srsName,Ry(t,e.geometryName),Up.prototype.writeGeometryElement(t,e.geometry,i)}),PropertyIsEqualTo:pp(Ty),PropertyIsNotEqualTo:pp(Ty),PropertyIsLessThan:pp(Ty),PropertyIsLessThanOrEqualTo:pp(Ty),PropertyIsGreaterThan:pp(Ty),PropertyIsGreaterThanOrEqualTo:pp(Ty),PropertyIsNull:pp(function(t,e,i){Ry(t,e.propertyName)}),PropertyIsBetween:pp(function(t,e,i){Ry(t,e.propertyName);var r=ip(dy,"LowerBoundary");t.appendChild(r),Iy(r,""+e.lowerBoundary);var n=ip(dy,"UpperBoundary");t.appendChild(n),Iy(n,""+e.upperBoundary)}),PropertyIsLike:pp(function(t,e,i){t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),Ry(t,e.propertyName),Iy(t,""+e.pattern)})}};function Ey(t,e,i){Sp({node:t},Sy,fp(e.getTagName()),[e],i)}function Cy(t,e,i){for(var r={node:t},n=e.conditions,o=0,s=n.length;o<s;++o){var a=n[o];Sp(r,Sy,fp(a.getTagName()),[a],i)}}function Ty(t,e,i){void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),Ry(t,e.propertyName),Iy(t,""+e.expression)}function wy(t,e,i){var r=ip(dy,t);kp(r,i),e.appendChild(r)}function Ry(t,e){wy("PropertyName",t,e)}function Iy(t,e){wy("Literal",t,e)}function Ly(t,e){var i=ip(Cp,"TimeInstant");t.appendChild(i);var r=ip(Cp,"timePosition");i.appendChild(r),kp(r,e)}var by={POINT:Nr,LINESTRING:yn,POLYGON:Hr,MULTIPOINT:ja,MULTILINESTRING:Da,MULTIPOLYGON:Ya},Fy="EMPTY",Py="Z",My="M",Oy={};for(var Ny in It)Oy[Ny]=It[Ny].toUpperCase();var Ay=function(t){this.wkt=t,this.index_=-1};Ay.prototype.isAlpha_=function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"},Ay.prototype.isNumeric_=function(t,e){return"0"<=t&&t<="9"||"."==t&&!(void 0!==e&&e)},Ay.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},Ay.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},Ay.prototype.nextToken=function(){var t=this.nextChar_(),e={position:this.index_,value:t};if("("==t)e.type=2;else if(","==t)e.type=5;else if(")"==t)e.type=3;else if(this.isNumeric_(t)||"-"==t)e.type=4,e.value=this.readNumber_();else if(this.isAlpha_(t))e.type=1,e.value=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);e.type=6}return e},Ay.prototype.readNumber_=function(){for(var t,e=this.index_,i=!1,r=!1;"."==t?i=!0:"e"!=t&&"E"!=t||(r=!0),t=this.nextChar_(),this.isNumeric_(t,i)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t););return parseFloat(this.wkt.substring(e,this.index_--))},Ay.prototype.readText_=function(){for(var t,e=this.index_;t=this.nextChar_(),this.isAlpha_(t););return this.wkt.substring(e,this.index_--).toUpperCase()};var Gy=function(t){this.lexer_=t,this.token_,this.layout_=dr.XY};Gy.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},Gy.prototype.isTokenType=function(t){return this.token_.type==t},Gy.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},Gy.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},Gy.prototype.parseGeometryLayout_=function(){var t=dr.XY,e=this.token_;if(this.isTokenType(1)){var i=e.value;i===Py?t=dr.XYZ:i===My?t=dr.XYM:"ZM"===i&&(t=dr.XYZM),t!==dr.XY&&this.consume_()}return t},Gy.prototype.parseGeometryCollectionText_=function(){if(this.match(2)){for(var t=[];t.push(this.parseGeometry_()),this.match(5););if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Gy.prototype.parsePointText_=function(){if(this.match(2)){var t=this.parsePoint_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},Gy.prototype.parseLineStringText_=function(){if(this.match(2)){var t=this.parsePointList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Gy.prototype.parsePolygonText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Gy.prototype.parseMultiPointText_=function(){var t;if(this.match(2)){if(t=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Gy.prototype.parseMultiLineStringText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Gy.prototype.parseMultiPolygonText_=function(){if(this.match(2)){var t=this.parsePolygonTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},Gy.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,i=0;i<e;++i){var r=this.token_;if(!this.match(4))break;t.push(r.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},Gy.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(5);)t.push(this.parsePoint_());return t},Gy.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(5);)t.push(this.parsePointText_());return t},Gy.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(5);)t.push(this.parseLineStringText_());return t},Gy.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(5);)t.push(this.parsePolygonText_());return t},Gy.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(1)&&this.token_.value==Fy;return t&&this.consume_(),t},Gy.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},Gy.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(1)){var e=t.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==e){var i=this.parseGeometryCollectionText_();return new wd(i)}var r,n=by[e];if(!n)throw new Error("Invalid geometry type: "+e);switch(e){case"POINT":r=this.parsePointText_();break;case"LINESTRING":r=this.parseLineStringText_();break;case"POLYGON":r=this.parsePolygonText_();break;case"MULTIPOINT":r=this.parseMultiPointText_();break;case"MULTILINESTRING":r=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":r=this.parseMultiPolygonText_();break;default:throw new Error("Invalid geometry type: "+e)}return r||(r=n===by.POINT?[NaN,NaN]:[]),new n(r,this.layout_)}throw new Error(this.formatErrorMessage_())};var ky=function(t){function e(e){t.call(this);var i=e||{};this.splitCollection_=void 0!==i.splitCollection&&i.splitCollection}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.parse_=function(t){var e=new Ay(t);return new Gy(e).parse()},e.prototype.readFeatureFromText=function(t,e){var i=this.readGeometryFromText(t,e);if(i){var r=new Hi;return r.setGeometry(i),r}return null},e.prototype.readFeaturesFromText=function(t,e){for(var i,r=this.readGeometryFromText(t,e),n=[],o=0,s=(i=this.splitCollection_&&r.getType()==It.GEOMETRY_COLLECTION?r.getGeometriesArray():[r]).length;o<s;++o){var a=new Hi;a.setGeometry(i[o]),n.push(a)}return n},e.prototype.readGeometryFromText=function(t,e){var i=this.parse_(t);return i?zc(i,!1,e):null},e.prototype.writeFeatureText=function(t,e){var i=t.getGeometry();return i?this.writeGeometryText(i,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var i=[],r=0,n=t.length;r<n;++r)i.push(t[r].getGeometry());var o=new wd(i);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return By(zc(t,!0,e))},e}(Md);function Dy(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function jy(t){for(var e=t.getCoordinates(),i=[],r=0,n=e.length;r<n;++r)i.push(e[r].join(" "));return i.join(",")}function Uy(t){for(var e=[],i=t.getLinearRings(),r=0,n=i.length;r<n;++r)e.push("("+jy(i[r])+")");return e.join(",")}var Yy={Point:Dy,LineString:jy,Polygon:Uy,MultiPoint:function(t){for(var e=[],i=t.getPoints(),r=0,n=i.length;r<n;++r)e.push("("+Dy(i[r])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],i=t.getLineStrings(),r=0,n=i.length;r<n;++r)e.push("("+jy(i[r])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],i=t.getPolygons(),r=0,n=i.length;r<n;++r)e.push("("+Uy(i[r])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],i=t.getGeometries(),r=0,n=i.length;r<n;++r)e.push(By(i[r]));return e.join(",")}};function By(t){var e,i,r=t.getType(),n=(0,Yy[r])(t);if(r=r.toUpperCase(),t instanceof fr){var o=(i="",(e=t.getLayout())!==dr.XYZ&&e!==dr.XYZM||(i+=Py),e!==dr.XYM&&e!==dr.XYZM||(i+=My),i);0<o.length&&(r+=" "+o)}return 0===n.length?r+" "+Fy:r+"("+n+")"}var Xy="http://www.w3.org/1999/xlink";function zy(t){return t.getAttributeNS(Xy,"href")}var Vy=function(){};Vy.prototype.read=function(t){if(np(t))return this.readFromDocument(t);if(op(t))return this.readFromNode(t);if("string"==typeof t){var e=sp(t);return this.readFromDocument(e)}return null},Vy.prototype.readFromDocument=function(t){},Vy.prototype.readFromNode=function(t){};var Wy=[null,"http://www.opengis.net/wms"],Ky=yp(Wy,{Service:cp(function(t,e){return mp({},qy,t,e)}),Capability:cp(function(t,e){return mp({},Hy,t,e)})}),Hy=yp(Wy,{Request:cp(function(t,e){return mp({},nv,t,e)}),Exception:cp(function(t,e){return mp([],tv,t,e)}),Layer:cp(function(t,e){return mp({},ev,t,e)})}),Zy=function(t){function e(){t.call(this),this.version=void 0}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){return this.version=t.getAttribute("version").trim(),mp({version:this.version},Ky,t,[])||null},e}(Vy),qy=yp(Wy,{Name:cp(Op),Title:cp(Op),Abstract:cp(Op),KeywordList:cp(fv),OnlineResource:cp(zy),ContactInformation:cp(function(t,e){return mp({},Jy,t,e)}),Fees:cp(Op),AccessConstraints:cp(Op),LayerLimit:cp(Pp),MaxWidth:cp(Pp),MaxHeight:cp(Pp)}),Jy=yp(Wy,{ContactPersonPrimary:cp(function(t,e){return mp({},Qy,t,e)}),ContactPosition:cp(Op),ContactAddress:cp(function(t,e){return mp({},$y,t,e)}),ContactVoiceTelephone:cp(Op),ContactFacsimileTelephone:cp(Op),ContactElectronicMailAddress:cp(Op)}),Qy=yp(Wy,{ContactPerson:cp(Op),ContactOrganization:cp(Op)}),$y=yp(Wy,{AddressType:cp(Op),Address:cp(Op),City:cp(Op),StateOrProvince:cp(Op),PostCode:cp(Op),Country:cp(Op)}),tv=yp(Wy,{Format:hp(Op)}),ev=yp(Wy,{Name:cp(Op),Title:cp(Op),Abstract:cp(Op),KeywordList:cp(fv),CRS:up(Op),EX_GeographicBoundingBox:cp(function(t,e){var i=mp({},rv,t,e);if(i){var r=i.westBoundLongitude,n=i.southBoundLatitude,o=i.eastBoundLongitude,s=i.northBoundLatitude;if(void 0!==r&&void 0!==n&&void 0!==o&&void 0!==s)return[r,n,o,s]}}),BoundingBox:up(function(t,e){var i=[Fp(t.getAttribute("minx")),Fp(t.getAttribute("miny")),Fp(t.getAttribute("maxx")),Fp(t.getAttribute("maxy"))],r=[Fp(t.getAttribute("resx")),Fp(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:i,res:r}}),Dimension:up(function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:Ip(t.getAttribute("multipleValues")),nearestValue:Ip(t.getAttribute("nearestValue")),current:Ip(t.getAttribute("current")),values:Op(t)}}),Attribution:cp(function(t,e){return mp({},iv,t,e)}),AuthorityURL:up(function(t,e){var i=cv(t,e);if(i)return i.name=t.getAttribute("name"),i}),Identifier:up(Op),MetadataURL:up(function(t,e){var i=cv(t,e);if(i)return i.type=t.getAttribute("type"),i}),DataURL:up(cv),FeatureListURL:up(cv),Style:up(function(t,e){return mp({},hv,t,e)}),MinScaleDenominator:cp(bp),MaxScaleDenominator:cp(bp),Layer:up(function(t,e){var i=e[e.length-1],r=mp({},ev,t,e);if(r){var n=Ip(t.getAttribute("queryable"));void 0===n&&(n=i.queryable),r.queryable=void 0!==n&&n;var o=Mp(t.getAttribute("cascaded"));void 0===o&&(o=i.cascaded),r.cascaded=o;var s=Ip(t.getAttribute("opaque"));void 0===s&&(s=i.opaque),r.opaque=void 0!==s&&s;var a=Ip(t.getAttribute("noSubsets"));void 0===a&&(a=i.noSubsets),r.noSubsets=void 0!==a&&a;var h=Fp(t.getAttribute("fixedWidth"));h||(h=i.fixedWidth),r.fixedWidth=h;var l=Fp(t.getAttribute("fixedHeight"));return l||(l=i.fixedHeight),r.fixedHeight=l,["Style","CRS","AuthorityURL"].forEach(function(t){if(t in i){var e=r[t]||[];r[t]=e.concat(i[t])}}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(t){if(!(t in r)){var e=i[t];r[t]=e}}),r}})}),iv=yp(Wy,{Title:cp(Op),OnlineResource:cp(zy),LogoURL:cp(dv)}),rv=yp(Wy,{westBoundLongitude:cp(bp),eastBoundLongitude:cp(bp),southBoundLatitude:cp(bp),northBoundLatitude:cp(bp)}),nv=yp(Wy,{GetCapabilities:cp(pv),GetMap:cp(pv),GetFeatureInfo:cp(pv)}),ov=yp(Wy,{Format:up(Op),DCPType:up(function(t,e){return mp({},sv,t,e)})}),sv=yp(Wy,{HTTP:cp(function(t,e){return mp({},av,t,e)})}),av=yp(Wy,{Get:cp(cv),Post:cp(cv)}),hv=yp(Wy,{Name:cp(Op),Title:cp(Op),Abstract:cp(Op),LegendURL:up(dv),StyleSheetURL:cp(cv),StyleURL:cp(cv)}),lv=yp(Wy,{Format:cp(Op),OnlineResource:cp(zy)}),uv=yp(Wy,{Keyword:hp(Op)});function cv(t,e){return mp({},lv,t,e)}function pv(t,e){return mp({},ov,t,e)}function dv(t,e){var i=cv(t,e);if(i){var r=[Mp(t.getAttribute("width")),Mp(t.getAttribute("height"))];return i.size=r,i}}function fv(t,e){return mp([],uv,t,e)}var _v=function(t){function e(e){t.call(this);var i=e||{};this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new zp,this.layers_=i.layers?i.layers:null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getLayers=function(){return this.layers_},e.prototype.setLayers=function(t){this.layers_=t},e.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);var i=t.localName,r=[];if(0===t.childNodes.length)return r;if("msGMLOutput"==i)for(var n=0,o=t.childNodes.length;n<o;n++){var s=t.childNodes[n];if(s.nodeType===Node.ELEMENT_NODE){var a=e[0],h=s.localName.replace("_layer","");if(!this.layers_||or(this.layers_,h)){var l=h+"_feature";a.featureType=l,a.featureNS=this.featureNS_;var u={};u[l]=hp(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var c=yp([a.featureNS,null],u);s.setAttribute("namespaceURI",this.featureNS_);var p=mp([],c,s,e,this.gmlFormat_);p&&hr(r,p)}}}if("FeatureCollection"==i){var d=mp([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);d&&(r=d)}return r},e.prototype.readFeaturesFromNode=function(t,e){var i={};return e&&s(i,this.getReadOptions(t,e)),this.readFeatures_(t,[i])},e}(Ep),gv=[null,"http://www.opengis.net/ows/1.1"],yv=yp(gv,{ServiceIdentification:cp(function(t,e){return mp({},Fv,t,e)}),ServiceProvider:cp(function(t,e){return mp({},Pv,t,e)}),OperationsMetadata:cp(function(t,e){return mp({},Rv,t,e)})}),vv=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){return mp({},yv,t,[])||null},e}(Vy),mv=yp(gv,{DeliveryPoint:cp(Op),City:cp(Op),AdministrativeArea:cp(Op),PostalCode:cp(Op),Country:cp(Op),ElectronicMailAddress:cp(Op)}),xv=yp(gv,{Value:up(function(t,e){return Op(t)})}),Sv=yp(gv,{AllowedValues:cp(function(t,e){return mp({},xv,t,e)})}),Ev=yp(gv,{Phone:cp(function(t,e){return mp({},Iv,t,e)}),Address:cp(function(t,e){return mp({},mv,t,e)})}),Cv=yp(gv,{HTTP:cp(function(t,e){return mp({},Tv,t,e)})}),Tv=yp(gv,{Get:up(function(t,e){var i=zy(t);if(i)return mp({href:i},Lv,t,e)}),Post:void 0}),wv=yp(gv,{DCP:cp(function(t,e){return mp({},Cv,t,e)})}),Rv=yp(gv,{Operation:function(t,e){var i=t.getAttribute("name"),r=mp({},wv,t,e);r&&(e[e.length-1][i]=r)}}),Iv=yp(gv,{Voice:cp(Op),Facsimile:cp(Op)}),Lv=yp(gv,{Constraint:up(function(t,e){var i=t.getAttribute("name");if(i)return mp({name:i},Sv,t,e)})}),bv=yp(gv,{IndividualName:cp(Op),PositionName:cp(Op),ContactInfo:cp(function(t,e){return mp({},Ev,t,e)})}),Fv=yp(gv,{Abstract:cp(Op),AccessConstraints:cp(Op),Fees:cp(Op),Title:cp(Op),ServiceTypeVersion:cp(Op),ServiceType:cp(Op)}),Pv=yp(gv,{ProviderName:cp(Op),ProviderSite:cp(zy),ServiceContact:cp(function(t,e){return mp({},bv,t,e)})}),Mv=[null,"http://www.opengis.net/wmts/1.0"],Ov=[null,"http://www.opengis.net/ows/1.1"],Nv=yp(Mv,{Contents:cp(function(t,e){return mp({},Gv,t,e)})}),Av=function(t){function e(){t.call(this),this.owsParser_=new vv}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){var e=t.getAttribute("version").trim(),i=this.owsParser_.readFromNode(t);return i?(i.version=e,(i=mp(i,Nv,t,[]))||null):null},e}(Vy),Gv=yp(Mv,{Layer:up(function(t,e){return mp({},kv,t,e)}),TileMatrixSet:up(function(t,e){return mp({},zv,t,e)})}),kv=yp(Mv,{Style:up(function(t,e){var i=mp({},Dv,t,e);if(i){var r="true"===t.getAttribute("isDefault");return i.isDefault=r,i}}),Format:up(Op),TileMatrixSetLink:up(function(t,e){return mp({},jv,t,e)}),Dimension:up(function(t,e){return mp({},Bv,t,e)}),ResourceURL:up(function(t,e){var i=t.getAttribute("format"),r=t.getAttribute("template"),n=t.getAttribute("resourceType"),o={};return i&&(o.format=i),r&&(o.template=r),n&&(o.resourceType=n),o})},yp(Ov,{Title:cp(Op),Abstract:cp(Op),WGS84BoundingBox:cp(function(t,e){var i=mp([],Xv,t,e);if(2==i.length)return D(i)}),Identifier:cp(Op)})),Dv=yp(Mv,{LegendURL:up(function(t,e){var i={};return i.format=t.getAttribute("format"),i.href=zy(t),i})},yp(Ov,{Title:cp(Op),Identifier:cp(Op)})),jv=yp(Mv,{TileMatrixSet:cp(Op),TileMatrixSetLimits:cp(function(t,e){return mp([],Uv,t,e)})}),Uv=yp(Mv,{TileMatrixLimits:hp(function(t,e){return mp({},Yv,t,e)})}),Yv=yp(Mv,{TileMatrix:cp(Op),MinTileRow:cp(Pp),MaxTileRow:cp(Pp),MinTileCol:cp(Pp),MaxTileCol:cp(Pp)}),Bv=yp(Mv,{Default:cp(Op),Value:up(Op)},yp(Ov,{Identifier:cp(Op)})),Xv=yp(Ov,{LowerCorner:hp(Wv),UpperCorner:hp(Wv)}),zv=yp(Mv,{WellKnownScaleSet:cp(Op),TileMatrix:up(function(t,e){return mp({},Vv,t,e)})},yp(Ov,{SupportedCRS:cp(Op),Identifier:cp(Op)})),Vv=yp(Mv,{TopLeftCorner:cp(Wv),ScaleDenominator:cp(bp),TileWidth:cp(Pp),TileHeight:cp(Pp),MatrixWidth:cp(Pp),MatrixHeight:cp(Pp)},yp(Ov,{Identifier:cp(Op)}));function Wv(t,e){var i=Op(t).split(/\s+/);if(i&&2==i.length){var r=+i[0],n=+i[1];if(!isNaN(r)&&!isNaN(n))return[r,n]}}var Kv="blur",Hv="gradient",Zv="radius",qv=["#00f","#0ff","#0f0","#ff0","#f00"],Jv=function(t){function e(e){var i=e||{},r=s({},i);delete r.gradient,delete r.radius,delete r.blur,delete r.shadow,delete r.weight,t.call(this,r),this.gradient_=null,this.shadow_=void 0!==i.shadow?i.shadow:250,this.circleImage_=void 0,this.styleCache_=null,f(this,P(Hv),this.handleGradientChanged_,this),this.setGradient(i.gradient?i.gradient:qv),this.setBlur(void 0!==i.blur?i.blur:15),this.setRadius(void 0!==i.radius?i.radius:8),f(this,P(Kv),this.handleStyleChanged_,this),f(this,P(Zv),this.handleStyleChanged_,this),this.handleStyleChanged_();var n,o=i.weight?i.weight:"weight";n="string"==typeof o?function(t){return t.get(o)}:o,this.setStyle(function(t,e){var i=n(t),r=void 0!==i?mt(i,0,1):1,o=255*r|0,s=this.styleCache_[o];return s||(s=[new Xi({image:new Qd({opacity:r,src:this.circleImage_})})],this.styleCache_[o]=s),s}.bind(this)),this.setRenderOrder(null),f(this,Sn,this.handleRender_,this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.createCircle_=function(){var t=this.getRadius(),e=this.getBlur(),i=t+e+1,r=2*i,n=Ae(r,r);n.shadowOffsetX=n.shadowOffsetY=this.shadow_,n.shadowBlur=e,n.shadowColor="#000",n.beginPath();var o=i-this.shadow_;return n.arc(o,o,t,0,2*Math.PI,!0),n.fill(),n.canvas.toDataURL()},e.prototype.getBlur=function(){return this.get(Kv)},e.prototype.getGradient=function(){return this.get(Hv)},e.prototype.getRadius=function(){return this.get(Zv)},e.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=Ae(1,256),i=e.createLinearGradient(0,0,1,256),r=1/(t.length-1),n=0,o=t.length;n<o;++n)i.addColorStop(n*r,t[n]);return e.fillStyle=i,e.fillRect(0,0,1,256),e.getImageData(0,0,1,256).data}(this.getGradient())},e.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_(),this.styleCache_=new Array(256),this.changed()},e.prototype.handleRender_=function(t){for(var e=t.context,i=e.canvas,r=e.getImageData(0,0,i.width,i.height),n=r.data,o=0,s=n.length;o<s;o+=4){var a=4*n[o+3];a&&(n[o]=this.gradient_[a],n[o+1]=this.gradient_[a+1],n[o+2]=this.gradient_[a+2])}e.putImageData(r,0,0)},e.prototype.setBlur=function(t){this.set(Kv,t)},e.prototype.setGradient=function(t){this.set(Hv,t)},e.prototype.setRadius=function(t){this.set(Zv,t)},e}(Va),Qv=function(t){function e(e){var i=e||{};t.call(this,i),this.type=Ba.IMAGE}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(cs);Qv.prototype.getSource;var $v="preload",tm="useInterimTilesOnError",em=function(t){function e(e){var i=e||{},r=s({},i);delete r.preload,delete r.useInterimTilesOnError,t.call(this,r),this.setPreload(void 0!==i.preload?i.preload:0),this.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),this.type=Ba.TILE}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getPreload=function(){return this.get($v)},e.prototype.setPreload=function(t){this.set($v,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(tm)},e.prototype.setUseInterimTilesOnError=function(t){this.set(tm,t)},e}(cs);em.prototype.getSource;var im=function(t){function e(e){var i=e||{},r=i.renderMode||eu;A(null==r||r==tu||r==eu||r==iu,28),i.declutter&&r==tu&&(r=eu),i.renderMode=r;var n=s({},i);delete n.preload,delete n.useInterimTilesOnError,t.call(this,n),this.setPreload(i.preload?i.preload:0),this.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),this.type=Ba.VECTOR_TILE}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getPreload=function(){return this.get($v)},e.prototype.getUseInterimTilesOnError=function(){return this.get(tm)},e.prototype.setPreload=function(t){this.set($v,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(tm,t)},e}(Va);function rm(t,e,i,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=i,r):[t,e,i]}function nm(t,e,i){return t+"/"+e+"/"+i}function om(t){return nm(t[0],t[1],t[2])}function sm(t){return(t[1]<<t[0])+t[2]}function am(t,e){var i=/\{z\}/g,r=/\{x\}/g,n=/\{y\}/g,o=/\{-y\}/g;return function(s,a,h){return s?t.replace(i,s[0].toString()).replace(r,s[1].toString()).replace(n,function(){return(-s[2]-1).toString()}).replace(o,function(){var t=s[0],i=e.getFullTileRange(t);return A(i,55),(i.getHeight()+s[2]).toString()}):void 0}}function hm(t,e){for(var i=t.length,r=new Array(i),n=0;n<i;++n)r[n]=am(t[n],e);return lm(r)}function lm(t){return 1===t.length?t[0]:function(e,i,r){if(e){var n=wt(sm(e),t.length);return t[n](e,i,r)}}}function um(t,e,i){}function cm(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var r,n=i[1].charCodeAt(0),o=i[2].charCodeAt(0);for(r=n;r<=o;++r)e.push(t.replace(i[0],String.fromCharCode(r)));return e}if(i=i=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(i[2],10),a=parseInt(i[1],10);a<=s;a++)e.push(t.replace(i[0],a.toString()));return e}return e.push(t),e}function pm(t,i,r,n){var o=document.createElement("script"),s="olc_"+e(i);function a(){delete window[s],o.parentNode.removeChild(o)}o.async=!0,o.src=t+(-1==t.indexOf("?")?"?":"&")+(n||"callback")+"="+s;var h=setTimeout(function(){a(),r&&r()},1e4);window[s]=function(t){clearTimeout(h),a(),i(t)},document.getElementsByTagName("head")[0].appendChild(o)}im.prototype.getSource;var dm=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.expireCache=function(t){for(;this.canExpireCache();){var e=this.peekLast(),i=e.tileCoord[0].toString();if(i in t&&t[i].contains(e.tileCoord))break;this.pop().dispose()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey().split("/").map(Number)[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(om(e.tileCoord)),e.dispose())},this)}},e}(gi);function fm(t,e,i,r){var n=ue(i,e,t),o=ie(e,r,i),s=e.getMetersPerUnit();void 0!==s&&(o*=s);var a=t.getMetersPerUnit();void 0!==a&&(o/=a);var h=t.getExtent();if(!h||B(h,n)){var l=ie(t,o,n)/o;isFinite(l)&&0<l&&(o/=l)}return o}function _m(t,e,i,r){var n=i-t,o=r-e,s=Math.sqrt(n*n+o*o);return[Math.round(i+n/s),Math.round(r+o/s)]}function gm(t,e,i,r,n,o,s,a,h,l,u){var c=Ae(Math.round(i*t),Math.round(i*e));if(0===h.length)return c.canvas;c.scale(i,i);var p=[1/0,1/0,-1/0,-1/0];h.forEach(function(t,e,i){Q(p,t.extent)});var d=pt(p),f=ht(p),_=Ae(Math.round(i*d/r),Math.round(i*f/r)),g=i/r;h.forEach(function(t,e,i){var r=t.extent[0]-p[0],n=-(t.extent[3]-p[3]),o=pt(t.extent),s=ht(t.extent);_.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,r*g,n*g,o*g,s*g)});var y=ut(s);return a.getTriangles().forEach(function(t,e,n){var s=t.source,a=t.target,h=s[0][0],l=s[0][1],u=s[1][0],d=s[1][1],f=s[2][0],g=s[2][1],v=(a[0][0]-y[0])/o,m=-(a[0][1]-y[1])/o,x=(a[1][0]-y[0])/o,S=-(a[1][1]-y[1])/o,E=(a[2][0]-y[0])/o,C=-(a[2][1]-y[1])/o,T=h,w=l,R=function(t){for(var e=t.length,i=0;i<e;i++){for(var r=i,n=Math.abs(t[i][i]),o=i+1;o<e;o++){var s=Math.abs(t[o][i]);n<s&&(n=s,r=o)}if(0===n)return null;var a=t[r];t[r]=t[i],t[i]=a;for(var h=i+1;h<e;h++)for(var l=-t[h][i]/t[i][i],u=i;u<e+1;u++)i==u?t[h][u]=0:t[h][u]+=l*t[i][u]}for(var c=new Array(e),p=e-1;0<=p;p--){c[p]=t[p][e]/t[p][p];for(var d=p-1;0<=d;d--)t[d][e]-=t[d][p]*c[p]}return c}([[u-=T,d-=w,l=h=0,0,x-v],[f-=T,g-=w,0,0,E-v],[0,0,u,d,S-m],[0,0,f,g,C-m]]);if(R){c.save(),c.beginPath();var I=(v+x+E)/3,L=(m+S+C)/3,b=_m(I,L,v,m),F=_m(I,L,x,S),P=_m(I,L,E,C);c.moveTo(F[0],F[1]),c.lineTo(b[0],b[1]),c.lineTo(P[0],P[1]),c.clip(),c.transform(R[0],R[2],R[1],R[3],v,m),c.translate(p[0]-T,p[3]-w),c.scale(r/i,-r/i),c.drawImage(_.canvas,0,0),c.restore()}}),u&&(c.save(),c.strokeStyle="black",c.lineWidth=1,a.getTriangles().forEach(function(t,e,i){var r=t.target,n=(r[0][0]-y[0])/o,s=-(r[0][1]-y[1])/o,a=(r[1][0]-y[0])/o,h=-(r[1][1]-y[1])/o,l=(r[2][0]-y[0])/o,u=-(r[2][1]-y[1])/o;c.beginPath(),c.moveTo(a,h),c.lineTo(n,s),c.lineTo(l,u),c.closePath(),c.stroke()}),c.restore()),c.canvas}var ym=function(t,e,i,r,n){this.sourceProj_=t,this.targetProj_=e;var o={},s=le(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return o[e]||(o[e]=s(t)),o[e]},this.maxSourceExtent_=r,this.errorThresholdSquared_=n*n,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&pt(r)==pt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?pt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?pt(this.targetProj_.getExtent()):null;var a=ut(i),h=ct(i),l=ot(i),u=nt(i),c=this.transformInv_(a),p=this.transformInv_(h),d=this.transformInv_(l),f=this.transformInv_(u);if(this.addQuad_(a,h,l,u,c,p,d,f,10),this.wrapsXInSource_){var _=1/0;this.triangles_.forEach(function(t,e,i){_=Math.min(_,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-_>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-_>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-_>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-_>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}o={}};ym.prototype.addTriangle_=function(t,e,i,r,n,o){this.triangles_.push({source:[r,n,o],target:[t,e,i]})},ym.prototype.addQuad_=function(t,e,i,r,n,o,s,a,h){var l=D([n,o,s,a]),u=this.sourceWorldWidth_?pt(l)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&.5<u&&u<1,d=!1;if(0<h&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(d|=.25<pt(D([t,e,i,r]))/this.targetWorldWidth_),!p&&this.sourceProj_.isGlobal()&&u&&(d|=.25<u)),d||!this.maxSourceExtent_||dt(l,this.maxSourceExtent_)){if(!(d||isFinite(n[0])&&isFinite(n[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1]))){if(!(0<h))return;d=!0}if(0<h){if(!d){var f,_=[(t[0]+i[0])/2,(t[1]+i[1])/2],g=this.transformInv_(_);f=p?(wt(n[0],c)+wt(s[0],c))/2-wt(g[0],c):(n[0]+s[0])/2-g[0];var y=(n[1]+s[1])/2-g[1];d=f*f+y*y>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var v=[(e[0]+i[0])/2,(e[1]+i[1])/2],m=this.transformInv_(v),x=[(r[0]+t[0])/2,(r[1]+t[1])/2],S=this.transformInv_(x);this.addQuad_(t,e,v,x,n,o,m,S,h-1),this.addQuad_(x,v,i,r,S,m,s,a,h-1)}else{var E=[(t[0]+e[0])/2,(t[1]+e[1])/2],C=this.transformInv_(E),T=[(i[0]+r[0])/2,(i[1]+r[1])/2],w=this.transformInv_(T);this.addQuad_(t,E,T,r,n,C,w,a,h-1),this.addQuad_(E,e,i,T,C,o,s,w,h-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,r,n,s,a),this.addTriangle_(t,e,i,n,o,s)}},ym.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(e,i,r){var n=e.source;$(t,n[0]),$(t,n[1]),$(t,n[2])}),t},ym.prototype.getTriangles=function(){return this.triangles_};var vm=function(t){function e(e,i,r,n,o,s,a,h,l,u,c){t.call(this,o,Ln),this.renderEdges_=void 0!==c&&c,this.pixelRatio_=a,this.gutter_=h,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=n,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var p=n.getTileCoordExtent(this.wrappedTileCoord_),d=this.targetTileGrid_.getExtent(),f=this.sourceTileGrid_.getExtent(),_=d?lt(p,d):p;if(0!==rt(_)){var g=e.getExtent();g&&(f=f?lt(f,g):g);var y=n.getResolution(this.wrappedTileCoord_[0]),v=fm(e,r,st(_),y);if(!isFinite(v)||v<=0)this.state=Fn;else{var m=void 0!==u?u:.5;if(this.triangulation_=new ym(e,r,_,f,v*m),0!==this.triangulation_.getTriangles().length){this.sourceZ_=i.getZForResolution(v);var x=this.triangulation_.calculateSourceExtent();if(f&&(e.canWrapX()?(x[1]=mt(x[1],f[1],f[3]),x[3]=mt(x[3],f[1],f[3])):x=lt(x,f)),rt(x)){for(var S=i.getTileRangeForExtentAndZ(x,this.sourceZ_),E=S.minX;E<=S.maxX;E++)for(var C=S.minY;C<=S.maxY;C++){var T=l(this.sourceZ_,E,C,a);T&&this.sourceTiles_.push(T)}0===this.sourceTiles_.length&&(this.state=Fn)}else this.state=Fn}else this.state=Fn}}else this.state=Fn}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.disposeInternal=function(){1==this.state&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,i,r){e&&e.getState()==bn&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),(this.sourceTiles_.length=0)===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),r="number"==typeof i?i:i[0],n="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=gm(r,n,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,a,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=bn}this.changed()},e.prototype.load=function(){if(this.state==Ln){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,r){var n=e.getState();if(n==Ln||1==n){t++;var o=f(e,R.CHANGE,function(i){var r=e.getState();r!=bn&&3!=r&&r!=Fn||(y(o),0==--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),this.sourceTiles_.forEach(function(t,e,i){t.getState()==Ln&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(y),this.sourcesListenerKeys_=null},e}(An),mm=[0,0,0],xm=function(t){var e,i,r;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,A((e=this.resolutions_,!0,i=function(t,e){return e-t}||nr,e.every(function(t,r){if(0===r)return!0;var n=i(e[r-1],t);return!(0<n||0===n)})),17),!t.origins)for(var n=0,o=this.resolutions_.length-1;n<o;++n)if(r){if(this.resolutions_[n]/this.resolutions_[n+1]!==r){r=void 0;break}}else r=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,A(this.origins_.length==this.resolutions_.length,20));var s=t.extent;void 0===s||this.origin_||this.origins_||(this.origin_=ut(s)),A(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,A(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:ko,A(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==s?s:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new Tl(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):s&&this.calculateTileRanges_(s)};function Sm(t){var e=t.getDefaultTileGrid();return e||(e=Tm(t),t.setDefaultTileGrid(e)),e}function Em(t){var e={};return s(e,void 0!==t?t:{}),void 0===e.extent&&(e.extent=ee("EPSG:3857").getExtent()),e.resolutions=Cm(e.extent,e.maxZoom,e.tileSize),delete e.maxZoom,new xm(e)}function Cm(t,e,i){for(var r=void 0!==e?e:Go,n=ht(t),o=pt(t),s=hs(void 0!==i?i:ko),a=Math.max(o/s[0],n/s[1]),h=r+1,l=new Array(h),u=0;u<h;++u)l[u]=a/Math.pow(2,u);return l}function Tm(t,e,i,r){return function(t,e,i,r){var n,o,s,a=void 0!==r?r:G.TOP_LEFT,h=Cm(t,e,i);return new xm({extent:t,origin:(n=t,o=a,o===G.BOTTOM_LEFT?s=nt(n):o===G.BOTTOM_RIGHT?s=ot(n):o===G.TOP_LEFT?s=ut(n):o===G.TOP_RIGHT?s=ct(n):A(!1,13),s),resolutions:h,tileSize:i})}(wm(t),e,i,r)}function wm(t){var e=(t=ee(t)).getExtent();if(!e){var i=180*Ot[Mt.DEGREES]/t.getMetersPerUnit();e=K(-i,-i,i,i)}return e}xm.prototype.forEachTileCoord=function(t,e,i){for(var r=this.getTileRangeForExtentAndZ(t,e),n=r.minX,o=r.maxX;n<=o;++n)for(var s=r.minY,a=r.maxY;s<=a;++s)i([e,n,s])},xm.prototype.forEachTileCoordParentTileRange=function(t,e,i,r,n){var o,s,a,h=null,l=t[0]-1;for(2===this.zoomFactor_?(s=t[1],a=t[2]):h=this.getTileCoordExtent(t,n);l>=this.minZoom;){if(o=2===this.zoomFactor_?wl(s=Math.floor(s/2),s,a=Math.floor(a/2),a,r):this.getTileRangeForExtentAndZ(h,l,r),e.call(i,l,o))return!0;--l}return!1},xm.prototype.getExtent=function(){return this.extent_},xm.prototype.getMaxZoom=function(){return this.maxZoom},xm.prototype.getMinZoom=function(){return this.minZoom},xm.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},xm.prototype.getResolution=function(t){return this.resolutions_[t]},xm.prototype.getResolutions=function(){return this.resolutions_},xm.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*t[1],n=2*t[2];return wl(r,r+1,n,n+1,e)}var o=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},xm.prototype.getTileRangeExtent=function(t,e,i){var r=this.getOrigin(t),n=this.getResolution(t),o=hs(this.getTileSize(t),this.tmpSize_),s=r[0]+e.minX*o[0]*n,a=r[0]+(e.maxX+1)*o[0]*n;return K(s,r[1]+e.minY*o[1]*n,a,r[1]+(e.maxY+1)*o[1]*n,i)},xm.prototype.getTileRangeForExtentAndZ=function(t,e,i){var r=mm;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r);var n=r[1],o=r[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,r),wl(n,r[1],o,r[2],i)},xm.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=hs(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*i,e[1]+(t[2]+.5)*r[1]*i]},xm.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=hs(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*n[0]*r,s=i[1]+t[2]*n[1]*r;return K(o,s,o+n[0]*r,s+n[1]*r,e)},xm.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},xm.prototype.getTileCoordForXYAndResolution_=function(t,e,i,r,n){var o=this.getZForResolution(i),s=i/this.getResolution(o),a=this.getOrigin(o),h=hs(this.getTileSize(o),this.tmpSize_),l=r?.5:0,u=r?0:.5,c=Math.floor((t-a[0])/i+l),p=Math.floor((e-a[1])/i+u),d=s*c/h[0],f=s*p/h[1];return r?(d=Math.ceil(d)-1,f=Math.ceil(f)-1):(d=Math.floor(d),f=Math.floor(f)),rm(o,d,f,n)},xm.prototype.getTileCoordForXYAndZ_=function(t,e,i,r,n){var o=this.getOrigin(i),s=this.getResolution(i),a=hs(this.getTileSize(i),this.tmpSize_),h=r?.5:0,l=r?0:.5,u=Math.floor((t-o[0])/s+h),c=Math.floor((e-o[1])/s+l),p=u/a[0],d=c/a[1];return r?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),rm(i,p,d,n)},xm.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},xm.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},xm.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},xm.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},xm.prototype.getZForResolution=function(t,e){return mt(sr(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},xm.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),r=this.minZoom;r<e;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i};var Rm=function(t){function e(e){t.call(this,{attributions:e.attributions,extent:e.extent,projection:e.projection,state:e.state,wrapX:e.wrapX}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileCache=new dm(e.cacheSize),this.tmpSize=[0,0],this.key_="",this.tileOptions={transition:e.transition}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,r){var n=this.getTileCacheForProjection(t);if(!n)return!1;for(var o,s,a,h=!0,l=i.minX;l<=i.maxX;++l)for(var u=i.minY;u<=i.maxY;++u)s=nm(e,l,u),a=!1,n.containsKey(s)&&(a=(o=n.get(s)).getState()===bn)&&(a=!1!==r(o)),a||(h=!1);return h},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,i,r,n){},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Sm(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!ae(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var r=this.getTileGridForProjection(i),n=this.getTilePixelRatio(e),o=hs(r.getTileSize(t),this.tmpSize);return 1==n?o:as(o,n,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=function(t,e,i){var r=e[0],n=t.getTileCoordCenter(e),o=wm(i);if(B(o,n))return e;var s=pt(o),a=Math.ceil((o[0]-n[0])/s);return n[0]+=s*a,t.getTileCoordForCoordAndZ(n,r)}(r,t,i)),function(t,e){var i=t[0],r=t[1],n=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;var o,s=e.getExtent();return!(o=s?e.getTileRangeForExtentAndZ(s,i):e.getFullTileRange(i))||o.containsXY(r,n)}(t,r)?t:null},e.prototype.refresh=function(){this.tileCache.clear(),this.changed()},e}(qa);Rm.prototype.useTile=E;var Im=function(t){function e(e,i){t.call(this,e),this.tile=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(C),Lm=function(t){function i(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,extent:e.extent,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition}),this.tileLoadFunction=e.tileLoadFunction,this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):um,this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),e.tileUrlFunction&&this.setTileUrlFunction(e.tileUrlFunction),this.tileLoadingKeys_={}}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.getTileLoadFunction=function(){return this.tileLoadFunction},i.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},i.prototype.getUrls=function(){return this.urls},i.prototype.handleTileChange=function(t){var i,r=t.target,n=e(r),o=r.getState();1==o?(this.tileLoadingKeys_[n]=!0,i="tileloadstart"):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],i=3==o?"tileloaderror":o==bn||5==o?"tileloadend":void 0),null!=i&&this.dispatchEvent(new Im(i,r))},i.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},i.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},i.prototype.setUrl=function(t){var e=this.urls=cm(t);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):hm(e,this.tileGrid),t)},i.prototype.setUrls=function(t){var e=(this.urls=t).join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):hm(t,this.tileGrid),e)},i.prototype.useTile=function(t,e,i){var r=nm(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},i}(Rm);Lm.prototype.fixedTileUrlFunction;var bm=function(t){function i(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,extent:e.extent,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Fm,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:Gn,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},i.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);for(var r in this.tileCache.expireCache(this.tileCache==i?e:{}),this.tileCacheForProjection){var n=this.tileCacheForProjection[r];n.expireCache(n==i?e:{})}},i.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!ae(this.getProjection(),t)?0:this.getGutter()},i.prototype.getGutter=function(){return 0},i.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!ae(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},i.prototype.getTileGridForProjection=function(t){var i=this.getProjection();if(!this.tileGrid||i&&!ae(i,t)){var r=e(t).toString();return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Sm(t)),this.tileGridForProjection[r]}return this.tileGrid},i.prototype.getTileCacheForProjection=function(t){var i=this.getProjection();if(!i||ae(i,t))return this.tileCache;var r=e(t).toString();return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new dm(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},i.prototype.createTile_=function(t,e,i,r,n,o){var s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,n),h=a?this.tileUrlFunction(a,r,n):void 0,l=new this.tileClass(s,void 0!==h?Ln:Fn,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=o,f(l,R.CHANGE,this.handleTileChange,this),l},i.prototype.getTile=function(t,e,i,r,n){var o=this.getProjection();if(o&&n&&!ae(o,n)){var s,a=this.getTileCacheForProjection(n),h=[t,e,i],l=om(h);a.containsKey(l)&&(s=a.get(l));var u=this.getKey();if(s&&s.key==u)return s;var c=this.getTileGridForProjection(o),p=this.getTileGridForProjection(n),d=this.getTileCoordForTileUrlFunction(h,n),f=new vm(o,c,n,p,h,d,this.getTilePixelRatio(r),this.getGutter(),function(t,e,i,r){return this.getTileInternal(t,e,i,r,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return f.key=u,s?(f.interimTile=s,f.refreshInterimChain(),a.replace(l,f)):a.set(l,f),f}return this.getTileInternal(t,e,i,r,o||n)},i.prototype.getTileInternal=function(t,e,i,r,n){var o=null,s=nm(t,e,i),a=this.getKey();if(this.tileCache.containsKey(s)){if((o=this.tileCache.get(s)).key!=a){var h=o;o=this.createTile_(t,e,i,r,n,a),h.getState()==Ln?o.interimTile=h.interimTile:o.interimTile=h,o.refreshInterimChain(),this.tileCache.replace(s,o)}}else o=this.createTile_(t,e,i,r,n,a),this.tileCache.set(s,o);return o},i.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},i.prototype.setTileGridForProjection=function(t,i){var r=ee(t);if(r){var n=e(r).toString();n in this.tileGridForProjection||(this.tileGridForProjection[n]=i)}},i}(Lm);function Fm(t,e){t.getImage().src=e}var Pm=function(t){function e(e){var i=void 0!==e.hidpi&&e.hidpi;t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:ee("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:es,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:i?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.hidpi_=i,this.culture_=void 0!==e.culture?e.culture:"en-us",this.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,this.apiKey_=e.key,this.imagerySet_=e.imagerySet,pm("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_,this.handleImageryMetadataResponse.bind(this),void 0,"jsonp")}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getApiKey=function(){return this.apiKey_},e.prototype.getImagerySet=function(){return this.imagerySet_},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],i=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,r=wm(this.getProjection()),n=e.imageWidth==e.imageHeight?e.imageWidth:[e.imageWidth,e.imageHeight],o=Em({extent:r,minZoom:e.zoomMin,maxZoom:i,tileSize:n/(this.hidpi_?2:1)});this.tileGrid=o;var s=this.culture_,a=this.hidpi_;if(this.tileUrlFunction=lm(e.imageUrlSubdomains.map(function(t){var i=[0,0,0],r=e.imageUrl.replace("{subdomain}",t).replace("{culture}",s);return function(t,e,n){if(t){rm(t[0],t[1],-t[2]-1,i);var o=r;return a&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",function(t){var e,i,r=t[0],n=new Array(r),o=1<<r-1;for(e=0;e<r;++e)i=48,t[1]&o&&(i+=1),t[2]&o&&(i+=2),n[e]=String.fromCharCode(i),o>>=1;return n.join("")}(i))}}})),e.imageryProviders){var h=he(ee("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var i=[],r=t.viewState.zoom;return e.imageryProviders.map(function(e){for(var n=!1,o=e.coverageAreas,s=0,a=o.length;s<a;++s){var l=o[s];if(r>=l.zoomMin&&r<=l.zoomMax){var u=l.bbox;if(dt(gt([u[1],u[0],u[3],u[2]],h),t.extent)){n=!0;break}}}n&&i.push(e.attribution)}),i.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'),i})}this.setState(is)}else this.setState(rs)},e}(bm),Mm=function(t){function e(e){var i=e||{},r=void 0!==i.projection?i.projection:"EPSG:3857",n=void 0!==i.tileGrid?i.tileGrid:Em({extent:wm(r),maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:i.opaque,projection:r,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(bm),Om=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,state:es,wrapX:e.wrapX}),this.account_=e.account,this.mapId_=e.map||"",this.config_=e.config||{},this.templateCache_={},this.initializeMap_()}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getConfig=function(){return this.config_},e.prototype.updateConfig=function(t){s(this.config_,t),this.initializeMap_()},e.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},e.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var i=new XMLHttpRequest;i.addEventListener("load",this.handleInitResponse_.bind(this,t)),i.addEventListener("error",this.handleInitError_.bind(this)),i.open("POST",e),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(this.config_))}},e.prototype.handleInitResponse_=function(t,e){var i=e.target;if(!i.status||200<=i.status&&i.status<300){var r;try{r=JSON.parse(i.responseText)}catch(t){return void this.setState(rs)}this.applyTemplate_(r),this.templateCache_[t]=r,this.setState(is)}else this.setState(rs)},e.prototype.handleInitError_=function(t){this.setState(rs)},e.prototype.applyTemplate_=function(t){var e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},e}(Mm),Nm=function(t){function i(e){t.call(this,{attributions:e.attributions,extent:e.extent,projection:e.projection,wrapX:e.wrapX}),this.resolution=void 0,this.distance=void 0!==e.distance?e.distance:20,this.features=[],this.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return A(e instanceof Nr,10),e},this.source=e.source,f(this.source,R.CHANGE,this.refresh,this)}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.getDistance=function(){return this.distance},i.prototype.getSource=function(){return this.source},i.prototype.loadFeatures=function(t,e,i){this.source.loadFeatures(t,e,i),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},i.prototype.setDistance=function(t){this.distance=t,this.refresh()},i.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features),t.prototype.refresh.call(this)},i.prototype.cluster=function(){if(void 0!==this.resolution)for(var t=[1/(this.features.length=0),1/0,-1/0,-1/0],i=this.distance*this.resolution,r=this.source.getFeatures(),n={},o=0,s=r.length;o<s;o++){var a=r[o];if(!(e(a).toString()in n)){var h=this.geometryFunction(a);if(h){Z(h.getCoordinates(),t),j(t,i,t);var l=this.source.getFeaturesInExtent(t);l=l.filter(function(t){var i=e(t).toString();return!(i in n)&&(n[i]=!0)}),this.features.push(this.createCluster(l))}}}},i.prototype.createCluster=function(t){for(var e=[0,0],i=t.length-1;0<=i;--i){var r=this.geometryFunction(t[i]);r?rn(e,r.getCoordinates()):t.splice(i,1)}ln(e,1/t.length);var n=new Hi(new Nr(e));return n.set("features",t),n},i}(vh),Am=function(t){function e(e,i,r,n,o,s){var a=e.getExtent(),h=i.getExtent(),l=h?lt(r,h):r,u=fm(e,i,st(l),n),c=new ym(e,i,l,a,.5*u),p=s(c.calculateSourceExtent(),u,o),d=ui.LOADED;p&&(d=ui.IDLE);var f=p?p.getPixelRatio():1;t.call(this,r,n,f,d),this.targetProj_=i,this.maxSourceExtent_=a,this.triangulation_=c,this.targetResolution_=n,this.targetExtent_=r,this.sourceImage_=p,this.sourcePixelRatio_=f,this.canvas_=null,this.sourceListenerKey_=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.disposeInternal=function(){this.state==ui.LOADING&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==ui.LOADED){var e=pt(this.targetExtent_)/this.targetResolution_,i=ht(this.targetExtent_)/this.targetResolution_;this.canvas_=gm(e,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},e.prototype.load=function(){if(this.state==ui.IDLE){this.state=ui.LOADING,this.changed();var t=this.sourceImage_.getState();t==ui.LOADED||t==ui.ERROR?this.reproject_():(this.sourceListenerKey_=f(this.sourceImage_,R.CHANGE,function(t){var e=this.sourceImage_.getState();e!=ui.LOADED&&e!=ui.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){y(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(Rn),Gm=function(t){function e(e,i){t.call(this,e),this.image=i}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(C),km=function(t){function e(e){t.call(this,{attributions:e.attributions,extent:e.extent,projection:e.projection,state:e.state}),this.resolutions_=void 0!==e.resolutions?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=sr(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,i,r){var n=this.getProjection();if(n&&r&&!ae(n,r)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&ae(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==e&&J(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Am(n,r,t,e,i,function(t,e,i){return this.getImageInternal(t,e,i,n)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return n&&(r=n),this.getImageInternal(t,e,i,r)},e.prototype.getImageInternal=function(t,e,i,r){},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case ui.LOADING:this.loading=!0,this.dispatchEvent(new Gm("imageloadstart",e));break;case ui.LOADED:this.loading=!1,this.dispatchEvent(new Gm("imageloadend",e));break;case ui.ERROR:this.loading=!1,this.dispatchEvent(new Gm("imageloaderror",e))}},e}(qa);function Dm(t,e){t.getImage().src=e}function jm(t,e){var i=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))});var r=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r}var Um=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:i.projection,resolutions:i.resolutions}),this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null,this.hidpi_=void 0===i.hidpi||i.hidpi,this.url_=i.url,this.imageLoadFunction_=void 0!==i.imageLoadFunction?i.imageLoadFunction:Dm,this.params_=i.params||{},this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==i.ratio?i.ratio:1.5}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,r){if(void 0===this.url_)return null;e=this.findNearestResolution(e),i=this.hidpi_?i:1;var n=this.image_;if(n&&this.renderedRevision_==this.getRevision()&&n.getResolution()==e&&n.getPixelRatio()==i&&X(n.getExtent(),t))return n;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};s(o,this.params_);var a=((t=t.slice())[0]+t[2])/2,h=(t[1]+t[3])/2;if(1!=this.ratio_){var l=this.ratio_*pt(t)/2,u=this.ratio_*ht(t)/2;t[0]=a-l,t[1]=h-u,t[2]=a+l,t[3]=h+u}var c=e/i,p=Math.ceil(pt(t)/c),d=Math.ceil(ht(t)/c);t[0]=a-c*p/2,t[2]=a+c*p/2,t[1]=h-c*d/2,t[3]=h+c*d/2,this.imageSize_[0]=p,this.imageSize_[1]=d;var _=this.getRequestUrl_(t,this.imageSize_,i,r,o);return this.image_=new In(t,e,i,_,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),f(this.image_,R.CHANGE,this.handleImageChange,this),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,i,r,n){var o=r.getCode().split(":").pop();n.SIZE=e[0]+","+e[1],n.BBOX=t.join(","),n.BBOXSR=o,n.IMAGESR=o,n.DPI=Math.round(90*i);var s=this.url_,a=s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return a==s&&A(!1,50),jm(a,n)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){s(this.params_,t),this.image_=null,this.changed()},e}(km),Ym=function(t){function e(e){t.call(this,{attributions:e.attributions,projection:e.projection,resolutions:e.resolutions,state:e.state}),this.canvasFunction_=e.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getImageInternal=function(t,e,i,r){e=this.findNearestResolution(e);var n=this.canvas_;if(n&&this.renderedRevision_==this.getRevision()&&n.getResolution()==e&&n.getPixelRatio()==i&&X(n.getExtent(),t))return n;_t(t=t.slice(),this.ratio_);var o=[pt(t)/e*i,ht(t)/e*i],s=this.canvasFunction_(t,e,i,o,r);return s&&(n=new hl(t,e,i,s)),this.canvas_=n,this.renderedRevision_=this.getRevision(),n},e}(km),Bm=function(t){function e(e){t.call(this,{projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,this.params_=e.params||{},this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:Dm,this.hidpi_=void 0===e.hidpi||e.hidpi,this.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,this.ratio_=void 0!==e.ratio?e.ratio:1,this.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,this.image_=null,this.renderedRevision_=0}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,r){e=this.findNearestResolution(e),i=this.hidpi_?i:1;var n=this.image_;if(n&&this.renderedRevision_==this.getRevision()&&n.getResolution()==e&&n.getPixelRatio()==i&&X(n.getExtent(),t))return n;1!=this.ratio_&&_t(t=t.slice(),this.ratio_);var o=[pt(t)/e*i,ht(t)/e*i];if(void 0!==this.url_){var s=this.getUrl(this.url_,this.params_,t,o,r);f(n=new In(t,e,i,s,this.crossOrigin_,this.imageLoadFunction_),R.CHANGE,this.handleImageChange,this)}else n=null;return this.image_=n,this.renderedRevision_=this.getRevision(),n},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.updateParams=function(t){s(this.params_,t),this.changed()},e.prototype.getUrl=function(t,e,i,r,n){var o,a,h,l,u,c,p,d,f,_=(o=i,a=r,h=this.metersPerUnit_,l=this.displayDpi_,u=pt(o),c=ht(o),f=.0254/l,(p=a[0])*c<(d=a[1])*u?u*h/(p*f):c*h/(d*f)),g=st(i),y={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:_,SETVIEWCENTERX:g[0],SETVIEWCENTERY:g[1]};return s(y,e),jm(t,y)},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e}(km),Xm=function(t){function e(e){var i=void 0!==e.crossOrigin?e.crossOrigin:null,r=void 0!==e.imageLoadFunction?e.imageLoadFunction:Dm;t.call(this,{attributions:e.attributions,projection:ee(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image_=new In(this.imageExtent_,void 0,1,this.url_,i,r),this.imageSize_=e.imageSize?e.imageSize:null,f(this.image_,R.CHANGE,this.handleImageChange,this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getImageExtent=function(){return this.imageExtent_},e.prototype.getImageInternal=function(t,e,i,r){return dt(t,this.image_.getExtent())?this.image_:null},e.prototype.getUrl=function(){return this.url_},e.prototype.handleImageChange=function(e){if(this.image_.getState()==ui.LOADED){var i,r,n=this.image_.getExtent(),o=this.image_.getImage();this.imageSize_?(i=this.imageSize_[0],r=this.imageSize_[1]):(i=o.width,r=o.height);var s=ht(n)/r,a=Math.ceil(pt(n)/s);if(a!=i){var h=Ae(a,r),l=h.canvas;h.drawImage(o,0,0,i,r,0,0,l.width,l.height),this.image_.setImage(l)}}t.prototype.handleImageChange.call(this,e)},e}(km),zm="1.3.0",Vm="carmentaserver",Wm="geoserver",Km="mapserver",Hm=[101,101],Zm=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:i.projection,resolutions:i.resolutions}),this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null,this.url_=i.url,this.imageLoadFunction_=void 0!==i.imageLoadFunction?i.imageLoadFunction:Dm,this.params_=i.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=i.serverType,this.hidpi_=void 0===i.hidpi||i.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==i.ratio?i.ratio:1.5}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getGetFeatureInfoUrl=function(t,e,i,r){if(void 0!==this.url_){var n=ee(i),o=this.getProjection();o&&o!==n&&(e=fm(o,n,t,e),t=ue(t,n,o));var a=at(t,e,0,Hm),h={SERVICE:"WMS",VERSION:zm,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};s(h,this.params_,r);var l=Math.floor((t[0]-a[0])/e),u=Math.floor((a[3]-t[1])/e);return h[this.v13_?"I":"X"]=l,h[this.v13_?"J":"Y"]=u,this.getRequestUrl_(a,Hm,1,o||n,h)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,r){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);var n=e/i,o=st(t),a=at(o,n,0,[Math.ceil(pt(t)/n),Math.ceil(ht(t)/n)]),h=at(o,n,0,[Math.ceil(this.ratio_*pt(t)/n),Math.ceil(this.ratio_*ht(t)/n)]),l=this.image_;if(l&&this.renderedRevision_==this.getRevision()&&l.getResolution()==e&&l.getPixelRatio()==i&&X(l.getExtent(),a))return l;var u={SERVICE:"WMS",VERSION:zm,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};s(u,this.params_),this.imageSize_[0]=Math.round(pt(h)/n),this.imageSize_[1]=Math.round(ht(h)/n);var c=this.getRequestUrl_(h,this.imageSize_,i,r,u);return this.image_=new In(h,e,i,c,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),f(this.image_,R.CHANGE,this.handleImageChange,this),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,i,r,n){if(A(void 0!==this.url_,9),n[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(n.STYLES=""),1!=i)switch(this.serverType_){case Wm:var o=90*i+.5|0;"FORMAT_OPTIONS"in n?n.FORMAT_OPTIONS+=";dpi:"+o:n.FORMAT_OPTIONS="dpi:"+o;break;case Km:n.MAP_RESOLUTION=90*i;break;case Vm:case"qgis":n.DPI=90*i;break;default:A(!1,8)}n.WIDTH=e[0],n.HEIGHT=e[1];var s,a=r.getAxisOrientation();return s=this.v13_&&"ne"==a.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,n.BBOX=s.join(","),jm(this.url_,n)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){s(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_.VERSION||zm;this.v13_=0<=en(t,"1.3")},e}(km),qm='&#169; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',Jm=function(t){function e(e){var i,r=e||{};i=void 0!==r.attributions?r.attributions:[qm];var n=void 0!==r.crossOrigin?r.crossOrigin:"anonymous",o=void 0!==r.url?r.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";t.call(this,{attributions:i,cacheSize:r.cacheSize,crossOrigin:n,opaque:void 0===r.opaque||r.opaque,maxZoom:void 0!==r.maxZoom?r.maxZoom:19,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileLoadFunction:r.tileLoadFunction,url:o,wrapX:r.wrapX})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Mm),Qm=!0;try{new ImageData(10,10)}catch(m){Qm=!1}var $m=document.createElement("canvas").getContext("2d"),tx=function(t,e,i){if(Qm)return new ImageData(t,e,i);var r=$m.createImageData(e,i);return r.data.set(t),r};function ex(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}return function(i){var r,n,o,s,a,h=i.buffers,l=i.meta,u=i.imageOps,c=i.width,p=i.height,d=h.length,f=h[0].byteLength;if(u){var _=new Array(d);for(n=0;n<d;++n)_[n]=(o=new Uint8ClampedArray(h[n]),s=c,a=p,e?new ImageData(o,s,a):{data:o,width:s,height:a});r=t(_,l).data}else{r=new Uint8ClampedArray(f);var g=new Array(d),y=new Array(d);for(n=0;n<d;++n)g[n]=new Uint8ClampedArray(h[n]),y[n]=[0,0,0,0];for(var v=0;v<f;v+=4){for(var m=0;m<d;++m){var x=g[m];y[m][0]=x[v],y[m][1]=x[v+1],y[m][2]=x[v+2],y[m][3]=x[v+3]}var S=t(y,l);r[v]=S[0],r[v+1]=S[1],r[v+2]=S[2],r[v+3]=S[3]}}return r.buffer}}function ix(t,e){var i=Object.keys(t.lib||{}).map(function(e){return"var "+e+" = "+t.lib[e].toString()+";"}).concat(["var __minion__ = ("+ex.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Blob(i,{type:"text/javascript"}),n=URL.createObjectURL(r),o=new Worker(n);return o.addEventListener("message",e),o}function rx(t){var e;this._imageOps=!!t.imageOps;var i,r,n,o=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var s=0;s<e;++s)o[s]=ix(t,this._onWorkerMessage.bind(this,s));else o[0]=(i=t,r=this._onWorkerMessage.bind(this,0),n=ex(i.operation),{postMessage:function(t){setTimeout(function(){r({data:{buffer:n(t),meta:t.meta}})},0)}});this._workers=o,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}rx.prototype.process=function(t,e,i){this._enqueue({inputs:t,meta:e,callback:i}),this._dispatch()},rx.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},rx.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},rx.prototype._dispatch=function(){if(0===this._running&&0<this._queue.length){var t=this._job=this._queue.shift(),e=t.inputs[0].width,i=t.inputs[0].height,r=t.inputs.map(function(t){return t.data.buffer}),n=this._workers.length;if(1===(this._running=n))this._workers[0].postMessage({buffers:r,meta:t.meta,imageOps:this._imageOps,width:e,height:i},r);else for(var o=t.inputs[0].data.length,s=4*Math.ceil(o/4/n),a=0;a<n;++a){for(var h=a*s,l=[],u=0,c=r.length;u<c;++u)l.push(r[a].slice(h,h+s));this._workers[a].postMessage({buffers:l,meta:t.meta,imageOps:this._imageOps,width:e,height:i},l)}}},rx.prototype._onWorkerMessage=function(t,e){this._destroyed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},rx.prototype._resolveJob=function(){var t,e,i=this._job,r=this._workers.length;if(1===r)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var n=i.inputs[0].data.length;t=new Uint8ClampedArray(n),e=new Array(n);for(var o=4*Math.ceil(n/4/r),s=0;s<r;++s){var a=this._dataLookup[s].buffer,h=s*o;t.set(new Uint8ClampedArray(a),h),e[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},i.callback(null,tx(t,i.inputs[0].width,i.inputs[0].height),e),this._dispatch()};var nx=rx,ox="pixel",sx=function(t){function e(e,i,r){t.call(this,e),this.extent=i.extent,this.resolution=i.viewState.resolution/i.pixelRatio,this.data=r}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(C),ax=function(t){function i(i){t.call(this,{}),this.worker_=null,this.operationType_=void 0!==i.operationType?i.operationType:ox,this.threads_=void 0!==i.threads?i.threads:1,this.renderers_=function(t){for(var e=t.length,i=new Array(e),r=0;r<e;++r)i[r]=ux(t[r]);return i}(i.sources);for(var r=0,n=this.renderers_.length;r<n;++r)f(this.renderers_[r],R.CHANGE,this.changed,this);this.tileQueue_=new Ao(function(){return 1},this.changed.bind(this));for(var o=this.renderers_.map(function(t){return t.getLayer().getLayerState()}),s={},a=0,h=o.length;a<h;++a)s[e(o[a].layer)]=o[a];this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],extent:null,focus:null,index:0,layerStates:s,layerStatesArray:o,pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},void 0!==i.operation&&this.setOperation(i.operation,i.lib)}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.setOperation=function(t,e){this.worker_=new nx({operation:t,imageOps:"image"===this.operationType_,queue:1,lib:e,threads:this.threads_}),this.changed()},i.prototype.updateFrameState_=function(t,e,i){var r=s({},this.frameState_);r.viewState=s({},r.viewState);var n=st(t);r.extent=t.slice(),r.focus=n,r.size[0]=Math.round(pt(t)/e),r.size[1]=Math.round(ht(t)/e),r.time=Date.now(),r.animate=!1;var o=r.viewState;return o.center=n,o.projection=i,o.resolution=e,r},i.prototype.allSourcesReady_=function(){for(var t=!0,e=0,i=this.renderers_.length;e<i;++e)if(this.renderers_[e].getLayer().getSource().getState()!==is){t=!1;break}return t},i.prototype.getImage=function(t,e,i,r){if(!this.allSourcesReady_())return null;var n=this.updateFrameState_(t,e,r);if(this.requestedFrameState_=n,this.renderedImageCanvas_){var o=this.renderedImageCanvas_.getResolution(),s=this.renderedImageCanvas_.getExtent();e===o&&J(t,s)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),n.tileQueue.loadMoreTiles(16,16),n.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},i.prototype.processSources_=function(){for(var t=this.requestedFrameState_,e=this.renderers_.length,i=new Array(e),r=0;r<e;++r){var n=lx(this.renderers_[r],t,t.layerStatesArray[r]);if(!n)return;i[r]=n}var o={};this.dispatchEvent(new sx("beforeoperations",t,o)),this.worker_.process(i,o,this.onWorkerComplete_.bind(this,t))},i.prototype.onWorkerComplete_=function(t,e,i,r){if(!e&&i){var n,o=t.extent,s=t.viewState.resolution;if(s===this.requestedFrameState_.viewState.resolution&&J(o,this.requestedFrameState_.extent))this.renderedImageCanvas_?n=this.renderedImageCanvas_.getImage().getContext("2d"):(n=Ae(Math.round(pt(o)/s),Math.round(ht(o)/s)),this.renderedImageCanvas_=new hl(o,s,1,n.canvas)),n.putImageData(i,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new sx("afteroperations",t,r))}},i.prototype.getImageInternal=function(){return null},i}(km),hx=null;function lx(t,e,i){if(!t.prepareFrame(e,i))return null;var r=e.size[0],n=e.size[1];if(hx){var o=hx.canvas;o.width!==r||o.height!==n?hx=Ae(r,n):hx.clearRect(0,0,r,n)}else hx=Ae(r,n);return t.composeFrame(e,i,hx),hx.getImageData(0,0,r,n)}function ux(t){var e,i,r=null;return t instanceof Rm?(i=new em({source:t}),r=new Rl(i)):t instanceof km?(e=new Qv({source:t}),r=new Cl(e)):t instanceof em?r=new Rl(t):t instanceof cs&&(t.getType()==Ba.IMAGE||t.getType()==Ba.VECTOR)&&(r=new Cl(t)),r}var cx=['Map tiles by <a href="https://stamen.com/">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.',qm],px={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},dx={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}},fx=function(t){function e(e){var i=e.layer.indexOf("-"),r=-1==i?e.layer:e.layer.slice(0,i),n=dx[r],o=px[e.layer],s=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+o.extension;t.call(this,{attributions:cx,cacheSize:e.cacheSize,crossOrigin:"anonymous",maxZoom:null!=e.maxZoom?e.maxZoom:n.maxZoom,minZoom:null!=e.minZoom?e.minZoom:n.minZoom,opaque:o.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,url:s,wrapX:e.wrapX})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Mm),_x=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition}),this.params_=i.params||{},this.tmpExtent_=[1/0,1/0,-1/0,-1/0],this.setKey(this.getKeyForParams_())}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,i,r,n,o){var s=this.urls;if(s){var a=n.getCode().split(":").pop();return o.SIZE=e[0]+","+e[1],o.BBOX=i.join(","),o.BBOXSR=a,o.IMAGESR=a,o.DPI=Math.round(o.DPI?o.DPI*r:90*r),jm((1==s.length?s[0]:s[wt(sm(t),s.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.fixedTileUrlFunction=function(t,e,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){var n=r.getTileCoordExtent(t,this.tmpExtent_),o=hs(r.getTileSize(t[0]),this.tmpSize);1!=e&&(o=as(o,e,this.tmpSize));var a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return s(a,this.params_),this.getRequestUrl_(t,o,n,e,i,a)}},e.prototype.updateParams=function(t){s(this.params_,t),this.setKey(this.getKeyForParams_())},e}(bm),gx=function(t){function e(e,i,r){t.call(this,e,bn),this.tileSize_=i,this.text_=r,this.canvas_=null}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getImage=function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=Ae(t[0],t[1]);return e.strokeStyle="black",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.fillText(this.text_,t[0]/2,t[1]/2),this.canvas_=e.canvas,e.canvas},e.prototype.load=function(){},e}(An),yx=function(t){function e(e){t.call(this,{opaque:!1,projection:e.projection,tileGrid:e.tileGrid,wrapX:void 0===e.wrapX||e.wrapX})}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getTile=function(t,e,i){var r=nm(t,e,i);if(this.tileCache.containsKey(r))return this.tileCache.get(r);var n=hs(this.tileGrid.getTileSize(t)),o=[t,e,i],s=this.getTileCoordForTileUrlFunction(o),a=s?this.getTileCoordForTileUrlFunction(s).toString():"",h=new gx(o,n,a);return this.tileCache.set(r,h),h},e}(Rm),vx=function(t){function e(e){if(t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:ee("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:es,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.tileJSON_=null,e.url)if(e.jsonp)pm(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var i=new XMLHttpRequest;i.addEventListener("load",this.onXHRLoad_.bind(this)),i.addEventListener("error",this.onXHRError_.bind(this)),i.open("GET",e.url),i.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):A(!1,51)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||200<=e.status&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTileJSON=function(){return this.tileJSON_},e.prototype.handleTileJSONResponse=function(t){var e,i=ee("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var n=he(i,r);e=gt(t.bounds,n)}var o=t.minzoom||0,s=t.maxzoom||22,a=Em({extent:wm(r),maxZoom:s,minZoom:o});if(this.tileGrid=a,this.tileUrlFunction=hm(t.tiles,a),void 0!==t.attribution&&!this.getAttributions()){var h=void 0!==e?e:i.getExtent();this.setAttributions(function(e){return dt(h,e.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState(is)},e.prototype.handleTileJSONError=function(){this.setState(rs)},e}(bm),mx=function(t){function e(e){var i=e||{},r=i.params||{},n=!("TRANSPARENT"in r)||r.TRANSPARENT;t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:!n,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition}),this.gutter_=void 0!==i.gutter?i.gutter:0,this.params_=r,this.v13_=!0,this.serverType_=i.serverType,this.hidpi_=void 0===i.hidpi||i.hidpi,this.tmpExtent_=[1/0,1/0,-1/0,-1/0],this.updateV13_(),this.setKey(this.getKeyForParams_())}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getGetFeatureInfoUrl=function(t,e,i,r){var n=ee(i),o=this.getProjection(),a=this.getTileGrid();a||(a=this.getTileGridForProjection(n));var h=a.getTileCoordForCoordAndResolution(t,e);if(!(a.getResolutions().length<=h[0])){var l=a.getResolution(h[0]),u=a.getTileCoordExtent(h,this.tmpExtent_),c=hs(a.getTileSize(h[0]),this.tmpSize),p=this.gutter_;0!==p&&(c=ss(c,p,this.tmpSize),u=j(u,l*p,u)),o&&o!==n&&(l=fm(o,n,t,l),u=ce(u,n,o),t=ue(t,n,o));var d={SERVICE:"WMS",VERSION:zm,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};s(d,this.params_,r);var f=Math.floor((t[0]-u[0])/l),_=Math.floor((u[3]-t[1])/l);return d[this.v13_?"I":"X"]=f,d[this.v13_?"J":"Y"]=_,this.getRequestUrl_(h,c,u,1,o||n,d)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,i,r,n,o){var s=this.urls;if(s){if(o.WIDTH=e[0],o.HEIGHT=e[1],o[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=r)switch(this.serverType_){case Wm:var a=90*r+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+a:o.FORMAT_OPTIONS="dpi:"+a;break;case Km:o.MAP_RESOLUTION=90*r;break;case Vm:case"qgis":o.DPI=90*r;break;default:A(!1,52)}var h,l=n.getAxisOrientation(),u=i;return this.v13_&&"ne"==l.substr(0,2)&&(h=i[0],u[0]=i[1],u[1]=h,h=i[2],u[2]=i[3],u[3]=h),o.BBOX=u.join(","),jm(1==s.length?s[0]:s[wt(sm(t),s.length)],o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},e.prototype.fixedTileUrlFunction=function(t,e,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var n=r.getResolution(t[0]),o=r.getTileCoordExtent(t,this.tmpExtent_),a=hs(r.getTileSize(t[0]),this.tmpSize),h=this.gutter_;0!==h&&(a=ss(a,h,this.tmpSize),o=j(o,n*h,o)),1!=e&&(a=as(a,e,this.tmpSize));var l={SERVICE:"WMS",VERSION:zm,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return s(l,this.params_),this.getRequestUrl_(t,a,o,e,i,l)}},e.prototype.updateParams=function(t){s(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||zm;this.v13_=0<=en(t,"1.3")},e}(bm),xx=function(t){function e(e,i,r,n,o,s){t.call(this,e,i),this.src_=r,this.extent_=n,this.preemptive_=o,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=s}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getImage=function(){return null},e.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),r=this.grid_[Math.floor((1-i)*this.grid_.length)];if("string"!=typeof r)return null;var n=r.charCodeAt(Math.floor(e*r.length));93<=n&&n--,35<=n&&n--;var o=null;if((n-=32)in this.keys_){var s=this.keys_[n];o=this.data_&&s in this.data_?this.data_[s]:s}return o},e.prototype.forDataAtCoordinate=function(t,e,i,r){this.state==Ln&&!0===r?(_(this,R.CHANGE,function(r){e.call(i,this.getData(t))},this),this.loadInternal_()):!0===r?setTimeout(function(){e.call(i,this.getData(t))}.bind(this),0):e.call(i,this.getData(t))},e.prototype.getKey=function(){return this.src_},e.prototype.handleError_=function(){this.state=3,this.changed()},e.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=Fn,this.changed()},e.prototype.loadInternal_=function(){if(this.state==Ln)if(this.state=1,this.jsonp_)pm(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||200<=e.status&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(i)}else this.handleError_()},e.prototype.onXHRError_=function(t){this.handleError_()},e.prototype.load=function(){this.preemptive_&&this.loadInternal_()},e}(An),Sx=function(t){function e(e){if(t.call(this,{projection:ee("EPSG:3857"),state:es}),this.preemptive_=void 0===e.preemptive||e.preemptive,this.tileUrlFunction_=um,this.template_=void 0,this.jsonp_=e.jsonp||!1,e.url)if(this.jsonp_)pm(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var i=new XMLHttpRequest;i.addEventListener("load",this.onXHRLoad_.bind(this)),i.addEventListener("error",this.onXHRError_.bind(this)),i.open("GET",e.url),i.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):A(!1,51)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||200<=e.status&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTemplate=function(){return this.template_},e.prototype.forDataAtCoordinateAndResolution=function(t,e,i,r){if(this.tileGrid){var n=this.tileGrid.getTileCoordForCoordAndResolution(t,e);this.getTile(n[0],n[1],n[2],1,this.getProjection()).forDataAtCoordinate(t,i,null,r)}else!0===r?setTimeout(function(){i(null)},0):i(null)},e.prototype.handleTileJSONError=function(){this.setState(rs)},e.prototype.handleTileJSONResponse=function(t){var e,i=ee("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var n=he(i,r);e=gt(t.bounds,n)}var o=t.minzoom||0,s=t.maxzoom||22,a=Em({extent:wm(r),maxZoom:s,minZoom:o});this.tileGrid=a,this.template_=t.template;var h=t.grids;if(h){if(this.tileUrlFunction_=hm(h,a),void 0!==t.attribution){var l=void 0!==e?e:i.getExtent();this.setAttributions(function(e){return dt(l,e.extent)?[t.attribution]:null})}this.setState(is)}else this.setState(rs)},e.prototype.getTile=function(t,e,i,r,n){var o=nm(t,e,i);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,n),h=this.tileUrlFunction_(a,r,n),l=new xx(s,void 0!==h?Ln:Fn,void 0!==h?h:"",this.tileGrid.getTileCoordExtent(s),this.preemptive_,this.jsonp_);return this.tileCache.set(o,l),l},e.prototype.useTile=function(t,e,i){var r=nm(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e}(Rm),Ex=function(t){function i(e,r,n,o,s,a,h,l,u,c,p,d,_,g,y){if(t.call(this,e,r,{transition:0}),this.context_={},this.loader_,this.replayState_={},this.sourceTiles_=c,this.tileKeys=[],this.extent=null,this.sourceRevision_=n,this.wrappedTileCoord=a,this.loadListenerKeys_=[],this.sourceTileListenerKeys_=[],a){var v=this.extent=u.getTileCoordExtent(a),m=u.getResolution(y),x=l.getZForResolution(m),S=y!=e[0],C=0;if(l.forEachTileCoord(v,x,function(t){var e=lt(v,l.getTileCoordExtent(t)),i=l.getExtent();if(i&&(e=lt(e,i,e)),.5<=pt(e)/m&&.5<=ht(e)/m){++C;var r=t.toString(),n=c[r];if(!n&&!S){var a=h(t,p,d);n=c[r]=new _(t,null==a?Fn:Ln,null==a?"":a,o,s),this.sourceTileListenerKeys_.push(f(n,R.CHANGE,g))}!n||S&&n.getState()!=bn||(n.consumers++,this.tileKeys.push(r))}}.bind(this)),S&&C==this.tileKeys.length&&this.finishLoading_(),y<=e[0]&&this.state!=bn)for(;y>u.getMinZoom();){var T=new i(e,r,n,o,s,a,h,l,u,c,p,d,_,E,--y);if(T.state==bn){this.interimTile=T;break}}}}return t&&(i.__proto__=t),((i.prototype=Object.create(t&&t.prototype)).constructor=i).prototype.disposeInternal=function(){this.state=5,this.changed(),this.interimTile&&this.interimTile.dispose();for(var e=0,i=this.tileKeys.length;e<i;++e){var r=this.tileKeys[e],n=this.getTile(r);n.consumers--,0==n.consumers&&(delete this.sourceTiles_[r],n.dispose())}this.tileKeys.length=0,this.sourceTiles_=null,this.loadListenerKeys_.forEach(y),this.loadListenerKeys_.length=0,this.sourceTileListenerKeys_.forEach(y),this.sourceTileListenerKeys_.length=0,t.prototype.disposeInternal.call(this)},i.prototype.getContext=function(t){var i=e(t).toString();return i in this.context_||(this.context_[i]=Ae()),this.context_[i]},i.prototype.getImage=function(t){return-1==this.getReplayState(t).renderedTileRevision?null:this.getContext(t).canvas},i.prototype.getReplayState=function(t){var i=e(t).toString();return i in this.replayState_||(this.replayState_[i]={dirty:!1,renderedRenderOrder:null,renderedRevision:-1,renderedTileRevision:-1}),this.replayState_[i]},i.prototype.getKey=function(){return this.tileKeys.join("/")+"-"+this.sourceRevision_},i.prototype.getTile=function(t){return this.sourceTiles_[t]},i.prototype.load=function(){var t=0,i={};this.state==Ln&&this.setState(1),1==this.state&&this.tileKeys.forEach(function(r){var n=this.getTile(r);if(n.state==Ln&&(n.setLoader(this.loader_),n.load()),1==n.state){var o=f(n,R.CHANGE,function(r){var o=n.getState();if(o==bn||3==o){var s=e(n);3==o?i[s]=!0:(--t,delete i[s]),t-Object.keys(i).length==0&&this.finishLoading_()}}.bind(this));this.loadListenerKeys_.push(o),++t}}.bind(this)),t-Object.keys(i).length==0&&setTimeout(this.finishLoading_.bind(this),0)},i.prototype.finishLoading_=function(){for(var t=this.tileKeys.length,e=0,i=t-1;0<=i;--i){var r=this.getTile(this.tileKeys[i]).getState();r!=bn&&--t,r==Fn&&++e}t==this.tileKeys.length?(this.loadListenerKeys_.forEach(y),this.loadListenerKeys_.length=0,this.setState(bn)):this.setState(e==this.tileKeys.length?Fn:3)},i}(An);function Cx(t,e){var i=Ka(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(i)}var Tx=function(t){function e(e){var i=e.projection||"EPSG:3857",r=e.extent||wm(i),n=e.tileGrid||Em({extent:r,maxZoom:e.maxZoom||22,minZoom:e.minZoom,tileSize:e.tileSize||512});t.call(this,{attributions:e.attributions,cacheSize:void 0!==e.cacheSize?e.cacheSize:128,extent:r,opaque:!1,projection:i,state:e.state,tileGrid:n,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Cx,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.format_=e.format?e.format:null,this.sourceTiles_={},this.overlaps_=null==e.overlaps||e.overlaps,this.tileClass=e.tileClass?e.tileClass:Su,this.tileGrids_={}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTiles_={}},e.prototype.getTile=function(t,e,i,r,n){var o=nm(t,e,i);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var s=[t,e,i],a=this.getTileCoordForTileUrlFunction(s,n),h=new Ex(s,null!==a?Ln:Fn,this.getRevision(),this.format_,this.tileLoadFunction,a,this.tileUrlFunction,this.tileGrid,this.getTileGridForProjection(n),this.sourceTiles_,r,n,this.tileClass,this.handleTileChange.bind(this),s[0]);return this.tileCache.set(o,h),h},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),i=this.tileGrids_[e];if(!i){var r=this.tileGrid;i=this.tileGrids_[e]=Tm(t,void 0,r?r.getTileSize(r.getMinZoom()):void 0)}return i},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,i){var r=hs(this.getTileGridForProjection(i).getTileSize(t),this.tmpSize);return[Math.round(r[0]*e),Math.round(r[1]*e)]},e}(Lm),wx={KVP:"KVP",REST:"REST"},Rx=function(t){function e(e){t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(xm);function Ix(t,e,i){var r=[],n=[],o=[],s=[],a=[],h=void 0!==i?i:[],l="TileMatrix",u="Identifier",c="ScaleDenominator",p="TopLeftCorner",d=t.SupportedCRS,f=ee(d.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||ee(d),_=f.getMetersPerUnit(),g="ne"==f.getAxisOrientation().substr(0,2);return t[l].sort(function(t,e){return e[c]-t[c]}),t[l].forEach(function(e){if(!(0<h.length)||lr(h,function(i){return e[u]==i[l]||-1===e[u].indexOf(":")&&t[u]+":"+e[u]===i[l]})){n.push(e[u]);var i=28e-5*e[c]/_,d=e.TileWidth,f=e.TileHeight;g?o.push([e[p][1],e[p][0]]):o.push(e[p]),r.push(i),s.push(d==f?d:[d,f]),a.push([e.MatrixWidth,-e.MatrixHeight])}}),new Rx({extent:e,origins:o,resolutions:r,matrixIds:n,tileSizes:s,sizes:a})}var Lx=function(t){function e(e){var i=void 0!==e.requestEncoding?e.requestEncoding:wx.KVP,r=e.tileGrid,n=e.urls;void 0===n&&void 0!==e.url&&(n=cm(e.url)),t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:um,urls:n,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition}),this.version_=void 0!==e.version?e.version:"1.0.0",this.format_=void 0!==e.format?e.format:"image/jpeg",this.dimensions_=void 0!==e.dimensions?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=i,this.setKey(this.getKeyForDimensions_()),n&&0<n.length&&(this.tileUrlFunction=lm(n.map(bx.bind(this))))}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.setUrls=function(t){var e=(this.urls=t).join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):lm(t.map(bx.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var i in this.dimensions_)e[t++]=i+"-"+this.dimensions_[i];return e.join("/")},e.prototype.updateDimensions=function(t){s(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e}(bm);function bx(t){var e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==wx.KVP&&s(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==wx.KVP?jm(t,i):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in i?i[e.toLowerCase()]:t});var r=this.tileGrid,n=this.dimensions_;return function(i,o,a){if(i){var h={TileMatrix:r.getMatrixId(i[0]),TileCol:i[1],TileRow:-i[2]-1};s(h,n);var l=t;return e==wx.KVP?jm(l,h):l.replace(/\{(\w+?)\}/g,function(t,e){return h[e]})}}}var Fx="default",Px="truncated",Mx=function(t){function e(e,i,r,n,o,s,a){t.call(this,i,r,n,o,s,a),this.zoomifyImage_=null,this.tileSize_=hs(e.getTileSize(i[0]))}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=t.prototype.getImage.call(this);if(this.state==bn){var i=this.tileSize_;if(e.width==i[0]&&e.height==i[1])return this.zoomifyImage_=e;var r=Ae(i[0],i[1]);return r.drawImage(e,0,0),this.zoomifyImage_=r.canvas,r.canvas}return e},e}(Gn),Ox=function(t){function e(e){var i=e||{},r=i.size,n=void 0!==i.tierSizeCalculation?i.tierSizeCalculation:Fx,o=r[0],s=r[1],a=i.extent||[0,-r[1],r[0],0],h=[],l=i.tileSize||ko,u=l;switch(n){case Fx:for(;u<o||u<s;)h.push([Math.ceil(o/u),Math.ceil(s/u)]),u+=u;break;case Px:for(var c=o,p=s;u<c||u<p;)h.push([Math.ceil(c/u),Math.ceil(p/u)]),c>>=1,p>>=1;break;default:A(!1,53)}h.push([1,1]),h.reverse();for(var d=[1],f=[0],_=1,g=h.length;_<g;_++)d.push(1<<_),f.push(h[_-1][0]*h[_-1][1]+f[_-1]);d.reverse();var y=new xm({tileSize:l,extent:a,origin:ut(a),resolutions:d}),v=i.url;v&&-1==v.indexOf("{TileGroup}")&&-1==v.indexOf("{tileIndex}")&&(v+="{TileGroup}/{z}-{x}-{y}.jpg");var m=lm(cm(v).map(function(t){return function(e,i,r){if(e){var n=e[0],o=e[1],s=-e[2]-1,a=o+s*h[n][0],l=y.getTileSize(n),u={z:n,x:o,y:s,tileIndex:a,TileGroup:"TileGroup"+((a+f[n])/l|0)};return t.replace(/\{(\w+?)\}/g,function(t,e){return u[e]})}}})),x=Mx.bind(null,y);t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:x,tileGrid:y,tileUrlFunction:m,transition:i.transition})}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(bm),Nx=window.ol={};Nx.array={},Nx.color={},Nx.colorlike={},Nx.control={},Nx.coordinate={},Nx.easing={},Nx.events={},Nx.events.condition={},Nx.extent={},Nx.featureloader={},Nx.format={},Nx.format.filter={},Nx.geom={},Nx.has={},Nx.interaction={},Nx.layer={},Nx.loadingstrategy={},Nx.proj={},Nx.proj.Units={},Nx.proj.proj4={},Nx.render={},Nx.render.canvas={},Nx.renderer={},Nx.renderer.canvas={},Nx.renderer.webgl={},Nx.size={},Nx.source={},Nx.sphere={},Nx.style={},Nx.style.IconImageCache={},Nx.tilegrid={},Nx.util={},Nx.xml={},Nx.Collection=N,Nx.Feature=Hi,Nx.Geolocation=$r,Nx.Graticule=wn,Nx.Kinetic=Dn,Nx.Map=au,Nx.Object=b,Nx.Observable=I,Nx.Observable.unByKey=function(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)y(t[e]);else y(t)},Nx.Overlay=mu,Nx.PluggableMap=ls,Nx.View=Vo,Nx.WebGLMap=Dc,Nx.array.stableSort=cr,Nx.color.asArray=Pe,Nx.color.asString=Ie,Nx.colorlike.asColorLike=Ne,Nx.control.Attribution=ds,Nx.control.Attribution.render=fs,Nx.control.Control=us,Nx.control.FullScreen=Eu,Nx.control.MousePosition=Yc,Nx.control.MousePosition.render=Bc,Nx.control.OverviewMap=Ru,Nx.control.OverviewMap.render=Iu,Nx.control.Rotate=_s,Nx.control.Rotate.render=gs,Nx.control.ScaleLine=Mu,Nx.control.ScaleLine.render=Ou,Nx.control.Zoom=ys,Nx.control.ZoomSlider=Au,Nx.control.ZoomSlider.render=Gu,Nx.control.ZoomToExtent=ku,Nx.control.defaults=vs,Nx.coordinate.add=rn,Nx.coordinate.createStringXY=function(t){return function(e){return dn(e,t)}},Nx.coordinate.format=sn,Nx.coordinate.rotate=hn,Nx.coordinate.toStringHDMS=function(t,e){return t?on("NS",t[1],e)+" "+on("EW",t[0],e):""},Nx.coordinate.toStringXY=dn,Nx.easing.easeIn=Pn,Nx.easing.easeOut=Mn,Nx.easing.inAndOut=On,Nx.easing.linear=Nn,Nx.easing.upAndDown=function(t){return t<.5?On(2*t):1-On(2*(t-.5))},Nx.events.condition.altKeyOnly=Ls,Nx.events.condition.altShiftKeysOnly=bs,Nx.events.condition.always=Ps,Nx.events.condition.click=function(t){return t.type==Yn.CLICK},Nx.events.condition.doubleClick=function(t){return t.type==Yn.DBLCLICK},Nx.events.condition.focus=Fs,Nx.events.condition.mouseOnly=js,Nx.events.condition.never=Os,Nx.events.condition.noModifierKeys=Gs,Nx.events.condition.platformModifierKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&(ri?e.metaKey:e.ctrlKey)&&!e.shiftKey},Nx.events.condition.pointerMove=Ns,Nx.events.condition.primaryAction=Us,Nx.events.condition.shiftKeyOnly=ks,Nx.events.condition.singleClick=As,Nx.events.condition.targetNotEditable=Ds,Nx.extent.applyTransform=gt,Nx.extent.boundingExtent=D,Nx.extent.buffer=j,Nx.extent.containsCoordinate=B,Nx.extent.containsExtent=X,Nx.extent.containsXY=z,Nx.extent.createEmpty=W,Nx.extent.equals=J,Nx.extent.extend=Q,Nx.extent.getArea=rt,Nx.extent.getBottomLeft=nt,Nx.extent.getBottomRight=ot,Nx.extent.getCenter=st,Nx.extent.getHeight=ht,Nx.extent.getIntersection=lt,Nx.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},Nx.extent.getTopLeft=ut,Nx.extent.getTopRight=ct,Nx.extent.getWidth=pt,Nx.extent.intersects=dt,Nx.extent.isEmpty=ft,Nx.featureloader.xhr=Ha,Nx.format.EsriJSON=Zc,Nx.format.Feature=Xc,Nx.format.GML=Yp,Nx.format.GML2=zp,Nx.format.GML3=Up,Nx.format.GPX=qp,Nx.format.GeoJSON=Id,Nx.format.IGC=Hd,Nx.format.KML=_f,Nx.format.MVT=cg,Nx.format.OSMXML=mg,Nx.format.Polyline=Cg,Nx.format.Polyline.decodeDeltas=wg,Nx.format.Polyline.decodeFloats=Ig,Nx.format.Polyline.encodeDeltas=Tg,Nx.format.Polyline.encodeFloats=Rg,Nx.format.TopoJSON=bg,Nx.format.WFS=gy,Nx.format.WFS.writeFilter=function(t){var e=ip(dy,"Filter");return Ey(e,t,[]),e},Nx.format.WKT=ky,Nx.format.WMSCapabilities=Zy,Nx.format.WMSGetFeatureInfo=_v,Nx.format.WMTSCapabilities=Av,Nx.format.filter.Bbox=jg,Nx.format.filter.Contains=Yg,Nx.format.filter.During=Xg,Nx.format.filter.EqualTo=Vg,Nx.format.filter.GreaterThan=Wg,Nx.format.filter.GreaterThanOrEqualTo=Kg,Nx.format.filter.Intersects=Hg,Nx.format.filter.IsBetween=Zg,Nx.format.filter.IsLike=qg,Nx.format.filter.IsNull=Jg,Nx.format.filter.LessThan=Qg,Nx.format.filter.LessThanOrEqualTo=$g,Nx.format.filter.Not=ty,Nx.format.filter.NotEqualTo=ey,Nx.format.filter.Or=iy,Nx.format.filter.Within=ry,Nx.format.filter.and=ny,Nx.format.filter.bbox=oy,Nx.format.filter.between=function(t,e,i){return new Zg(t,e,i)},Nx.format.filter.contains=function(t,e,i){return new Yg(t,e,i)},Nx.format.filter.during=function(t,e,i){return new Xg(t,e,i)},Nx.format.filter.equalTo=function(t,e,i){return new Vg(t,e,i)},Nx.format.filter.greaterThan=function(t,e){return new Wg(t,e)},Nx.format.filter.greaterThanOrEqualTo=function(t,e){return new Kg(t,e)},Nx.format.filter.intersects=function(t,e,i){return new Hg(t,e,i)},Nx.format.filter.isNull=function(t){return new Jg(t)},Nx.format.filter.lessThan=function(t,e){return new Qg(t,e)},Nx.format.filter.lessThanOrEqualTo=function(t,e){return new $g(t,e)},Nx.format.filter.like=function(t,e,i,r,n,o){return new qg(t,e,i,r,n,o)},Nx.format.filter.not=function(t){return new ty(t)},Nx.format.filter.notEqualTo=function(t,e,i){return new ey(t,e,i)},Nx.format.filter.or=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(iy,e))},Nx.format.filter.within=function(t,e,i){return new ry(t,e,i)},Nx.geom.Circle=ka,Nx.geom.Geometry=Te,Nx.geom.GeometryCollection=wd,Nx.geom.LineString=yn,Nx.geom.LinearRing=Or,Nx.geom.MultiLineString=Da,Nx.geom.MultiPoint=ja,Nx.geom.MultiPolygon=Ya,Nx.geom.Point=Nr,Nx.geom.Polygon=Hr,Nx.geom.Polygon.circular=Zr,Nx.geom.Polygon.fromCircle=Jr,Nx.geom.Polygon.fromExtent=qr,Nx.geom.SimpleGeometry=fr,Nx.has.DEVICE_PIXEL_RATIO=ni,Nx.has.GEOLOCATION=si,Nx.has.TOUCH=ai,Nx.inherits=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Nx.interaction.DoubleClickZoom=Rs,Nx.interaction.DragAndDrop=Fa,Nx.interaction.DragBox=sa,Nx.interaction.DragPan=Zs,Nx.interaction.DragRotate=$s,Nx.interaction.DragRotateAndZoom=Oa,Nx.interaction.DragZoom=ca,Nx.interaction.Draw=Eh,Nx.interaction.Draw.createBox=function(){return function(t,e){var i=D(t),r=[[nt(i),ot(i),ct(i),ut(i),nt(i)]],n=e;return n?n.setCoordinates(r):n=new Hr(r),n}},Nx.interaction.Draw.createRegularPolygon=function(t,e){return function(i,r){var n=i[0],o=i[1],s=Math.sqrt(un(n,o)),a=r||Jr(new ka(n),t),h=e;if(!e){var l=o[0]-n[0],u=o[1]-n[1];h=Math.atan(u/l)-(l<0?Math.PI:0)}return Qr(a,n,s,h),a}},Nx.interaction.Draw.handleEvent=Ch,Nx.interaction.Extent=Lh,Nx.interaction.Interaction=xs,Nx.interaction.KeyboardPan=fa,Nx.interaction.KeyboardZoom=ga,Nx.interaction.Modify=jh,Nx.interaction.MouseWheelZoom=ma,Nx.interaction.PinchRotate=Sa,Nx.interaction.PinchZoom=wa,Nx.interaction.Pointer=Vs,Nx.interaction.Pointer.handleEvent=Ks,Nx.interaction.Select=Zh,Nx.interaction.Snap=Jh,Nx.interaction.Translate=il,Nx.interaction.defaults=al,Nx.layer.Base=ts,Nx.layer.Group=os,Nx.layer.Heatmap=Jv,Nx.layer.Image=Qv,Nx.layer.Tile=em,Nx.layer.Vector=Va,Nx.layer.VectorTile=im,Nx.loadingstrategy.all=Za,Nx.loadingstrategy.bbox=function(t,e){return[t]},Nx.loadingstrategy.tile=function(t){return function(e,i){var r=t.getZForResolution(i),n=t.getTileRangeForExtentAndZ(e,r),o=[],s=[r,0,0];for(s[1]=n.minX;s[1]<=n.maxX;++s[1])for(s[2]=n.minY;s[2]<=n.maxY;++s[2])o.push(t.getTileCoordExtent(s));return o}},Nx.proj.Projection=Nt,Nx.proj.Units.METERS_PER_UNIT=Ot,Nx.proj.addCoordinateTransforms=se,Nx.proj.addEquivalentProjections=re,Nx.proj.addProjection=te,Nx.proj.equivalent=ae,Nx.proj.fromLonLat=function(t,e){return ue(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")},Nx.proj.get=ee,Nx.proj.getPointResolution=ie,Nx.proj.getTransform=le,Nx.proj.proj4.register=function(t){var e,i,r=Object.keys(t.defs),n=r.length;for(e=0;e<n;++e){var o=r[e];if(!ee(o)){var s=t.defs(o);te(new Nt({code:o,axisOrientation:s.axis,metersPerUnit:s.to_meter,units:s.units}))}}for(e=0;e<n;++e){var a=r[e],h=ee(a);for(i=0;i<n;++i){var l=r[i],u=ee(l);if(!Jt(a,l))if(t.defs[a]===t.defs[l])re([h,u]);else{var c=t(a,l);se(h,u,c.forward,c.inverse)}}}},Nx.proj.toLonLat=function(t,e){var i=ue(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),r=i[0];return(r<-180||180<r)&&(i[0]=wt(r+180,360)-180),i},Nx.proj.transform=ue,Nx.proj.transformExtent=ce,Nx.render.VectorContext=ul,Nx.render.canvas.labelCache=wi,Nx.render.toContext=function(t,e){var i=t.canvas,r=e||{},n=r.pixelRatio||ni,o=r.size;o&&(i.width=o[0]*n,i.height=o[1]*n,i.style.width=o[0]+"px",i.style.height=o[1]+"px");var s=[0,0,i.width,i.height],a=me([1,0,0,1,0,0],n,n);return new cl(t,n,s,a,0)},Nx.renderer.canvas.ImageLayer=Cl,Nx.renderer.canvas.Map=ml,Nx.renderer.canvas.TileLayer=Rl,Nx.renderer.canvas.VectorLayer=$l,Nx.renderer.canvas.VectorTileLayer=ou,Nx.renderer.webgl.ImageLayer=Pc,Nx.renderer.webgl.Map=Mc,Nx.renderer.webgl.TileLayer=Gc,Nx.renderer.webgl.VectorLayer=kc,Nx.size.toSize=hs,Nx.source.BingMaps=Pm,Nx.source.CartoDB=Om,Nx.source.Cluster=Nm,Nx.source.Image=km,Nx.source.ImageArcGISRest=Um,Nx.source.ImageCanvas=Ym,Nx.source.ImageMapGuide=Bm,Nx.source.ImageStatic=Xm,Nx.source.ImageWMS=Zm,Nx.source.OSM=Jm,Nx.source.OSM.ATTRIBUTION=qm,Nx.source.Raster=ax,Nx.source.Source=qa,Nx.source.Stamen=fx,Nx.source.Tile=Rm,Nx.source.TileArcGISRest=_x,Nx.source.TileDebug=yx,Nx.source.TileImage=bm,Nx.source.TileJSON=vx,Nx.source.TileWMS=mx,Nx.source.UTFGrid=Sx,Nx.source.Vector=vh,Nx.source.VectorTile=Tx,Nx.source.WMTS=Lx,Nx.source.WMTS.optionsFromCapabilities=function(t,e){var i=lr(t.Contents.Layer,function(t,i,r){return t.Identifier==e.layer});if(null===i)return null;var r,n=t.Contents.TileMatrixSet;(r=1<i.TileMatrixSetLink.length?pr(i.TileMatrixSetLink,"projection"in e?function(t,i,r){var o=lr(n,function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS,s=ee(o.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||ee(o),a=ee(e.projection);return s&&a?ae(s,a):o==e.projection}:function(t,i,r){return t.TileMatrixSet==e.matrixSet}):0)<0&&(r=0);var o=i.TileMatrixSetLink[r].TileMatrixSet,s=i.TileMatrixSetLink[r].TileMatrixSetLimits,a=i.Format[0];"format"in e&&(a=e.format),(r=pr(i.Style,function(t,i,r){return"style"in e?t.Title==e.style:t.isDefault}))<0&&(r=0);var h=i.Style[r].Identifier,l={};"Dimension"in i&&i.Dimension.forEach(function(t,e,i){var r=t.Identifier,n=t.Default;void 0===n&&(n=t.Value[0]),l[r]=n});var u,c=lr(t.Contents.TileMatrixSet,function(t,e,i){return t.Identifier==o}),p=c.SupportedCRS;if(p&&(u=ee(p.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||ee(p)),"projection"in e){var d=ee(e.projection);d&&(u&&!ae(d,u)||(u=d))}var f,_,g=i.WGS84BoundingBox;if(void 0!==g){var y=ee("EPSG:4326").getExtent();_=g[0]==y[0]&&g[2]==y[2],f=ce(g,"EPSG:4326",u);var v=u.getExtent();v&&(X(v,f)||(f=void 0))}var m=Ix(c,f,s),x=[],S=e.requestEncoding;if(S=void 0!==S?S:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var E=t.OperationsMetadata.GetTile.DCP.HTTP.Get,C=0,T=E.length;C<T;++C)if(E[C].Constraint){var w=lr(E[C].Constraint,function(t){return"GetEncoding"==t.name}).AllowedValues.Value;if(""===S&&(S=w[0]),S!==wx.KVP)break;or(w,wx.KVP)&&x.push(E[C].href)}else E[C].href&&(S=wx.KVP,x.push(E[C].href));return 0===x.length&&(S=wx.REST,i.ResourceURL.forEach(function(t){"tile"===t.resourceType&&(a=t.format,x.push(t.template))})),{urls:x,layer:e.layer,matrixSet:o,format:a,projection:u,requestEncoding:S,tileGrid:m,style:h,dimensions:l,wrapX:_,crossOrigin:e.crossOrigin}},Nx.source.XYZ=Mm,Nx.source.Zoomify=Ox,Nx.sphere.getArea=function t(e,i){var r=i||{},n=r.radius||Lt,o=r.projection||"EPSG:3857",s=e.getType();s!==It.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var a,h,l,u,c,p,d=0;switch(s){case It.POINT:case It.MULTI_POINT:case It.LINE_STRING:case It.MULTI_LINE_STRING:case It.LINEAR_RING:break;case It.POLYGON:for(a=e.getCoordinates(),d=Math.abs(Pt(a[0],n)),l=1,u=a.length;l<u;++l)d-=Math.abs(Pt(a[l],n));break;case It.MULTI_POLYGON:for(l=0,u=(a=e.getCoordinates()).length;l<u;++l)for(h=a[l],d+=Math.abs(Pt(h[0],n)),c=1,p=h.length;c<p;++c)d-=Math.abs(Pt(h[c],n));break;case It.GEOMETRY_COLLECTION:var f=e.getGeometries();for(l=0,u=f.length;l<u;++l)d+=t(f[l],i);break;default:throw new Error("Unsupported geometry type: "+s)}return d},Nx.sphere.getDistance=bt,Nx.sphere.getLength=function t(e,i){var r=i||{},n=r.radius||Lt,o=r.projection||"EPSG:3857",s=e.getType();s!==It.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var a,h,l,u,c,p,d=0;switch(s){case It.POINT:case It.MULTI_POINT:break;case It.LINE_STRING:case It.LINEAR_RING:d=Ft(a=e.getCoordinates(),n);break;case It.MULTI_LINE_STRING:case It.POLYGON:for(l=0,u=(a=e.getCoordinates()).length;l<u;++l)d+=Ft(a[l],n);break;case It.MULTI_POLYGON:for(l=0,u=(a=e.getCoordinates()).length;l<u;++l)for(c=0,p=(h=a[l]).length;c<p;++c)d+=Ft(h[c],n);break;case It.GEOMETRY_COLLECTION:var f=e.getGeometries();for(l=0,u=f.length;l<u;++l)d+=t(f[l],i);break;default:throw new Error("Unsupported geometry type: "+s)}return d},Nx.style.AtlasManager=Sc,Nx.style.Circle=Ui,Nx.style.Fill=Yi,Nx.style.Icon=Qd,Nx.style.IconImageCache.shared=fl,Nx.style.Image=Di,Nx.style.RegularShape=ji,Nx.style.Stroke=Bi,Nx.style.Style=Xi,Nx.style.Text=En,Nx.tilegrid.TileGrid=xm,Nx.tilegrid.WMTS=Rx,Nx.tilegrid.WMTS.createFromCapabilitiesMatrixSet=Ix,Nx.tilegrid.createXYZ=Em,Nx.util.getUid=e,Nx.xml.getAllTextContent=rp,Nx.xml.parse=sp}();</script>
    <script>ol.control.Search=function(t){var e=this;t||(t={}),null==t.typing&&(t.typing=300),this._classname=t.className||"search";var o=document.createElement("DIV"),i=(t.className||"")+" ol-search";if(t.target||(i+=" ol-unselectable ol-control ol-collapsed",this.button=document.createElement("BUTTON"),this.button.setAttribute("type","button"),this.button.setAttribute("title",t.label||"search"),this.button.addEventListener("click",function(){if(o.classList.toggle("ol-collapsed"),!o.classList.contains("ol-collapsed")){o.querySelector("input.search").focus();for(var t=o.querySelectorAll("li"),i=0;i<t.length;i++)t[i].classList.remove("select");a.value||e.drawList_()}}),o.appendChild(this.button)),o.setAttribute("class",i),t.inputLabel){var r=document.createElement("LABEL");r.innerText=t.inputLabel,o.appendChild(r)}var s,n="",a=this._input=document.createElement("INPUT");a.setAttribute("type","search"),a.setAttribute("class","search"),a.setAttribute("placeholder",t.placeholder||"Search..."),a.addEventListener("change",function(t){e.dispatchEvent({type:"change:input",input:t,value:a.value})});var l=function(i){var r=o.querySelector("ul.autocomplete li.select"),l=a.value;"ArrowDown"==i.key||"ArrowUp"==i.key||"Down"==i.key||"Up"==i.key?r?(r.classList.remove("select"),(r=/Down/.test(i.key)?r.nextElementSibling:r.previousElementSibling)&&r.classList.add("select")):o.querySelector("ul.autocomplete li").classList.add("select"):"input"!=i.type||l?!r||"search"!=i.type&&"Enter"!=i.key?"search"==i.type||"Enter"==i.key||n!=l&&t.typing>=0?(n=l)?(s&&clearTimeout(s),s=setTimeout(function(){if(n.length>=e.get("minLength")){var t=e.autocomplete(n,function(t){e.drawList_(t)});t&&e.drawList_(t)}else e.drawList_()},t.typing)):e.drawList_():(r=o.querySelector("ul.autocomplete li"))&&r.classList.remove("select"):(o.classList.contains("ol-control")&&a.blur(),r.classList.remove("select"),n=l,e._handleSelect(e._list[r.getAttribute("data-search")])):e.drawList_()};a.addEventListener("keyup",l),a.addEventListener("search",l),a.addEventListener("cut",l),a.addEventListener("paste",l),a.addEventListener("input",l),t.noCollapse||(a.addEventListener("blur",function(){setTimeout(function(){o.classList.add("ol-collapsed")},200)}),a.addEventListener("focus",function(){o.classList.remove("ol-collapsed")})),o.appendChild(a);var h=document.createElement("UL");h.classList.add("autocomplete"),o.appendChild(h),ol.control.Control.call(this,{element:o,target:t.target}),"function"==typeof t.getTitle&&(this.getTitle=t.getTitle),"function"==typeof t.autocomplete&&(this.autocomplete=t.autocomplete),this.set("minLength",t.minLength||1),this.set("maxItems",t.maxItems||10),this.set("maxHistory",t.maxHistory||t.maxItems||10),this.restoreHistory(),this.drawList_()},ol.inherits(ol.control.Search,ol.control.Control),ol.control.Search.prototype.getTitle=function(t){return t.name||"No title"},ol.control.Search.prototype.search=function(){var t=this.element.querySelector("input.search");this._triggerCustomEvent("search",t)},ol.control.Search.prototype._triggerCustomEvent=function(t,e){var o;window.CustomEvent?o=new CustomEvent(t):(o=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,{}),e.dispatchEvent(o)},ol.control.Search.prototype.setInput=function(t,e){var o=this.element.querySelector("input.search");o.value=t,e&&this._triggerCustomEvent("keyup",o)},ol.control.Search.prototype.select=function(t){this.dispatchEvent({type:"select",search:t})},ol.control.Search.prototype._handleSelect=function(t){if(t){var e=this.get("history");try{for(var o=JSON.stringify(t),i=e.length-1;i>=0;i--)e[i]&&JSON.stringify(e[i])!==o||e.splice(i,1)}catch(o){for(i=e.length-1;i>=0;i--)e[i]===t&&e.splice(i,1)}for(e.unshift(t);e.length>(this.get("maxHistory")||10);)e.pop();this.saveHistory(),this.select(t)}},ol.control.Search.prototype.saveHistory=function(){if(this.get("maxHistory")>=0)try{localStorage["ol@search-"+this._classname]=JSON.stringify(this.get("history"))}catch(t){}else localStorage.removeItem("ol@search-"+this._classname)},ol.control.Search.prototype.restoreHistory=function(){try{this.set("history",JSON.parse(localStorage["ol@search-"+this._classname]))}catch(t){this.set("history",[])}},ol.control.Search.prototype.clearHistory=function(){this.set("history",[]),this.saveHistory(),this.drawList_()},ol.control.Search.prototype.getHistory=function(){return this.get("history")},ol.control.Search.prototype.autocomplete=function(t,e){return e([]),!1},ol.control.Search.prototype.drawList_=function(t){var e=this,o=this.element.querySelector("ul.autocomplete");if(o.innerHTML="",this._list=[],t)o.setAttribute("class","autocomplete");else{if(this.element.querySelector("input.search").value)return;t=this.get("history"),o.setAttribute("class","autocomplete history")}for(var i=Math.min(e.get("maxItems"),t.length),r=0;r<i;r++){var s;t[r]&&(r&&e.equalFeatures(t[r],t[r-1])||((s=document.createElement("LI")).setAttribute("data-search",r),this._list.push(t[r]),s.addEventListener("click",function(t){e._handleSelect(e._list[t.currentTarget.getAttribute("data-search")])}),s.innerHTML=e.getTitle(t[r]),o.appendChild(s)))}i&&this.get("copy")&&((s=document.createElement("LI")).classList.add("copy"),s.innerHTML=this.get("copy"),o.appendChild(s))},ol.control.Search.prototype.equalFeatures=function(t,e){return!1},ol.control.SearchJSON=function(t){(t=t||{}).className=t.className||"JSON",delete t.autocomplete,t.minLength=t.minLength||3,t.typing=t.typing||800,ol.control.Search.call(this,t);var e=t.url||"";if("https:"===window.location.protocol){var o=document.createElement("a");o.href=e,o.protocol=window.location.protocol,e=o.href}this.set("url",e),this._auth=t.authentication,"function"==typeof t.handleResponse&&(this.handleResponse=t.handleResponse)},ol.inherits(ol.control.SearchJSON,ol.control.Search),ol.control.SearchJSON.prototype.autocomplete=function(t,e){var o=this.requestData(t),i=encodeURI(this.get("url")),r="";for(var s in o)r+=r?"&":"?",o.hasOwnProperty(s)&&(r+=s+"="+o[s]);this.ajax(i+r,function(t){if(t.status>=200&&t.status<400){var o=JSON.parse(t.response);e(this.handleResponse(o))}else console.log(i+r,arguments)},function(){console.log(i+r,arguments)})},ol.control.SearchJSON.prototype.ajax=function(t,e,o){var i=this;this._request&&this._request.abort();var r=this._request=new XMLHttpRequest;r.open("GET",t,!0),this._auth&&r.setRequestHeader("Authorization","Basic "+this._auth),this.element.classList.add("searching"),r.onload=function(){i._request=null,i.element.classList.remove("searching"),e.call(i,this)},r.onerror=function(){i._request=null,i.element.classList.remove("searching"),o&&o.call(i)},r.send()},ol.control.SearchJSON.prototype.requestData=function(t){return{q:t}},ol.control.SearchJSON.prototype.handleResponse=function(t){return t},ol.control.SearchPhoton=function(t){(t=t||{}).className=t.className||"photon",t.url=t.url||"http://photon.komoot.de/api/",ol.control.SearchJSON.call(this,t),this.set("lang",t.lang),this.set("position",t.position),this.set("copy","<a href='http://www.openstreetmap.org/copyright' target='new'>&copy; OpenStreetMap contributors</a>")},ol.inherits(ol.control.SearchPhoton,ol.control.SearchJSON),ol.control.SearchPhoton.prototype.getTitle=function(t){var e=t.properties;return(e.housenumber||"")+" "+(e.street||e.name||"")+"<i> "+(e.postcode||"")+" "+(e.city||"")+" ("+e.country+")</i>"},ol.control.SearchPhoton.prototype.requestData=function(t){var e={q:t,lang:this.get("lang"),limit:this.get("maxItems")};if(this.get("position")){var o=this.getMap().getView(),i=new ol.geom.Point(o.getCenter());i=i.transform(o.getProjection(),"EPSG:4326").getCoordinates(),e.lon=i[0],e.lat=i[1]}return e},ol.control.SearchPhoton.prototype.handleResponse=function(t,e){return t.features},ol.control.SearchPhoton.prototype.equalFeatures=function(t,e){return this.getTitle(t)===this.getTitle(e)&&t.geometry.coordinates[0]===e.geometry.coordinates[0]&&t.geometry.coordinates[1]===e.geometry.coordinates[1]},ol.control.SearchPhoton.prototype.select=function(t){var e=t.geometry.coordinates;try{e=ol.proj.transform(t.geometry.coordinates,"EPSG:4326",this.getMap().getView().getProjection())}catch(t){}this.dispatchEvent({type:"select",search:t,coordinate:e})},ol.control.SearchGeoportail=function(t){(t=t||{}).className=t.className||"IGNF",t.typing=t.typing||500,t.url="http://wxs.ign.fr/"+t.apiKey+"/ols/apis/completion",ol.control.SearchJSON.call(this,t),this.set("copy","<a href='https://www.geoportail.gouv.fr/' target='new'>&copy; IGN-Goportail</a>"),this.set("type",t.type||"StreetAddress,PositionOfInterest")},ol.inherits(ol.control.SearchGeoportail,ol.control.SearchJSON),ol.control.SearchGeoportail.prototype.getTitle=function(t){return t.fulltext},ol.control.SearchGeoportail.prototype.requestData=function(t){return{text:t,type:"Commune"===this.get("type")?"PositionOfInterest":this.get("type")||"StreetAddress,PositionOfInterest",maximumResponses:this.get("maxItems")}},ol.control.SearchGeoportail.prototype.handleResponse=function(t){if(t=t.results,"Commune"===this.get("type"))for(var e=t.length-1;e>=0;e--)t[e].kind&&(t[e].classification>5||"Dpartement"==t[e].kind)&&t.splice(e,1);return t},ol.control.SearchGeoportail.prototype.select=function(t){if(t.x||t.y){var e=[Number(t.x),Number(t.y)];try{e=ol.proj.transform(e,"EPSG:4326",this.getMap().getView().getProjection())}catch(t){}"Commune"===this.get("type")?this.searchCommune(t,function(){this.dispatchEvent({type:"select",search:t,coordinate:e})}):this.dispatchEvent({type:"select",search:t,coordinate:e})}else this.searchCommune(t)},ol.control.SearchGeoportail.prototype.searchCommune=function(t,e){var o='<?xml version="1.0" encoding="UTF-8"?><XLS xmlns:xls="http://www.opengis.net/xls" xmlns:gml="http://www.opengis.net/gml" xmlns="http://www.opengis.net/xls" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.2" xsi:schemaLocation="http://www.opengis.net/xls http://schemas.opengis.net/ols/1.2/olsAll.xsd"><RequestHeader/><Request requestID="1" version="1.2" methodName="LocationUtilityService"><GeocodeRequest returnFreeForm="false"><Address countryCode="PositionOfInterest"><freeFormAddress>'+t.fulltext+"+</freeFormAddress></Address></GeocodeRequest></Request></XLS>",i=this.get("url").replace("ols/apis/completion","geoportail/ols")+"?xls="+encodeURIComponent(o);this.ajax(i,function(o){var i=o.response;if(i){var r=(i=i.replace(/\n|\r/g,"")).replace(/.*<gml:pos\>(.*)<\/gml:pos>.*/,"$1").split(" ");t.x=Number(r[1]),t.y=Number(r[0]),t.kind=i.replace(/.*<Place type="Nature">([^<]*)<\/Place>.*/,"$1"),t.insee=i.replace(/.*<Place type="INSEE">([^<]*)<\/Place>.*/,"$1"),(t.x||t.y)&&(e?e.call(this,[t]):this._handleSelect(t))}})},ol.control.LayerSwitcher=function(t){t=t||{};var e,o=this;this.dcount=0,this.show_progress=t.show_progress,this.oninfo="function"==typeof t.oninfo?t.oninfo:null,this.onextent="function"==typeof t.onextent?t.onextent:null,this.hasextent=t.extent||t.onextent,this.hastrash=t.trash,this.reordering=!1!==t.reordering,"function"==typeof t.displayInLayerSwitcher&&(this.displayInLayerSwitcher=t.displayInLayerSwitcher),t.target?e=$("<div>").addClass(t.switcherClass||"ol-layerswitcher"):(e=$("<div>").addClass((t.switcherClass||"ol-layerswitcher")+" ol-unselectable ol-control ol-collapsed"),this.button=$("<button>").attr("type","button").on("touchstart",function(t){e.toggleClass("ol-collapsed"),t.preventDefault(),o.overflow()}).click(function(){e.toggleClass("ol-forceopen").addClass("ol-collapsed"),o.overflow()}).appendTo(e),t.mouseover&&$(e).mouseleave(function(){e.addClass("ol-collapsed")}).mouseover(function(){e.removeClass("ol-collapsed")}),this.topv=$("<div>").addClass("ol-switchertopdiv").click(function(){o.overflow("+50%")}).appendTo(e),this.botv=$("<div>").addClass("ol-switcherbottomdiv").click(function(){o.overflow("-50%")}).appendTo(e)),this.panel_=$("<ul>").addClass("panel").appendTo(e),this.panel_.on("mousewheel DOMMouseScroll onmousewheel",function(t){o.overflow(Math.max(-1,Math.min(1,t.originalEvent.wheelDelta||-t.originalEvent.detail)))&&(t.stopPropagation(),t.preventDefault())}),this.header_=$("<li>").addClass("ol-header").appendTo(this.panel_),ol.control.Control.call(this,{element:e.get(0),target:t.target}),this.target=t.target},ol.inherits(ol.control.LayerSwitcher,ol.control.Control),ol.control.LayerSwitcher.prototype.tip={up:"up/down",down:"down",info:"informations...",extent:"zoom to extent",trash:"remove layer",plus:"expand/shrink"},ol.control.LayerSwitcher.prototype.displayInLayerSwitcher=function(t){return!1!==t.get("displayInLayerSwitcher")},ol.control.LayerSwitcher.prototype.setMap=function(t){ol.control.Control.prototype.setMap.call(this,t),this.drawPanel(),this._listener&&(this._listener&&ol.Observable.unByKey(this._listener.change),this._listener&&ol.Observable.unByKey(this._listener.moveend),this._listener&&ol.Observable.unByKey(this._listener.size)),this._listener=null,this.map_=t,t&&(this._listener={change:t.getLayerGroup().on("change",this.drawPanel.bind(this)),moveend:t.on("moveend",this.viewChange.bind(this)),size:t.on("change:size",this.overflow.bind(this))})},ol.control.LayerSwitcher.prototype.setHeader=function(t){this.header_.html(t)},ol.control.LayerSwitcher.prototype.overflow=function(t){if(this.button){if("none"==this.panel_.css("display"))return void $(this.element).css("height","auto");var e=$(this.element).outerHeight(),o=this.panel_.outerHeight(),i=this.button.position().top+this.button.outerHeight(!0),r=this.panel_.position().top-i;if(o>e-i){switch($(this.element).css("height","100%"),t){case 1:r+=2*$("li.visible .li-content",this.panel_).height();break;case-1:r-=2*$("li.visible .li-content",this.panel_).height();break;case"+50%":r+=Math.round(e/2);break;case"-50%":r-=Math.round(e/2)}return r+o<=e-3*i/2?(r=e-3*i/2-o,this.botv.hide()):this.botv.css("display",""),r>=0?(r=0,this.topv.hide()):this.topv.css("display",""),this.panel_.css("top",r+"px"),!0}return $(this.element).css("height","auto"),this.panel_.css("top","0px"),this.botv.hide(),this.topv.hide(),!1}return!1},ol.control.LayerSwitcher.prototype.viewChange=function(t){var e=this.map_,o=this.map_.getView().getResolution();$("li",this.panel_).each(function(){var t=$(this).data("layer");if(t)if(t.getMaxResolution()<=o||t.getMinResolution()>=o)$(this).addClass("ol-layer-hidden");else{var i=t.getExtent();if(i){var r=e.getView().calculateExtent(e.getSize());ol.extent.intersects(r,i)?$(this).removeClass("ol-layer-hidden"):$(this).addClass("ol-layer-hidden")}else $(this).removeClass("ol-layer-hidden")}})},ol.control.LayerSwitcher.prototype.drawPanel=function(t){if(this.getMap()){var e=this;this.dcount++,setTimeout(function(){e.drawPanel_()},0)}},ol.control.LayerSwitcher.prototype.drawPanel_=function(t){--this.dcount||this.dragging_||($("li",this.panel_).not(".ol-header").remove(),this.drawList(this.panel_,this.getMap().getLayers()))},ol.control.LayerSwitcher.prototype.switchLayerVisibility=function(t,e){t.get("baseLayer")?(t.getVisible()||t.setVisible(!0),e.forEach(function(e){t!==e&&e.get("baseLayer")&&e.getVisible()&&e.setVisible(!1)})):t.setVisible(!t.getVisible())},ol.control.LayerSwitcher.prototype.testLayerVisibility=function(t){if(this.map_){var e=this.map_.getView().getResolution();if(t.getMaxResolution()<=e||t.getMinResolution()>=e)return!1;var o=t.getExtent();if(o){var i=this.map_.getView().calculateExtent(this.map_.getSize());return ol.extent.intersects(i,o)}return!0}return!0},ol.control.LayerSwitcher.prototype.dragOrdering_=function(t){var e=t.data;switch(t.type){case"mousedown":case"touchstart":t.stopPropagation(),t.preventDefault();var o=t.pageY||t.originalEvent.touches&&t.originalEvent.touches.length&&t.originalEvent.touches[0].pageY||t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length&&t.originalEvent.changedTouches[0].pageY;(e={self:e.self,elt:$(t.currentTarget).closest("li"),start:!0,element:e.self.element,panel:e.self.panel_,pageY:o}).elt.parent().addClass("drag"),$(document).on("mouseup mousemove touchend touchcancel touchmove",e,e.self.dragOrdering_);break;case"touchcancel":case"touchend":case"mouseup":if(e.target){var i=e.layer,r=e.target;if(i&&r){for(var s,n=(s=e.group?e.group.getLayers():e.self.getMap().getLayers()).getArray(),a=0;a<n.length;a++)if(n[a]==i){s.removeAt(a);break}for(var l=0;l<n.length;l++)if(n[l]==r){a>l?s.insertAt(l,i):s.insertAt(l+1,i);break}}}$("li",e.elt.parent()).removeClass("dropover dropover-after dropover-before"),e.elt.removeClass("drag"),e.elt.parent().removeClass("drag"),$(e.element).removeClass("drag"),e.div&&e.div.remove(),$(document).off("mouseup mousemove touchend touchcancel touchmove",e.self.dragOrdering_);break;case"mousemove":case"touchmove":var h;if(o=t.pageY||t.originalEvent.touches&&t.originalEvent.touches.length&&t.originalEvent.touches[0].pageY||t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length&&t.originalEvent.changedTouches[0].pageY,e.start&&Math.abs(e.pageY-o)>2&&(e.start=!1,e.elt.addClass("drag"),e.layer=e.elt.data("layer"),e.target=!1,e.group=e.elt.parent().parent().data("layer"),e.div=$("<li>").appendTo(e.panel),e.div.css({position:"absolute","z-index":1e4,left:e.elt.position().left,opacity:.5}).html($(e.elt).html()).addClass("ol-dragover").width(e.elt.outerWidth()).height(e.elt.height()),$(e.element).addClass("drag")),!e.start)t.preventDefault(),t.stopPropagation(),e.div.css({top:o-e.panel.offset().top+e.panel.scrollTop()+5}),(h=t.originalEvent.touches?$(document.elementFromPoint(t.originalEvent.touches[0].clientX,t.originalEvent.touches[0].clientY)):$(t.target)).hasClass("ol-switcherbottomdiv")?(e.self.overflow(-1),console.log("bottom")):h.hasClass("ol-switchertopdiv")&&e.self.overflow(1),h.is("li")||(h=h.closest("li")),h.hasClass("dropover")||$("li",e.elt.parent()).removeClass("dropover dropover-after dropover-before"),h.parent().hasClass("drag")&&h.get(0)!==e.elt.get(0)?((r=h.data("layer"))&&!r.get("allwaysOnTop")==!e.layer.get("allwaysOnTop")?(h.addClass("dropover"),h.addClass(e.elt.position().top<h.position().top?"dropover-after":"dropover-before"),e.target=r):e.target=!1,e.div.show()):(e.target=!1,h.get(0)===e.elt.get(0)?e.div.hide():e.div.show()),e.target?e.div.removeClass("forbidden"):e.div.addClass("forbidden")}},ol.control.LayerSwitcher.prototype.dragOpacity_=function(t){var e=t.data;switch(t.type){case"mousedown":case"touchstart":t.stopPropagation(),t.preventDefault(),e.start=t.pageX||t.originalEvent.touches&&t.originalEvent.touches.length&&t.originalEvent.touches[0].pageX||t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length&&t.originalEvent.changedTouches[0].pageX,e.elt=$(t.target),e.layer=e.elt.closest("li").data("layer"),e.self.dragging_=!0,$(document).on("mouseup touchend mousemove touchmove touchcancel",e,e.self.dragOpacity_);break;case"touchcancel":case"touchend":case"mouseup":$(document).off("mouseup touchend mousemove touchmove touchcancel",e.self.dragOpacity_),e.layer.setOpacity(e.opacity),e.elt.parent().next().text(Math.round(100*e.opacity)),e.self.dragging_=!1,e=!1;break;default:var o=t.pageX||t.originalEvent.touches&&t.originalEvent.touches.length&&t.originalEvent.touches[0].pageX||t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length&&t.originalEvent.changedTouches[0].pageX,i=Math.max(0,Math.min(1,(o-e.elt.parent().offset().left)/e.elt.parent().width()));e.elt.css("left",100*i+"%"),e.elt.parent().next().text(Math.round(100*e.opacity)),e.opacity=i,e.layer.setOpacity(i)}},ol.control.LayerSwitcher.prototype.drawList=function(t,e){var o=this,i=e.getArray(),r=function(t){t.stopPropagation(),t.preventDefault();var i=$(this).parent().parent().data("layer");o.switchLayerVisibility(i,e)};function s(t){t.stopPropagation(),t.preventDefault();var e=$(this).closest("li").data("layer");o.oninfo(e),o.dispatchEvent({type:"info",layer:e})}function n(t){t.stopPropagation(),t.preventDefault();var e=$(this).closest("li").data("layer");o.onextent?o.onextent(e):o.map_.getView().fit(e.getExtent(),o.map_.getSize()),o.dispatchEvent({type:"extent",layer:e})}function a(t){t.stopPropagation(),t.preventDefault();var e=$(this).closest("ul").parent();e.data("layer")?(e.data("layer").getLayers().remove($(this).closest("li").data("layer")),0!=e.data("layer").getLayers().getLength()||e.data("layer").get("noSwitcherDelete")||a.call($(".layerTrash",e),t)):o.map_.removeLayer($(this).closest("li").data("layer"))}for(var l=i.length-1;l>=0;l--){var h=i[l];if(o.displayInLayerSwitcher(h)){var c=$("<li>").addClass((h.getVisible()?"visible ":" ")+(h.get("baseLayer")?"baselayer":"")).data("layer",h).appendTo(t),p=$("<div>").addClass("ol-layerswitcher-buttons").appendTo(c),u=$("<div>").addClass("li-content").appendTo(c);if(this.testLayerVisibility(h)||u.addClass("ol-layer-hidden"),$("<input>").attr("type",h.get("baseLayer")?"radio":"checkbox").attr("checked",h.getVisible()).on("click",r).appendTo(u),$("<label>").text(h.get("title")||h.get("name")).attr("title",h.get("title")||h.get("name")).on("click",r).attr("unselectable","on").css("user-select","none").on("selectstart",!1).appendTo(u),this.reordering&&(l<i.length-1&&(h.get("allwaysOnTop")||!i[l+1].get("allwaysOnTop"))||l>0&&(!h.get("allwaysOnTop")||i[l-1].get("allwaysOnTop")))&&$("<div>").addClass("layerup").on("mousedown touchstart",{self:this},this.dragOrdering_).attr("title",this.tip.up).appendTo(p),h.getLayers){var g=0;h.getLayers().forEach(function(t){o.displayInLayerSwitcher(t)&&g++}),g&&$("<div>").addClass(h.get("openInLayerSwitcher")?"collapse-layers":"expend-layers").click(function(){var t=$(this).closest("li").data("layer");t.set("openInLayerSwitcher",!t.get("openInLayerSwitcher"))}).attr("title",this.tip.plus).appendTo(p)}if(this.oninfo&&$("<div>").addClass("layerInfo").on("click",s).attr("title",this.tip.info).appendTo(p),this.hastrash&&!h.get("noSwitcherDelete")&&$("<div>").addClass("layerTrash").on("click",a).attr("title",this.tip.trash).appendTo(p),this.hasextent&&i[l].getExtent()){var d=i[l].getExtent();4==d.length&&d[0]<d[2]&&d[1]<d[3]&&$("<div>").addClass("layerExtent").on("click",n).attr("title",this.tip.extent).appendTo(p)}if(this.show_progress&&h instanceof ol.layer.Tile){var f=$("<div>").addClass("layerswitcher-progress").appendTo(u);this.setprogress_(h),h.layerswitcher_progress=$("<div>").appendTo(f)}var y=$("<div>").addClass("layerswitcher-opacity").on("click",function(t){t.stopPropagation(),t.preventDefault();var e=t.pageX||t.originalEvent.touches&&t.originalEvent.touches.length&&t.originalEvent.touches[0].pageX||t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length&&t.originalEvent.changedTouches[0].pageX,o=Math.max(0,Math.min(1,(e-$(this).offset().left)/$(this).width()));$(this).closest("li").data("layer").setOpacity(o)}).appendTo(u);$("<div>").addClass("layerswitcher-opacity-cursor").on("mousedown touchstart",{self:this},o.dragOpacity_).css("left",100*h.getOpacity()+"%").appendTo(y),$("<div>").addClass("layerswitcher-opacity-label").text(Math.round(100*h.getOpacity())).appendTo(u),h.getLayers?(c.addClass("ol-layer-group"),!0===h.get("openInLayerSwitcher")&&this.drawList($("<ul>").appendTo(c),h.getLayers())):h instanceof ol.layer.Vector?c.addClass("ol-layer-vector"):h instanceof ol.layer.VectorTile?c.addClass("ol-layer-vector"):h instanceof ol.layer.Tile?c.addClass("ol-layer-tile"):h instanceof ol.layer.Image?c.addClass("ol-layer-image"):h instanceof ol.layer.Heatmap&&c.addClass("ol-layer-heatmap"),this.dispatchEvent({type:"drawlist",layer:h,li:c.get(0)})}}this.viewChange(),t==this.panel_&&this.overflow()},ol.control.LayerSwitcher.prototype.setprogress_=function(t){if(!t.layerswitcher_progress){var e=0,o=0;function i(){o===e?(o=e=0,t.layerswitcher_progress.width(0)):t.layerswitcher_progress.css("width",(e/o*100).toFixed(1)+"%")}t.getSource().on("tileloadstart",function(){o++,i()}),t.getSource().on("tileloadend",function(){e++,i()}),t.getSource().on("tileloaderror",function(){e++,i()})}},ol.control.Bar=function(t){t||(t={});var e=$("<div>").addClass("ol-unselectable ol-control ol-bar");if(t.className&&e.addClass(t.className),t.group&&e.addClass("ol-group"),ol.control.Control.call(this,{element:e.get(0),target:t.target}),this.set("toggleOne",t.toggleOne),this.set("autoDeactivate",t.autoDeactivate),this.controls_=[],t.controls instanceof Array)for(var o=0;o<t.controls.length;o++)this.addControl(t.controls[o])},ol.inherits(ol.control.Bar,ol.control.Control),ol.control.Bar.prototype.setVisible=function(t){t?$(this.element).show():$(this.element).hide()},ol.control.Bar.prototype.getVisible=function(){return"none"!=$(this.element).css("display")},ol.control.Bar.prototype.setMap=function(t){ol.control.Control.prototype.setMap.call(this,t);for(var e=0;e<this.controls_.length;e++)this.controls_[e].setMap(t)},ol.control.Bar.prototype.getControls=function(){return this.controls_},ol.control.Bar.prototype.setPosition=function(t){$(this.element).removeClass("ol-left ol-top ol-bottom ol-right"),t=t.split("-");for(var e=0;e<t.length;e++)switch(t[e]){case"top":case"left":case"bottom":case"right":$(this.element).addClass("ol-"+t[e])}},ol.control.Bar.prototype.addControl=function(t){this.controls_.push(t),t.setTarget(this.element),this.getMap()&&this.getMap().addControl(t),t.on("change:active",this.onActivateControl_.bind(this)),t.getActive&&t.getActive()&&t.dispatchEvent({type:"change:active",key:"active",oldValue:!1,active:!0})},ol.control.Bar.prototype.deactivateControls=function(t){for(var e=0;e<this.controls_.length;e++)this.controls_[e]!==t&&this.controls_[e].setActive&&this.controls_[e].setActive(!1)},ol.control.Bar.prototype.getActiveControls=function(){for(var t,e=[],o=0;t=this.controls_[o];o++)t.getActive&&t.getActive()&&e.push(t);return e},ol.control.Bar.prototype.setActive=function(t){if(!t&&this.get("autoDeactivate")&&this.deactivateControls(),t)for(var e,o=this.getControls(),i=0;e=o[i];i++)e.get("autoActivate")&&e.setActive(!0)},ol.control.Bar.prototype.onActivateControl_=function(t){if(this.get("toggleOne"))if(t.active){var e,o=t.target;for(e=0;e<this.controls_.length&&this.controls_[e]!==o;e++);if(e==this.controls_.length)return;this.deactivateControls(this.controls_[e])}else if(!this.getActiveControls().length)for(var i,r=0;i=this.controls_[r];r++)if(i.get("autoActivate")){i.setActive();break}},ol.control.Button=function(t){t=t||{};var e=$("<div>").addClass((t.className||"")+" ol-button ol-unselectable ol-control"),o=this,i=$("<button>").html(t.html||"").attr("type","button").attr("title",t.title).on("touchstart click",function(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),t.handleClick&&t.handleClick.call(o,e)}).appendTo(e);t.title||i.attr("title",i.children().first().attr("title")),ol.control.Control.call(this,{element:e.get(0),target:t.target}),t.title&&this.set("title",t.title)},ol.inherits(ol.control.Button,ol.control.Control),ol.control.CanvasAttribution=function(t){t||(t={}),ol.control.Attribution.call(this,t),this.isCanvas_=!!t.canvas,t||(t={}),t.style||(t.style=new ol.style.Style),this.setStyle(t.style)},ol.inherits(ol.control.CanvasAttribution,ol.control.Attribution),ol.control.CanvasAttribution.prototype.setCanvas=function(t){this.isCanvas_=t,$(this.element).css("visibility",t?"hidden":"visible"),this.map_&&this.map_.renderSync()},ol.control.CanvasAttribution.prototype.setStyle=function(t){var e=t.getText();this.font_=e?e.getFont():"10px Arial";var o=e?e.getStroke():null,i=e?e.getFill():null;this.fontStrokeStyle_=o?ol.color.asString(o.getColor()):"#fff",this.fontFillStyle_=i?ol.color.asString(i.getColor()):"#000",this.fontStrokeWidth_=o?o.getWidth():3,this.getMap()&&this.getMap().render()},ol.control.CanvasAttribution.prototype.setMap=function(t){var e=this.getMap();this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.control.ScaleLine.prototype.setMap.call(this,t),e&&e.renderSync(),t&&(this._listener=t.on("postcompose",this.drawAttribution_.bind(this))),this.map_=t,this.setCanvas(this.isCanvas_)},ol.control.CanvasAttribution.prototype.drawAttribution_=function(t){var e=t.context;if(this.isCanvas_){var o="";$("li",this.element).each(function(){"none"!=$(this).css("display")&&(o+=(o?" - ":"")+$(this).text())});var i=$(this.element).position(),r=t.frameState.pixelRatio;e.save(),e.scale(r,r);var s=$(this.getMap().getViewport()).parent(),n=s.outerWidth()/s.get(0).getBoundingClientRect().width,a=s.outerHeight()/s.get(0).getBoundingClientRect().height;i.left*=n,i.top*=a,i.right=i.left+$(this.element).outerWidth(),i.bottom=i.top+$(this.element).outerHeight(),e.beginPath(),e.strokeStyle=this.fontStrokeStyle_,e.fillStyle=this.fontFillStyle_,e.lineWidth=this.fontStrokeWidth_,e.textAlign="right",e.textBaseline="bottom",e.font=this.font_,e.strokeText(o,i.right,i.bottom),e.fillText(o,i.right,i.bottom),e.closePath(),e.restore()}},ol.control.CanvasScaleLine=function(t){ol.control.ScaleLine.call(this,t),this.scaleHeight_=6,t||(t={}),t.style||(t.style=new ol.style.Style),this.setStyle(t.style)},ol.inherits(ol.control.CanvasScaleLine,ol.control.ScaleLine),ol.control.CanvasScaleLine.prototype.setMap=function(t){var e=this.getMap();this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.control.ScaleLine.prototype.setMap.call(this,t),e&&e.renderSync(),t&&(this._listener=t.on("postcompose",this.drawScale_.bind(this))),this.$element=$(this.element).css("visibility","hidden"),this.olscale=$(".ol-scale-line-inner",this.element)},ol.control.CanvasScaleLine.prototype.setStyle=function(t){var e=t.getStroke();this.strokeStyle_=e?ol.color.asString(e.getColor()):"#000",this.strokeWidth_=e?e.getWidth():2;var o=t.getFill();this.fillStyle_=o?ol.color.asString(o.getColor()):"#fff";var i=t.getText();this.font_=i?i.getFont():"10px Arial",e=i?i.getStroke():null,o=i?i.getFill():null,this.fontStrokeStyle_=e?ol.color.asString(e.getColor()):this.fillStyle_,this.fontStrokeWidth_=e?e.getWidth():3,this.fontFillStyle_=o?ol.color.asString(o.getColor()):this.strokeStyle_,this.getMap()&&this.getMap().render()},ol.control.CanvasScaleLine.prototype.drawScale_=function(t){if("none"!==this.$element.css("display")){var e=t.context,o=this.olscale.width();if(o){var i=this.olscale.text(),r=this.$element.position(),s=t.frameState.pixelRatio;e.save(),e.scale(s,s);var n=$(this.getMap().getViewport()).parent(),a=n.outerWidth()/n.get(0).getBoundingClientRect().width,l=n.outerHeight()/n.get(0).getBoundingClientRect().height;r.left*=a,r.top*=l,r.top+=this.$element.height()-this.scaleHeight_,e.beginPath(),e.strokeStyle=this.fontStrokeStyle_,e.fillStyle=this.fontFillStyle_,e.lineWidth=this.fontStrokeWidth_,e.textAlign="center",e.textBaseline="bottom",e.font=this.font_,e.strokeText(i,r.left+o/2,r.top),e.fillText(i,r.left+o/2,r.top),e.closePath(),r.top+=2,e.lineWidth=this.strokeWidth_,e.strokeStyle=this.strokeStyle_;for(var h=4,c=parseInt(i);c%10==0;)c/=10;c%5==0&&(h=5);for(var p=0;p<h;p++)e.beginPath(),e.fillStyle=p%2?this.fillStyle_:this.strokeStyle_,e.rect(r.left+p*o/h,r.top,o/h,this.scaleHeight_),e.stroke(),e.fill(),e.closePath();e.restore()}}},ol.control.CanvasTitle=function(t){t||(t={}),t.style||(t.style=new ol.style.Style),this.setStyle(t.style);var e=$("<div>").text(this.text_).addClass("ol-title ol-unselectable").css({font:this.font_,position:"absolute",top:0,left:0,right:0,display:"block",visibility:"hidden"});ol.control.Control.call(this,{element:e.get(0),target:t.target})},ol.inherits(ol.control.CanvasTitle,ol.control.Control),ol.control.CanvasTitle.prototype.setMap=function(t){var e=this.getMap();this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.control.Control.prototype.setMap.call(this,t),e&&e.renderSync(),t&&(this._listener=t.on("postcompose",this.drawTitle_.bind(this)))},ol.control.CanvasTitle.prototype.setStyle=function(t){var e=t.getText();this.font_=e&&e.getFont()||"20px Arial",this.text_=e?e.getText():"";var o=e?e.getStroke():null,i=e?e.getFill():null;this.strokeStyle_=o?ol.color.asString(o.getColor()):"#fff",this.fillStyle_=i?ol.color.asString(i.getColor()):"#000",this.element&&$(this.element).text(this.text_).css({font:this.font_}),this.getMap()&&this.getMap().render()},ol.control.CanvasTitle.prototype.setTitle=function(t){this.text_=t,$(this.element).text(t),this.getMap()&&this.getMap().renderSync()},ol.control.CanvasTitle.prototype.getTitle=function(t){return this.text_},ol.control.CanvasTitle.prototype.setVisible=function(t){t?$(this.element).show():$(this.element).hide(),this.getMap()&&this.getMap().renderSync()},ol.control.CanvasTitle.prototype.getVisible=function(t){return"none"!==$(this.element).css("display")},ol.control.CanvasTitle.prototype.drawTitle_=function(t){if(this.getVisible()){var e=t.context,o=t.frameState.pixelRatio;e.save(),e.scale(o,o);var i=e.canvas.width/o,r=$(this.element).height(),s={top:0,left:i/2};e.beginPath(),e.fillStyle=this.strokeStyle_,e.rect(0,0,i,r),e.fill(),e.closePath(),e.beginPath(),e.fillStyle=this.fillStyle_,e.textAlign="center",e.textBaseline="middle",e.font=this.font_,e.fillText(this.text_,s.left,s.top+r/2),e.closePath(),e.restore()}},ol.control.Compass=function(t){var e=this;t||(t={});var o=document.createElement("div");o.className="ol-compassctrl ol-unselectable ol-hidden"+(t.className?" "+t.className:""),o.style.position="absolute",o.style.visibility="hidden",ol.control.Control.call(this,{element:o}),this.set("rotateVithView",!1!==t.rotateWithView),this.style=t.style,t.image?this.img_=t.image:t.src?(this.img_=new Image,this.img_.onload=function(){e.getMap()&&e.getMap().renderSync()},this.img_.src=t.src):this.img_=this.defaultCompass_($(this.element).width(),this.style?this.style.getColor():""),this.da_=[];for(var i=0;i<8;i++)this.da_[i]=[Math.cos(Math.PI*i/8),Math.sin(Math.PI*i/8)]},ol.inherits(ol.control.Compass,ol.control.Control),ol.control.Compass.prototype.setMap=function(t){var e=this.getMap();this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.control.Control.prototype.setMap.call(this,t),e&&e.renderSync(),t&&(this._listener=t.on("postcompose",this.drawCompass_.bind(this)))},ol.control.Compass.prototype.defaultCompass_=function(t,e){var o=document.createElement("canvas"),i=o.getContext("2d"),r=(t=o.width=o.height)/2,s=.22*r;function n(t,o){i.fillStyle=e||"#963",i.beginPath(),i.moveTo(0,0),i.lineTo(t,0),i.lineTo(o,o),i.moveTo(0,0),i.lineTo(-t,0),i.lineTo(-o,-o),i.moveTo(0,0),i.lineTo(0,t),i.lineTo(-o,o),i.moveTo(0,0),i.lineTo(0,-t),i.lineTo(o,-o),i.moveTo(0,0),i.fill(),i.stroke()}function a(t,e){i.globalCompositeOperation="destination-out",i.fillStyle="#fff",i.beginPath(),i.moveTo(0,0),i.lineTo(t,0),i.lineTo(e,-e),i.moveTo(0,0),i.lineTo(-t,0),i.lineTo(-e,e),i.moveTo(0,0),i.lineTo(0,t),i.lineTo(e,e),i.moveTo(0,0),i.lineTo(0,-t),i.lineTo(-e,-e),i.moveTo(0,0),i.fill(),i.globalCompositeOperation="source-over",i.beginPath(),i.moveTo(0,0),i.lineTo(t,0),i.lineTo(e,-e),i.moveTo(0,0),i.lineTo(-t,0),i.lineTo(-e,e),i.moveTo(0,0),i.lineTo(0,t),i.lineTo(e,e),i.moveTo(0,0),i.lineTo(0,-t),i.lineTo(-e,-e),i.moveTo(0,0),i.stroke()}return i.translate(r,r),i.strokeStyle=e||"#963",i.lineWidth=1.5,i.beginPath(),i.arc(0,0,.41*t,0,2*Math.PI),i.arc(0,0,.44*t,0,2*Math.PI),i.stroke(),i.rotate(Math.PI/4),n(.9*r,.8*s),a(.9*r,.8*s),i.rotate(-Math.PI/4),n(r,s),a(r,s),o},ol.control.Compass.prototype.drawCompass_=function(t){var e=t.context,o=e.canvas,i=t.frameState.pixelRatio;e.save(),e.scale(i,i);var r=$(this.element).width(),s=$(this.element).height(),n=$(this.element).position(),a=this.img_,l=t.frameState.viewState.rotation;if(e.beginPath(),e.translate(n.left+r/2,n.top+s/2),this.get("rotateVithView")&&e.rotate(l),this.style){e.beginPath(),e.strokeStyle=this.style.getColor(),e.lineWidth=this.style.getWidth();for(var h=Math.max(o.width,o.height),c=0;c<8;c++)e.moveTo(-this.da_[c][0]*h,-this.da_[c][1]*h),e.lineTo(this.da_[c][0]*h,this.da_[c][1]*h);e.stroke()}a.width&&e.drawImage(a,-r/2,-s/2,r,s),e.closePath(),e.restore()},ol.control.Disable=function(t){t=t||{};var e=$("<div>").addClass((t.calssName||"")+" ol-disable ol-unselectable ol-control");e.css({top:0,left:0,right:0,bottom:0,"z-index":1e4,background:"none",display:"none"}),ol.control.Control.call(this,{element:e.get(0)})},ol.inherits(ol.control.Disable,ol.control.Control),ol.control.Disable.prototype.isOn=function(){return $(this.element).hasClass("ol-disable")},ol.control.Disable.prototype.disableMap=function(t){t?$(this.element).addClass("ol-enable").show():$(this.element).removeClass("ol-enable").hide()},ol.control.Gauge=function(t){t=t||{};var e=$("<div>").addClass((t.className||"")+" ol-gauge ol-unselectable ol-control");this.title_=$("<span>").appendTo(e),this.gauge_=$("<button>").attr("type","button").appendTo($("<div>").appendTo(e)).width(0),ol.control.Control.call(this,{element:e.get(0),target:t.target}),this.setTitle(t.title),this.val(t.val),this.set("max",t.max||100)},ol.inherits(ol.control.Gauge,ol.control.Control),ol.control.Gauge.prototype.setTitle=function(t){this.title_.html(t||""),t?this.title_.show():this.title_.hide()},ol.control.Gauge.prototype.val=function(t){return void 0!==t&&(this.val_=t,this.gauge_.css("width",t/this.get("max")*100+"%")),this.val_},ol.control.GeoBookmark=function(t){t=t||{};var e=this,o=document.createElement("div");t.target?o.className=t.className||"ol-bookmark":(o.className=(t.className||"ol-bookmark")+" ol-unselectable ol-control ol-collapsed",o.addEventListener("mouseleave",function(){s!==document.activeElement&&(i.style.display="none")}),this.button=document.createElement("button"),this.button.setAttribute("type","button"),this.button.addEventListener("click",function(t){i.style.display=""===i.style.display||"none"===i.style.display?"block":"none"}),o.appendChild(this.button));var i=document.createElement("div");o.appendChild(i);var r=document.createElement("ul");i.appendChild(r);var s=document.createElement("input");s.setAttribute("placeholder",t.placeholder||"Add a new geomark..."),s.addEventListener("change",function(t){var o=this.value;o&&(e.addBookmark(o),this.value="",e.dispatchEvent({type:"add",name:o})),i.style.display="none"}),s.addEventListener("blur",function(){i.style.display="none"}),i.appendChild(s),ol.control.Control.call(this,{element:o,target:t.target}),this.on("propertychange",function(t){"editable"===t.key&&(o.className=o.className.replace(" ol-editable",""),this.get("editable")&&(o.className+=" ol-editable"))}.bind(this)),this.set("namespace",t.namespace||"ol"),this.set("editable",!1!==t.editable),this.setBookmarks(localStorage[this.get("namespace")+"@bookmark"]?null:t.marks)},ol.inherits(ol.control.GeoBookmark,ol.control.Control),ol.control.GeoBookmark.prototype.setBookmarks=function(t){t||(t=JSON.parse(localStorage[this.get("namespace")+"@bookmark"]||"{}"));var e=this.get("editable"),o=this.element.querySelector("ul"),i=this.element.querySelector("div"),r=this;for(var s in o.innerHTML="",t){var n=document.createElement("li");if(n.textContent=s,n.setAttribute("data-bookmark",JSON.stringify(t[s])),n.addEventListener("click",function(){var t=JSON.parse(this.getAttribute("data-bookmark"));r.getMap().getView().setCenter(t.pos),r.getMap().getView().setZoom(t.zoom),i.style.display="none"}),o.appendChild(n),e&&!t[s].permanent){var a=document.createElement("button");a.setAttribute("data-name",s),a.setAttribute("title","Suppr."),a.addEventListener("click",function(t){r.removeBookmark(this.getAttribute("data-name")),r.dispatchEvent({type:"remove",name:this.getAttribute("data-name")}),t.stopPropagation()}),n.appendChild(a)}}localStorage[this.get("namespace")+"@bookmark"]=JSON.stringify(t)},ol.control.GeoBookmark.prototype.getBookmarks=function(){return JSON.parse(localStorage[this.get("namespace")+"@bookmark"]||"{}")},ol.control.GeoBookmark.prototype.removeBookmark=function(t){if(t){var e=this.getBookmarks();delete e[t],this.setBookmarks(e)}},ol.control.GeoBookmark.prototype.addBookmark=function(t,e,o,i){if(t){var r=this.getBookmarks();r[t]&&r[t].permanent||(r[t]={pos:e||this.getMap().getView().getCenter(),zoom:o||this.getMap().getView().getZoom(),permanent:!!i},this.setBookmarks(r))}},ol.control.GeolocationBar=function(t){t||(t={}),t.className=t.className||"ol-geobar",ol.control.Bar.call(this,t),this.setPosition(t.position||"bottom-right");var e=$(this.element),o=new ol.interaction.GeolocationDraw({source:t.source,zoom:t.zoom,followTrack:t.followTrack,minAccuracy:t.minAccuracy||1e4});this._geolocBt=new ol.control.Toggle({className:"geolocBt",interaction:o,onToggle:function(i){o.pause(!0),o.setFollowTrack(t.followTrack),e.removeClass("pauseTrack")}}),this.addControl(this._geolocBt),this._geolocBt.setActive(!1);var i=new ol.control.Bar;this.addControl(i);var r=new ol.control.TextButton({className:"centerBt",html:t.centerLabel||"center",handleClick:function(t){o.setFollowTrack("auto")}});i.addControl(r);var s=new ol.control.Button({className:"startBt",handleClick:function(){o.pause(!1),o.setFollowTrack("auto"),e.addClass("pauseTrack")}});i.addControl(s);var n=new ol.control.Button({className:"pauseBt",handleClick:function(){o.pause(!0),o.setFollowTrack("auto"),e.removeClass("pauseTrack")}});i.addControl(n),o.on("follow",function(t){t.following?e.removeClass("centerTrack"):e.addClass("centerTrack")}),this._geolocBt.on("change:active",function(t){t.active?e.addClass("ol-active"):e.removeClass("ol-active")})},ol.inherits(ol.control.GeolocationBar,ol.control.Bar),ol.control.GeolocationBar.prototype.getInteraction=function(){return this._geolocBt.getInteraction()},ol.control.Globe=function(t){var e,o=t||{},i=this;o.target?(e=$("<div>"),this.panel_=$(o.target)):(e=$("<div>").addClass("ol-globe ol-unselectable ol-control"),/top/.test(o.align)&&e.addClass("ol-control-top"),/right/.test(o.align)&&e.addClass("ol-control-right"),this.panel_=$("<div>").addClass("panel").appendTo(e),this.pointer_=$("<div>").addClass("ol-pointer").appendTo(e)),ol.control.Control.call(this,{element:e.get(0),target:o.target}),this.ovmap_=new ol.Map({controls:new ol.Collection,interactions:new ol.Collection,target:this.panel_.get(0),view:new ol.View({zoom:0,center:[0,0]}),layers:o.layers}),setTimeout(function(){i.ovmap_.updateSize()},0),this.set("follow",o.follow||!1),this.extentLayer=new ol.layer.Vector({name:"Cache extent",source:new ol.source.Vector,style:o.style||[new ol.style.Style({image:new ol.style.Circle({fill:new ol.style.Fill({color:"rgba(255,0,0, 1)"}),stroke:new ol.style.Stroke({width:7,color:"rgba(255,0,0, 0.8)"}),radius:5})})]}),this.ovmap_.addLayer(this.extentLayer)},ol.inherits(ol.control.Globe,ol.control.Control),ol.control.Globe.prototype.setMap=function(t){this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.control.Control.prototype.setMap.call(this,t),t&&(this._listener=t.getView().on("propertychange",this.setView.bind(this)),this.setView())},ol.control.Globe.prototype.setView=function(){this.getMap()&&this.get("follow")&&this.setCenter(this.getMap().getView().getCenter())},ol.control.Globe.prototype.getGlobe=function(){return this.ovmap_},ol.control.Globe.prototype.show=function(t){!1!==t?$(this.element).removeClass("ol-collapsed"):$(this.element).addClass("ol-collapsed"),this.ovmap_.updateSize()},ol.control.Globe.prototype.setPosition=function(t){/top/.test(t)?$(this.element).addClass("ol-control-top"):$(this.element).removeClass("ol-control-top"),/right/.test(t)?$(this.element).addClass("ol-control-right"):$(this.element).removeClass("ol-control-right")},ol.control.Globe.prototype.setCenter=function(t,e){var o=this;if(this.pointer_.addClass("hidden"),t){var i=this.ovmap_,r=i.getPixelFromCoordinate(t),s=$(this.element).height();setTimeout(function(){o.pointer_.css({top:Math.min(Math.max(r[1],0),s),left:"50%"}).removeClass("hidden")},800),i.getView().animate({center:[t[0],0]})}},ol.control.Graticule=function(t){t||(t={});var e=document.createElement("div");e.className="ol-graticule ol-unselectable ol-hidden",ol.control.Control.call(this,{element:e}),this.set("projection",t.projection||"EPSG:4326");var o=new ol.proj.Projection({code:this.get("projection")}).getMetersPerUnit();for(this.fac=1;o/this.fac>10;)this.fac*=10;this.fac=1e4/this.fac,this.set("maxResolution",t.maxResolution||1/0),this.set("step",t.step||.1),this.set("stepCoord",t.stepCoord||1),this.set("spacing",t.spacing||40),this.set("margin",t.margin||0),this.set("borderWidth",t.borderWidth||5),this.set("stroke",!1!==t.stroke),this.formatCoord=t.formatCoord||function(t){return t},t.style instanceof ol.style.Style?this.style=t.style:this.style=new ol.style.Style({stroke:new ol.style.Stroke({color:"#000",width:1}),fill:new ol.style.Fill({color:"#fff"}),text:new ol.style.Text({stroke:new ol.style.Stroke({color:"#fff",width:2}),fill:new ol.style.Fill({color:"#000"})})})},ol.inherits(ol.control.Graticule,ol.control.Control),ol.control.Graticule.prototype.setMap=function(t){var e=this.getMap();this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.control.Control.prototype.setMap.call(this,t),e&&e.renderSync(),t&&(this._listener=t.on("postcompose",this.drawGraticule_.bind(this)))},ol.control.Graticule.prototype.setStyle=function(t){this.style=t},ol.control.Graticule.prototype.getStyle=function(t){return t},ol.control.Graticule.prototype.drawGraticule_=function(t){if(!(this.get("maxResolution")<t.frameState.viewState.resolution)){for(var e,o=t.context,i=o.canvas,r=t.frameState.pixelRatio,s=i.width/r,n=i.height/r,a=this.get("projection"),l=this.getMap(),h=[l.getCoordinateFromPixel([0,0]),l.getCoordinateFromPixel([s,0]),l.getCoordinateFromPixel([s,n]),l.getCoordinateFromPixel([0,n])],c=-1/0,p=1/0,u=-1/0,g=1/0,d=0;e=h[d];d++)h[d]=ol.proj.transform(e,l.getView().getProjection(),a),c=Math.max(c,h[d][0]),p=Math.min(p,h[d][0]),u=Math.max(u,h[d][1]),g=Math.min(g,h[d][1]);var f=this.get("spacing"),y=this.get("step"),m=this.get("stepCoord"),v=this.get("borderWidth"),_=this.get("margin");(c-p)/y*f>s&&(y*=Math.round((c-p)/s*f/y))>this.fac&&(y=Math.round(y/this.fac)*this.fac),p=Math.floor(p/y)*y-y,g=Math.floor(g/y)*y-y,c=Math.floor(c/y)*y+2*y,u=Math.floor(u/y)*y+2*y;var w=ol.proj.get(a).getExtent();w&&(p<w[0]&&(p=w[0]),g<w[1]&&(g=w[1]),c>w[2]&&(c=w[2]+y),u>w[3]&&(u=w[3]+y));var S=this.style.getStroke()&&this.get("stroke"),x=this.style.getText(),b=this.style.getFill();o.save(),o.scale(r,r),o.beginPath(),o.rect(_,_,s-2*_,n-2*_),o.clip(),o.beginPath();for(var C={top:[],left:[],bottom:[],right:[]},k=p;k<c;k+=y){var M=ol.proj.transform([k,g],a,l.getView().getProjection());M=l.getPixelFromCoordinate(M),S&&o.moveTo(M[0],M[1]);for(var P=M,T=g+y;T<=u;T+=y){var A=ol.proj.transform([k,T],a,l.getView().getProjection());A=l.getPixelFromCoordinate(A),S&&o.lineTo(A[0],A[1]),P[1]>0&&A[1]<0&&C.top.push([k,P]),P[1]>n&&A[1]<n&&C.bottom.push([k,P]),P=A}}for(T=g;T<u;T+=y)for(M=ol.proj.transform([p,T],a,l.getView().getProjection()),M=l.getPixelFromCoordinate(M),S&&o.moveTo(M[0],M[1]),P=M,k=p+y;k<=c;k+=y)A=ol.proj.transform([k,T],a,l.getView().getProjection()),A=l.getPixelFromCoordinate(A),S&&o.lineTo(A[0],A[1]),P[0]<0&&A[0]>0&&C.left.push([T,P]),P[0]<s&&A[0]>s&&C.right.push([T,P]),P=A;if(S&&(o.strokeStyle=this.style.getStroke().getColor(),o.lineWidth=this.style.getStroke().getWidth(),o.stroke()),x){var E;o.fillStyle=this.style.getText().getFill().getColor(),o.strokeStyle=this.style.getText().getStroke().getColor(),o.lineWidth=this.style.getText().getStroke().getWidth(),o.textAlign="center",o.textBaseline="hanging";var F,L=(b?v:0)+_+2;for(d=0;F=C.top[d];d++)Math.round(F[0]/this.get("step"))%m||(E=this.formatCoord(F[0]),o.strokeText(E,F[1][0],L),o.fillText(E,F[1][0],L));for(o.textBaseline="alphabetic",d=0;F=C.bottom[d];d++)Math.round(F[0]/this.get("step"))%m||(E=this.formatCoord(F[0]),o.strokeText(E,F[1][0],n-L),o.fillText(E,F[1][0],n-L));for(o.textBaseline="middle",o.textAlign="left",d=0;F=C.left[d];d++)Math.round(F[0]/this.get("step"))%m||(E=this.formatCoord(F[0]),o.strokeText(E,L,F[1][1]),o.fillText(E,L,F[1][1]));for(o.textAlign="right",d=0;F=C.right[d];d++)Math.round(F[0]/this.get("step"))%m||(E=this.formatCoord(F[0]),o.strokeText(E,s-L,F[1][1]),o.fillText(E,s-L,F[1][1]))}if(b){var I,G,R=this.style.getFill().getColor();for((G=this.style.getStroke())?I=this.style.getStroke().getColor():(I=R,R="#fff"),o.strokeStyle=I,o.lineWidth=G?G.getWidth():1,d=1;d<C.top.length;d++)o.beginPath(),o.rect(C.top[d-1][1][0],_,C.top[d][1][0]-C.top[d-1][1][0],v),o.fillStyle=Math.round(C.top[d][0]/y)%2?I:R,o.fill(),o.stroke();for(d=1;d<C.bottom.length;d++)o.beginPath(),o.rect(C.bottom[d-1][1][0],n-v-_,C.bottom[d][1][0]-C.bottom[d-1][1][0],v),o.fillStyle=Math.round(C.bottom[d][0]/y)%2?I:R,o.fill(),o.stroke();for(d=1;d<C.left.length;d++)o.beginPath(),o.rect(_,C.left[d-1][1][1],v,C.left[d][1][1]-C.left[d-1][1][1]),o.fillStyle=Math.round(C.left[d][0]/y)%2?I:R,o.fill(),o.stroke();for(d=1;d<C.right.length;d++)o.beginPath(),o.rect(s-v-_,C.right[d-1][1][1],v,C.right[d][1][1]-C.right[d-1][1][1]),o.fillStyle=Math.round(C.right[d][0]/y)%2?I:R,o.fill(),o.stroke();o.beginPath(),o.fillStyle=I,o.rect(_,_,v,v),o.rect(_,n-v-_,v,v),o.rect(s-v-_,_,v,v),o.rect(s-v-_,n-v-_,v,v),o.fill()}o.restore()}},ol.control.GridReference=function(t){t||(t={});var e=document.createElement("div");e.className=(t.target?"":"ol-control ")+"ol-gridreference ol-unselectable "+(t.className||""),ol.control.Control.call(this,{element:e,target:t.target}),"function"==typeof t.property&&(this.getFeatureName=t.property),"function"==typeof t.sortFeatures&&(this.sortFeatures=t.sortFeatures),"function"==typeof t.indexTitle&&(this.indexTitle=t.indexTitle),this.source_=t.source,t.source&&(this.setIndex(t.source.getFeatures(),t),t.source.once("change",function(e){"ready"===t.source.getState()&&this.setIndex(t.source.getFeatures(),t)}.bind(this))),this.set("maxResolution",t.maxResolution||1/0),this.set("extent",t.extent),this.set("size",t.size),this.set("margin",t.margin||0),this.set("property",t.property||"name"),this.set("filterLabel",t.filterLabel||"filter"),t.style instanceof ol.style.Style?this.style=t.style:this.style=new ol.style.Style({stroke:new ol.style.Stroke({color:"#000",width:1}),text:new ol.style.Text({font:"bold 14px Arial",stroke:new ol.style.Stroke({color:"#fff",width:2}),fill:new ol.style.Fill({color:"#000"})})})},ol.inherits(ol.control.GridReference,ol.control.Control),ol.control.GridReference.prototype.getFeatureName=function(t){return t.get(this.get("property")||"name")},ol.control.GridReference.prototype.sortFeatures=function(t,e){return this.getFeatureName(t)==this.getFeatureName(e)?0:this.getFeatureName(t)<this.getFeatureName(e)?-1:1},ol.control.GridReference.prototype.indexTitle=function(t){return this.getFeatureName(t).charAt(0)},ol.control.GridReference.prototype.setIndex=function(t){if(this.getMap()){var e=this;t.getArray&&(t=t.getArray()),t.sort(function(t,o){return e.sortFeatures(t,o)});for(var o,i,r,s=$(this.element).html(""),n=($("<input>").attr("type","search").attr("placeholder",this.get("filterLabel")||"filter").on("search keyup",function(){var t=$(this).val().replace(/^\*/,""),e=new RegExp(t,"i");$("li",n).each(function(){var t=$(this);t.hasClass("ol-title")?t.show():e.test($(".ol-name",t).text())?t.show():t.hide()}),$("li.ol-title",n).each(function(){var t=$(this).nextAll("li:visible").first();t.length&&!t.hasClass("ol-title")?$(this).show():$(this).hide()})}).appendTo(s),$("<ul>").appendTo(s)),a=0;r=t[a];a++)if(o=this.getReference(r.getGeometry().getFirstCoordinate())){var l=this.getFeatureName(r),h=this.indexTitle(r);h!=i&&$("<li>").addClass("ol-title").text(h).appendTo(n),i=h,$("<li>").append($("<span>").addClass("ol-name").text(l)).append($("<span>").addClass("ol-ref").text(o)).data("feature",r).click(function(){e.dispatchEvent({type:"select",feature:$(this).data("feature")})}).appendTo(n)}}},ol.control.GridReference.prototype.getReference=function(t){if(this.getMap()){var e=this.get("extent"),o=this.get("size"),i=Math.floor((t[0]-e[0])/(e[2]-e[0])*o[0]);if(i<0||i>=o[0])return"";var r=Math.floor((e[3]-t[1])/(e[3]-e[1])*o[1]);return r<0||r>=o[1]?"":String.fromCharCode(65+i)+r}},ol.control.GridReference.prototype.setMap=function(t){var e=this.getMap();this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.control.Control.prototype.setMap.call(this,t),e&&e.renderSync(),t&&(this._listener=t.on("postcompose",this.drawGrid_.bind(this)),this.source_&&this.setIndex(this.source_.getFeatures()))},ol.control.GridReference.prototype.setStyle=function(t){this.style=t},ol.control.GridReference.prototype.getStyle=function(){return style},ol.control.GridReference.prototype.drawGrid_=function(t){if(!(this.get("maxResolution")<t.frameState.viewState.resolution)){var e=t.context,o=e.canvas,i=t.frameState.pixelRatio,r=o.width/i,s=o.height/i,n=this.get("extent"),a=this.get("size"),l=this.getMap(),h=ol.extent.boundingExtent([l.getPixelFromCoordinate([n[0],n[1]]),l.getPixelFromCoordinate([n[2],n[3]])]),c=[h[0],h[1]],p=[h[2],h[3]],u=(p[0]-c[0])/a[0],g=(p[1]-c[1])/a[1];e.save();var d=this.get("margin");e.scale(i,i),e.strokeStyle=this.style.getStroke().getColor(),e.lineWidth=this.style.getStroke().getWidth(),e.beginPath();for(var f=0;f<=a[0];f++)e.moveTo(c[0]+f*u,c[1]),e.lineTo(c[0]+f*u,p[1]);for(f=0;f<=a[1];f++)e.moveTo(c[0],c[1]+f*g),e.lineTo(p[0],c[1]+f*g);e.stroke(),e.font=this.style.getText().getFont(),e.fillStyle=this.style.getText().getFill().getColor(),e.strokeStyle=this.style.getText().getStroke().getColor();var y,m,v,_=d+(e.lineWidth=this.style.getText().getStroke().getWidth());for(e.textAlign="center",f=0;f<a[0];f++)y=String.fromCharCode(65+f),m=c[0]+f*u+u/2,(v=c[1]-_)<0?(v=_,e.textBaseline="hanging"):e.textBaseline="alphabetic",e.strokeText(y,m,v),e.fillText(y,m,v),(v=p[1]+_)>s?(v=s-_,e.textBaseline="alphabetic"):e.textBaseline="hanging",e.strokeText(y,m,v),e.fillText(y,m,v);for(e.textBaseline="middle",f=0;f<a[0];f++)v=c[1]+f*g+g/2,e.textAlign="right",(m=c[0]-_)<0?(m=_,e.textAlign="left"):e.textAlign="right",e.strokeText(f,m,v),e.fillText(f,m,v),(m=p[0]+_)>r?(m=r-_,e.textAlign="right"):e.textAlign="left",e.strokeText(f,m,v),e.fillText(f,m,v);e.restore()}},ol.control.LayerPopup=function(t){(t=t||{}).switcherClass="ol-layerswitcher-popup",!1!==t.mouseover&&(t.mouseover=!0),ol.control.LayerSwitcher.call(this,t)},ol.inherits(ol.control.LayerPopup,ol.control.LayerSwitcher),ol.control.LayerPopup.prototype.overflow=function(){},ol.control.LayerPopup.prototype.drawList=function(t,e){var o=this,i=function(t){t.preventDefault();var i=$(this).data("layer");o.switchLayerVisibility(i,e)};e.forEach(function(e){if(o.displayInLayerSwitcher(e)){var r=$("<li>").text(e.get("title")||e.get("name")).data("layer",e).click(i).on("touchstart",i).appendTo(t);o.testLayerVisibility(e)&&r.addClass("ol-layer-hidden"),e.getVisible()&&r.addClass("select")}})},ol.control.LayerSwitcherImage=function(t){(t=t||{}).switcherClass="ol-layerswitcher-image",!1!==t.mouseover&&(t.mouseover=!0),ol.control.LayerSwitcher.call(this,t)},ol.inherits(ol.control.LayerSwitcherImage,ol.control.LayerSwitcher),ol.control.LayerSwitcherImage.prototype.drawList=function(t,e){var o=this,i=function(t){t.preventDefault();var i=$(this).data("layer");o.switchLayerVisibility(i,e),"touchstart"==t.type&&$(o.element).addClass("ol-collapsed")};t.css("height","auto"),e.forEach(function(e){if(o.displayInLayerSwitcher(e)){var r=e.getPreview?e.getPreview():["none"],s=$("<li>").addClass("ol-imgcontainer").data("layer",e).click(i).on("touchstart",i);e.getVisible()&&s.addClass("select");for(var n=0;n<r.length;n++)$("<img>").attr("src",r[n]).appendTo(s);$("<p>").text(e.get("title")||e.get("name")).appendTo(s),o.testLayerVisibility(e)&&s.addClass("ol-layer-hidden"),s.appendTo(t)}})},ol.control.LayerSwitcherImage.prototype.overflow=function(){},ol.control.Overlay=function(t){t||(t={});var e=$("<div>").addClass("ol-unselectable ol-overlay");t.className&&e.addClass(t.className),ol.control.Control.call(this,{element:e.get(0),target:t.target});var o=this;t.hideOnClick&&e.click(function(){o.hide()}),this.set("closeBox",t.closeBox),this._timeout=!1,this.setContent(t.content)},ol.inherits(ol.control.Overlay,ol.control.Control),ol.control.Overlay.prototype.setContent=function(t){var e=this;if(t){var o=$(this.element);if(o.html(t),this.get("closeBox")){var i=$("<div>").addClass("ol-closebox").click(function(){e.hide()});o.prepend(i)}}},ol.control.Overlay.prototype.show=function(t,e){var o=this,i=$(this.element).show();e?(this.center_=this.getMap().getPixelFromCoordinate(e),i.css({top:this.center_[1],left:this.center_[0]})):(this.center_=!1,i.css({top:"",left:""})),this.setContent(t),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){i.addClass("ol-visible").css({top:"",left:""}),o.dispatchEvent({type:"change:visible",visible:!0,element:o.element})},10),o.dispatchEvent({type:"change:visible",visible:!1,element:o.element})},ol.control.Overlay.prototype.hide=function(){var t=$(this.element).removeClass("ol-visible");this.center_&&(t.css({top:this.center_[1],left:this.center_[0]}),this.center_=!1),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){t.hide()},500),this.dispatchEvent({type:"change:visible",visible:!1,element:this.element})},ol.control.Overlay.prototype.toggle=function(){this.getVisible()?this.hide():this.show()},ol.control.Overlay.prototype.getVisible=function(){return"none"!=$(this.element).css("display")},ol.control.Overlay.prototype.setClass=function(t){var e=$(this.element).hasClass("ol-visible");$(this.element).removeClass().addClass("ol-unselectable ol-overlay"+(e?" ol-visible ":" ")+t)},ol.control.Overview=function(t){t=t||{};var e,o=this;this.minZoom=t.minZoom||0,this.maxZoom=t.maxZoom||18,this.rotation=t.rotation,t.target?(e=$("<div>"),this.panel_=$(t.target)):(e=$("<div>").addClass("ol-overview ol-unselectable ol-control ol-collapsed"),/top/.test(t.align)&&e.addClass("ol-control-top"),/right/.test(t.align)&&e.addClass("ol-control-right"),$("<button>").on("touchstart",function(t){o.toggleMap(),t.preventDefault()}).attr("type","button").click(function(){o.toggleMap()}).appendTo(e),this.panel_=$("<div>").addClass("panel").appendTo(e)),ol.control.Control.call(this,{element:e.get(0),target:t.target}),this.ovmap_=new ol.Map({controls:new ol.Collection,interactions:new ol.Collection,target:this.panel_.get(0),view:new ol.View({zoom:14,center:[270148,6247782],projection:t.projection}),layers:t.layers}),this.oview_=this.ovmap_.getView(),this.extentLayer=new ol.layer.Vector({name:"Cache extent",source:new ol.source.Vector,style:t.style||[new ol.style.Style({image:new ol.style.Circle({fill:new ol.style.Fill({color:"rgba(255,0,0, 1)"}),stroke:new ol.style.Stroke({width:7,color:"rgba(255,0,0, 0.8)"}),radius:5}),stroke:new ol.style.Stroke({width:5,color:"rgba(255,0,0,0.8)"})})]}),this.ovmap_.addLayer(this.extentLayer),this.ovmap_.addInteraction(new ol.interaction.Pointer({handleDownEvent:function(e){var i,r;return!1!==t.panAnimation?"elastic"==t.panAnimation||t.elasticPan?o.getMap().getView().animate({center:e.coordinate,easing:(2,.3,i=6*Math.PI/2,-1/.3,r=Math.cos(i)*Math.pow(2,-1/.3),function(t){return t=1-Math.cos(t*Math.PI/2),1-Math.cos(i*t)*Math.pow(2,-1/.3*t)+r*t}),duration:1e3}):o.getMap().getView().animate({center:e.coordinate,duration:300}):o.getMap().getView().setCenter(e.coordinate),!1}}))},ol.inherits(ol.control.Overview,ol.control.Control),ol.control.Overview.prototype.getOverviewMap=function(){return this.ovmap_},ol.control.Overview.prototype.toggleMap=function(){$(this.element).toggleClass("ol-collapsed"),this.ovmap_.updateSize()},ol.control.Overview.prototype.setPosition=function(t){/top/.test(t)?$(this.element).addClass("ol-control-top"):$(this.element).removeClass("ol-control-top"),/right/.test(t)?$(this.element).addClass("ol-control-right"):$(this.element).removeClass("ol-control-right")},ol.control.Overview.prototype.setMap=function(t){this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.control.Control.prototype.setMap.call(this,t),t&&(this._listener=t.getView().on("propertychange",this.setView.bind(this)),this.setView())},ol.control.Overview.prototype.calcExtent_=function(t){var e=this.getMap();if(e){var o=this.extentLayer.getSource();o.clear();var i=new ol.Feature,r=e.getSize(),s=e.getView().getResolution(),n=e.getView().getRotation(),a=e.getView().getCenter();if(s){var l=s*r[0]/2,h=s*r[1]/2,c=this.oview_.getResolution();if(l/c>5||h/c>5){var p,u,g,d=Math.cos(n),f=Math.sin(n);for(t=[[-l,-h],[-l,h],[l,h],[l,-h]],p=0;p<4;++p)u=t[p][0],g=t[p][1],t[p][0]=a[0]+u*d-g*f,t[p][1]=a[1]+u*f+g*d;i.setGeometry(new ol.geom.Polygon([t]))}else i.setGeometry(new ol.geom.Point(a));o.addFeature(i)}}},ol.control.Overview.prototype.setView=function(t){if(!t)return this.setView({key:"rotation"}),this.setView({key:"resolution"}),void this.setView({key:"center"});switch(t.key){case"rotation":this.rotation?this.oview_.setRotation(this.getMap().getView().getRotation()):this.oview_.getRotation()&&this.oview_.setRotation(0);break;case"center":var e=this.getMap().getView().calculateExtent(this.getMap().getSize()),o=this.oview_.calculateExtent(this.ovmap_.getSize());(e[0]<o[0]||e[1]<o[1]||e[2]>o[2]||e[3]>o[3])&&this.oview_.setCenter(this.getMap().getView().getCenter());break;case"resolution":var i=2*Math.round(this.getMap().getView().getZoom()/2)-4;i=Math.min(this.maxZoom,Math.max(this.minZoom,i)),this.oview_.setZoom(i)}this.calcExtent_()},ol.control.Permalink=function(t){var e=t||{},o=this,i=document.createElement("button");function r(){"function"==typeof e.onclick?e.onclick(o.getLink()):o.setUrlReplace(!o.replaceState_)}this.replaceState_=!1!==e.urlReplace,this.fixed_=e.fixed||6,this.hash_=e.anchor?"#":"?",i.addEventListener("click",r,!1),i.addEventListener("touchstart",r,!1);var s=document.createElement("div");s.className=(e.className||"ol-permalink")+" ol-unselectable ol-control",s.appendChild(i),ol.control.Control.call(this,{element:s,target:e.target}),this.on("change",this.viewChange_.bind(this)),this.search_={};var n=document.location.hash||document.location.search;if(n){n=n.replace(/(^#|^\?)/,"").split("&");for(var a=0;a<n.length;a++){var l=n[a].split("=");switch(l[0]){case"lon":case"lat":case"z":case"r":case"l":break;default:this.search_[l[0]]=l[1]}}}this.setPosition()},ol.inherits(ol.control.Permalink,ol.control.Control),ol.control.Permalink.prototype.setMap=function(t){this._listener&&(ol.Observable.unByKey(this._listener.change),ol.Observable.unByKey(this._listener.moveend)),this._listener=null,ol.control.Control.prototype.setMap.call(this,t),t&&(this._listener={change:t.getLayerGroup().on("change",this.layerChange_.bind(this)),moveend:t.on("moveend",this.viewChange_.bind(this))},this.setPosition())},ol.control.Permalink.prototype.getLayerByLink=function(t,e){!e&&this.getMap()&&(e=this.getMap().getLayers().getArray());for(var o=0;o<e.length;o++){if(e[o].get("permalink")==t)return e[o];if(e[o].getLayers){var i=this.getLayerByLink(t,e[o].getLayers().getArray());if(i)return i}}return!1},ol.control.Permalink.prototype.setPosition=function(){var t=this.getMap();if(t){var e=document.location.hash||document.location.search;if(e){var o={};e=e.replace(/(^#|^\?)/,"").split("&");for(var i=0;i<e.length;i++)o[(n=e[i].split("="))[0]]=n[1];var r=ol.proj.transform([Number(o.lon),Number(o.lat)],"EPSG:4326",t.getView().getProjection());if(r[0]&&r[1]&&t.getView().setCenter(r),o.z&&t.getView().setZoom(Number(o.z)),o.r&&t.getView().setRotation(Number(o.r)),o.l){!function e(o){o||(o=t.getLayers().getArray());for(var i=0;i<o.length;i++)o[i].get("permalink")&&o[i].setVisible(!1),o[i].getLayers&&e(o[i].getLayers().getArray())}();var s=o.l.split("|");for(i=0;i<s.length;i++){var n=s[i].split(":"),a=this.getLayerByLink(n[0]),l=Number(n[1]);a&&(a.setOpacity(l),a.setVisible(!0))}}}}},ol.control.Permalink.prototype.getUrlParams=function(){return this.search_},ol.control.Permalink.prototype.setUrlParam=function(t,e){t&&(void 0===e||""===e?delete this.search_[encodeURIComponent(t)]:this.search_[encodeURIComponent(t)]=encodeURIComponent(e)),this.viewChange_()},ol.control.Permalink.prototype.getUrlParam=function(t){return decodeURIComponent(this.search_[encodeURIComponent(t)]||"")},ol.control.Permalink.prototype.hasUrlParam=function(t){return this.search_.hasOwnProperty(encodeURIComponent(t))},ol.control.Permalink.prototype.getLink=function(){var t=this.getMap(),e=ol.proj.transform(t.getView().getCenter(),t.getView().getProjection(),"EPSG:4326"),o=t.getView().getZoom(),i=t.getView().getRotation(),r=this.layerStr_,s="lon="+e[0].toFixed(this.fixed_)+"&lat="+e[1].toFixed(this.fixed_)+"&z="+o+(i?"&r="+Math.round(1e4*i)/1e4:"")+(r?"&l="+r:"");for(var n in this.search_)s+="&"+n+"="+this.search_[n];return document.location.protocol+"//"+document.location.host+document.location.pathname+this.hash_+s},ol.control.Permalink.prototype.setUrlReplace=function(t){try{if(this.replaceState_=t,t)window.history.replaceState(null,null,this.getLink());else{var e="";for(var o in this.search_)e+=(""==e?"?":"&")+o+"="+this.search_[o];window.history.replaceState(null,null,document.location.origin+document.location.pathname+e)}}catch(t){}},ol.control.Permalink.prototype.viewChange_=function(){try{this.replaceState_&&window.history.replaceState(null,null,this.getLink())}catch(t){}},ol.control.Permalink.prototype.layerChange_=function(t){var e="";!function t(o){for(var i=0;i<o.length;i++)o[i].getVisible()&&o[i].get("permalink")&&(e&&(e+="|"),e+=o[i].get("permalink")+":"+o[i].get("opacity")),o[i].getLayers&&t(o[i].getLayers().getArray())}(this.getMap().getLayers().getArray()),this.layerStr_=e,this.viewChange_()},ol.control.Profil=function(t){var e=t||{};this.info=e.info||ol.control.Profil.prototype.info;var o,i=this;e.target?o=$("<div>").addClass(e.className||"ol-profil"):(o=$("<div>").addClass((e.className||"ol-profil")+" ol-unselectable ol-control ol-collapsed"),this.button=$("<button>").attr("type","button").on("click touchstart",function(t){i.toggle(),t.preventDefault()}).appendTo(o));var r=$("<div>").addClass("ol-inner").appendTo(o);r=$("<div>").css("position","relative").appendTo(r);var s=this.ratio=2;this.canvas_=document.createElement("canvas"),this.canvas_.width=(e.width||300)*s,this.canvas_.height=(e.height||150)*s,$(this.canvas_).css({transform:"scale(0.5,0.5)","transform-origin":"0 0","-ms-transform":"scale(0.5,0.5)","-ms-transform-origin":"0 0","-webkit-transform":"scale(0.5,0.5)","-webkit-transform-origin":"0 0",transform:"scale(0.5,0.5)","transform-origin":"0 0"}),$("<div>").appendTo(r).width(this.canvas_.width/s).height(this.canvas_.height/s).append(this.canvas_).on("click mousemove",function(t){i.onMove(t)}),ol.control.Control.call(this,{element:o.get(0),target:e.target}),this.margin_={top:10*s,left:40*s,bottom:30*s,right:10*s},this.info.ytitle||(this.margin_.left-=20*s),this.info.xtitle||(this.margin_.bottom-=20*s),this.bar_=$("<div>").addClass("ol-profilbar").css({top:this.margin_.top/s+"px",height:(this.canvas_.height-this.margin_.top-this.margin_.bottom)/s+"px"}).appendTo(r),this.cursor_=$("<div>").addClass("ol-profilcursor").appendTo(r),this.popup_=$("<div>").addClass("ol-profilpopup").appendTo(this.cursor_);var n=$("<table cellpadding='0' cellspacing='0'>").appendTo(r).width(this.canvas_.width/s),a=$("<tr>").addClass("track-info").appendTo(n);$("<td>").html((this.info.zmin||"Zmin")+': <span class="zmin">').appendTo(a),$("<td>").html((this.info.zmax||"Zmax")+': <span class="zmax">').appendTo(a),$("<td>").html((this.info.distance||"Distance")+': <span class="dist">').appendTo(a),$("<td>").html((this.info.time||"Time")+': <span class="time">').appendTo(a),a=$("<tr>").addClass("point-info").appendTo(n),$("<td>").html((this.info.altitude||"Altitude")+': <span class="z">').appendTo(a),$("<td>").html((this.info.distance||"Distance")+': <span class="dist">').appendTo(a),$("<td>").html((this.info.time||"Time")+': <span class="time">').appendTo(a),this.tab_=[],e.feature&&this.setGeometry(e.feature)},ol.inherits(ol.control.Profil,ol.control.Control),ol.control.Profil.prototype.info={zmin:"Zmin",zmax:"Zmax",ytitle:"Altitude (m)",xtitle:"Distance (km)",time:"Time",altitude:"Altitude",distance:"Distance"},ol.control.Profil.prototype.popup=function(t){this.popup_.html(t)},ol.control.Profil.prototype.onMove=function(t){if(this.tab_.length){var e=$(this.canvas_).offset(),o=t.pageX-e.left,i=t.pageY-e.top,r=this.ratio;if(o>this.margin_.left/r&&o<(this.canvas_.width-this.margin_.right)/r&&i>this.margin_.top/r&&i<(this.canvas_.height-this.margin_.bottom)/r){this.bar_.css("left",o+"px").show();for(var s,n=(o*r-this.margin_.left)/this.scale_[0],a=this.tab_[0],l=1;s=this.tab_[l];l++)if(s[0]>=n){n<(s[0]+a[0])/2&&(s=a);break}s?this.cursor_.css({left:o+"px",top:(this.canvas_.height-this.margin_.bottom+s[1]*this.scale_[1]+this.dy_)/r+"px"}).show():this.cursor_.hide(),this.bar_.parent().addClass("over"),$(".point-info .z",this.element).text(s[1]+"m"),$(".point-info .dist",this.element).text((s[0]/1e3).toFixed(1)+"km"),$(".point-info .time",this.element).text(s[2]),o>this.canvas_.width/r/2?this.popup_.addClass("ol-left"):this.popup_.removeClass("ol-left"),this.dispatchEvent({type:"over",click:"click"==t.type,coord:s[3],time:s[2],distance:s[0]})}else this.bar_.parent().hasClass("over")&&(this.bar_.hide(),this.cursor_.hide(),this.bar_.parent().removeClass("over"),this.dispatchEvent({type:"out"}))}},ol.control.Profil.prototype.show=function(){$(this.element).removeClass("ol-collapsed"),this.dispatchEvent({type:"show",show:!0})},ol.control.Profil.prototype.hide=function(){$(this.element).addClass("ol-collapsed"),this.dispatchEvent({type:"show",show:!1})},ol.control.Profil.prototype.toggle=function(){var t=$(this.element).toggleClass("ol-collapsed").hasClass("ol-collapsed");this.dispatchEvent({type:"show",show:!t})},ol.control.Profil.prototype.isShown=function(){return!$(this.element).hasClass("ol-collapsed")},ol.control.Profil.prototype.setGeometry=function(t,e){e||(e={}),t instanceof ol.Feature&&(t=t.getGeometry());var o=this.canvas_,i=o.getContext("2d"),r=o.width,s=o.height;if(i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,r,s),/Z/.test(t.getLayout())){/M/.test(t.getLayout())?$(".time",this.element).parent().show():$(".time",this.element).parent().hide();var n=t.getCoordinates();switch(t.getType()){case"LineString":break;case"MultiLineString":n=n[0];break;default:return}var a=e.projection||this.getMap().getView().getProjection();i.setTransform(1,0,0,1,this.margin_.left,s-this.margin_.bottom);var l=this.ratio;r-=this.margin_.right+this.margin_.left,s-=this.margin_.top+this.margin_.bottom,i.strokeStyle="#000",i.lineWidth=.5*l,i.beginPath(),i.moveTo(0,0),i.lineTo(0,-s),i.moveTo(0,0),i.lineTo(r,0),i.stroke();for(var h,c,p,u,g,d=1/0,f=-1/0,y=this.tab_=[],m=0;C=n[m];m++)(c=C[2])<d&&(d=c),c>f&&(f=c),0==m?h=0:h+=(u=n[m-1],g=C,ol.sphere.getDistance(ol.proj.transform(u,a,"EPSG:4326"),ol.proj.transform(g,a,"EPSG:4326"))),p=P(n[0][3],C[3]),y.push([h,c,p,C]);$(".track-info .zmin",this.element).text(d.toFixed(2)+"m"),$(".track-info .zmax",this.element).text(f.toFixed(2)+"m"),h>1e3?$(".track-info .dist",this.element).text((h/1e3).toFixed(1)+"km"):$(".track-info .dist",this.element).text(h.toFixed(1)+"m"),$(".track-info .time",this.element).text(p);for(var v=e.graduation||100;s/(((f=Math.ceil(f/v)*v)-(d=Math.floor(d/v)*v))/v)<15*l;)v*=2;"number"==typeof e.zmin&&d>e.zmin&&(d=e.zmin),"number"==typeof e.zmax&&f<e.zmax&&(f=e.zmax);var _=e.amplitude;_&&(f=Math.max(d+_,f));var w=r/h,S=-s/(f-d),x=this.dy_=-d*S;for(this.scale_=[w,S],i.font=10*l+"px arial",i.textAlign="right",i.textBaseline="middle",i.fillStyle="#000",i.beginPath(),m=d;m<=f;m+=v)"km"!=e.zunit?i.fillText(m,-4*l,m*S+x):i.fillText((m/1e3).toFixed(1),-4*l,m*S+x),i.moveTo(-2*l,m*S+x),0!=m?i.lineTo(h*w,m*S+x):i.lineTo(0,m*S+x);i.textAlign="center",i.textBaseline="top",i.setLineDash([l,3*l]);var b,C,k=e.unit||"km";for(h>1e3?(b=100*Math.round(h/1e3))>1e3&&(b=1e3*Math.ceil(b/1e3)):(k="m",b=h>100?10*Math.round(h/100):h>10?Math.round(h/10):h>1?Math.round(h)/10:h),m=0;m<=h;m+=b){var M="m"==k?m:m/1e3;i.fillText(Math.round(10*M)/10,m*w,4*l),i.moveTo(m*w,2*l),i.lineTo(m*w,0)}for(i.font=12*l+"px arial",i.fillText(this.info.xtitle.replace("(km)","("+k+")"),r/2,18*l),i.save(),i.rotate(-Math.PI/2),i.fillText(this.info.ytitle,s/2,-this.margin_.left),i.restore(),i.stroke(),i.strokeStyle="#369",i.lineWidth=1,i.setLineDash([]),i.beginPath(),m=0;C=y[m];m++)0==m?i.moveTo(C[0]*w,C[1]*S+x):i.lineTo(C[0]*w,C[1]*S+x);i.stroke()}function P(t,e){if(!t||!e)return"-";var o=(e-t)/60,i=Math.trunc(o/60),r=Math.trunc(o-60*i);return i+"h"+(r<10?"0":"")+r+"mn"}},ol.control.Profil.prototype.getImage=function(t,e){return"canvas"===t?this.canvas_:this.canvas_.toDataURL(t,e)},ol.control.Scale=function(t){t||(t={}),null==t.typing&&(t.typing=300);var e=document.createElement("DIV"),o=(t.className||"")+" ol-scale";t.target||(o+=" ol-unselectable ol-control"),this._input=document.createElement("INPUT"),this._input.value="-",e.setAttribute("class",o),!1===t.editable&&(this._input.readOnly=!0),e.appendChild(this._input),ol.control.Control.call(this,{element:e,target:t.target}),this._input.addEventListener("change",this.setScale.bind(this)),this.set("ppi",t.ppi||96)},ol.inherits(ol.control.Scale,ol.control.Control),ol.control.Scale.prototype.setMap=function(t){this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.control.Control.prototype.setMap.call(this,t),t&&(this._listener=t.on("moveend",this._showScale.bind(this)))},ol.control.Scale.prototype._showScale=function(){var t=this.getMap();if(t){var e=t.getView(),o=e.getProjection(),i=e.getCenter(),r=t.getPixelFromCoordinate(i);r[1]+=1;var s=t.getCoordinateFromPixel(r),n=ol.sphere.getDistance(ol.proj.transform(i,o,"EPSG:4326"),ol.proj.transform(s,o,"EPSG:4326"));n*=this.get("ppi")/.0254,this._input.value=this.formatScale(n)}},ol.control.Scale.prototype.formatScale=function(t){return"1 / "+(t=t>100?100*Math.round(t/100):Math.round(t)).toLocaleString()},ol.control.Scale.prototype.setScale=function(t){var e=this.getMap();if(e&&t){t.target&&(t=t.target.value);var o=t;"string"==typeof t&&((o=t.split("/")[1])||(o=t),console.log(o),o=o.replace(/[^\d]/g,""),o=parseInt(o));var i=e.getView(),r=i.getProjection(),s=i.getCenter(),n=e.getPixelFromCoordinate(s);n[1]+=1;var a=e.getCoordinateFromPixel(n),l=ol.sphere.getDistance(ol.proj.transform(s,r,"EPSG:4326"),ol.proj.transform(a,r,"EPSG:4326"));l*=this.get("ppi")/.0254,i.setResolution(i.getResolution()*o/l)}this._showScale()},ol.control.SearchBAN=function(t){(t=t||{}).typing=t.typing||500,t.url=t.url||"https://api-adresse.data.gouv.fr/search/",t.className=t.className||"BAN",ol.control.SearchPhoton.call(this,t),this.set("copy","<a href='https://adresse.data.gouv.fr/' target='new'>&copy; BAN-data.gouv.fr</a>")},ol.inherits(ol.control.SearchBAN,ol.control.SearchPhoton),ol.control.SearchBAN.prototype.getTitle=function(t){return t.properties.label},ol.control.SearchBAN.prototype.select=function(t){var e=t.geometry.coordinates;try{e=ol.proj.transform(t.geometry.coordinates,"EPSG:4326",this.getMap().getView().getProjection())}catch(t){}this.dispatchEvent({type:"select",search:t,coordinate:e})},ol.control.SearchFeature=function(t){t||(t={}),t.className=t.className||"feature",ol.control.Search.call(this,t),"function"==typeof t.getSearchString&&(this.getSearchString=t.getSearchString),this.set("property",t.property||"name"),this.source_=t.source},ol.inherits(ol.control.SearchFeature,ol.control.Search),ol.control.SearchFeature.prototype.getTitle=function(t){return t.get(this.get("property")||"name")},ol.control.SearchFeature.prototype.getSearchString=function(t){return this.getTitle(t)},ol.control.SearchFeature.prototype.getSource=function(){return this.source_},ol.control.SearchFeature.prototype.setSource=function(t){this.source_=t},ol.control.SearchFeature.prototype.autocomplete=function(t){var e=[];if(this.source_){t=t.replace(/^\*/,"");for(var o,i=new RegExp(t,"i"),r=this.source_.getFeatures(),s=this.get("maxItems"),n=0;o=r[n];n++){var a=this.getSearchString(o);if(void 0!==a&&i.test(a)&&(e.push(o),--s<=0))break}}return e},ol.control.SearchGeoportailParcelle=function(t){var e=this;t.type="Commune",t.className=t.className?t.className+" IGNF-parcelle":"IGNF-parcelle",t.inputLabel="Commune",t.noCollapse=!0,t.placeholder=t.placeholder||"Choisissez une commune...",ol.control.SearchGeoportail.call(this,t),this.set("copy",null);var o,i,r=this.element,s=document.createElement("DIV");r.appendChild(s),(o=document.createElement("LABEL")).innerText="Prfixe",s.appendChild(o),(o=document.createElement("LABEL")).innerText="Section",s.appendChild(o),(o=document.createElement("LABEL")).innerText="Numro",s.appendChild(o),s.appendChild(document.createElement("BR")),this._inputParcelle={prefix:document.createElement("INPUT"),section:document.createElement("INPUT"),numero:document.createElement("INPUT")},this._inputParcelle.prefix.setAttribute("maxlength",3),this._inputParcelle.section.setAttribute("maxlength",2),this._inputParcelle.numero.setAttribute("maxlength",4);var n=function(o){i&&clearTimeout(i),i=setTimeout(function(){e.autocompleteParcelle()},t.typing||0)};for(var a in this._inputParcelle)s.appendChild(this._inputParcelle[a]),this._inputParcelle[a].addEventListener("keyup",n);this.activateParcelle(!1);var l=document.createElement("UL");l.classList.add("autocomplete-parcelle"),r.appendChild(l),(l=document.createElement("UL")).classList.add("autocomplete-page"),r.appendChild(l),this._input.addEventListener("blur",function(){setTimeout(function(){r.classList.add("ol-collapsed-list")},200)}),this._input.addEventListener("focus",function(){r.classList.remove("ol-collapsed-list"),e._listParcelle([]),e._commune&&(e._commune=null,e._input.value="",e.drawList_()),e.activateParcelle(!1)}),this.on("select",this.selectCommune.bind(this)),this.set("pageSize",t.pageSize||5)},ol.inherits(ol.control.SearchGeoportailParcelle,ol.control.SearchGeoportail),ol.control.SearchGeoportailParcelle.prototype.selectCommune=function(t){this._commune=t.search.insee,this._input.value=t.search.insee+" - "+t.search.fulltext,this.activateParcelle(!0),this._inputParcelle.numero.focus(),this.autocompleteParcelle()},ol.control.SearchGeoportailParcelle.prototype.activateParcelle=function(t){for(var e in this._inputParcelle)this._inputParcelle[e].readOnly=!t;t?this._inputParcelle.section.parentElement.classList.add("ol-active"):this._inputParcelle.section.parentElement.classList.remove("ol-active")},ol.control.SearchGeoportailParcelle.prototype.autocompleteParcelle=function(t){var e=this;function o(t,e,o){if(!t)return t;for(o=o||"0";t.length<e;)t=o+t;return t.replace(/\*/g,"_")}var i=this._commune,r=o(this._inputParcelle.prefix.value,3);"000"===r&&(r="___");var s=o(this._inputParcelle.section.value,2),n='<?xml version="1.0" encoding="UTF-8"?><XLS xmlns:xls="http://www.opengis.net/xls" xmlns:gml="http://www.opengis.net/gml" xmlns="http://www.opengis.net/xls" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.2" xsi:schemaLocation="http://www.opengis.net/xls http://schemas.opengis.net/ols/1.2/olsAll.xsd"><RequestHeader/><Request requestID="1" version="1.2" methodName="LocationUtilityService"><GeocodeRequest returnFreeForm="false"><Address countryCode="CadastralParcel"><freeFormAddress>'+(i+(r||"___")+(s||"__")+(o(this._inputParcelle.numero.value,4,"0")||(s?"____":"0001")))+"+</freeFormAddress></Address></GeocodeRequest></Request></XLS>",a=this.get("url").replace("ols/apis/completion","geoportail/ols?xls=")+encodeURIComponent(n);this.ajax(a,function(t){for(var o,i=(new DOMParser).parseFromString(t.response,"text/xml").getElementsByTagName("GeocodedAddress"),r=[],s=0;o=i[s];s++){for(var n,a=(o.getElementsByTagName("gml:pos")[0]||o.getElementsByTagName("pos")[0]).childNodes[0].nodeValue.split(" "),l=o.getElementsByTagName("Place"),h={lon:Number(a[1]),lat:Number(a[0])},c=0;n=l[c];c++)h[n.attributes.type.value]=n.childNodes[0].nodeValue;r.push(h)}e._listParcelle(r)},function(){console.log("oops")})},ol.control.SearchGeoportailParcelle.prototype._listParcelle=function(t){var e=this,o=this.element.querySelector("ul.autocomplete-parcelle");o.innerHTML="";var i=this.element.querySelector("ul.autocomplete-page");function r(t){var e=o.children,r="ol-list-"+t;for(k=0;k<e.length;k++)e[k].style.display=e[k].className===r?"":"none";for(e=i.children,k=0;k<e.length;k++)e[k].className=e[k].innerText==t?"selected":"";i.style.display=e.length>1?"":"none"}i.innerHTML="",this._listParc=[],t.sort(function(t,e){var o=t.INSEE+t.CommuneAbsorbee+t.Section+t.Numero,i=e.INSEE+e.CommuneAbsorbee+e.Section+e.Numero;return o===i?0:o<i?-1:1});for(var s,n=this.get("pageSize"),a=0;s=t[a];a++){var l=document.createElement("LI");l.setAttribute("data-search",a),n>0&&l.classList.add("ol-list-"+Math.floor(a/n)),this._listParc.push(s),l.addEventListener("click",function(t){e._handleParcelle(e._listParc[t.currentTarget.getAttribute("data-search")])}),l.innerHTML=s.INSEE+s.CommuneAbsorbee+s.Section+s.Numero,o.appendChild(l),n>0&&!(a%n)&&((l=document.createElement("LI")).innerText=Math.floor(a/n),l.addEventListener("click",function(t){r(t.currentTarget.innerText)}),i.appendChild(l))}n>0&&r(0)},ol.control.SearchGeoportailParcelle.prototype._handleParcelle=function(t){this.dispatchEvent({type:"parcelle",search:t,coordinate:ol.proj.fromLonLat([t.lon,t.lat],this.getMap().getView().getProjection())})},ol.control.SearchNominatim=function(t){(t=t||{}).className=t.className||"nominatim",t.typing=t.typing||500,t.url=t.url||"https://nominatim.openstreetmap.org/search",ol.control.SearchJSON.call(this,t),this.set("copy","<a href='http://www.openstreetmap.org/copyright' target='new'>&copy; OpenStreetMap contributors</a>"),this.set("polygon",t.polygon)},ol.inherits(ol.control.SearchNominatim,ol.control.SearchJSON),ol.control.SearchNominatim.prototype.getTitle=function(t){var e=t.display_name+"<i>"+t.class+" - "+t.type+"</i>";return t.icon&&(e="<img src='"+t.icon+"' />"+e),e},ol.control.SearchNominatim.prototype.requestData=function(t){return{format:"json",addressdetails:1,q:t,polygon_geojson:this.get("polygon")?1:0,limit:this.get("maxItems")}},ol.control.SearchNominatim.prototype.select=function(t){var e=[Number(t.lon),Number(t.lat)];try{e=ol.proj.transform(e,"EPSG:4326",this.getMap().getView().getProjection())}catch(t){}this.dispatchEvent({type:"select",search:t,coordinate:e})},ol.control.Swipe=function(t){var e=t||{},o=document.createElement("button"),i=document.createElement("div");i.className=(e.className||"ol-swipe")+" ol-unselectable ol-control",i.appendChild(o),$(i).on("mousedown touchstart",this,this.move),ol.control.Control.call(this,{element:i}),this._listener=[],this.layers=[],e.layers&&this.addLayer(e.layers,!1),e.rightLayers&&this.addLayer(e.rightLayers,!0),this.on("propertychange",function(){this.getMap()&&this.getMap().renderSync(),"horizontal"===this.get("orientation")?($(this.element).css("top",100*this.get("position")+"%"),$(this.element).css("left","")):("vertical"!==this.get("orientation")&&this.set("orientation","vertical"),$(this.element).css("left",100*this.get("position")+"%"),$(this.element).css("top","")),$(this.element).removeClass("horizontal vertical"),$(this.element).addClass(this.get("orientation"))}.bind(this)),this.set("position",e.position||.5),this.set("orientation",e.orientation||"vertical")},ol.inherits(ol.control.Swipe,ol.control.Control),ol.control.Swipe.prototype.setMap=function(t){for(var e=0;e<this._listener.length;e++)ol.Observable.unByKey(this._listener[e]);if(this._listener=[],this.getMap()&&this.getMap().renderSync(),ol.control.Control.prototype.setMap.call(this,t),t){for(this._listener=[],e=0;e<this.layers.length;e++){var o=this.layers[e];o.right?this._listener.push(o.layer.on("precompose",this.precomposeRight.bind(this))):this._listener.push(o.layer.on("precompose",this.precomposeLeft.bind(this))),this._listener.push(o.layer.on("postcompose",this.postcompose.bind(this)))}t.renderSync()}},ol.control.Swipe.prototype.isLayer_=function(t){for(var e=0;e<this.layers.length;e++)if(this.layers[e].layer===t)return e;return-1},ol.control.Swipe.prototype.addLayer=function(t,e){t instanceof Array||(t=[t]);for(var o=0;o<t.length;o++){var i=t[o];this.isLayer_(i)<0&&(this.layers.push({layer:i,right:e}),this.getMap()&&(e?this._listener.push(i.on("precompose",this.precomposeRight.bind(this))):this._listener.push(i.on("precompose",this.precomposeLeft.bind(this))),this._listener.push(i.on("postcompose",this.postcompose.bind(this))),this.getMap().renderSync()))}},ol.control.Swipe.prototype.removeLayer=function(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++){var o=this.isLayer_(t[e]);o>=0&&this.getMap()&&(this.layers[o].right?t[e].un("precompose",this.precomposeRight,this):t[e].un("precompose",this.precomposeLeft,this),t[e].un("postcompose",this.postcompose,this),this.layers.splice(o,1),this.getMap().renderSync())}},ol.control.Swipe.prototype.move=function(t){var e=t.data;switch(t.type){case"touchcancel":case"touchend":case"mouseup":e.isMoving=!1,$(document).off("mouseup mousemove touchend touchcancel touchmove",e.move);break;case"mousedown":case"touchstart":e.isMoving=!0,$(document).on("mouseup mousemove touchend touchcancel touchmove",e,e.move);case"mousemove":case"touchmove":if(e.isMoving)if("vertical"===e.get("orientation")){var o=t.pageX||t.originalEvent.touches&&t.originalEvent.touches.length&&t.originalEvent.touches[0].pageX||t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length&&t.originalEvent.changedTouches[0].pageX;if(!o)break;o-=$(e.getMap().getTargetElement()).offset().left;var i=e.getMap().getSize()[0];i=Math.min(Math.max(0,1-(i-o)/i),1),e.set("position",i)}else{var r=t.pageY||t.originalEvent.touches&&t.originalEvent.touches.length&&t.originalEvent.touches[0].pageY||t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length&&t.originalEvent.changedTouches[0].pageY;if(!r)break;r-=$(e.getMap().getTargetElement()).offset().top,i=e.getMap().getSize()[1],i=Math.min(Math.max(0,1-(i-r)/i),1),e.set("position",i)}}},ol.control.Swipe.prototype.precomposeLeft=function(t){var e=t.context,o=e.canvas;e.save(),e.beginPath(),"vertical"===this.get("orientation")?e.rect(0,0,o.width*this.get("position"),o.height):e.rect(0,0,o.width,o.height*this.get("position")),e.clip()},ol.control.Swipe.prototype.precomposeRight=function(t){var e=t.context,o=e.canvas;e.save(),e.beginPath(),"vertical"===this.get("orientation")?e.rect(o.width*this.get("position"),0,o.width,o.height):e.rect(0,o.height*this.get("position"),o.width,o.height),e.clip()},ol.control.Swipe.prototype.postcompose=function(t){t.context.restore()},ol.control.Target=function(t){t=t||{},this.style=t.style||[new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new ol.style.Stroke({color:"#fff",width:3})})}),new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new ol.style.Stroke({color:"#000",width:1})})})],this.style instanceof Array||(this.style=[this.style]),this.composite=t.composite||"";var e=document.createElement("div");e.className="ol-target ol-unselectable ol-control",ol.control.Control.call(this,{element:e,target:t.target}),this.setVisible(!1!==t.visible)},ol.inherits(ol.control.Target,ol.control.Control),ol.control.Target.prototype.setMap=function(t){this.getMap()&&this.getVisible()&&this.getMap().renderSync(),this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.control.Control.prototype.setMap.call(this,t),t&&(this._listener=t.on("postcompose",this.drawTarget_.bind(this)))},ol.control.Target.prototype.setVisible=function(t){this.set("visible",t),this.getMap()&&this.getMap().renderSync()},ol.control.Target.prototype.getVisible=function(){return this.get("visible")},ol.control.Target.prototype.drawTarget_=function(t){if(this.getMap()&&this.getVisible()){var e=t.context,o=t.frameState.pixelRatio;e.save(),e.scale(o,o);var i=e.canvas.width/(2*o),r=e.canvas.height/(2*o),s=new ol.geom.Point(this.getMap().getCoordinateFromPixel([i,r]));this.composite&&(e.globalCompositeOperation=this.composite);for(var n=0;n<this.style.length;n++){var a=this.style[n];if(a instanceof ol.style.Style){var l=0,h=!ol.Map.prototype.getFeaturesAtPixel&&a.getImage();h&&(l=h.getScale(),h.setScale(o*l)),t.vectorContext.setStyle(a),t.vectorContext.drawGeometry(s),h&&h.setScale(l)}}e.restore()}},ol.control.TextButton=function(t){(t=t||{}).className=(t.className||"")+" ol-text-button",ol.control.Button.call(this,t)},ol.inherits(ol.control.TextButton,ol.control.Button),ol.control.Toggle=function(t){t=t||{};var e=this;this.interaction_=t.interaction,this.interaction_&&this.interaction_.on("change:active",function(t){e.setActive(!t.oldValue)}),t.toggleFn&&(t.onToggle=t.toggleFn),t.handleClick=function(){e.toggle(),t.onToggle&&t.onToggle.call(e,e.getActive())},t.className=(t.className||"")+" ol-toggle",ol.control.Button.call(this,t),this.set("title",t.title),this.set("autoActivate",t.autoActivate),t.bar&&(this.subbar_=t.bar,this.subbar_.setTarget(this.element),$(this.subbar_.element).addClass("ol-option-bar")),this.setActive(t.active),this.setDisable(t.disable)},ol.inherits(ol.control.Toggle,ol.control.Button),ol.control.Toggle.prototype.setMap=function(t){!t&&this.getMap()&&(this.interaction_&&this.getMap().removeInteraction(this.interaction_),this.subbar_&&this.getMap().removeControl(this.subbar_)),ol.control.Control.prototype.setMap.call(this,t),t&&(this.interaction_&&t.addInteraction(this.interaction_),this.subbar_&&t.addControl(this.subbar_))},ol.control.Toggle.prototype.getSubBar=function(){return this.subbar_},ol.control.Toggle.prototype.getDisable=function(){return $("button",this.element).prop("disabled")},ol.control.Toggle.prototype.setDisable=function(t){this.getDisable()!=t&&($("button",this.element).prop("disabled",t),t&&this.getActive()&&this.setActive(!1),this.dispatchEvent({type:"change:disable",key:"disable",oldValue:!t,disable:t}))},ol.control.Toggle.prototype.getActive=function(){return $(this.element).hasClass("ol-active")},ol.control.Toggle.prototype.toggle=function(){this.getActive()?this.setActive(!1):this.setActive(!0)},ol.control.Toggle.prototype.setActive=function(t){this.getActive()!=t&&(t?$(this.element).addClass("ol-active"):$(this.element).removeClass("ol-active"),this.interaction_&&this.interaction_.setActive(t),this.subbar_&&this.subbar_.setActive(t),this.dispatchEvent({type:"change:active",key:"active",oldValue:!t,active:t}))},ol.control.Toggle.prototype.setInteraction=function(t){this.interaction_=t},ol.control.Toggle.prototype.getInteraction=function(){return this.interaction_},ol.featureAnimation=function(t){t=t||{},this.duration_="number"==typeof t.duration?t.duration>=0?t.duration:0:1e3,this.fade_="function"==typeof t.fade?t.fade:null,this.repeat_=Number(t.repeat);var e="function"==typeof t.easing?t.easing:ol.easing.linear;t.revers?this.easing_=function(t){return 1-e(t)}:this.easing_=e,this.hiddenStyle=t.hiddenStyle,ol.Object.call(this)},ol.inherits(ol.featureAnimation,ol.Object),ol.featureAnimation.prototype.drawGeom_=function(t,e,o){this.fade_&&(t.context.globalAlpha=this.fade_(1-t.elapsed));for(var i=t.style,r=0;r<i.length;r++){var s=0,n=!ol.Map.prototype.getFeaturesAtPixel&&i[r].getImage();n&&(s=n.getScale(),n.setScale(t.frameState.pixelRatio*s));try{t.vectorContext.setStyle(i[r]),i[r].getZIndex()<0?t.vectorContext.drawGeometry(o||e):t.vectorContext.drawGeometry(e)}catch(t){}n&&n.setScale(s)}},ol.featureAnimation.prototype.animate=function(t){return!1},ol.Map.prototype.animateFeature=ol.layer.Vector.prototype.animateFeature=function(t,e){var o,i=this,r=t.getStyle(),s=r||(this.getStyleFunction?this.getStyleFunction()(t):null);s||(s=[]),s instanceof Array||(s=[s]),t.setStyle(e.hiddenStyle||[]);var n={vectorContext:null,frameState:null,start:0,time:0,elapsed:0,extent:!1,feature:t,geom:t.getGeometry(),typeGeom:t.getGeometry().getType(),bbox:t.getGeometry().getExtent(),coord:ol.extent.getCenter(t.getGeometry().getExtent()),style:s};e instanceof Array||(e=[e]);for(var a=e.length-1;a>=0;a--)0===e[a].duration_&&e.splice(a,1);var l=0,h=0;function c(o){n.vectorContext=o.vectorContext,n.frameState=o.frameState,n.extent||(n.extent=o.frameState.extent,n.start=o.frameState.time,n.context=o.context),n.time=o.frameState.time-n.start,n.elapsed=n.time/e[h].duration_,n.elapsed>1&&(n.elapsed=1),e[h].animate(n)||(++l<e[h].repeat_?n.extent=!1:h<e.length-1?(e[h].dispatchEvent({type:"animationend",feature:t}),h++,l=0,n.extent=!1):p()),o.frameState.animate=!0}function p(s){ol.Observable.unByKey(o),o=null,t.setStyle(r);var n={type:"animationend",feature:t};if(s)for(var a in s)s.hasOwnProperty(a)&&(n[a]=s[a]);e[h].dispatchEvent(n),i.dispatchEvent(n)}function u(r){if(e.length&&!o){o=i.on("postcompose",c.bind(i)),i.renderSync?i.renderSync():i.changed();var s={type:"animationstart",feature:t};if(r)for(var n in r)r.hasOwnProperty(n)&&(s[n]=r[n]);e[h].dispatchEvent(s),i.dispatchEvent(s)}}return u(),{start:u,stop:p,isPlaying:function(){return!!o}}},ol.featureAnimation.Bounce=function(t){t=t||{},ol.featureAnimation.call(this,t),this.amplitude_=t.amplitude||40,this.bounce_=-Math.PI*(t.bounce||3)},ol.inherits(ol.featureAnimation.Bounce,ol.featureAnimation),ol.featureAnimation.Bounce.prototype.animate=function(t){var e=t.geom.clone(),o=Math.abs(Math.sin(this.bounce_*t.elapsed))*this.amplitude_*(1-this.easing_(t.elapsed))*t.frameState.viewState.resolution;return e.translate(0,o),this.drawGeom_(t,e,t.geom),t.time<=this.duration_},ol.featureAnimation.Drop=function(t){t=t||{},this.speed_=t.speed||0,ol.featureAnimation.call(this,t),this.side_=t.side||"top"},ol.inherits(ol.featureAnimation.Drop,ol.featureAnimation),ol.featureAnimation.Drop.prototype.animate=function(t){if(!t.time){var e=t.frameState.viewState.rotation,o=t.frameState.size[1]*t.frameState.viewState.resolution;"top"!=this.side_&&(o*=-1),this.dx=-Math.sin(e)*o,this.dy=Math.cos(e)*o,this.speed_&&(this.duration_=o/this.speed_/t.frameState.viewState.resolution)}var i=t.geom.clone();return i.translate(this.dx*(1-this.easing_(t.elapsed)),this.dy*(1-this.easing_(t.elapsed))),this.drawGeom_(t,i,t.geom),t.time<=this.duration_},ol.featureAnimation.Fade=function(t){t=t||{},this.speed_=t.speed||0,ol.featureAnimation.call(this,t)},ol.inherits(ol.featureAnimation.Fade,ol.featureAnimation),ol.featureAnimation.Fade.prototype.animate=function(t){return t.context.globalAlpha=this.easing_(t.elapsed),this.drawGeom_(t,t.geom),t.time<=this.duration_},ol.featureAnimation.None=function(t){ol.featureAnimation.call(this,t)},ol.inherits(ol.featureAnimation.None,ol.featureAnimation),ol.featureAnimation.None.prototype.animate=function(t){return t.time<=this.duration_},ol.featureAnimation.Null=function(t){ol.featureAnimation.call(this,{duration:0})},ol.inherits(ol.featureAnimation.Null,ol.featureAnimation),ol.featureAnimation.Path=function(t){switch(t=t||{},ol.featureAnimation.call(this,t),this.speed_=t.speed||0,this.path_=t.path,t.rotate){case!0:case 0:this.rotate_=0;break;default:this.rotate_=t.rotate||!1}this.path_&&this.path_.getGeometry&&(this.path_=this.path_.getGeometry()),this.path_&&this.path_.getLineString&&(this.path_=this.path_.getLineString()),this.path_.getLength?(this.dist_=this.path_.getLength(),this.path_&&this.path_.getCoordinates&&(this.path_=this.path_.getCoordinates())):this.dist_=0,this.speed_>0&&(this.duration_=this.dist_/this.speed_)},ol.inherits(ol.featureAnimation.Path,ol.featureAnimation),ol.featureAnimation.Path.prototype.animate=function(t){if(!t.time&&!this.dist_)return!1;var e,o,i,r,s,n=this.dist_*this.easing_(t.elapsed),a=0;o=this.path_[0];for(var l=1;l<this.path_.length;l++){if(e=o,i=(o=this.path_[l])[0]-e[0],r=o[1]-e[1],(s=Math.sqrt(i*i+r*r))&&a+s>=n){var h=(n-a)/s;o=[e[0]+(o[0]-e[0])*h,e[1]+(o[1]-e[1])*h];break}a+=s}if(!1!==this.rotate_)for(var c=this.rotate_-Math.atan2(e[1]-o[1],e[0]-o[0]),p=0;h=t.style[p];p++)h.getImage()&&h.getImage().setRotation(c);return t.geom.setCoordinates(o),this.drawGeom_(t,t.geom),t.time<=this.duration_},ol.featureAnimation.Shake=function(t){t=t||{},ol.featureAnimation.call(this,t),this.amplitude_=t.amplitude||40,this.bounce_=-Math.PI*(t.bounce||6),this.horizontal_=t.horizontal},ol.inherits(ol.featureAnimation.Shake,ol.featureAnimation),ol.featureAnimation.Shake.prototype.animate=function(t){var e=t.geom.clone(),o=t.geom.clone(),i=this.easing_(t.elapsed);return i=Math.sin(this.bounce_*i)*this.amplitude_*(1-i)*t.frameState.viewState.resolution,this.horizontal_?(e.translate(i,0),o.translate(i,0)):e.translate(0,i),this.drawGeom_(t,e,o),t.time<=this.duration_},ol.featureAnimation.Show=function(t){ol.featureAnimation.call(this,t)},ol.inherits(ol.featureAnimation.Show,ol.featureAnimation),ol.featureAnimation.Show.prototype.animate=function(t){return this.drawGeom_(t,t.geom),t.time<=this.duration_},ol.featureAnimation.Slide=function(t){t=t||{},this.speed_=t.speed||0,ol.featureAnimation.call(this,t),this.side_=t.side||"left"},ol.inherits(ol.featureAnimation.Slide,ol.featureAnimation),ol.featureAnimation.Slide.prototype.animate=function(t){t.time||("left"==this.side_?this.dx=t.extent[0]-t.bbox[2]:this.dx=t.extent[2]-t.bbox[0],this.speed_&&(this.duration_=Math.abs(this.dx)/this.speed_/t.frameState.viewState.resolution));var e=t.geom.clone();return e.translate(this.dx*(1-this.easing_(t.elapsed)),0),this.drawGeom_(t,e),t.time<=this.duration_},ol.featureAnimation.Teleport=function(t){ol.featureAnimation.call(this,t)},ol.inherits(ol.featureAnimation.Teleport,ol.featureAnimation),ol.featureAnimation.Teleport.prototype.animate=function(t){var e=this.easing_(t.elapsed);if(e){t.context.save();var o=t.frameState.pixelRatio;t.context.globalAlpha=e,t.context.scale(e,1/e);var i=t.frameState.coordinateToPixelTransform,r=(1/e-1)*o*(i[0]*t.coord[0]+i[1]*t.coord[1]+i[4]),s=(e-1)*o*(i[2]*t.coord[0]+i[3]*t.coord[1]+i[5]);t.context.translate(r,s),this.drawGeom_(t,t.geom),t.context.restore()}return t.time<=this.duration_},ol.featureAnimation.Throw=function(t){t=t||{},ol.featureAnimation.call(this,t),this.speed_=t.speed||0,this.side_=t.side||"left"},ol.inherits(ol.featureAnimation.Throw,ol.featureAnimation),ol.featureAnimation.Throw.prototype.animate=function(t){var e,o;!t.time&&this.speed_&&("left"==this.side_?(e=this.dx=t.extent[0]-t.bbox[2],o=this.dy=t.extent[3]-t.bbox[1]):(e=this.dx=t.extent[2]-t.bbox[0],o=this.dy=t.extent[3]-t.bbox[1]),this.duration_=Math.sqrt(e*e+o*o)/this.speed_/t.frameState.viewState.resolution);var i=t.geom.clone(),r=t.geom.clone();return i.translate(this.dx*(1-this.easing_(t.elapsed)),this.dy*Math.cos(Math.PI/2*this.easing_(t.elapsed))),r.translate(this.dx*(1-this.easing_(t.elapsed)),0),this.drawGeom_(t,i,r),t.time<=this.duration_},ol.featureAnimation.Zoom=function(t){t=t||{},ol.featureAnimation.call(this,t),this.set("zoomout",t.zoomOut)},ol.inherits(ol.featureAnimation.Zoom,ol.featureAnimation),ol.featureAnimation.ZoomOut=function(t){(t=t||{}).zoomOut=!0,ol.featureAnimation.Zoom.call(this,t)},ol.inherits(ol.featureAnimation.ZoomOut,ol.featureAnimation.Zoom),ol.featureAnimation.Zoom.prototype.animate=function(t){var e=this.easing_(t.elapsed);if(e){this.get("zoomout")&&(e=1/e);for(var o,i=t.style,r=[],s=0;s<i.length;s++)(o=i[s].getImage())&&(r[s]=o.getScale(),o.setScale(r[s]*e));t.context.save();var n=t.frameState.pixelRatio,a=t.frameState.coordinateToPixelTransform,l=(1/e-1)*n*(a[0]*t.coord[0]+a[1]*t.coord[1]+a[4]),h=(1/e-1)*n*(a[2]*t.coord[0]+a[3]*t.coord[1]+a[5]);for(t.context.scale(e,e),t.context.translate(l,h),this.drawGeom_(t,t.geom),t.context.restore(),s=0;s<i.length;s++)(o=i[s].getImage())&&o.setScale(r[s])}return t.time<=this.duration_},ol.filter={},ol.filter.Base=function(t){ol.Object.call(this),this._listener=[],t&&!1===t.active?this.set("active",!1):this.set("active",!0)},ol.inherits(ol.filter.Base,ol.Object),ol.filter.Base.prototype.setActive=function(t){this.set("active",!0===t)},ol.filter.Base.prototype.getActive=function(t){return this.get("active")},function(){function t(t){this.renderSync?this.renderSync():this.changed()}function e(e){this.filters_||(this.filters_=[]),this.filters_.push(e),e.precompose&&e._listener.push({listener:this.on("precompose",function(t){this.get("active")&&this.precompose(t)}.bind(e)),target:this}),e.postcompose&&e._listener.push({listener:this.on("postcompose",function(t){this.get("active")&&this.postcompose(t)}.bind(e)),target:this}),e._listener.push({listener:e.on("propertychange",t.bind(this)),target:this}),t.call(this)}function o(e){this.filters_||(this.filters_=[]);for(var o=this.filters_.length-1;o>=0;o--)this.filters_[o]===e&&this.filters_.splice(o,1);for(o=e._listener.length-1;o>=0;o--)e._listener[o].target===this&&(ol.Observable.unByKey(e._listener[o].listener),e._listener.splice(o,1));t.call(this)}ol.Map.prototype.addFilter=function(t){e.call(this,t)},ol.Map.prototype.removeFilter=function(t){o.call(this,t)},ol.Map.prototype.getFilters=function(){return this.filters_},ol.layer.Base.prototype.addFilter=function(t){e.call(this,t)},ol.layer.Base.prototype.removeFilter=function(t){o.call(this,t)},ol.layer.Base.prototype.getFilters=function(){return this.filters_}}(),ol.filter.Mask=function(t){if(t=t||{},ol.filter.Base.call(this,t),t.feature)switch(t.feature.getGeometry().getType()){case"Polygon":case"MultiPolygon":this.feature_=t.feature}this.set("inner",t.inner),this.fillColor_=t.fill&&ol.color.asString(t.fill.getColor())||"rgba(0,0,0,0.2)"},ol.inherits(ol.filter.Mask,ol.filter.Base),ol.filter.Mask.prototype.drawFeaturePath_=function(t,e){var o=t.context,i=o.canvas,r=t.frameState.pixelRatio,s=t.frameState.coordinateToPixelTransform;function n(t){return[(t[0]*s[0]+t[1]*s[1]+s[4])*r,(t[0]*s[2]+t[1]*s[3]+s[5])*r]}s||(s=t.frameState.coordinateToPixelMatrix,n=function(t){return[(t[0]*s[0]+t[1]*s[1]+s[12])*r,(t[0]*s[4]+t[1]*s[5]+s[13])*r]});var a=this.feature_.getGeometry().getCoordinates();"Polygon"==this.feature_.getGeometry().getType()&&(a=[a]),o.beginPath(),e&&(o.moveTo(0,0),o.lineTo(i.width,0),o.lineTo(i.width,i.height),o.lineTo(0,i.height),o.lineTo(0,0));for(var l=0;l<a.length;l++)for(var h=a[l],c=0;c<h.length;c++){var p=n(h[c][0]);o.moveTo(p[0],p[1]);for(var u=1;u<h[c].length;u++)p=n(h[c][u]),o.lineTo(p[0],p[1])}},ol.filter.Mask.prototype.postcompose=function(t){if(this.feature_){var e=t.context;e.save(),this.drawFeaturePath_(t,!this.get("inner")),e.fillStyle=this.fillColor_,e.fill("evenodd"),e.restore()}},ol.filter.Clip=function(t){if(t=t||{},ol.filter.Base.call(this,t),this.set("coords",t.coords),this.set("units",t.units),this.set("keepAspectRatio",t.keepAspectRatio),this.set("extent",t.extent||[0,0,1,1]),this.set("color",t.color),!t.extent&&"%"!=t.units&&t.coords){for(var e,o=1/0,i=1/0,r=-1/0,s=-1/0,n=0;e=t.coords[n];n++)o>e[0]&&(o=e[0]),r<e[0]&&(r=e[0]),i>e[1]&&(i=e[1]),s<e[1]&&(s=e[1]);t.extent=[o,i,r,s]}},ol.inherits(ol.filter.Clip,ol.filter.Base),ol.filter.Clip.prototype.clipPath_=function(t){var e=t.context,o=e.canvas,i=this.get("coords");if(i){var r=this.get("extent"),s=1,n=1;"%"==this.get("units")&&(s=o.width/(r[2]-r[0]),n=o.height/(r[3]-r[1])),this.get("keepAspectRatio")&&(s=n=Math.min(s,n));var a=this.get("position"),l=0,h=0;/left/.test(a)?l=-r[0]*s:/center/.test(a)?l=o.width/2-(r[2]-r[0])*s/2:/right/.test(a)&&(l=o.width-(r[2]-r[0])*s);var c=function(t){return t*s+l};/top/.test(a)?h=-r[1]*n:/middle/.test(a)?h=o.height/2-(r[3]-r[1])*n/2:/bottom/.test(a)&&(h=o.height-(r[3]-r[1])*n);var u=function(t){return t*n+h};e.moveTo(c(i[0][0]),u(i[0][1]));for(var g=1;p=i[g];g++)e.lineTo(c(p[0]),u(p[1]));e.lineTo(c(i[0][0]),u(i[0][1]))}},ol.filter.Clip.prototype.precompose=function(t){this.get("color")||(t.context.save(),t.context.beginPath(),this.clipPath_(t),t.context.clip())},ol.filter.Clip.prototype.postcompose=function(t){if(this.get("color")){var e=t.context,o=t.context.canvas;e.save(),e.beginPath(),e.moveTo(0,0),e.lineTo(0,o.height),e.lineTo(o.width,o.height),e.lineTo(o.width,o.height),e.lineTo(o.width,0),e.lineTo(0,0),this.clipPath_(t),e.fillStyle=this.get("color"),e.fill("evenodd")}t.context.restore()},ol.filter.Colorize=function(t){ol.filter.Base.call(this,t),this.setFilter(t)},ol.inherits(ol.filter.Colorize,ol.filter.Base),ol.filter.Colorize.prototype.setFilter=function(t){switch(t=t||{}){case"grayscale":t={operation:"hue",red:0,green:0,blue:0,value:1};break;case"invert":t={operation:"difference",red:255,green:255,blue:255,value:1};break;case"sepia":t={operation:"color",red:153,green:102,blue:51,value:.6}}var e=t.color?ol.color.asArray(t.color):[t.red,t.green,t.blue,t.value];switch(this.set("color",ol.color.asString(e)),this.set("value",e[3]||1),t.operation){case"color":case"hue":case"difference":case"color-dodge":case"enhance":this.set("operation",t.operation);break;case"saturation":var o=255*(t.value||0);this.set("color",ol.color.asString([0,0,o,o||1])),this.set("operation",t.operation);break;case"luminosity":o=255*(t.value||0),this.set("color",ol.color.asString([o,o,o,255])),this.set("operation","hard-light");break;case"contrast":o=255*(t.value||0),this.set("color",ol.color.asString([o,o,o,255])),this.set("operation","soft-light");break;default:this.set("operation","color")}},ol.filter.Colorize.prototype.setValue=function(t){this.set("value",t);var e=ol.color.asArray(this.get("color"));e[3]=t,this.set("color",ol.color.asString(e))},ol.filter.Colorize.prototype.setColor=function(t){(t=ol.color.asArray(t))&&(t[3]=this.get("value"),this.set("color",ol.color.asString(t)))},ol.filter.Colorize.prototype.precompose=function(t){},ol.filter.Colorize.prototype.postcompose=function(t){var e=t.context,o=e.canvas;if(e.save(),"enhance"==this.get("operation")){var i=this.get("value");if(i){var r=o.width,s=o.height;e.globalCompositeOperation="color-burn",e.globalAlpha=i,e.drawImage(o,0,0,r,s),e.drawImage(o,0,0,r,s),e.drawImage(o,0,0,r,s)}}else e.globalCompositeOperation=this.get("operation"),e.fillStyle=this.get("color"),e.fillRect(0,0,o.width,o.height);e.restore()},ol.filter.Composite=function(t){ol.filter.Base.call(this,t),this.set("operation",t.operation||"source-over")},ol.inherits(ol.filter.Composite,ol.filter.Base),ol.filter.Composite.prototype.setOperation=function(t){this.set("operation",t||"source-over")},ol.filter.Composite.prototype.precompose=function(t){var e=t.context;e.save(),e.globalCompositeOperation=this.get("operation")},ol.filter.Composite.prototype.postcompose=function(t){t.context.restore()},ol.filter.Crop=function(t){t=t||{},ol.filter.Mask.call(this,t)},ol.inherits(ol.filter.Crop,ol.filter.Mask),ol.filter.Crop.prototype.precompose=function(t){if(this.feature_){var e=t.context;e.save(),this.drawFeaturePath_(t,this.get("inner")),e.clip("evenodd")}},ol.filter.Crop.prototype.postcompose=function(t){this.feature_&&t.context.restore()},ol.filter.Fold=function(t){t=t||{},ol.filter.Base.call(this,t),this.set("fold",t.fold||[8,4]),this.set("margin",t.margin||8),this.set("padding",t.padding||8),"number"==typeof t.fsize&&(t.fsize=[t.fsize,t.fsize]),this.set("fsize",t.fsize||[8,10])},ol.inherits(ol.filter.Fold,ol.filter.Base),ol.filter.Fold.prototype.drawLine_=function(t,e,o){var i=t.canvas,r=this.get("fold"),s=i.width,n=i.height;t.beginPath(),t.moveTo(o,o);for(var a=1;a<=r[0];a++)x=a*s/r[0]-(a==r[0]?o:0),y=e[1]*(a%2)+o,t.lineTo(x,y);for(a=1;a<=r[1];a++)x=s-e[0]*(a%2)-o,y=a*n/r[1]-(a==r[1]?e[0]*(r[0]%2)+o:0),t.lineTo(x,y);for(a=r[0];a>0;a--)x=a*s/r[0]-(a==r[0]?e[0]*(r[1]%2)+o:0),y=n-e[1]*(a%2)-o,t.lineTo(x,y);for(a=r[1];a>0;a--)x=e[0]*(a%2)+o,y=a*n/r[1]-(a==r[1]?o:0),t.lineTo(x,y);t.closePath()},ol.filter.Fold.prototype.precompose=function(t){var e=t.context,o=e.canvas;this.get("fold"),o.width,o.height,e.save(),e.shadowColor="rgba(0,0,0,0.3)",e.shadowBlur=8,e.shadowOffsetX=2,e.shadowOffsetY=3,this.drawLine_(e,this.get("fsize"),this.get("margin")),e.fillStyle="#fff",e.fill(),e.strokeStyle="rgba(0,0,0,0.1)",e.stroke(),e.restore(),e.save(),this.drawLine_(e,this.get("fsize"),this.get("margin")+this.get("padding")),e.clip()},ol.filter.Fold.prototype.postcompose=function(t){var e=t.context,o=e.canvas;e.restore(),e.save(),this.drawLine_(e,this.get("fsize"),this.get("margin")),e.clip();var i=this.get("fold"),r=o.width/i[0],s=o.height/i[1],n=e.createRadialGradient(5*r/8,5*r/8,r/4,r/2,r/2,r);n.addColorStop(0,"transparent"),n.addColorStop(1,"rgba(0,0,0,0.2)"),e.fillStyle=n,e.scale(1,s/r);for(var a=0;a<i[0];a++)for(var l=0;l<i[1];l++)e.save(),e.translate(a*r,l*r),e.fillRect(0,0,r,r),e.restore();e.restore()},ol.filter.Lego=function(t){t||(t={}),ol.filter.Base.call(this,t);var e=new Image;e.src=this.img[t.img]||this.img.ol3,e.crossOrigin=t.crossOrigin||null,this.pattern={canvas:document.createElement("canvas")},this.setBrick(t.brickSize,e),this.internal_=document.createElement("canvas")},ol.inherits(ol.filter.Lego,ol.filter.Base),ol.filter.Lego.prototype.img={brick:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAAAnNCSVQICFXsRgQAAAAJcEhZcwAAD10AAA9dAah0GUAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAGAElEQVRo3sWZy4tkVx3HP+fcc29Vd1dP17TdTcbJPDKPMGR0kVEZkuBCF0EE9Z8QXLhxMUsRF4oLwYWQTSCgSxUXroQhoiEuskgEUUQh+BhHOpkZO11dr3vvefxc3FPlNHNvPbrD1Dl016XoqvM539/znFbcZo3VjbFmxcMA3Mg2fSoAiQJDov7/B1o9+aEgkycv4PBSPU9eHeDEixNwOAFXPYvFia0+rcnQEeBr218cfLIwCqW1UWillEYphUKpCmCCIQAiCEhAJIggTiSISBAfggTvJZTifQghWO+89cOQexuOXN8Pwz/9ff9X/xF0uEA7AmTsjLp/2xZQCgXHlj0OEBEAeRwGkep3qN6pfibDB3DBixMnvdCXt8J3FZowNYFSjgv71RtPaehjD0alalVOqCtHU3qlAGrVAGbidCtUYLUAiV6dCUx8XV4BhUKjY0AJgUB4LE8sA7CkCRSalFYnE72WiBrLSCKCp6TALZNRDEDCwgAKQ/vyRidN9c32K1sbqlCP/C+P9kXJI597PA7HkGJRCLNUGCY767udF9e+9dz1S5ueoRzIEZa1OxcK9td+/fAHvYH0LY6MkgHFIuYwS0ifXe1+qXvn1vk99QfzCwokToUylPrre1/de/vMnf9+5MsSg2HMELegAsl86duvnP3e8y/f1r83v8Li1RO7k/9c2t/avHnt27xpyhRDguEIuxDA3OXXX93+8a0rz6ZvcKgadqUEL73wx+9sb5//WWKTGCOHsxEWM0H71e2ffmF3lPyEkZppVyVYefCw/9a5f3epSvsWh7MMsUgeaL20/dpLu4fJXZUvFCgi46/8i5RNFCCc4bA5JuZ7f/Kp7g9fuLSdvLnY8lEHxz8ItOPcaN7gPAB1tvPl7udupT9nvGSmLLlHSosWLdbJTgpgLna+eVv9hiO1ZIpFOGBEFmejBnrO/tc/0znXTf+sHMuPwD0MrSnETID6/SXPrH/junp3Xiw3atCjxJCRktKu10DHzrZ+pOvpc5cP/6T8CWtt4BATZ4tkBoCvTz8tbTb8TnHiYi/0pgCmPufMUkB1ss9vtU7Trgt9EgyGhIS0zgjRB6RukaSdfHpLPly2xTg2chQJmgRN2qiAa3DBtu5kYXgqAIFYEzTJDAVCnQIqaA+O0wyFjj8q1oY6AB/qd5nLw9JvcpqOOcFMT5dqlg/UAoy5exS2TgGg6DxhkHofqHVCGYf3ho/S904DcHZ6jpZ6lWMY1iogCDxsn8oDduP3BEI9QvSBWgU8YRDeGezsyEk1SNlD8HF51wjQoEAgHNkffXBw+XfJiZbXXCTBT2fZaAJfn4iEEt+z73bTk92jZTxPwOFxVCeGRif0tt4HCtxB+f0P7l//rTlBAN6gjcNicThcfU2NCnjf0NU43L59vf2XZf1A8wzX8JRTgLw+Ckx17SahIZGOyMri7dHalXf6DJdYfovPAgVlRLAzAXwI0gCQU5La8m6SXeH9pi+pWf5lUooIUFKSN6V0A1AE39RyeAYYEpvYNjf4OwP8XNuf50UycnKKKURjSTMALkjzzgpyEhI0LW7ygHvYRh00G7zARQL5dBYU9JtLWvQB52e0VX0MOl5anmOP+3yIjZldpteZijZXuIbBxZ1PAEbkc05GVspZtnX04hlHEDKucpUePYbklCgyNjjDLp9AERhjKSNAQc6IwSzPMQClt37OIeOQ7vQWxJPSZSf2OZMyK1h8jHsbNSgY0Z/tNRWA2HmuVXLIZsxnliw2mROAyR2Rjwmn8vyC0XynrUwQ3PzGs6QX06rDRgD9GIDEjF9pUFLSXyRsowLFIp2/44icDpZ02umq6S3ZxDwupp3hYs1cVMAu1noLBZaMNbJoAD3tl6prOodnTF5feBoBRmGweO8fyClISMlIowkkApRYyqbeZ5YJQrHc4UNieeGYArL8NeUkFcvgJKc/AU56ajxejod+/DT/W/IkQC4P3GoBwoGsFKAf9v2qAGIxej9MU8rTGdNjWtVsJv315aL3YwDYqG5MTDxAPMvTNkJS3ReY6AmtlTrhKsf/AHgAA6ezGE+FAAAAAElFTkSuQmCC",ol3:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAAAnNCSVQICFXsRgQAAAAJcEhZcwAAD10AAA9dAah0GUAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAHtUlEQVRo3sWZTWxcVxXHf/d9zIztcTz+pE6cOHXiyLJJadKgKE2oCBLlQwIWSCxYI0WiGxZZIYRAArFAYoEEi0hIsGBBURd0g4iK2lJAaWlaojZVKkU0H26cxB8Zz/f7uPeweHdebDLPnqlQ5l2N5/mN7tz/+Z//OffcM4rPUKCPl0eBAqqfAEAt5Ia1LwCuAg93CyCnAzgj7TstEKMluW+/x0AsWmKBmFggTu4lIpYome2Qw0kA8I2xL9T2Bp5COY6ncJRSDkopFEolANowBEAEATGIGBEkFjEiYkQbI0ZrMaFobYwxkY51pOumpSNTiau6bm7oZX1NP4Ai+ylYADkmGqUPxwSUQsG2ZbcDsBAA2QoGkeSvSZ4kr/alDcRGSyyxbJqqvG5+pHAwbRegVMz+leTBY7qcbTee8vsmQycRmnL6CkD1G4DXFl0fGegvANfpnws8+947AwqFg2MDSjAYzJY80QuAHl2gcPDJF3PiDLiimtIQC0ETEhD3klE8AJeuASg8CgeHir7vLBVOjwypQK3plyoromRNtzSamJg6QbcgvJ7C0J0YnCweG/jek/Ozw5q6bEiFiIHz+wNWBv68+rPNmlQjYnKE1Ai6cYfXA/W5Q6Uvl84f3zel3vH+SIDYoVAeofOdqa9PvbHn/PoDHYZ4eDSpE3fJgLs79YXToz858uxJ5+/en4jQ6hHr5OPZlZHhpcM/4BUv9PFw8agQdQVg1+UHnx/75fG5Gf83lFWGVUrQsmmu/HBsbN8f3Mi1MVLeGUJ3Lig8P/a7s5MN97c01I5+VUIk91err0/fLqFwgBHKOzmimzyQPzX2q1OTZfeianUVKCLNr93EZxiFIOyhnB0Tu6vf/XTp54uzY+4r3S1veYj5CEPBjqFsA3cDoEaLXy199rj/Is0eM2XILXzy5MkzSO6TAvAOFF84qf5KRfWYYhE2aJCzI5MDbxf7B58pTpf89x8qX1yWGKXKFaUBZIF1tWo/KzJPiYi3VAgYbrFEnpiYiBzBTgx0ts99YvDcvHr7YSBJka/Q4k1u3jz5eQ/EYebkXvL241NUeZN/31gkDwibhHjk8PGzTh+OrWw7X/6g/+TB8nuJrQCc4Z/KU08rb+1f/1gCSqy9NUNoP72txtXRb40dfJ+nkgMEZTw78riZLhDRndNP3vGG9GBKnRzhrppmilfhmcWoRYkxyuxv86euUaT24h4W2WN53WQmheB1ygc7MaCKuc+N5LeW6wfOXeUorwFQZIV5RlnbNqcGjBMyaAFUcfHwcHHxOznBakA6JQq34B4dkXtt+8QjvnCQa/Z/jxpFCmdbpPSJI7NyhMVzK/j2UQuFi4OLkz57FECcIcGCU8yZeirQvdxjjuvpTKGAem2EcjpjkjnUC5cvfIm/bRG3Y4e7AwOmEwPKOJotfhvlPj61dGaBEChtAdD88Yeq9et1LqWOUTj2lYzOItSmcxi2ZDXUw+k0n0bqDoXDJBsMM8rHKeIKFbxgIV9nL3cSFlPpZQBoa6AjgCYXK2YkndbckkxmWWfu2D00ozzYNinOlagwbRct/k92zNJARxFK01yur/mX2wDWGE0jfuHyNfa+Y6hQYNsmJQ45hqwwFaPpOVo6s2zDsCMDgsBq2sBR9xj8ZvX70+LJc9w+scA1Sjz49rjMy7zMywE5IY64PMcNDlkHKCbt9xhMZwhOooGODGhMzVyqTUxIm4Pll9797ixnWFZ3WORdSqz//hI+Pv7LT5dXOcNZltUa49y3qplC0Hb5uBMAbwcGDKYS/eLu6YMfrSZCUhWY+QCfGZ7iZYRbarSdYMfd0bvXazh8ii/yF2vcAVwitB1hZirWnROREFLYjN4uLQ5QTZ/WmeA2VwDUHbBks351HRxK3OaqtTTHEQwxmpjkxJApQh111kBAvBH+9O7y/KveFsfcYyNj82qywqZdxmWBAjEREbHdkrNEqNE6o6qJiVeiC4UPHuqg20PvExxGE6YAWp2jwEvabmIyqpoGuTB4ozEwd6lKvYflRzgBBIQWQrQjAG2MZABoEeJH4UU3N8f1rC/psPyz+AQWQEhIK6s09wACk+EC0NTwcCM3KrDAf6ihd6ui2ccxcrRoEaQg6lnQPYDYSLZlAS1cXBzyLHGfW0SZPDgMscgBDK10BARUs48mVgNxtl2GKh6ObVpOM8Uy94hsZpe0nakoMMdhPGJreRtAg9YuJ6NIwp18G7OJsilVyHGIQ2yySZ0WIYocQ+xhknEUhiYRoQUQ0KJBbSfleAChjvQuh4wypbQLovEpMWHrnPY2K0RoG/eR5SCgQXVn1SQAJNpNWiFlhm0+i8jZIrMNoN0j0jbhJMoPaOwu2sQFJt69oRKyadNqTGQBOFsAiM34CQchIdVuwtYyEOgu4jumQosiEX5a6aq0S9Z2T2zTThfdkS0MRN21lISAiBwD5KwDnLReStp0MZomrc4bTyaAhql131gztAhw8cnhWxeIBRASEWbVPju5wAS9/VYgdnthGwPSe5uynYqlpun9EuCTzHt0O67r5uP8teRRAC25H/cXgNmQvgKomhXdLwB2M7pu0pTyeK70mJYUm251sLfo/T8AGEoKes8eIGZ43E5wk36BBwhO2mbqgwZa9C0CAP4LFLGzNDDzmrAAAAAASUVORK5CYII=",lego:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAAA/CAQAAAD9VthUAAAAAnNCSVQICFXsRgQAAAAJcEhZcwAADzoAAA86AZc528IAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAHvElEQVRYw8WZWWxcVxnHf+fec2fGu+M4qbPH2EmTLk4FApqQNrgiVYyKeClIwBsvPCAQkZAQPND2gRekCoGQEItYHhBLurCksoTKA6QNJW0CBZLWCc3qEBvHy3hsz93O+XiYMxM7nhmPGxGf++Dre2fO7/v+5/u+s4zigzSxVq3osaZNAwzkuq1nPeUrAE9p99JTAKWn5WYEwErpv9TdGbECRlKMgBEjRlIgsqlAKBBaSKUokAjgkcFz+Ce6BvM9sVbKU55WKKWUh1IeoJQCFhsgIIIgIohYEWwq1ooVK9ZasdbG1hhrjUmMsYlZsJEJzYIpmLwZs/8xZ9JpaGYHOYfPyvrChrdbpAxbjFRltCqhnQ2yxBTKf0WQUgNrwYqIFStGUkkllqIU5E/2aQBbEV8pz/ZM3Or8/95UmeUB+J63RiHoAWi1ZHTvNl6pNfXe99Taeq/W1HvuYOzvKG5c4q1afIWHj4eHBwgWwWCQ1aWvBvC8VXngE5DbmO3UxrOeqEhmTFEcPiIiadwEfVttWxmd623tyu7Mfnrjru5cM0Th+Nyp2Z/MztvJNDLkSImZJ27MhNWIr8j1tn+g9at7+/ubivaSHYkmjPF1f+sj7Uc3Xc29VPjm1JSJEzJkCZkjaVT8hvzubDvQ8cz9AwPeG/rHFD3BZkoeTqLwCuqzrQf7nw9+UJhOidEEFAhX0sCJr1fyXm/uPLr5849n/u1/j3mMWtqtYEFm5v/2pXUHdhzNjgaxzunQQzNX3wDdWIT0dT3bP3Qo8wIXSVWNDpWQys2xmW/3fbn1WpAWXUrWNaARvN+/7lu7jzysf8q4siuEh5A8fX5/+8XepLyEs8zfCd7raP/K9scf1T9iQjUUzU+JynOR3TQBgpAS1a16dVtusONTH8kc42ZjcFFKEApcJyBHjizt+O8Wr3e2P7Uv+3curyT7InhJ8nFCMmTJkqWlVlnzVsj0psc69vbrV1SyKnjJgCsEZMiQoanWINcfe39v6xfv808Suu6f5EVlQA7QAcC/1DXp42GmuazOiaJbjjDFSTUNCLOEZMiQEJAjrZYB9b0PmoPe7fpNZQAkYFb1A9CphtWwGlbNkmX/R59TpzhPAAwdf37XKWac1JZJAnc1VSfp0ufSqtK3NT/Y3DJVKZ5tYbHiwfvJAjc5dO7Pw4cZOb4vc51ccvZjh7ZfubaTC8y4evgeAjQaTYCpgZfq06TXpD++Rd6hHHTdZ8JKDs8yAsAD92/gjxSfGNvYzp7Wt3nj6sS2D5NxtXAeHNwnIFpOqSe+bg+2d6ejFXzXS8WlJUSyhBiKoAqj1yFuYQLQZCvFOMLDx8evPFuOF7HV0sqzXmsuP1mJ5tbfVirYc++VITnItvyN8rhJjqIrL7qS50KCX1mWeLXFr5Z02nqiJ2+lXOasIQHJkD75C6DjtQ8dH6Eg99FHyD+LBRclaomnqgL3lo++w4utWsBVbNYtr1htYZFBZgm2299Z5rmXl4+ZtwaPjDlt9CJ0gIeqXNXFN7WKDtMLnW1y+9e6Txc5z2le25Te0BTVic89ovf3yIXE1QeP4FbJbmCla21V723evjklncued/0mZA6AcEABfH/6rXzb2IM5fJD1zLvIB02zm3ak+iK0hK8mvmBnzA/Hoy3LJoyW4XIITn5daAbaX0w3XBnIIsCBL7zDpFNvPWoRvBY+larBZ5Gb6eX20xXxf/2QDMkgmc+sl8MyJH2cf/Seka3yGFv+kR7Ok/1riwxhvruJUYffhGCxWKS0IqqReFXFN5g583qaNokC0aSf/JUaVn95ufNrJ9SwGlapMkkUXuPMAy/E24CJbQVeVWeIXDAFbEYwWCymes3XAMZW9d5gC8k3Rn++79hJjErvvcBB0P53/sBBAOa5knmdnWwlywlQZ7mHfQivOsd6yVDEkGIwxDVrfo2yY4nJ5tMTLe9rkYKSkUtcEqXk9/DKok9d5nLlfpzxyn0Tu7Gk7jLVNx8eQFw98oUi6Vz07NiZ3c/4y+bz+i1gHxliEhJnQFKn6MbVu01ISRaSX2b8vk/4q4D77GErCTGxM2EBW1P8pLr4YJkjiKORhZ91hR1qpsG9m89O9pASOXxMXF6wrCb0ACIidBJe8ZNdjHID24DsA/RhCImInAnztQqr897UeI1lDp3ToU8TO2jiat39q0cLD7GJlNBdERFhLd8dPjamtldx98K8dhNGD91cZ6zKPl6hyNJPP5rYIcsGFGprVva+Nl4GF455lVzI0UcvU0ySX7R5aKabHnrwMRSJlhiQr7fT1QCprYPnmKHgzjQtliwZNrIZHyHBkHHLSMG4KI+JK6Lna+9wFuETUzecLAUHN6QkBARofHwCFImr6Mbld+Lw0Upwhy/acKWUMswS07YI77tllHJTqsW4t4lLtcLKBwyl0JN05YQSiqS0knW+a7eGu4W3rrgmJMwRNpCkLvRsaBoqKAkzZGgi66S/HV+Sf4GQxvor4xPbYDkVIuLS2RZ6CV4wRMQkNNpXGb9go1V8BSElJXRrWIXCupM9We2hvMPPG1bbaqxf3sWhamTzhjVpHsCc/a9dQ3xo82uJL9jRNRLfTTnnBO+u/pTkLT5c8fPNd9nt5tLmRbsVynbsXR704Bbeq775v0uht3btfyZT7OA5knjdAAAAAElFTkSuQmCC"},ol.filter.Lego.prototype.set=function(t,e){ol.filter.Base.prototype.set.call(this,t,e),"brickSize"==t&&this.pattern.canvas.width!=e&&this.setBrick(e)},ol.filter.Lego.prototype.setBrick=function(t,e,o){if(t=Number(t)||30,"string"==typeof e){var i=new Image;i.src=this.img[e]||this.img.ol3,i.crossOrigin=o||null,e=i}if(e&&(this.pattern.img=e),this.pattern.img.width)this.pattern.canvas.width=this.pattern.canvas.height=t,this.pattern.ctx=this.pattern.canvas.getContext("2d"),this.pattern.ctx.fillStyle=this.pattern.ctx.createPattern(this.pattern.img,"repeat"),this.set("brickSize",t),this.set("img",e.src);else{var r=this;this.pattern.img.onload=function(){r.setBrick(t,e)}}},ol.filter.Lego.prototype.getPattern=function(t,e){if(!this.pattern.ctx)return"transparent";var o=this.pattern.canvas,i=this.pattern.ctx,r=o.width/this.pattern.img.width;return i.save(),i.clearRect(0,0,o.width,o.height),i.scale(r,r),t/=r,e/=r,i.translate(t,e),i.beginPath(),i.clearRect(-2*o.width,-2*o.height,4*o.width,4*o.height),i.rect(-t,-e,2*o.width/r,2*o.height/r),i.fill(),i.restore(),i.createPattern(o,"repeat")},ol.filter.Lego.prototype.postcompose=function(t){var e=t.context,o=e.canvas,i=t.frameState.pixelRatio;e.save();var r=this.pattern.canvas.width*i,s=t.frameState.extent,n=t.frameState.viewState.resolution/i,a=[-Math.round(s[0]/n%r),Math.round(s[1]/n%r)],l=this.internal_.getContext("2d"),h=this.internal_.width=o.width,c=this.internal_.height=o.height;l.webkitImageSmoothingEnabled=l.mozImageSmoothingEnabled=l.msImageSmoothingEnabled=l.imageSmoothingEnabled=!1;var p=Math.floor((h-a[0])/r),u=Math.floor((c-a[1])/r);l.drawImage(o,a[0],a[1],p*r,u*r,0,0,p,u),e.webkitImageSmoothingEnabled=e.mozImageSmoothingEnabled=e.msImageSmoothingEnabled=e.imageSmoothingEnabled=!1,e.clearRect(0,0,h,c),e.drawImage(this.internal_,0,0,p,u,a[0],a[1],p*r,u*r),e.scale(i,i),e.fillStyle=this.getPattern(a[0]/i,a[1]/i),e.rect(0,0,h,c),e.fill(),e.restore()},ol.filter.Texture=function(t){ol.filter.Base.call(this,t),this.setFilter(t)},ol.inherits(ol.filter.Texture,ol.filter.Base),ol.filter.Texture.prototype.setFilter=function(t){var e;(t=t||{}).img?e=option.img:(e=new Image,t.src&&(ol.filter.Texture.Image&&ol.filter.Texture.Image[t.src]?e.src=ol.filter.Texture.Image[t.src]:e.src||(e.src=t.src)),e.crossOrigin=t.crossOrigin||null),this.set("rotateWithView",!1!==t.rotateWithView),this.set("opacity","number"==typeof t.opacity?t.opacity:1),this.set("ready",!1);var o=this;function i(e){o.pattern={},o.pattern.scale=t.scale||1,o.pattern.canvas=document.createElement("canvas"),o.pattern.canvas.width=e.width*o.pattern.scale,o.pattern.canvas.height=e.height*o.pattern.scale,o.pattern.canvas.width=e.width,o.pattern.canvas.height=e.height,o.pattern.ctx=o.pattern.canvas.getContext("2d"),o.pattern.ctx.fillStyle=o.pattern.ctx.createPattern(e,"repeat"),o.set("ready",!0)}e.width?i(e):e.onload=function(){i(e)}},ol.filter.Texture.prototype.getPattern=function(t,e){var o=this.pattern.canvas,i=this.pattern.ctx;return i.save(),i.translate(-t,e),i.beginPath(),i.rect(t,-e,o.width,o.height),i.fill(),i.restore(),i.createPattern(o,"repeat")},ol.filter.Texture.prototype.postcompose=function(t){if(this.pattern){var e=t.context,o=e.canvas,i=1.5*Math.max(o.width,o.height),r=t.frameState.pixelToCoordinateTransform;r||((r=t.frameState.pixelToCoordinateMatrix)[2]=r[4],r[3]=r[5],r[4]=r[12],r[5]=r[13]);var s=t.frameState.pixelRatio,n=t.frameState.viewState.resolution,a=o.width/2,l=o.height/2;if(e.save(),e.globalCompositeOperation="multiply",e.globalAlpha=this.get("opacity"),e.scale(s*this.pattern.scale,s*this.pattern.scale),this.get("rotateWithView"))n*=this.pattern.scale,e.fillStyle=this.getPattern((a*r[0]+l*r[1]+r[4])/n,(a*r[2]+l*r[3]+r[5])/n),e.translate(a/this.pattern.scale,l/this.pattern.scale),e.rotate(t.frameState.viewState.rotation),e.beginPath(),e.rect(-a-i,-l-i,2*i,2*i),e.fill();else{var h=-(a*r[0]+l*r[1]+r[4])/n,c=(a*r[2]+l*r[3]+r[5])/n,p=Math.cos(t.frameState.viewState.rotation),u=Math.sin(t.frameState.viewState.rotation),g=(h*p-c*u)/this.pattern.scale,d=(h*u+c*p)/this.pattern.scale;e.translate(g,d),e.beginPath(),e.fillStyle=this.pattern.ctx.fillStyle,e.rect(-g-i,-d-i,2*i,2*i),e.fill()}e.restore()}},ol.interaction.CenterTouch=function(t){t=t||{},this._listener={};var e=/^pointermove$|^pointerup$/;this.targetStyle=t.targetStyle||[new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new ol.style.Stroke({color:"#fff",width:3})})}),new ol.style.Style({image:new ol.style.RegularShape({points:4,radius:11,radius1:0,radius2:0,snapToPixel:!0,stroke:new ol.style.Stroke({color:"#000",width:1})})})],this.targetStyle instanceof Array||(this.targetStyle=[this.targetStyle]),this.composite=t.composite||"",this.ctouch=new ol.interaction.Interaction({handleEvent:function(t){return e.test(t.type)&&this.getMap()&&(t.coordinate=this.getMap().getView().getCenter(),t.pixel=this.getMap().getSize(),t.pixel=[t.pixel[0]/2,t.pixel[1]/2]),!0}}),ol.interaction.Interaction.call(this,{handleEvent:function(o){return e.test(o.type)&&(this.pos_=o.coordinate),!t.handleEvent||t.handleEvent.call(this,o)}})},ol.inherits(ol.interaction.CenterTouch,ol.interaction.Interaction),ol.interaction.CenterTouch.prototype.setMap=function(t){this.getMap()&&this.getMap().removeInteraction(this.ctouch),this._listener.drawtarget&&ol.Observable.unByKey(this._listener.drawtarget),this._listener.drawtarget=null,ol.interaction.Interaction.prototype.setMap.call(this,t),this.getMap()&&(this.getActive()&&this.getMap().addInteraction(this.ctouch),this._listener.drawtarget=this.getMap().on("postcompose",this.drawTarget_.bind(this)))},ol.interaction.CenterTouch.prototype.setActive=function(t){ol.interaction.Interaction.prototype.setActive.call(this,t),this.pos_=null,this.getMap()&&(this.getActive()?this.getMap().addInteraction(this.ctouch):this.getMap().removeInteraction(this.ctouch))},ol.interaction.CenterTouch.prototype.getPosition=function(t){if(!this.pos_){var e=this.getMap().getSize();e=[e[0]/2,e[1]/2],this.pos_=this.getMap().getCoordinateFromPixel(e)}return this.pos_},ol.interaction.CenterTouch.prototype.drawTarget_=function(t){if(this.getMap()&&this.getActive()){var e=t.context,o=t.frameState.pixelRatio;e.save();var i=e.canvas.width/(2*o),r=e.canvas.height/(2*o),s=new ol.geom.Point(this.getMap().getCoordinateFromPixel([i,r]));this.composite&&(e.globalCompositeOperation=this.composite);for(var n=0;n<this.targetStyle.length;n++){var a=this.targetStyle[n];if(a instanceof ol.style.Style){var l=0,h=!ol.Map.prototype.getFeaturesAtPixel&&a.getImage();h&&(l=h.getScale(),h.setScale(o*l)),t.vectorContext.setStyle(a),t.vectorContext.drawGeometry(s),h&&h.setScale(l)}}e.restore()}},ol.interaction.Clip=function(t){this.layers_=[],ol.interaction.Pointer.call(this,{handleDownEvent:this.setPosition,handleMoveEvent:this.setPosition}),t=t||{},this.pos=!1,this.radius=t.radius||100,t.layers&&this.addLayer(t.layers)},ol.inherits(ol.interaction.Clip,ol.interaction.Pointer),ol.interaction.Clip.prototype.setMap=function(t){if(this.getMap()){for(var e=0;e<this.layers_.length;e++)this.layers_[e].precompose&&ol.Observable.unByKey(this.layers_[e].precompose),this.layers_[e].postcompose&&ol.Observable.unByKey(this.layers_[e].postcompose),this.layers_[e].precompose=this.layers_[e].postcompose=null;this.getMap().renderSync()}if(ol.interaction.Pointer.prototype.setMap.call(this,t),t){for(e=0;e<this.layers_.length;e++)this.layers_[e].precompose=this.layers_[e].layer.on("precompose",this.precompose_.bind(this)),this.layers_[e].postcompose=this.layers_[e].layer.on("postcompose",this.postcompose_.bind(this));t.renderSync()}},ol.interaction.Clip.prototype.setRadius=function(t){this.radius=t,this.getMap()&&this.getMap().renderSync()},ol.interaction.Clip.prototype.addLayer=function(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++){var o={layer:t[e]};this.getMap()&&(o.precompose=t[e].on("precompose",this.precompose_.bind(this)),o.postcompose=t[e].on("postcompose",this.postcompose_.bind(this)),this.getMap().renderSync()),this.layers_.push(o)}},ol.interaction.Clip.prototype.removeLayer=function(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++){var o;for(o=0;o<this.layers_.length&&this.layers_[o].layer!==t[e];o++);o!=this.layers_.length&&this.getMap()&&(this.layers_[o].precompose&&ol.Observable.unByKey(this.layers_[o].precompose),this.layers_[o].postcompose&&ol.Observable.unByKey(this.layers_[o].postcompose),this.layers_.splice(o,1),this.getMap().renderSync())}},ol.interaction.Clip.prototype.setPosition=function(t){t.pixel?this.pos=t.pixel:t&&t instanceof Array?this.pos=t:t=[-1e7,-1e7],this.getMap()&&this.getMap().renderSync()},ol.interaction.Clip.prototype.precompose_=function(t){var e=t.context,o=t.frameState.pixelRatio;e.save(),e.beginPath(),e.arc(this.pos[0]*o,this.pos[1]*o,this.radius*o,0,2*Math.PI),e.clip()},ol.interaction.Clip.prototype.postcompose_=function(t){t.context.restore()},ol.interaction.Clip.prototype.setActive=function(t){if(ol.interaction.Pointer.prototype.setActive.call(this,t),t)for(var e=0;e<this.layers_.length;e++)this.layers_[e].precompose=this.layers_[e].layer.on("precompose",this.precompose_.bind(this)),this.layers_[e].postcompose=this.layers_[e].layer.on("postcompose",this.postcompose_.bind(this));else for(e=0;e<this.layers_.length;e++)this.layers_[e].precompose&&ol.Observable.unByKey(this.layers_[e].precompose),this.layers_[e].postcompose&&ol.Observable.unByKey(this.layers_[e].postcompose),this.layers_[e].precompose=this.layers_[e].postcompose=null;this.getMap()&&this.getMap().renderSync()},ol.interaction.DrawHole=function(t){t||(t={});var e=this;this._select=new ol.interaction.Select({style:t.style}),this._select.setActive(!1);var o,i=t.geometryFunction;o=i?function(t,o){return o=e._geometryFn(t,o),i(t,o)}:function(t,o){return e._geometryFn(t,o)},t.type="Polygon",t.geometryFunction=o,ol.interaction.Draw.call(this,t),t.layers&&("function"==typeof t.layers?this.layers_=t.layers:t.layers.indexOf&&(this.layers_=function(e){return t.layers.indexOf(e)>=0})),this.on("drawstart",this._startDrawing.bind(this)),this.on("drawend",this._finishDrawing.bind(this))},ol.inherits(ol.interaction.DrawHole,ol.interaction.Draw),ol.interaction.DrawHole.prototype.setMap=function(t){this.getMap()&&this.getMap().removeInteraction(this._select),t&&t.addInteraction(this._select),ol.interaction.Draw.prototype.setMap.call(this,t)},ol.interaction.DrawHole.prototype.setActive=function(t){this._select.getFeatures().clear(),ol.interaction.Draw.prototype.setActive.call(this,t)},ol.interaction.DrawHole.prototype.removeLastPoint=function(){this._feature&&this._feature.getGeometry().getCoordinates()[0].length>2&&ol.interaction.Draw.prototype.removeLastPoint.call(this)},ol.interaction.DrawHole.prototype.getPolygon=function(){return this._polygon},ol.interaction.DrawHole.prototype._startDrawing=function(t){var e=this.getMap(),o=this.layers_;this._feature=t.feature;var i=t.feature.getGeometry().getCoordinates()[0][0],r=e.getFeaturesAtPixel(e.getPixelFromCoordinate(i),{layerFilter:o}),s=null;if(r){var n=r[0].getGeometry();if("Polygon"===n.getType()&&n.intersectsCoordinate(i))this._polygonIndex=!1,this._polygon=n,s=r[0];else if("MultiPolygon"===n.getType()&&n.intersectsCoordinate(i)){for(var a,l=0;a=n.getPolygon(l);l++)if(a.intersectsCoordinate(i)){this._polygonIndex=l,this._polygon=a,s=r[0];break}}else s=null}console.log(this._polygonIndex),this._select.getFeatures().clear(),s?this._select.getFeatures().push(s):(this.setActive(!1),this.setActive(!0))},ol.interaction.DrawHole.prototype._finishDrawing=function(t){t.hole=t.feature,t.feature=this._select.getFeatures().item(0);var e=t.hole.getGeometry().getCoordinates()[0];if(e.length>3)if(!1!==this._polygonIndex){for(var o,i=t.feature.getGeometry(),r=new ol.geom.MultiPolygon,s=0;o=i.getPolygon(s);s++)s===this._polygonIndex?(o.appendLinearRing(new ol.geom.LinearRing(e)),r.appendPolygon(o)):r.appendPolygon(o);t.feature.setGeometry(r)}else this.getPolygon().appendLinearRing(new ol.geom.LinearRing(e));this._feature=null,this._select.getFeatures().clear()},ol.interaction.DrawHole.prototype._geometryFn=function(t,e){var o=t[0].pop();return this.getPolygon()&&!this.getPolygon().intersectsCoordinate(o)||(this.lastOKCoord=[o[0],o[1]]),t[0].push([this.lastOKCoord[0],this.lastOKCoord[1]]),e?e.setCoordinates([t[0].concat([t[0][0]])]):e=new ol.geom.Polygon(t),e},ol.interaction.DrawRegular=function(t){t||(t={}),this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.maxCircleCoordinates_=t.maxCircleCoordinates||100,this.features_=t.features,this.source_=t.source,this.squareFn_=t.squareCondition,this.centeredFn_=t.centerCondition,this.canRotate_=!1!==t.canRotate,this.geometryName_=t.geometryName,this.setSides(t.sides);var e=[255,255,255,1],o=[0,153,255,1],i=[new ol.style.Style({stroke:new ol.style.Stroke({color:e,width:5})}),new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:o}),stroke:new ol.style.Stroke({color:e,width:1.5})}),stroke:new ol.style.Stroke({color:o,width:3}),fill:new ol.style.Fill({color:[255,255,255,.5]})})];this.sketch_=new ol.Collection,this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector({features:this.sketch_,useSpatialIndex:!1}),name:"DrawRegular overlay",displayInLayerSwitcher:!1,style:t.style||i}),ol.interaction.Interaction.call(this,{handleEvent:this.handleEvent_})},ol.inherits(ol.interaction.DrawRegular,ol.interaction.Interaction),ol.interaction.DrawRegular.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),ol.interaction.Interaction.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t)},ol.interaction.DrawRegular.prototype.setActive=function(t){this.reset(),ol.interaction.Interaction.prototype.setActive.call(this,t)},ol.interaction.DrawRegular.prototype.reset=function(){this.overlayLayer_.getSource().clear(),this.started_=!1},ol.interaction.DrawRegular.prototype.setSides=function(t){t=parseInt(t),this.sides_=t>2?t:0},ol.interaction.DrawRegular.prototype.canRotate=function(t){return!0!==t&&!1!==t||(this.canRotate_=t),this.canRotate_},ol.interaction.DrawRegular.prototype.getSides=function(){return this.sides_},ol.interaction.DrawRegular.prototype.startAngle={default:Math.PI/2,3:-Math.PI/2,4:Math.PI/4},ol.interaction.DrawRegular.prototype.getGeom_=function(){if(this.overlayLayer_.getSource().clear(),!this.center_)return!1;var t;if(this.coord_){var e=this.center_,o=this.coord_;if(!this.sides_&&this.square_&&!this.centered_){e=[(o[0]+e[0])/2,(o[1]+e[1])/2];var i=[o[0]-e[0],o[1]-e[1]],r=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=new ol.geom.Circle(e,r,"XY"),n=this.getMap().getPixelFromCoordinate(e),a=Math.max(100,Math.abs(n[0]-this.coordPx_[0]),Math.abs(n[1]-this.coordPx_[1]));return a=Math.min(this.maxCircleCoordinates_,Math.round(a/3)),ol.geom.Polygon.fromCircle(s,a,0)}var l=this.canRotate_&&this.centered_&&this.square_;if(i=[o[0]-e[0],o[1]-e[1]],this.square_&&!l){var h=Math.max(Math.abs(i[0]),Math.abs(i[1]));o[0]=e[0]+(i[0]>0?h:-h),o[1]=e[1]+(i[1]>0?h:-h)}if((r=Math.sqrt(i[0]*i[0]+i[1]*i[1]))>0){var c;if(s=new ol.geom.Circle(e,r,"XY"),c=l?Math.atan2(i[1],i[0]):this.startAngle[this.sides_]||this.startAngle.default,this.sides_?t=ol.geom.Polygon.fromCircle(s,this.sides_,c):(n=this.getMap().getPixelFromCoordinate(this.center_),a=Math.max(100,Math.abs(n[0]-this.coordPx_[0]),Math.abs(n[1]-this.coordPx_[1])),a=Math.min(this.maxCircleCoordinates_,Math.round(a/(this.centered_?3:5))),t=ol.geom.Polygon.fromCircle(s,a,0)),l)return t;var p=t.getExtent(),u=((e=this.centered_?[2*this.center_[0]-this.coord_[0],2*this.center_[1]-this.coord_[1]]:this.center_)[0]-o[0])/(p[0]-p[2]),g=(e[1]-o[1])/(p[1]-p[3]);if(this.square_){var d=Math.min(Math.abs(u),Math.abs(g));u=Math.sign(u)*d,g=Math.sign(g)*d}var f=[e[0]-p[0]*u,e[1]-p[1]*g];return t.applyTransform(function(t,e,o){for(var i=0;i<t.length;i+=o)e[i]=t[i]*u+f[0],e[i+1]=t[i+1]*g+f[1];return e}),t}}return new ol.geom.Point(this.center_)},ol.interaction.DrawRegular.prototype.drawSketch_=function(t){if(this.overlayLayer_.getSource().clear(),t){this.square_=this.squareFn_?this.squareFn_(t):t.originalEvent.shiftKey,this.centered_=this.centeredFn_?this.centeredFn_(t):t.originalEvent.metaKey||t.originalEvent.ctrlKey;var e=this.getGeom_();if(e){var o=this.feature_;return this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(e),this.overlayLayer_.getSource().addFeature(o),this.coord_&&this.square_&&(this.canRotate_&&this.centered_&&this.coord_||!this.sides_&&!this.centered_)&&this.overlayLayer_.getSource().addFeature(new ol.Feature(new ol.geom.LineString([this.center_,this.coord_]))),o}}},ol.interaction.DrawRegular.prototype.drawPoint_=function(t,e){e||this.overlayLayer_.getSource().clear(),this.overlayLayer_.getSource().addFeature(new ol.Feature(new ol.geom.Point(t)))},ol.interaction.DrawRegular.prototype.handleEvent_=function(t){switch(t.type){case"pointerdown":this.downPx_=t.pixel,this.start_(t);break;case"pointerup":this.started_&&this.coord_&&(o=this.downPx_[0]-t.pixel[0])*o+(i=this.downPx_[1]-t.pixel[1])*i<=this.squaredClickTolerance_&&("pointermove"==this.lastEvent?this.end_(t):(o=this.upPx_[0]-t.pixel[0])*o+(i=this.upPx_[1]-t.pixel[1])*i<=this.squaredClickTolerance_?this.end_(t):(this.handleMoveEvent_(t),this.drawPoint_(t.coordinate,!0))),this.upPx_=t.pixel;break;case"pointerdrag":if(this.started_){var e=this.getMap().getPixelFromCoordinate(this.center_);(o=e[0]-t.pixel[0])*o+(i=e[1]-t.pixel[1])*i<=this.squaredClickTolerance_&&this.reset()}break;case"pointermove":var o,i;this.started_&&(o=this.downPx_[0]-t.pixel[0])*o+(i=this.downPx_[1]-t.pixel[1])*i>this.squaredClickTolerance_&&(this.handleMoveEvent_(t),this.lastEvent=t.type);break;default:if(this.lastEvent=t.type,this.started_&&"dblclick"===t.type)return!1}return!0},ol.interaction.DrawRegular.prototype.finishDrawing=function(){this.started_&&this.coord_&&this.end_({pixel:this.upPx_,coordinate:this.coord_})},ol.interaction.DrawRegular.prototype.handleMoveEvent_=function(t){if(this.started_){this.coord_=t.coordinate,this.coordPx_=t.pixel;var e=this.drawSketch_(t);this.dispatchEvent({type:"drawing",feature:e,pixel:t.pixel,startCoordinate:this.center_,coordinate:t.coordinate,square:this.square_,centered:this.centered_})}else this.drawPoint_(t.coordinate)},ol.interaction.DrawRegular.prototype.start_=function(t){if(this.started_)this.coord_=t.coordinate;else{this.started_=!0,this.center_=t.coordinate,this.coord_=null;var e=this.feature_=new ol.Feature;this.drawSketch_(t),this.dispatchEvent({type:"drawstart",feature:e,pixel:t.pixel,coordinate:t.coordinate})}},ol.interaction.DrawRegular.prototype.end_=function(t){if(this.coord_=t.coordinate,this.started_=!1,this.coord_&&this.center_[0]!=this.coord_[0]&&this.center_[1]!=this.coord_[1]){var e=this.feature_;this.geometryName_&&e.setGeometryName(this.geometryName_),e.setGeometry(this.getGeom_()),this.source_?this.source_.addFeature(e):this.features_&&this.features_.push(e),this.dispatchEvent({type:"drawend",feature:e,pixel:t.pixel,coordinate:t.coordinate,square:this.square_,centered:this.centered_})}else this.dispatchEvent({type:"drawcancel",feature:null,pixel:t.pixel,coordinate:t.coordinate,square:this.square_,centered:this.centered_});this.center_=this.coord_=null,this.drawSketch_()},ol.interaction.DrawTouch=function(t){(t=t||{}).handleEvent=function(t){if(this.get("tap"))switch(t.type){case"singleclick":this.addPoint();break;case"dblclick":return this.addPoint(),this.finishDrawing(),!1}return!0},ol.interaction.CenterTouch.call(this,t),this.typeGeom_=t.type,this.source_=t.source,this.set("tap",!1!==t.tap);var e=[255,255,255,1],o=[0,153,255,1],i=[new ol.style.Style({stroke:new ol.style.Stroke({color:e,width:5})}),new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:o}),stroke:new ol.style.Stroke({color:e,width:1.5})}),stroke:new ol.style.Stroke({color:o,width:3}),fill:new ol.style.Fill({color:[255,255,255,.5]})})];this.overlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:!1}),style:i}),this.geom_=[]},ol.inherits(ol.interaction.DrawTouch,ol.interaction.CenterTouch),ol.interaction.DrawTouch.prototype.setMap=function(t){this._listener.drawSketch&&ol.Observable.unByKey(this._listener.drawSketch),this._listener.drawSketch=null,ol.interaction.CenterTouch.prototype.setMap.call(this,t),this.overlay_.setMap(t),this.getMap()&&(this._listener.drawSketch=this.getMap().on("postcompose",this.drawSketchLink_.bind(this)))},ol.interaction.DrawTouch.prototype.startDrawing=function(){this.geom_=[],this.addPoint()},ol.interaction.DrawTouch.prototype.getGeometryType=function(){return this.typeGeom_},ol.interaction.DrawTouch.prototype.finishDrawing=function(){if(this.getMap()){var t;switch(this.typeGeom_){case"LineString":this.geom_.length>1&&(t=new ol.Feature(new ol.geom.LineString(this.geom_)));break;case"Polygon":this.geom_[this.geom_.length-1]!=this.geom_[0]&&this.geom_.push(this.geom_[0]),this.geom_.length>3&&(t=new ol.Feature(new ol.geom.Polygon([this.geom_])))}t&&this.source_.addFeature(t),this.geom_=[],this.drawSketch_()}},ol.interaction.DrawTouch.prototype.addPoint=function(){if(this.getMap())switch(this.geom_.push(this.getPosition()),this.typeGeom_){case"Point":var t=new ol.Feature(new ol.geom.Point(this.geom_.pop()));this.source_.addFeature(t);break;case"LineString":case"Polygon":this.drawSketch_()}},ol.interaction.DrawTouch.prototype.removeLastPoint=function(){this.getMap()&&(this.geom_.pop(),this.drawSketch_())},ol.interaction.DrawTouch.prototype.drawSketch_=function(){if(this.overlay_&&(this.overlay_.getSource().clear(),this.geom_.length)){var t;"Polygon"==this.typeGeom_&&(t=new ol.Feature(new ol.geom.Polygon([this.geom_])),this.overlay_.getSource().addFeature(t));var e=new ol.geom.LineString(this.geom_);t=new ol.Feature(e),this.overlay_.getSource().addFeature(t),t=new ol.Feature(new ol.geom.Point(this.geom_.slice(-1).pop())),this.overlay_.getSource().addFeature(t)}},ol.interaction.DrawTouch.prototype.drawSketchLink_=function(t){if(this.getActive()&&this.getPosition()){var e=t.context;e.save();var o,i=this.getMap().getPixelFromCoordinate(this.getPosition()),r=t.frameState.pixelRatio||1;e.scale(r,r),e.strokeStyle="rgba(0, 153, 255, 1)",e.lineWidth=1,e.beginPath(),e.arc(i[0],i[1],5,0,2*Math.PI),e.stroke(),this.geom_.length&&(o=this.getMap().getPixelFromCoordinate(this.geom_[this.geom_.length-1]),e.beginPath(),e.moveTo(o[0],o[1]),e.lineTo(i[0],i[1]),"Polygon"==this.typeGeom_&&(o=this.getMap().getPixelFromCoordinate(this.geom_[0]),e.lineTo(o[0],o[1])),e.stroke()),e.restore()}},ol.interaction.DrawTouch.prototype.setActive=function(t){ol.interaction.CenterTouch.prototype.setActive.call(this,t),t||(this.geom_=[]),this.drawSketch_()},ol.interaction.DropFile=function(t){t=t||{},ol.interaction.DragAndDrop.call(this,{});var e=t.zone||document;$(e).on("dragenter",this.onstop),$(e).on("dragover",this.onstop),$(e).on("dragleave",this.onstop),this.formatConstructors_=t.formatConstructors||[ol.format.GPX,ol.format.GeoJSON,ol.format.IGC,ol.format.KML,ol.format.TopoJSON],this.projection_=t.projection,this.accept_=t.accept||["gpx","json","geojson","igc","kml","topojson"];var o=this;$(e).on("drop",function(t){return o.ondrop(t.originalEvent)})},ol.inherits(ol.interaction.DropFile,ol.interaction.DragAndDrop),ol.interaction.DropFile.prototype.setMap=function(t){ol.interaction.Interaction.prototype.setMap.call(this,t)},ol.interaction.DropFile.prototype.onstop=function(t){return t.preventDefault(),t.stopPropagation(),!1},ol.interaction.DropFile.prototype.ondrop=function(t){if(t.dataTransfer&&t.dataTransfer.files.length){var e=this;t.preventDefault(),t.stopPropagation();for(var o,i=t.dataTransfer.files,r=/\.([0-9a-z]+)(?=[?#])|(\.)(?:[\w]+)$/,s=0;o=i[s];s++){var n=o.name.match(r)[0];e.dispatchEvent({type:"loadstart",file:o,filesize:o.size,filetype:o.type,fileextension:n,projection:l,target:e}),features=[];var a=new FileReader,l=this.projection_||this.getMap().getView().getProjection(),h=this.formatConstructors_;if(!l)return;function c(t,e,o){try{return t.readFeatures(e,o)}catch(t){}}var p=o;a.onload=function(t){var o,i,r=t.target.result,s=[];for(o=0,i=h.length;o<i;++o)if((s=c(new(0,h[o]),r,{featureProjection:l}))&&s.length>0)return e.dispatchEvent({type:"addfeatures",features:s,file:p,projection:l,target:e}),void e.dispatchEvent({type:"loadend",features:s,file:p,projection:l,target:e});e.dispatchEvent({type:"loadend",file:p,target:e})},a.readAsText(o)}}return!1},ol.interaction.Flashlight=function(t){ol.interaction.Pointer.call(this,{handleDownEvent:this.setPosition,handleMoveEvent:this.setPosition}),t=t||{},this.pos=!1,this.radius=t.radius||100,this.setColor(t)},ol.inherits(ol.interaction.Flashlight,ol.interaction.Pointer),ol.interaction.Flashlight.prototype.setMap=function(t){this.getMap()&&this.getMap().render(),this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.interaction.Pointer.prototype.setMap.call(this,t),t&&(this._listener=t.on("postcompose",this.postcompose_.bind(this)))},ol.interaction.Flashlight.prototype.setRadius=function(t){this.radius=t,this.getMap()&&this.getMap().renderSync()},ol.interaction.Flashlight.prototype.setColor=function(t){var e=t.fill?t.fill:[0,0,0,.8],o=ol.color.asArray(e);this.startColor=ol.color.asString(o),t.color?o=this.endColor=ol.color.asString(ol.color.asArray(t.color)||t.color):(o[3]=0,this.endColor=ol.color.asString(o)),o[3]=.1,this.midColor=ol.color.asString(o),this.getMap()&&this.getMap().renderSync()},ol.interaction.Flashlight.prototype.setPosition=function(t){t.pixel?this.pos=t.pixel:this.pos=t,this.getMap()&&this.getMap().renderSync()},ol.interaction.Flashlight.prototype.postcompose_=function(t){var e=t.context,o=t.frameState.pixelRatio,i=e.canvas.width,r=e.canvas.height;if(e.save(),e.scale(o,o),this.pos){var s=Math.max(i,r),n=e.createRadialGradient(this.pos[0],this.pos[1],i*this.radius/s,this.pos[0],this.pos[1],r*this.radius/s);n.addColorStop(0,this.startColor),n.addColorStop(.8,this.midColor),n.addColorStop(1,this.endColor),e.fillStyle=n,e.fillRect(this.pos[0]-s,this.pos[1]-s,2*s,2*s)}else e.fillStyle=this.startColor,e.fillRect(0,0,i,r);e.restore()},ol.interaction.GeolocationDraw=function(t){t||(t={}),this.geolocation=new ol.Geolocation({projection:"EPSG:4326",trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}}),this.geolocation.on("change",this.draw_.bind(this)),this.path_=[],this.lastPosition_=!1;var e=[255,255,255,1],o=[0,153,255,1],i=new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:o}),stroke:new ol.style.Stroke({color:e,width:1.5})}),r=[new ol.style.Style({stroke:new ol.style.Stroke({color:e,width:5})}),new ol.style.Style({stroke:new ol.style.Stroke({color:o,width:3}),fill:new ol.style.Fill({color:[255,255,255,.5]})})],s=new ol.style.RegularShape({radius:10.5,points:3,rotation:0,fill:new ol.style.Fill({color:o}),stroke:new ol.style.Stroke({color:e,width:1.5})}),n=s.getImage(),a=n.getContext("2d"),l=document.createElement("canvas");l.width=l.height=n.width,l.getContext("2d").drawImage(n,0,0),a.clearRect(0,0,n.width,n.height),a.drawImage(l,0,0,n.width,n.height,3,0,n.width-6,n.height),this.locStyle={error:new ol.style.Style({fill:new ol.style.Fill({color:[255,0,0,.2]})}),warn:new ol.style.Style({fill:new ol.style.Fill({color:[255,192,0,.2]})}),ok:new ol.style.Style({fill:new ol.style.Fill({color:[0,255,0,.2]})})},this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector,name:"GeolocationDraw overlay",style:t.style||function(t){return void 0===t.get("heading")?r[1].setImage(i):(r[1].setImage(s),s.setRotation(t.get("heading")||0)),r}}),this.sketch_=[new ol.Feature,new ol.Feature,new ol.Feature],this.overlayLayer_.getSource().addFeatures(this.sketch_),this.features_=t.features,this.source_=t.source,this.condition_=t.condition||function(t){return t.getAccuracy()<this.get("minAccuracy")},ol.interaction.Interaction.call(this,{handleEvent:function(){return!this.get("followTrack")||"auto"==this.get("followTrack")}}),this.set("type",t.type||"LineString"),this.set("attributes",t.attributes||{}),this.set("minAccuracy",t.minAccuracy||20),this.set("tolerance",t.tolerance||5),this.set("zoom",t.zoom),this.setFollowTrack(void 0===t.followTrack||t.followTrack),this.setActive(!1)},ol.inherits(ol.interaction.GeolocationDraw,ol.interaction.Interaction),ol.interaction.GeolocationDraw.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),ol.interaction.Pointer.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t),t&&this.geolocation.setProjection(t.getView().getProjection())},ol.interaction.GeolocationDraw.prototype.setActive=function(t){if(ol.interaction.Interaction.prototype.setActive.call(this,t),this.overlayLayer_.setVisible(t),this.getMap()&&(this.geolocation.setTracking(t),this.getMap().renderSync()),this.pause(!t),t)this.reset(),this.dispatchEvent({type:"drawstart",feature:this.sketch_[1]});else{var e=this.sketch_[1].clone();e.getGeometry()&&(this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),this.dispatchEvent({type:"drawend",feature:e}))}},ol.interaction.GeolocationDraw.prototype.reset=function(){this.sketch_[1].setGeometry(),this.path_=[],this.lastPosition_=!1},ol.interaction.GeolocationDraw.prototype.start=function(){this.setActive(!0)},ol.interaction.GeolocationDraw.prototype.stop=function(){this.setActive(!1)},ol.interaction.GeolocationDraw.prototype.pause=function(t){this.pause_=!1!==t},ol.interaction.GeolocationDraw.prototype.isPaused=function(){return this.pause_},ol.interaction.GeolocationDraw.prototype.setFollowTrack=function(t){this.set("followTrack",t);var e=this.getMap();if(!1!==t&&!this.lastPosition_&&e){var o=this.path_[this.path_.length-1];o&&e.getView().animate({center:o,zoom:"position"!=t?this.get("zoom"):void 0})}this.lastPosition_=!1,this.dispatchEvent({type:"follow",following:!1!==t})},ol.interaction.GeolocationDraw.prototype.draw_=function(t){var e=this.getMap();if(e){var o=this.geolocation,i=o.getAccuracy(),r=o.getPosition();r.push(Math.round(100*(o.getAltitude()||0))/100),r.push(Math.round((new Date).getTime()/1e3));var s=o.getAccuracyGeometry();switch(this.get("followTrack")){case!0:1==this.get("followTrack")&&(e.getView().setZoom(this.get("zoom")||16),ol.extent.containsExtent(e.getView().calculateExtent(e.getSize()),s.getExtent())||e.getView().fit(s.getExtent()));case"position":e.getView().setCenter(r);break;case"auto":if(this.lastPosition_){var n=e.getView().getCenter();n[0]!=this.lastPosition_[0]||n[1]!=this.lastPosition_[1]?this.setFollowTrack(!1):(e.getView().setCenter(r),this.lastPosition_=r)}else e.getView().setCenter(r),this.get("zoom")&&e.getView().setZoom(this.get("zoom")),this.lastPosition_=r;break;case"visible":ol.extent.containsCoordinate(e.getView().calculateExtent(e.getSize()),r)||e.getView().setCenter(r)}var a,l=this.sketch_[0];if(l.setGeometry(s),i<this.get("minAccuracy")/2?l.setStyle(this.locStyle.ok):i<this.get("minAccuracy")?l.setStyle(this.locStyle.warn):l.setStyle(this.locStyle.error),!this.pause_&&this.condition_.call(this,o)){switch(l=this.sketch_[1],this.path_.push(r),this.get("type")){case"Point":this.path_=[r],l.setGeometry(new ol.geom.Point(r,"XYZM"));var h=this.get("attributes");h.heading&&l.set("heading",o.getHeading()),h.accuracy&&l.set("accuracy",o.getAccuracy()),h.altitudeAccuracy&&l.set("altitudeAccuracy",o.getAltitudeAccuracy()),h.speed&&l.set("speed",o.getSpeed());break;case"LineString":this.path_.length>1?((a=new ol.geom.LineString(this.path_,"XYZM")).simplify(this.get("tolerance")),l.setGeometry(a)):l.setGeometry();break;case"Polygon":this.path_.length>2?((a=new ol.geom.Polygon([this.path_],"XYZM")).simplify(this.get("tolerance")),l.setGeometry(a)):l.setGeometry()}this.dispatchEvent({type:"drawing",feature:this.sketch_[1],geolocation:o})}this.sketch_[2].setGeometry(new ol.geom.Point(r)),this.sketch_[2].set("heading",o.getHeading()),this.dispatchEvent({type:"tracking",feature:this.sketch_[1],geolocation:o})}},ol.interaction.Hover=function(t){t||(t={});var e=this;ol.interaction.Interaction.call(this,{handleEvent:function(o){return"pointermove"==o.type&&e.handleMove_(o),!t.handleEvent||t.handleEvent(o)}}),this.setFeatureFilter(t.featureFilter),this.setLayerFilter(t.layerFilter),this.setCursor(t.cursor)},ol.inherits(ol.interaction.Hover,ol.interaction.Interaction),ol.interaction.Hover.prototype.setMap=function(t){void 0!==this.previousCursor_&&this.getMap()&&(this.getMap().getTargetElement().style.cursor=this.previousCursor_,this.previousCursor_=void 0),ol.interaction.Interaction.prototype.setMap.call(this,t)},ol.interaction.Hover.prototype.setCursor=function(t){!t&&void 0!==this.previousCursor_&&this.getMap()&&(this.getMap().getTargetElement().style.cursor=this.previousCursor_,this.previousCursor_=void 0),this.cursor_=t},ol.interaction.Hover.prototype.setFeatureFilter=function(t){this.featureFilter_="function"==typeof t?t:function(){return!0}},ol.interaction.Hover.prototype.setLayerFilter=function(t){this.layerFilter_="function"==typeof t?t:function(){return!0}},ol.interaction.Hover.prototype.handleMove_=function(t){var e=this.getMap();if(e){var o,i,r=this,s=e.forEachFeatureAtPixel(t.pixel,function(t,e){return r.layerFilter_.call(null,e)&&r.featureFilter_.call(null,t,e)?(o=t,i=e,!0):(o=i=null,!1)});if(s&&this.dispatchEvent({type:"hover",feature:o,layer:i,coordinate:t.coordinate,pixel:t.pixel,map:t.map,dragging:t.dragging}),this.feature_===o&&this.layer_===i||(this.feature_=o,this.layer_=i,o?this.dispatchEvent({type:"enter",feature:o,layer:i,coordinate:t.coordinate,pixel:t.pixel,map:t.map,dragging:t.dragging}):this.dispatchEvent({type:"leave",coordinate:t.coordinate,pixel:t.pixel,map:t.map,dragging:t.dragging})),this.cursor_){var n=e.getTargetElement().style;s?n.cursor!=this.cursor_&&(this.previousCursor_=n.cursor,n.cursor=this.cursor_):void 0!==this.previousCursor_&&(n.cursor=this.previousCursor_,this.previousCursor_=void 0)}}},ol.interaction.LongTouch=function(t){t||(t={}),this.delay_=t.delay||1e3;var e=t.handleLongTouchEvent||function(){},o=null;ol.interaction.Interaction.call(this,{handleEvent:function(t){if(this.getActive())switch(t.type){case"pointerdown":o&&clearTimeout(o),o=setTimeout(function(){t.type="longtouch",e(t)},this.delay_);break;case"pointerdrag":case"pointerup":o&&(clearTimeout(o),o=null)}else o&&(clearTimeout(o),o=null);return!0}})},ol.inherits(ol.interaction.LongTouch,ol.interaction.Interaction),ol.interaction.ModifyTouch=function(t){var e=this;t||(t={}),this._popup=new ol.Overlay.Popup({popupClass:t.calssName||"modifytouch",positioning:"bottom-rigth",offsetBox:10}),this._source=t.source,this._features=t.features;var o=document.createElement("a");o.appendChild(document.createTextNode(t.title||"remove point")),o.onclick=function(){e.removePoint()},this.setPopupContent(o);var i=(t.pixelTolerance||0)+5;t.condition=function(t){var e=this.getMap().getFeaturesAtPixel(t.pixel,{hitTolerance:i}),o=!1;if(e){var r=this._features;if(!r){var s=[t.pixel[0]-i,t.pixel[1]-i],n=[t.pixel[0]+i,t.pixel[1]+i];s=this.getMap().getCoordinateFromPixel(s),n=this.getMap().getCoordinateFromPixel(n);var a=ol.extent.boundingExtent([s,n]);r=this._source.getFeaturesInExtent(a)}r.getArray&&(r=r.getArray());for(var l,h=0;(l=e[h])&&!(r.indexOf(l)>=0);h++);if(l){s=t.pixel,n=l.getGeometry().getClosestPoint(t.coordinate),n=this.getMap().getPixelFromCoordinate(n);var c=s[0]-n[0],p=s[1]-n[1];o=Math.sqrt(c*c+p*p)<i}}return this.showDeleteBt(o?{type:"show",feature:l,coordinate:t.coordinate}:{type:"hide"}),t.preventDefault(),t.stopPropagation(),!0},t.insertVertexCondition=function(t){return this.showDeleteBt({type:"hide"}),!0},ol.interaction.Modify.call(this,t),this.on(["modifystart","modifyend"],function(){this.showDeleteBt({type:"hide",modifying:!0})}),this.set("usePopup",!1!==t.usePopup)},ol.inherits(ol.interaction.ModifyTouch,ol.interaction.Modify),ol.interaction.ModifyTouch.prototype.setMap=function(t){this.getMap()&&this.getMap().removeOverlay(this._popup),ol.interaction.Modify.prototype.setMap.call(this,t),this.getMap()&&this.getMap().addOverlay(this._popup)},ol.interaction.ModifyTouch.prototype.setActive=function(t){ol.interaction.Modify.prototype.setActive.call(this,t),this.showDeleteBt({type:"hide"})},ol.interaction.ModifyTouch.prototype.removePoint=function(){new Date-this._timeout<200||(ol.interaction.Modify.prototype.removePoint.call(this),this.showDeleteBt({type:"hide"}))},ol.interaction.ModifyTouch.prototype.showDeleteBt=function(t){this.get("usePopup")&&"show"===t.type?this._popup.show(t.coordinate,this._menu):this._popup.hide(),t.type+="popup",this.dispatchEvent(t),this._timeout=new Date},ol.interaction.ModifyTouch.prototype.setPopupContent=function(t){this._menu=t},ol.interaction.ModifyTouch.prototype.getPopupContent=function(){return this._menu},ol.interaction.Offset=function(t){t||(t={}),ol.interaction.Pointer.call(this,{handleDownEvent:this.handleDownEvent_,handleDragEvent:this.handleDragEvent_,handleMoveEvent:this.handleMoveEvent_,handleUpEvent:this.handleUpEvent_}),this.features_=t.features,this.layers_=t.layers?t.layers instanceof Array?t.layers:[t.layers]:null,this.set("duplicate",t.duplicate),this.source_=t.source,this.previousCursor_=!1},ol.inherits(ol.interaction.Offset,ol.interaction.Pointer),ol.interaction.Offset.prototype.setMap=function(t){ol.interaction.Pointer.prototype.setMap.call(this,t)},ol.interaction.Offset.prototype.getFeatureAtPixel_=function(t){var e=this;return this.getMap().forEachFeatureAtPixel(t.pixel,function(o,i){var r;if(e.layers_){for(var s=0;s<e.layers_.length;s++)if(e.layers_[s]===i){r=o;break}}else e.features_?e.features_.forEach(function(t){t===o&&(r=o)}):r=o;var n=r.getGeometry().getType();if(r&&/Polygon|LineString/.test(n)){if("Polygon"===n&&r.getGeometry().getCoordinates().length>1)return!1;var a=r.getGeometry().getClosestPoint(t.coordinate),l=a[0]-t.coordinate[0],h=a[1]-t.coordinate[1];return Math.sqrt(l*l+h*h)/t.frameState.viewState.resolution<5&&{feature:r,hit:a,coordinates:r.getGeometry().getCoordinates(),geom:r.getGeometry().clone(),geomType:n}}return!1},{hitTolerance:5})},ol.interaction.Offset.prototype.handleDownEvent_=function(t){return this.current_=this.getFeatureAtPixel_(t),this.source_&&(this.get("duplicate")||t.originalEvent.ctrlKey)&&(this.current_.feature=this.current_.feature.clone(),this.source_.addFeature(this.current_.feature)),!!this.current_&&(this.dispatchEvent({type:"offsetstart",feature:this.current_.feature,offset:0}),!0)},ol.interaction.Offset.prototype.handleDragEvent_=function(t){var e=this.current_.geom.getClosestPoint(t.coordinate),o=ol.coordinate.dist2d(e,t.coordinate);switch(this.current_.geomType){case"Polygon":if(a=ol.coordinate.findSegment(e,this.current_.coordinates[0]).segment){var i=[a[1][0]-a[0][0],a[1][1]-a[0][1]],r=[t.coordinate[0]-e[0],t.coordinate[1]-e[1]];i[0]*r[1]-i[1]*r[0]>0&&(o=-o);for(var s=[],n=0;n<this.current_.coordinates.length;n++)s.push(ol.coordinate.offsetCoords(this.current_.coordinates[n],0==n?o:-o));this.current_.feature.setGeometry(new ol.geom.Polygon(s))}break;case"LineString":var a;(a=ol.coordinate.findSegment(e,this.current_.coordinates).segment)&&(i=[a[1][0]-a[0][0],a[1][1]-a[0][1]],r=[t.coordinate[0]-e[0],t.coordinate[1]-e[1]],i[0]*r[1]-i[1]*r[0]>0&&(o=-o),s=ol.coordinate.offsetCoords(this.current_.coordinates,o),this.current_.feature.setGeometry(new ol.geom.LineString(s)))}this.dispatchEvent({type:"offsetting",feature:this.current_.feature,offset:o,segment:[e,t.coordinate],coordinate:t.coordinate})},ol.interaction.Offset.prototype.handleUpEvent_=function(t){this.dispatchEvent({type:"offsetend",feature:this.current_.feature,coordinate:t.coordinate}),this.current_=!1},ol.interaction.Offset.prototype.handleMoveEvent_=function(t){this.getFeatureAtPixel_(t)?(!1===this.previousCursor_&&(this.previousCursor_=t.map.getTargetElement().style.cursor),t.map.getTargetElement().style.cursor="pointer"):(t.map.getTargetElement().style.cursor=this.previousCursor_,this.previousCursor_=!1)},ol.interaction.Ripple=function(t){ol.interaction.Pointer.call(this,{handleDownEvent:this.rainDrop,handleMoveEvent:this.rainDrop}),t=t||{},this.riprad=t.radius||3,this.ripplemap=[],this.last_map=[],this.interval=t.interval,this.rains(this.interval)},ol.inherits(ol.interaction.Ripple,ol.interaction.Pointer),ol.interaction.Ripple.prototype.setMap=function(t){this.oncompose&&(ol.Observable.unByKey(oncompose),this.getMap()&&this.getMap().render()),ol.interaction.Pointer.prototype.setMap.call(this,t),t&&(this.oncompose=t.on("postcompose",this.postcompose_.bind(this)))},ol.interaction.Ripple.prototype.rains=function(t){this.onrain&&clearTimeout(this.onrain);var e=this;vdelay=("number"==typeof t?t:1e3)/2,delay=3*vdelay/2;var o=Math.random;delay&&function t(){e.width&&e.rainDrop([o()*e.width,o()*e.height]),e.onrain=setTimeout(t,o()*vdelay+delay)}()},ol.interaction.Ripple.prototype.rainDrop=function(t){if(this.width){var e,o;t.pixel?(e=t.pixel[0]*this.ratio,o=t.pixel[1]*this.ratio):(e=t[0]*this.ratio,o=t[1]*this.ratio),e<<=0;for(var i=(o<<=0)-this.riprad*this.ratio;i<o+this.riprad*this.ratio;i++)for(var r=e-this.riprad*this.ratio;r<e+this.riprad*this.ratio;r++)this.ripplemap[this.oldind+i*this.width+r]+=128}},ol.interaction.Ripple.prototype.postcompose_=function(t){var e,o,i,r,s,n=t.context,a=n.canvas;if(this.width!=a.width||this.height!=a.height){this.width=a.width,this.height=a.height,this.ratio=t.frameState.pixelRatio,this.half_width=this.width>>1,this.half_height=this.height>>1,this.size=this.width*(this.height+2)*2,this.oldind=this.width,this.newind=this.width*(this.height+3);for(var l=0;l<this.size;l++)this.last_map[l]=this.ripplemap[l]=0}this.texture=n.getImageData(0,0,this.width,this.height),this.ripple=n.getImageData(0,0,this.width,this.height);var h=this.oldind;this.oldind=this.newind,this.newind=h,l=0;for(var c=this.ripple.data,p=this.texture.data,u=0;u<this.height;u++)for(var g=0;g<this.width;g++){var d=this.newind+l,f=this.oldind+l;i=this.ripplemap[f-this.width]+this.ripplemap[f+this.width]+this.ripplemap[f-1]+this.ripplemap[f+1]>>1,i-=this.ripplemap[d],i-=i>>5,this.ripplemap[d]=i,i=1024-i,this.last_map[l]!=i&&(this.last_map[l]=i,e=((g-this.half_width)*i/1024<<0)+this.half_width,o=((u-this.half_height)*i/1024<<0)+this.half_height,e>=this.width&&(e=this.width-1),e<0&&(e=0),o>=this.height&&(o=this.height-1),o<0&&(o=0),s=4*(e+o*this.width),c[r=4*l]=p[s],c[r+1]=p[s+1],c[r+2]=p[s+2]),++l}n.putImageData(this.ripple,0,0),this.getMap().render()},ol.interaction.SelectCluster=function(t){t=t||{},this.pointRadius=t.pointRadius||12,this.circleMaxObjects=t.circleMaxObjects||10,this.maxObjects=t.maxObjects||60,this.spiral=!1!==t.spiral,this.animate=t.animate,this.animationDuration=t.animationDuration||500,this.selectCluster_=!1!==t.selectCluster;var e=this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector({features:new ol.Collection,useSpatialIndex:!0}),name:"Cluster overlay",updateWhileAnimating:!0,updateWhileInteracting:!0,displayInLayerSwitcher:!1,style:t.featureStyle});if(t.layers)if("function"==typeof t.layers){var o=t.layers;t.layers=function(t){return t===e||o(t)}}else t.layers.push&&t.layers.push(this.overlayLayer_);t.filter?(o=t.filter,t.filter=function(t,e){return!(!e&&t.get("selectclusterlink"))&&o(t,e)}):t.filter=function(t,e){return!(!e&&t.get("selectclusterlink"))},this.filter_=t.filter,ol.interaction.Select.call(this,t),this.on("select",this.selectCluster.bind(this))},ol.inherits(ol.interaction.SelectCluster,ol.interaction.Select),ol.interaction.SelectCluster.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.interaction.Select.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t),t&&t.getView()&&(this._listener=t.getView().on("change:resolution",this.clear.bind(this)))},ol.interaction.SelectCluster.prototype.clear=function(){this.getFeatures().clear(),this.overlayLayer_.getSource().clear()},ol.interaction.SelectCluster.prototype.getLayer=function(){return this.overlayLayer_},ol.interaction.SelectCluster.prototype.selectCluster=function(t){if(t.selected.length){var e=t.selected[0];if(!e.get("selectclusterfeature")){var o=this.overlayLayer_.getSource();o.clear();var i=e.get("features");if(i&&1!=i.length){this.selectCluster_||this.getFeatures().clear();var r=e.getGeometry().getCoordinates(),s=this.getMap().getView().getResolution(),n=s*this.pointRadius*(.5+i.length/4);if(!this.spiral||i.length<=this.circleMaxObjects)for(var a=Math.min(i.length,this.circleMaxObjects),l=0;l<a;l++){var h=2*Math.PI*l/a;2!=a&&4!=a||(h+=Math.PI/4);var c=[r[0]+n*Math.sin(h),r[1]+n*Math.cos(h)];(g=new ol.Feature({selectclusterfeature:!0,features:[i[l]],geometry:new ol.geom.Point(c)})).setStyle(i[l].getStyle()),o.addFeature(g);var p=new ol.Feature({selectclusterlink:!0,geometry:new ol.geom.LineString([r,c])});o.addFeature(p)}else{h=0;var u=2*this.pointRadius;for(new Array,new Array,a=Math.min(this.maxObjects,i.length),l=0;l<a;l++){h+=(u+.1)/(n=u/2+u*h/(2*Math.PI));var g,d=s*n*Math.sin(h),f=s*n*Math.cos(h);c=[r[0]+d,r[1]+f],(g=new ol.Feature({selectclusterfeature:!0,features:[i[l]],geometry:new ol.geom.Point(c)})).setStyle(i[l].getStyle()),o.addFeature(g),p=new ol.Feature({selectclusterlink:!0,geometry:new ol.geom.LineString([r,c])}),o.addFeature(p)}}this.animate&&this.animateCluster_(r)}}}else this.clear()},ol.interaction.SelectCluster.prototype.animateCluster_=function(t){this.listenerKey_&&(this.overlayLayer_.setVisible(!0),ol.Observable.unByKey(this.listenerKey_));var e=this.overlayLayer_.getSource().getFeatures();if(e.length){this.overlayLayer_.setVisible(!1);var o=this.overlayLayer_.getStyle(),i="function"==typeof o?o:o.length?function(){return o}:function(){return[o]},r=this.animationDuration||500,s=(new Date).getTime();this.listenerKey_=this.getMap().on("postcompose",function(o){for(var n,a=o.vectorContext,l=o.frameState.pixelRatio,h=o.target.getView().getResolution(),c=ol.easing.easeOut((o.frameState.time-s)/r),p=0;n=e[p];p++)if(n.get("features")){var u=n.getGeometry().getCoordinates();u[0]=t[0]+c*(u[0]-t[0]),u[1]=t[1]+c*(u[1]-t[1]);for(var g=new ol.geom.Point(u),d=i(n,h),f=0;f<d.length;f++){var y,m=!ol.Map.prototype.getFeaturesAtPixel&&d[f].getImage();m&&(y=m.getScale(),m.setScale(l)),a.setStyle?(a.setStyle(d[f]),a.drawGeometry(g)):(a.setImageStyle(m),a.drawPointGeometry(g)),m&&m.setScale(y)}}if(c>1)return ol.Observable.unByKey(this.listenerKey_),this.overlayLayer_.setVisible(!0),void this.overlayLayer_.changed();o.frameState.animate=!0}.bind(this))}},ol.interaction.SnapGuides=function(t){function e(t,e){var o=t[1][0]-t[0][0],i=t[1][1]-t[0][1],r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],n=o*s-i*r;if(0!=n){var a=(o*t[0][1]-o*e[0][1]-i*t[0][0]+i*e[0][0])/n;return[e[0][0]+a*r,e[0][1]+a*s]}return!1}function o(t,e){var o=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(o*o+i*i)}t||(t={}),this.snapDistance_=t.pixelTolerance||10;var i=[new ol.style.Style({stroke:new ol.style.Stroke({color:"#ffcc33",lineDash:[8,5],width:1.25})})];t.style&&(i=t.style instanceof Array?t.style:[t.style]),this.overlaySource_=new ol.source.Vector({features:new ol.Collection,useSpatialIndex:!1}),console.log("CREATE OVERLAY"),this.overlayLayer_=new ol.layer.Vector({source:this.overlaySource_,style:function(t){return i},name:"Snap overlay",displayInLayerSwitcher:!1}),ol.interaction.Interaction.call(this,{handleEvent:function(t){if(this.getActive()){for(var i,r=this.overlaySource_.getFeatures(),s=null,n=null,a=t.frameState.viewState.resolution,l=0;i=r[l];l++){var h=i.getGeometry().getClosestPoint(t.coordinate);if(o(h,t.coordinate)/a<this.snapDistance_){if(s){var c=e(s.getGeometry().getCoordinates(),i.getGeometry().getCoordinates());c&&o(c,t.coordinate)/a<this.snapDistance_&&(n=c)}else n=h;s=i}}n&&(t.coordinate=n)}return!0}})},ol.inherits(ol.interaction.SnapGuides,ol.interaction.Interaction),ol.interaction.SnapGuides.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),ol.interaction.Interaction.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t),t&&(this.projExtent_=t.getView().getProjection().getExtent())},ol.interaction.SnapGuides.prototype.setActive=function(t){this.overlayLayer_.setVisible(t),ol.interaction.Interaction.prototype.setActive.call(this,t)},ol.interaction.SnapGuides.prototype.clearGuides=function(t){if(t)for(var e,o=0;e=t[o];o++)this.overlaySource_.removeFeature(e);else this.overlaySource_.clear()},ol.interaction.SnapGuides.prototype.getGuides=function(t){return this.overlaySource_.getFeaturesCollection()},ol.interaction.SnapGuides.prototype.addGuide=function(t,e){if(t){var o=this.getMap(),i=o.getView().calculateExtent(o.getSize());(i=ol.extent.buffer(i,Math.max(1e5+1,100*(i[2]-i[0]))))[0]<this.projExtent_[0]&&(i[0]=this.projExtent_[0]),i[1]<this.projExtent_[1]&&(i[1]=this.projExtent_[1]),i[2]>this.projExtent_[2]&&(i[2]=this.projExtent_[2]),i[3]>this.projExtent_[3]&&(i[3]=this.projExtent_[3]);for(var r,s=t[0][0]-t[1][0],n=t[0][1]-t[1][1],a=1/Math.sqrt(s*s+n*n),l=[],h=0;h<1e8&&(r=e?[t[0][0]+n*a*h,t[0][1]-s*a*h]:[t[0][0]+s*a*h,t[0][1]+n*a*h],ol.extent.containsCoordinate(i,r));h+=1e5)l.push(r);var c=new ol.Feature(new ol.geom.LineString(l));for(l=[],h=0;h>-1e8&&(r=e?[t[0][0]+n*a*h,t[0][1]-s*a*h]:[t[0][0]+s*a*h,t[0][1]+n*a*h],ol.extent.containsCoordinate(i,r));h-=1e5)l.push(r);var p=new ol.Feature(new ol.geom.LineString(l));return this.overlaySource_.addFeature(c),this.overlaySource_.addFeature(p),[c,p]}},ol.interaction.SnapGuides.prototype.addOrthoGuide=function(t){return this.addGuide(t,!0)},ol.interaction.SnapGuides.prototype.setDrawInteraction=function(t){var e=this,o=0,i=[];function r(t){var r=[],s=2;switch(t.target.getType()){case"LineString":r=t.target.getCoordinates(),s=2;break;case"Polygon":r=t.target.getCoordinates()[0],s=3}var n=r.length;n!=o&&n>s&&(e.clearGuides(i),i=(i=(i=e.addOrthoGuide([r[n-s],r[n-s-1]])).concat(e.addGuide([r[0],r[1]]))).concat(e.addOrthoGuide([r[0],r[1]])),o=n)}t.on("drawstart",function(t){t.feature.getGeometry().on("change",r)}),t.on("drawend",function(t){e.clearGuides(i),t.feature.getGeometry().un("change",r),o=0,i=[]})},ol.interaction.Split=function(t){t||(t={}),ol.interaction.Interaction.call(this,{handleEvent:function(t){switch(t.type){case"singleclick":return this.handleDownEvent(t);case"pointermove":return this.handleMoveEvent(t);default:return!0}return!0}}),this.snapDistance_=t.snapDistance||25,this.tolerance_=t.tolerance||1e-10,this.cursor_=t.cursor,this.sources_=t.sources?t.sources instanceof Array?t.sources:[t.sources]:[],t.features&&this.sources_.push(new ol.source.Vector({features:features})),this.filterSplit_=t.filter||function(){return!0};var e=[255,255,255,1],o=[0,153,255,1],i=new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),r=new ol.style.Stroke({color:"#3399CC",width:1.25}),s=[new ol.style.Style({image:new ol.style.Circle({fill:i,stroke:r,radius:5}),fill:i,stroke:r})],n=[new ol.style.Style({stroke:new ol.style.Stroke({color:e,width:5})}),new ol.style.Style({image:new ol.style.Circle({radius:6,fill:new ol.style.Fill({color:o}),stroke:new ol.style.Stroke({color:e,width:1.5})}),stroke:new ol.style.Stroke({color:o,width:3})})];t.sketchStyle&&(s=t.sketchStyle instanceof Array?t.sketchStyle:[t.sketchStyle]),t.featureStyle&&(n=t.featureStyle instanceof Array?t.featureStyle:[t.featureStyle]),this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:!1}),name:"Split overlay",displayInLayerSwitcher:!1,style:function(t){return t._sketch_?s:n}})},ol.inherits(ol.interaction.Split,ol.interaction.Interaction),ol.interaction.Split.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),ol.interaction.Interaction.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t)},ol.interaction.Split.prototype.getClosestFeature=function(t){for(var e,o,i,r=this.snapDistance_+1,s=0;s<this.sources_.length;s++){var n=this.sources_[s];if((e=n.getClosestFeatureToCoordinate(t.coordinate)).getGeometry().splitAt){o=e.getGeometry().getClosestPoint(t.coordinate),r=(i=new ol.geom.LineString([t.coordinate,o])).getLength()/t.frameState.viewState.resolution;break}}if(r>this.snapDistance_)return!1;var a=this.getNearestCoord(o,e.getGeometry().getCoordinates()),l=this.getMap().getPixelFromCoordinate(a);return ol.coordinate.dist2d(t.pixel,l)<this.snapDistance_&&(o=a),{source:n,feature:e,coord:o,link:i}},ol.interaction.Split.prototype.getNearestCoord=function(t,e){for(var o,i,r=Number.MAX_VALUE,s=0;s<e.length;s++)(o=ol.coordinate.dist2d(t,e[s]))<r&&(r=o,i=e[s]);return i},ol.interaction.Split.prototype.handleDownEvent=function(t){var e=this.getClosestFeature(t);if(e){this.overlayLayer_.getSource().clear();var o=e.feature.getGeometry().splitAt(e.coord,this.tolerance_);if(o.length>1){for(var i=[],r=0;r<o.length;r++){var s=e.feature.clone();s.setGeometry(o[r]),i.push(s)}for(this.dispatchEvent({type:"beforesplit",original:e.feature,features:i}),e.source.dispatchEvent({type:"beforesplit",original:e.feature,features:i}),e.source.removeFeature(e.feature),r=0;r<i.length;r++)e.source.addFeature(i[r]);this.dispatchEvent({type:"aftersplit",original:e.feature,features:i}),e.source.dispatchEvent({type:"aftersplit",original:e.feature,features:i})}}return!1},ol.interaction.Split.prototype.handleMoveEvent=function(t){var e=t.map;this.overlayLayer_.getSource().clear();var o,i,r=this.getClosestFeature(t);r&&this.filterSplit_(r.feature)?(this.overlayLayer_.getSource().addFeature(r.feature),(o=new ol.Feature(new ol.geom.Point(r.coord)))._sketch_=!0,this.overlayLayer_.getSource().addFeature(o),(i=new ol.Feature(r.link))._sketch_=!0,this.overlayLayer_.getSource().addFeature(i),this.dispatchEvent({type:"pointermove",coordinate:t.coordinate,frameState:t.frameState,originalEvent:t.originalEvent,map:t.map,pixel:t.pixel,feature:r.feature,linkGeometry:r.link})):this.dispatchEvent(t);var s=e.getTargetElement();this.cursor_&&(r?s.style.cursor!=this.cursor_&&(this.previousCursor_=s.style.cursor,s.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(s.style.cursor=this.previousCursor_,this.previousCursor_=void 0))},ol.interaction.Splitter=function(t){t||(t={}),ol.interaction.Interaction.call(this,{handleEvent:function(t){return"pointermove"!=t.type&&"pointerdrag"!=t.type?(this.lastEvent_&&(this.splitSource(this.lastEvent_.feature),this.lastEvent_=null),this.moving_=!1):this.moving_=!0,!0}}),this.added_=[],this.removed_=[],t.features?this.source_=new ol.source.Vector({features:t.features}):this.source_=t.source?t.source:new ol.source.Vector({features:new ol.Collection});var e=this.triggerSource;t.triggerFeatures&&(e=new ol.source.Vector({features:t.triggerFeatures})),e?(e.on("addfeature",this.onAddFeature.bind(this)),e.on("changefeature",this.onChangeFeature.bind(this)),e.on("removefeature",this.onRemoveFeature.bind(this))):(this.source_.on("addfeature",this.onAddFeature.bind(this)),this.source_.on("changefeature",this.onChangeFeature.bind(this)),this.source_.on("removefeature",this.onRemoveFeature.bind(this))),this.tolerance_=t.tolerance||1e-10,this.filterSplit_=t.filter||function(){return!0}},ol.inherits(ol.interaction.Splitter,ol.interaction.Interaction),ol.interaction.Splitter.prototype.intersectSegs=function(t,e){var o=this.tolerance_,i=t[0][0]-t[1][0],r=e[0][0]-e[1][0],s=t[0][1]-t[1][1],n=e[0][1]-e[1][1],a=i*n-s*r;if(Math.abs(a)<o)return!1;var l=((t[0][0]-e[1][0])*n-(t[0][1]-e[1][1])*r)/a;if(Math.abs(l)<o)return t[0];if(Math.abs(1-l)<o)return t[1];if(l<0||l>1)return!1;var h=((t[0][1]-e[1][1])*i-(t[0][0]-e[1][0])*s)/a;if(Math.abs(h)<o)return e[1];if(Math.abs(1-h)<o)return e[0];if(h<0||h>1)return!1;var c=t[0][0]*t[1][1]-t[0][1]*t[1][0],p=e[0][0]*e[1][1]-e[0][1]*e[1][0];return[(c*r-p*i)/a,(c*n-p*s)/a]},ol.interaction.Splitter.prototype.splitSource=function(t){if(!this.splitting){var e,o,i,r=this;this.source_.dispatchEvent({type:"beforesplit",feaure:t,source:this.source_}),this.splitting=!0,this.added_=[],this.removed_=[];var s,n=t.getGeometry().getCoordinates(),a=[];for(e=0;e<n.length-1;e++){s=[n[e],n[e+1]];for(var l,h=ol.extent.buffer(ol.extent.boundingExtent(s),this.tolerance_);;){var c=!1;if(this.source_.forEachFeatureIntersectingExtent(h,y.bind(this)),!c)break;var p=c;for(this.source_.removeFeature(p),o=0;o<l.length;o++)(i=p.clone()).setGeometry(l[o]),this.source_.addFeature(i)}}for(e=0;e<n.length-2;e++)for(var u=e+1;u<n.length-1;u++){var g=this.intersectSegs([n[e],n[e+1]],[n[u],n[u+1]]);g&&g!=n[e+1]&&a.push(g)}var d=!1;if(a.length){var f=t.getGeometry().splitAt(a,this.tolerance_);if(f.length>1){for(o=0;o<f.length;o++)(i=t.clone()).setGeometry(f[o]),this.source_.addFeature(i);d=!0}}setTimeout(function(){d&&r.source_.removeFeature(t),r.source_.dispatchEvent({type:"aftersplit",featureAdded:r.added_,featureRemoved:r.removed_,source:this.source_}),r.splitting=!1},0)}function y(e){if(e!==t)for(var o=e.getGeometry().getCoordinates(),i=0;i<o.length-1;i++){var r=this.intersectSegs(s,[o[i],o[i+1]]);if(r&&(a.push(r),(l=e.getGeometry().splitAt(r,this.tolerance_))&&l.length>1))return c=e,!0}return!1}},ol.interaction.Splitter.prototype.onAddFeature=function(t){this.splitSource(t.feature),this.splitting&&this.added_.push(t.feature)},ol.interaction.Splitter.prototype.onRemoveFeature=function(t){if(this.splitting){var e=this.added_.indexOf(t.feature);-1==e?this.removed_.push(t.feature):this.added_.splice(e,1)}},ol.interaction.Splitter.prototype.onChangeFeature=function(t){this.moving_?this.lastEvent_=t:this.splitSource(t.feature)},ol.interaction.Synchronize=function(t){t||(t={});var e=this;ol.interaction.Interaction.call(this,{handleEvent:function(t){return"pointermove"==t.type&&e.handleMove_(t),!0}}),this.maps=t.maps},ol.inherits(ol.interaction.Synchronize,ol.interaction.Interaction),ol.interaction.Synchronize.prototype.setMap=function(t){this._listener&&(ol.Observable.unByKey(this._listener.center),ol.Observable.unByKey(this._listener.rotation),ol.Observable.unByKey(this._listener.resolution),$(this.getMap().getTargetElement()).off("mouseout",this._listener.mouseout)),this._listener=null,ol.interaction.Interaction.prototype.setMap.call(this,t),t&&(this._listener={},this._listener.center=this.getMap().getView().on("change:center",this.syncMaps.bind(this)),this._listener.rotation=this.getMap().getView().on("change:rotation",this.syncMaps.bind(this)),this._listener.resolution=this.getMap().getView().on("change:resolution",this.syncMaps.bind(this)),this._listener.mouseout=this.handleMouseOut_.bind(this),$(this.getMap().getTargetElement()).on("mouseout",this._listener.mouseout),this.syncMaps())},ol.interaction.Synchronize.prototype.syncMaps=function(t){var e=this.getMap();if(t||(t={type:"all"}),e)for(var o=0;o<this.maps.length;o++)switch(t.type){case"change:rotation":this.maps[o].getView().getRotation()!=e.getView().getRotation()&&this.maps[o].getView().setRotation(e.getView().getRotation());break;case"change:center":this.maps[o].getView().getCenter()!=e.getView().getCenter()&&this.maps[o].getView().setCenter(e.getView().getCenter());break;case"change:resolution":this.maps[o].getView().getResolution()!=e.getView().getResolution()&&this.maps[o].getView().setResolution(e.getView().getResolution());break;default:this.maps[o].getView().setRotation(e.getView().getRotation()),this.maps[o].getView().setCenter(e.getView().getCenter()),this.maps[o].getView().setResolution(e.getView().getResolution())}},ol.interaction.Synchronize.prototype.handleMove_=function(t){for(var e=0;e<this.maps.length;e++)this.maps[e].showTarget(t.coordinate);this.getMap().showTarget()},ol.interaction.Synchronize.prototype.handleMouseOut_=function(t){for(var e=0;e<this.maps.length;e++)this.maps[e].targetOverlay_.setPosition(void 0)},ol.Map.prototype.showTarget=function(t){if(!this.targetOverlay_){var e=$("<div>").addClass("ol-target");this.targetOverlay_=new ol.Overlay({element:e.get(0)}),this.targetOverlay_.setPositioning("center-center"),this.addOverlay(this.targetOverlay_),e.parent().addClass("ol-target-overlay"),this.targetOverlay_.setPosition([0,0])}this.targetOverlay_.setPosition(t)},ol.Map.prototype.hideTarget=function(){this.removeOverlay(this.targetOverlay_),this.targetOverlay_=void 0},ol.interaction.TinkerBell=function(t){t=t||{},ol.interaction.Pointer.call(this,{handleDownEvent:this.onMove,handleMoveEvent:this.onMove}),this.set("color",t.color?ol.color.asString(t.color):"#fff"),this.sparkle=[0,0],this.sparkles=[],this.lastSparkle=this.time=new Date;var e=this;this.out_=function(){e.isout_=!0},this.isout_=!0},ol.inherits(ol.interaction.TinkerBell,ol.interaction.Pointer),ol.interaction.TinkerBell.prototype.setMap=function(t){this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,this.getMap()&&(t.getViewport().removeEventListener("mouseout",this.out_,!1),this.getMap().render()),ol.interaction.Pointer.prototype.setMap.call(this,t),t&&(this._listener=t.on("postcompose",this.postcompose_.bind(this)),t.getViewport().addEventListener("mouseout",this.out_,!1))},ol.interaction.TinkerBell.prototype.onMove=function(t){this.sparkle=t.pixel,this.isout_=!1,this.getMap().render()},ol.interaction.TinkerBell.prototype.postcompose_=function(t){var e=t.context,o=(e.canvas,t.frameState.time-this.time);this.time=t.frameState.time,t.frameState.time-this.lastSparkle>30&&!this.isout_&&(this.lastSparkle=t.frameState.time,this.sparkles.push({p:[this.sparkle[0]+15*Math.random()-7.5,this.sparkle[1]+15*Math.random()],o:1})),e.save(),e.scale(t.frameState.pixelRatio,t.frameState.pixelRatio),e.fillStyle=this.get("color");for(var i,r=this.sparkles.length-1;i=this.sparkles[r];r--){if(i.o<.2){this.sparkles.splice(0,r+1);break}e.globalAlpha=i.o,e.beginPath(),e.arc(i.p[0],i.p[1],2.2,0,2*Math.PI,!1),e.fill(),i.o*=.98,i.p[0]+=Math.random()-.5,i.p[1]+=o*(1+Math.random())/30}e.restore(),this.sparkles.length&&this.getMap().render()},ol.interaction.TouchCompass=function(t){t=t||{};var e={handleDownEvent:function(t){var e=this.getCenter_(),o=t.pixel[0]-e[0],i=t.pixel[1]-e[1];return this.start=t,Math.sqrt(o*o+i*i)<this.size/2},handleDragEvent:function(t){this.pos||(this.pos=this.start,this.getMap().renderSync()),this.pos=t},handleUpEvent:function(t){return this.pos=!1,!0}};if(ol.interaction.Pointer.call(this,e),this.ondrag_=t.onDrag,this.size=t.size||80,this.alpha=t.alpha||.5,!ol.interaction.TouchCompass.prototype.compass){var o=ol.interaction.TouchCompass.prototype.compass=document.createElement("canvas"),i=o.getContext("2d"),r=o.width=o.height=this.size,s=r/10,n=r/2,a=.22*n;i.translate(n,n),i.fillStyle="#999",i.strokeStyle="#ccc",i.lineWidth=s,i.beginPath(),i.arc(0,0,.42*r,0,2*Math.PI),i.fill(),i.stroke(),i.fillStyle="#99f",i.beginPath(),i.moveTo(0,0),i.lineTo(n,0),i.lineTo(a,a),i.moveTo(0,0),i.lineTo(-n,0),i.lineTo(-a,-a),i.moveTo(0,0),i.lineTo(0,n),i.lineTo(-a,a),i.moveTo(0,0),i.lineTo(0,-n),i.lineTo(a,-a),i.moveTo(0,0),i.fill(),i.fillStyle="#eee",i.beginPath(),i.moveTo(0,0),i.lineTo(n,0),i.lineTo(a,-a),i.moveTo(0,0),i.lineTo(-n,0),i.lineTo(-a,a),i.moveTo(0,0),i.lineTo(0,n),i.lineTo(a,a),i.moveTo(0,0),i.lineTo(0,-n),i.lineTo(-a,-a),i.moveTo(0,0),i.fill()}},ol.inherits(ol.interaction.TouchCompass,ol.interaction.Pointer),ol.interaction.TouchCompass.prototype.compass=null,ol.interaction.TouchCompass.prototype.setMap=function(t){this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.interaction.Pointer.prototype.setMap.call(this,t),t&&(this._listener=t.on("postcompose",this.drawCompass_.bind(this)))},ol.interaction.TouchCompass.prototype.setActive=function(t){ol.interaction.Pointer.prototype.setActive.call(this,t),this.getMap()&&this.getMap().renderSync()},ol.interaction.TouchCompass.prototype.getCenter_=function(){var t=this.size,e=this.getMap().getSize();return[e[0]/2,e[1]-10-t/2]},ol.interaction.TouchCompass.prototype.drawCompass_=function(t){if(this.getActive()){var e=t.context,o=t.frameState.pixelRatio;e.save(),e.scale(o,o),e.globalAlpha=this.alpha,e.strokeStyle="#fff",e.lineWidth=5;var i=this.size,r=this.getCenter_();if(e.drawImage(this.compass,0,0,this.compass.width,this.compass.height,r[0]-i/2,r[1]-i/2,i,i),this.pos)for(var s=this.pos.pixel[0]-this.start.pixel[0],n=this.pos.pixel[1]-this.start.pixel[1],a=1;a<=4;a++)e.beginPath(),e.arc(r[0]+s/4*a,r[1]+n/4*a,i/2*(.6+.4*a/4),0,2*Math.PI),e.stroke();if(e.restore(),this.pos){if(this.ondrag_){var l=this.getMap().getView().getResolution(),h={dpixel:[this.pos.pixel[0]-this.start.pixel[0],this.pos.pixel[1]-this.start.pixel[1]]};h.traction=[h.dpixel[0]*l,-h.dpixel[1]*l],this.ondrag_(h,this.pos)}t.frameState.animate=!0}}},ol.interaction.Transform=function(t){t||(t={});var e=this;this.handles_=new ol.Collection,this.overlayLayer_=new ol.layer.Vector({source:new ol.source.Vector({features:this.handles_,useSpatialIndex:!1,wrapX:!1}),name:"Transform overlay",displayInLayerSwitcher:!1,style:function(t){return e.style[(t.get("handle")||"default")+(t.get("constraint")||"")+(t.get("option")||"")]}}),ol.interaction.Pointer.call(this,{handleDownEvent:this.handleDownEvent_,handleDragEvent:this.handleDragEvent_,handleMoveEvent:this.handleMoveEvent_,handleUpEvent:this.handleUpEvent_}),this.features_=t.features,"function"==typeof t.filter&&(this._filter=t.filter),this.layers_=t.layers?t.layers instanceof Array?t.layers:[t.layers]:null,this.addFn_=t.addCondition||function(){return!1},this.set("translateFeature",!1!==t.translateFeature),this.set("translate",!1!==t.translate),this.set("stretch",!1!==t.stretch),this.set("scale",!1!==t.scale),this.set("rotate",!1!==t.rotate),this.set("keepAspectRatio",t.keepAspectRatio||function(t){return t.originalEvent.shiftKey}),this.set("modifyCenter",t.modifyCenter||function(t){return t.originalEvent.metaKey||t.originalEvent.ctrlKey}),this.set("hitTolerance",t.hitTolerance||0),this.selection_=[],this.on("propertychange",function(){this.drawSketch_()}),this.setDefaultStyle()},ol.inherits(ol.interaction.Transform,ol.interaction.Pointer),ol.interaction.Transform.prototype.Cursors={default:"auto",select:"pointer",translate:"move",rotate:"move",rotate0:"move",scale:"nesw-resize",scale1:"nwse-resize",scale2:"nesw-resize",scale3:"nwse-resize",scalev:"ew-resize",scaleh1:"ns-resize",scalev2:"ew-resize",scaleh3:"ns-resize"},ol.interaction.Transform.prototype.setMap=function(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),ol.interaction.Pointer.prototype.setMap.call(this,t),this.overlayLayer_.setMap(t),null!==t&&(this.isTouch=/touch/.test(t.getViewport().className),this.setDefaultStyle())},ol.interaction.Transform.prototype.setActive=function(t){this.select(null),this.overlayLayer_.setVisible(t),ol.interaction.Pointer.prototype.setActive.call(this,t)},ol.interaction.Transform.prototype.setDefaultStyle=function(){var t=new ol.style.Stroke({color:[255,0,0,1],width:1}),e=new ol.style.Stroke({color:[255,0,0,1],width:1,lineDash:[4,4]}),o=new ol.style.Fill({color:[255,0,0,.01]}),i=new ol.style.Fill({color:[255,255,255,.8]}),r=new ol.style.RegularShape({fill:i,stroke:t,radius:this.isTouch?12:6,points:15});r.getAnchor()[0]=this.isTouch?-10:-5;var s=new ol.style.RegularShape({fill:i,stroke:t,radius:this.isTouch?16:8,points:4,angle:Math.PI/4}),n=new ol.style.RegularShape({fill:i,stroke:t,radius:this.isTouch?12:6,points:4,angle:Math.PI/4});function a(t,e,o){return[new ol.style.Style({image:t,stroke:e,fill:o})]}this.style={default:a(s,e,o),translate:a(s,t,i),rotate:a(r,t,i),rotate0:a(s,t,i),scale:a(s,t,i),scale1:a(s,t,i),scale2:a(s,t,i),scale3:a(s,t,i),scalev:a(n,t,i),scaleh1:a(n,t,i),scalev2:a(n,t,i),scaleh3:a(n,t,i)},this.drawSketch_()},ol.interaction.Transform.prototype.setStyle=function(t,e){if(e){e instanceof Array?this.style[t]=e:this.style[t]=[e];for(var o=0;o<this.style[t].length;o++){var i=this.style[t][o].getImage();i&&("rotate"==t&&(i.getAnchor()[0]=-5),this.isTouch&&i.setScale(1.8));var r=this.style[t][o].getText();r&&("rotate"==t&&r.setOffsetX(this.isTouch?14:7),this.isTouch&&r.setScale(1.8))}this.drawSketch_()}},ol.interaction.Transform.prototype.getFeatureAtPixel_=function(t){var e=this;return this.getMap().forEachFeatureAtPixel(t,function(t,o){var i=!1;if(!o){if(t===e.bbox_)return!1;if(e.handles_.forEach(function(e){e===t&&(i=!0)}),i)return{feature:t,handle:t.get("handle"),constraint:t.get("constraint"),option:t.get("option")}}if(e._filter)return e._filter(t,o)?{feature:t}:null;if(e.layers_){for(var r=0;r<e.layers_.length;r++)if(e.layers_[r]===o)return{feature:t};return null}return e.features_?(e.features_.forEach(function(e){e===t&&(i=!0)}),i?{feature:t}:null):{feature:t}},{hitTolerance:this.get("hitTolerance")})||{}},ol.interaction.Transform.prototype.drawSketch_=function(t){if(this.overlayLayer_.getSource().clear(),this.selection_.length){var e=this.selection_[0].getGeometry().getExtent();e=ol.extent.buffer(e,0);for(var o=1;r=this.selection_[o];o++)ol.extent.extend(e,r.getGeometry().getExtent());if(!0===t){if(!this.ispt_){this.overlayLayer_.getSource().addFeature(new ol.Feature({geometry:new ol.geom.Point(this.center_),handle:"rotate0"}));var i=ol.geom.Polygon.fromExtent(e),r=this.bbox_=new ol.Feature(i);this.overlayLayer_.getSource().addFeature(r)}}else{if(this.ispt_){var s=this.getMap().getPixelFromCoordinate([e[0],e[1]]);e=ol.extent.boundingExtent([this.getMap().getCoordinateFromPixel([s[0]-10,s[1]-10]),this.getMap().getCoordinateFromPixel([s[0]+10,s[1]+10])])}i=ol.geom.Polygon.fromExtent(e),r=this.bbox_=new ol.Feature(i);var n=[],a=i.getCoordinates()[0];if(!this.ispt_){if(n.push(r),this.get("stretch")&&this.get("scale"))for(o=0;o<a.length-1;o++)r=new ol.Feature({geometry:new ol.geom.Point([(a[o][0]+a[o+1][0])/2,(a[o][1]+a[o+1][1])/2]),handle:"scale",constraint:o%2?"h":"v",option:o}),n.push(r);if(this.get("scale"))for(o=0;o<a.length-1;o++)r=new ol.Feature({geometry:new ol.geom.Point(a[o]),handle:"scale",option:o}),n.push(r);this.get("translate")&&!this.get("translateFeature")&&(r=new ol.Feature({geometry:new ol.geom.Point([(a[0][0]+a[2][0])/2,(a[0][1]+a[2][1])/2]),handle:"translate"}),n.push(r))}this.get("rotate")&&(r=new ol.Feature({geometry:new ol.geom.Point(a[3]),handle:"rotate"}),n.push(r)),this.overlayLayer_.getSource().addFeatures(n)}}},ol.interaction.Transform.prototype.select=function(t,e){t?t.getGeometry&&t.getGeometry()&&(e?this.selection_.push(t):this.selection_=[t],this.ispt_=1===this.selection_.length&&"Point"==this.selection_[0].getGeometry().getType(),this.drawSketch_(),this.dispatchEvent({type:"select",feature:t,features:this.selection_})):this.selection_=[]},ol.interaction.Transform.prototype.handleDownEvent_=function(t){var e=this.getFeatureAtPixel_(t.pixel),o=e.feature;if(this.selection_.length&&this.selection_.indexOf(o)>=0&&(this.ispt_&&this.get("translate")||this.get("translateFeature"))&&(e.handle="translate"),e.handle){this.mode_=e.handle,this.opt_=e.option,this.constraint_=e.constraint,this.coordinate_=t.coordinate,this.pixel_=t.pixel,this.geoms_=[];for(var i,r=ol.extent.createEmpty(),s=0;i=this.selection_[s];s++)this.geoms_.push(i.getGeometry().clone()),r=ol.extent.extend(r,i.getGeometry().getExtent());if(this.extent_=ol.geom.Polygon.fromExtent(r).getCoordinates()[0],"rotate"===this.mode_){this.center_=this.getCenter()||ol.extent.getCenter(r);var n=t.map.getTargetElement();n.style.cursor=this.Cursors.rotate0,this.previousCursor_=n.style.cursor}else this.center_=ol.extent.getCenter(r);return this.angle_=Math.atan2(this.center_[1]-t.coordinate[1],this.center_[0]-t.coordinate[0]),this.dispatchEvent({type:this.mode_+"start",feature:this.selection_[0],features:this.selection_,pixel:t.pixel,coordinate:t.coordinate}),!0}if(o){this.addFn_(t)||(this.selection_=[]);var a=this.selection_.indexOf(o);a<0?this.selection_.push(o):this.selection_.splice(a,1)}else this.selection_=[];return this.ispt_=1===this.selection_.length&&"Point"==this.selection_[0].getGeometry().getType(),this.drawSketch_(),this.dispatchEvent({type:"select",feature:o,features:this.selection_,pixel:t.pixel,coordinate:t.coordinate}),!1},ol.interaction.Transform.prototype.getFeatures=function(){return this.selection_},ol.interaction.Transform.prototype.getCenter=function(){return this.get("center")},ol.interaction.Transform.prototype.setCenter=function(t){return this.set("center",t)},ol.interaction.Transform.prototype.handleDragEvent_=function(t){switch(this.mode_){case"rotate":var e=Math.atan2(this.center_[1]-t.coordinate[1],this.center_[0]-t.coordinate[0]);if(!this.ispt)for(var o=0;n=this.selection_[o];o++)(h=this.geoms_[o].clone()).rotate(e-this.angle_,this.center_),n.setGeometry(h);this.drawSketch_(!0),this.dispatchEvent({type:"rotating",feature:this.selection_[0],features:this.selection_,angle:e-this.angle_,pixel:t.pixel,coordinate:t.coordinate});break;case"translate":var i=t.coordinate[0]-this.coordinate_[0],r=t.coordinate[1]-this.coordinate_[1];for(o=0;n=this.selection_[o];o++)n.getGeometry().translate(i,r);this.handles_.forEach(function(t){t.getGeometry().translate(i,r)}),this.coordinate_=t.coordinate,this.dispatchEvent({type:"translating",feature:this.selection_[0],features:this.selection_,delta:[i,r],pixel:t.pixel,coordinate:t.coordinate});break;case"scale":var s=this.center_;this.get("modifyCenter")(t)&&(s=this.extent_[(Number(this.opt_)+2)%4]);var n,a=(t.coordinate[0]-s[0])/(this.coordinate_[0]-s[0]),l=(t.coordinate[1]-s[1])/(this.coordinate_[1]-s[1]);for(this.constraint_?"h"==this.constraint_?a=1:l=1:this.get("keepAspectRatio")(t)&&(a=l=Math.min(a,l)),o=0;n=this.selection_[o];o++){var h;(h=this.geoms_[o].clone()).applyTransform(function(t,e,o){if(o<2)return e;for(var i=0;i<t.length;i+=o)1!=a&&(e[i]=s[0]+(t[i]-s[0])*a),1!=l&&(e[i+1]=s[1]+(t[i+1]-s[1])*l);return e}),n.setGeometry(h)}this.drawSketch_(),this.dispatchEvent({type:"scaling",feature:this.selection_[0],features:this.selection_,scale:[a,l],pixel:t.pixel,coordinate:t.coordinate})}},ol.interaction.Transform.prototype.handleMoveEvent_=function(t){if(!this.mode_){t.map;var e=this.getFeatureAtPixel_(t.pixel),o=t.map.getTargetElement();if(e.feature){var i=e.handle?this.Cursors[(e.handle||"default")+(e.constraint||"")+(e.option||"")]:this.Cursors.select;void 0===this.previousCursor_&&(this.previousCursor_=o.style.cursor),o.style.cursor=i}else void 0!==this.previousCursor_&&(o.style.cursor=this.previousCursor_),this.previousCursor_=void 0}},ol.interaction.Transform.prototype.handleUpEvent_=function(t){return"rotate"===this.mode_&&(t.map.getTargetElement().style.cursor=this.Cursors.default,this.previousCursor_=void 0),this.dispatchEvent({type:this.mode_+"end",feature:this.selection_[0],features:this.selection_,oldgeom:this.geoms_[0],oldgeoms:this.geoms_}),this.drawSketch_(),this.mode_=null,!1},ol.source.DBPedia=function(t){var e=t||{};e.loader=this._loaderFn,this._url=e.url||"http://fr.dbpedia.org/sparql",this._maxResolution=e.maxResolution||100,this._lang=e.lang||"fr",this._limit=e.limit||1e3,e.attributions||(e.attributions=["&copy; <a href='http://dbpedia.org/'>DBpedia</a> CC-by-SA"]),e.strategy||(e.strategy=ol.loadingstrategy.bbox),ol.source.Vector.call(this,e)},ol.inherits(ol.source.DBPedia,ol.source.Vector),ol.source.DBPedia.prototype.readFeature=function(t,e,o){for(var i in e)t.set(i,e[i].value);return!o||o.get("subject")!=e.subject.value||(o.set("type",o.get("type")+"\n"+e.type.value),!1)},ol.source.DBPedia.prototype.querySubject=function(){return"?subject rdfs:label ?label. OPTIONAL {?subject dbpedia-owl:thumbnail ?thumbnail}.OPTIONAL {?subject dbpedia-owl:abstract ?abstract} . OPTIONAL {?subject rdf:type ?type}"},ol.source.DBPedia.prototype.queryFilter=function(){return"lang(?label) = '"+this._lang+"' && lang(?abstract) = '"+this._lang+"'"},ol.source.DBPedia.prototype._loaderFn=function(t,e,o){if(!(e>this._maxResolution)){var i=this,r=ol.proj.transformExtent(t,o,"EPSG:4326"),s="PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> SELECT DISTINCT * WHERE { ?subject geo:lat ?lat . ?subject geo:long ?long . "+this.querySubject()+" . FILTER("+this.queryFilter()+") . FILTER(xsd:float(?lat) <= "+r[3]+" && "+r[1]+" <= xsd:float(?lat) && xsd:float(?long) <= "+r[2]+" && "+r[0]+" <= xsd:float(?long) ) . } LIMIT "+this._limit;$.ajax({url:this._url,dataType:"jsonp",data:{query:s,format:"json"},success:function(t){var e,r,s,n=t.results.bindings,a=[],l=null;for(var h in n)e=n[h],r=[Number(n[h].long.value),Number(n[h].lat.value)],s=new ol.Feature(new ol.geom.Point(ol.proj.transform(r,"EPSG:4326",o))),i.readFeature(s,e,l)&&(a.push(s),l=s);i.addFeatures(a)}})}},function(){var t={};ol.style.clearDBPediaStyleCache=function(){t={}},ol.style.dbPediaStyleFunction=function(e){var o;switch(e||(e={}),typeof e.glyph){case"function":o=e.glyph;break;case"string":o=function(){return e.glyph};break;default:o=function(t){var e=t.get("type");if(e){if(e.match("/Museum"))return"fa-camera";if(e.match("/Monument"))return"fa-building";if(e.match("/Sculpture"))return"fa-android";if(e.match("/Religious"))return"fa-institution";if(e.match("/Castle"))return"fa-key";if(e.match("Water"))return"fa-tint";if(e.match("Island"))return"fa-leaf";if(e.match("/Event"))return"fa-heart";if(e.match("/Artwork"))return"fa-asterisk";if(e.match("/Stadium"))return"fa-futbol-o";if(e.match("/Place"))return"fa-street-view"}return"fa-star"}}var i=e.radius||8,r=e.fill||new ol.style.Fill({color:"navy"}),s=e.stroke||new ol.style.Stroke({color:"#fff",width:2}),n=e.prefix?e.prefix+"_":"";return function(e,a){var l=o(e),h=n+l,c=t[h];return c||(t[h]=c=new ol.style.Style({image:new ol.style.FontSymbol({glyph:l,radius:i,fill:r,stroke:s})})),[c]}}}(),ol.source.GeoImage=function(t){var e={attributions:t.attributions,logo:t.logo,projection:t.projection};this.center=t.imageCenter,this.scale=t.imageScale,this.rotate=t.imageRotate?t.imageRotate:0,this.crop=t.imageCrop,this.mask=t.imageMask,this._image=t.image?t.image:new Image,this._image.crossOrigin=t.crossOrigin;var o=this;this._image.onload=function(){o.setCrop(o.crop),o.changed()},t.image||(this._image.src=t.url),e.canvasFunction=function(t,e,o,i,r){var s=document.createElement("canvas");s.width=i[0],s.height=i[1];var n=s.getContext("2d");if(!this._imageSize)return s;function a(e){return[(e[0]-t[0])/(t[2]-t[0])*i[0],(e[1]-t[3])/(t[1]-t[3])*i[1]]}if(this.mask){n.beginPath();var l=a(this.mask[0]);n.moveTo(l[0],l[1]);for(var h=1;h<this.mask.length;h++)l=a(this.mask[h]),n.lineTo(l[0],l[1]);n.clip()}var c=a(this.center),p=(this._image.naturalWidth/2-this.crop[0])*this.scale[0]/e*o,u=(this._image.naturalHeight/2-this.crop[1])*this.scale[1]/e*o,g=this._imageSize[0]*this.scale[0]/e*o,d=this._imageSize[1]*this.scale[1]/e*o;return n.translate(c[0],c[1]),this.rotate&&n.rotate(this.rotate),n.drawImage(this._image,this.crop[0],this.crop[1],this._imageSize[0],this._imageSize[1],-p,-u,g,d),s},ol.source.ImageCanvas.call(this,e),this.setCrop(this.crop)},ol.inherits(ol.source.GeoImage,ol.source.ImageCanvas),ol.source.GeoImage.prototype.getCenter=function(){return this.center},ol.source.GeoImage.prototype.setCenter=function(t){this.center=t,this.changed()},ol.source.GeoImage.prototype.getScale=function(){return this.scale},ol.source.GeoImage.prototype.setScale=function(t){switch(typeof t){case"number":t=[t,t];break;case"object":if(2!=t.length)return;break;default:return}this.scale=t,this.changed()},ol.source.GeoImage.prototype.getRotation=function(){return this.rotate},ol.source.GeoImage.prototype.setRotation=function(t){this.rotate=t,this.changed()},ol.source.GeoImage.prototype.getGeoImage=function(){return this._image},ol.source.GeoImage.prototype.getCrop=function(){return this.crop},ol.source.GeoImage.prototype.setMask=function(t){this.mask=t,this.changed()},ol.source.GeoImage.prototype.getMask=function(){return this.mask},ol.source.GeoImage.prototype.setCrop=function(t){if(this._image.naturalWidth){if(t){switch(typeof t){case"number":t=[t,t,this._image.naturalWidth-t,this._image.naturalHeight-t];break;case"object":if(4!=t.length)return;break;default:return}t=ol.extent.boundingExtent([[t[0],t[1]],[t[2],t[3]]]),this.crop=[Math.max(0,t[0]),Math.max(0,t[1]),Math.min(this._image.naturalWidth,t[2]),Math.min(this._image.naturalHeight,t[3])]}else this.crop=[0,0,this._image.naturalWidth,this._image.naturalHeight];this.crop[2]<=this.crop[0]&&(this.crop[2]=this.crop[0]+1),this.crop[3]<=this.crop[1]&&(this.crop[3]=this.crop[1]+1),this._imageSize=[this.crop[2]-this.crop[0],this.crop[3]-this.crop[1]],this.changed()}else this.crop=t},ol.source.HexBin=function(t){t=t||{},this._bind={modify:this._onModifyFeature.bind(this)},ol.source.Vector.call(this,t),this._hexgrid=new ol.HexGrid(t),this._bin={},this._origin=t.source,this._geomFn=t.geometryFunction||ol.coordinate.getFeatureCenter||function(t){return t.getGeometry().getFirstCoordinate()},this.reset(),this._origin.on("addfeature",this._onAddFeature.bind(this)),this._origin.on("removefeature",this._onRemoveFeature.bind(this))},ol.inherits(ol.source.HexBin,ol.source.Vector),ol.source.HexBin.prototype._onAddFeature=function(t){var e=t.feature||t.target,o=this._hexgrid.coord2hex(this._geomFn(e)),i=o.toString();if(this._bin[i])this._bin[i].get("features").push(e);else{var r=new ol.Feature(new ol.geom.Polygon([this._hexgrid.getHexagon(o)]));r.set("features",[e]),r.set("center",new ol.geom.Point(ol.extent.getCenter(r.getGeometry().getExtent()))),this._bin[i]=r,this.addFeature(r)}e.on("change",this._bind.modify)},ol.source.HexBin.prototype.getBin=function(t){var e=this._hexgrid.coord2hex(this._geomFn(t)).toString();if(this._bin[e]&&(o=this._bin[e].get("features").indexOf(t))>-1)return{id:e,index:o};for(e in this._bin){var o;if((o=this._bin[e].get("features").indexOf(t))>-1)return{id:e,index:o,moved:!0}}return!1},ol.source.HexBin.prototype._onRemoveFeature=function(t,e){var o=t.feature||t.target,i=e||this.getBin(o);if(i){var r=this._bin[i.id].get("features");r.splice(i.index,1),r.length||(this.removeFeature(this._bin[i.id]),delete this._bin[i.id])}else console.log("[ERROR:HexBin] remove feature feature doesn't exists anymore.");o.un("change",this._bind.modify)},ol.source.HexBin.prototype._onModifyFeature=function(t){var e=this.getBin(t.target);e&&e.moved&&(this._onRemoveFeature(t,e),this._onAddFeature(t)),this.changed()},ol.source.HexBin.prototype.reset=function(){this._bin={},this.clear();for(var t,e=this._origin.getFeatures(),o=0;t=e[o];o++)this._onAddFeature({feature:t})},ol.source.HexBin.prototype.getSource=function(){return this._origin},ol.source.Mapillary=function(t){var e=t||{};e.loader=this._loaderFn,this._maxResolution=e.maxResolution||100,this._limit=e.limit||100,e.attributions||(e.attributions=["&copy; <a href='https://www.mapillary.com/'>Mapillary</a>"]),e.strategy||(e.strategy=ol.loadingstrategy.bbox),ol.source.Vector.call(this,e)},ol.inherits(ol.source.Mapillary,ol.source.Vector),ol.source.Mapillary.prototype.readFeature=function(t,e){return!0},ol.source.Mapillary.prototype._loaderFn=function(t,e,o){if(!(e>this._maxResolution)){var i=ol.proj.transformExtent(t,o,"EPSG:4326"),r=Date.now()-15552e6,s="https://a.mapillary.com/v2/search/im?client_id="+this.get("clientId")+"&max_lat="+i[3]+"&max_lon="+i[2]+"&min_lat="+i[1]+"&min_lon="+i[0]+"&limit="+(this._limit-1)+"&start_time="+r;$.ajax({url:s,dataType:"jsonp",success:function(t){console.log(t)}})}},ol.source.Overpass=function(t){(t=t||{}).loader=this._loaderFn,this._url=t.url||"https://overpass-api.de/api/interpreter",this._maxResolution=t.maxResolution||100,t.attributions||(t.attributions=ol.source.OSM.ATTRIBUTION),t.strategy||(t.strategy=ol.loadingstrategy.bbox),ol.source.Vector.call(this,t),this._types={node:!1!==t.node,way:!1!==t.way,rel:!0===t.rel},this._filter=t.filter},ol.inherits(ol.source.Overpass,ol.source.Vector),ol.source.Overpass.prototype._loaderFn=function(t,e,o){if(!(e>this._maxResolution)){var i=this,r=ol.proj.transformExtent(t,o,"EPSG:4326"),s="[bbox:"+(r=r[1]+","+r[0]+","+r[3]+","+r[2])+"][out:xml][timeout:25];";for(var n in s+="(",this._types)if(this._types[n]){s+=n;for(var a,l=0;a=this._filter[l];l++)s+="["+a+"]";s+=";"}s+=");out;>;out skel qt;";var h=new XMLHttpRequest;h.open("POST",this._url,!0),h.onload=function(){for(var t,e=(new ol.format.OSMXML).readFeatures(this.responseText,{featureProjection:o}),r=[],s=0;t=e[s];s++)i.hasFeature(t)||r.push(t);vectorSource.addFeatures(r)},h.onerror=function(){console.log(arguments)},h.send("data="+s)}},ol.source.Overpass.prototype.hasFeature=function(t){for(var e,o=t.getGeometry().getFirstCoordinate(),i=t.getId(),r=this.getFeaturesInExtent([o[0]-.1,o[1]-.1,o[0]+.1,o[1]+.1]),s=0;e=r[s];s++)if(i===e.getId())return!0;return!1},ol.source.WikiCommons=function(t){var e=t||{};e.loader=this._loaderFn,this._maxResolution=e.maxResolution||100,this._lang=e.lang||"fr",this._limit=e.limit||100,e.attributions||(e.attributions=["&copy; <a href='https://commons.wikimedia.org/'>Wikimedia Commons</a>"]),e.strategy||(e.strategy=ol.loadingstrategy.bbox),ol.source.Vector.call(this,e)},ol.inherits(ol.source.WikiCommons,ol.source.Vector),ol.source.WikiCommons.prototype.readFeature=function(t,e){return t.set("descriptionurl",e.descriptionurl),t.set("url",e.url),t.set("title",e.title.replace(/^file:|.jpg$/gi,"")),t.set("thumbnail",e.url.replace(/^(.+wikipedia\/commons)\/([a-zA-Z0-9]\/[a-zA-Z0-9]{2})\/(.+)$/,"$1/thumb/$2/$3/200px-$3")),t.set("user",e.user),e.extmetadata&&e.extmetadata.LicenseShortName&&t.set("copy",e.extmetadata.LicenseShortName.value),!0},ol.source.WikiCommons.prototype._loaderFn=function(t,e,o){if(!(e>this._maxResolution)){var i=this,r=ol.proj.transformExtent(t,o,"EPSG:4326"),s="https://commons.wikimedia.org/w/api.php?action=query&format=json&origin=*&prop=coordinates|imageinfo&generator=geosearch&iiprop=timestamp|user|url|extmetadata|metadata|size&iiextmetadatafilter=LicenseShortName&ggsbbox="+r[3]+"|"+r[0]+"|"+r[1]+"|"+r[2]+"&ggslimit="+this._limit+"&iilimit="+(this._limit-1)+"&ggsnamespace=6";$.ajax({url:s,dataType:"jsonp",success:function(t){var e,r,s,n=[];if(t.query&&t.query.pages){for(var a in t.query.pages){if((e=t.query.pages[a]).coordinates&&e.coordinates.length)r=[e.coordinates[0].lon,e.coordinates[0].lat];else{var l=e.imageinfo[0].metadata;if(!l)continue;r=[];for(var h=0,c=0;c<l.length;c++)"GPSLongitude"==l[c].name&&(r[0]=l[c].value,h++),"GPSLatitude"==l[c].name&&(r[1]=l[c].value,h++);if(2!=h)continue}s=new ol.Feature(new ol.geom.Point(ol.proj.transform(r,"EPSG:4326",o))),e.imageinfo[0].title=e.title,i.readFeature(s,e.imageinfo[0])&&n.push(s)}i.addFeatures(n)}}})}},ol.layer.AnimatedCluster=function(t){var e=t||{};ol.layer.Vector.call(this,e),this.oldcluster=new ol.source.Vector,this.clusters=[],this.animation={start:!1},this.set("animationDuration","number"==typeof e.animationDuration?e.animationDuration:700),this.set("animationMethod",e.animationMethod||ol.easing.easeOut),this.getSource().on("change",this.saveCluster.bind(this)),this.on("precompose",this.animate.bind(this)),this.on("postcompose",this.postanimate.bind(this))},ol.inherits(ol.layer.AnimatedCluster,ol.layer.Vector),ol.layer.AnimatedCluster.prototype.saveCluster=function(){if(this.oldcluster){if(this.oldcluster.clear(),!this.get("animationDuration"))return;var t=this.getSource().getFeatures();t.length&&t[0].get("features")&&(this.oldcluster.addFeatures(this.clusters),this.clusters=t.slice(0),this.sourceChanged=!0)}},ol.layer.AnimatedCluster.prototype.getClusterForFeature=function(t,e){for(var o=0;e[o];o++){var i=e[o].get("features");if(i&&i.length)for(var r,s=0;r=i[s];s++)if(t===r)return e[o]}return!1},ol.layer.AnimatedCluster.prototype.stopAnimation=function(){this.animation.start=!1,this.animation.cA=[],this.animation.cB=[]},ol.layer.AnimatedCluster.prototype.animate=function(t){var e=this.get("animationDuration");if(e){var o=t.frameState.viewState.resolution,i=this.animation,r=t.frameState.time;if(i.resolution!=o&&this.sourceChanged){var s=t.frameState.extent;i.resolution<o?(s=ol.extent.buffer(s,100*o),i.cA=this.oldcluster.getFeaturesInExtent(s),i.cB=this.getSource().getFeaturesInExtent(s),i.revers=!1):(s=ol.extent.buffer(s,100*o),i.cA=this.getSource().getFeaturesInExtent(s),i.cB=this.oldcluster.getFeaturesInExtent(s),i.revers=!0),i.clusters=[];for(var n,a=0;n=i.cA[a];a++){var l=n.get("features");l&&l.length&&(g=this.getClusterForFeature(l[0],i.cB))&&i.clusters.push({f:n,pt:g.getGeometry().getCoordinates()})}if(i.resolution=o,this.sourceChanged=!1,!i.clusters.length||i.clusters.length>1e3)return void this.stopAnimation();r=i.start=(new Date).getTime()}if(i.start){var h=t.vectorContext,c=(r-i.start)/e;c>1&&(this.stopAnimation(),c=1),c=this.get("animationMethod")(c);var p=this.getStyle(),u="function"==typeof p?p:p.length?function(){return p}:function(){return[p]};t.context.save(),t.context.globalAlpha=this.getOpacity();var g,d=t.frameState.pixelRatio;for(a=0;g=i.clusters[a];a++){var f=g.f.getGeometry().getCoordinates(),y=f[0]-g.pt[0],m=f[1]-g.pt[1];i.revers?(f[0]=g.pt[0]+c*y,f[1]=g.pt[1]+c*m):(f[0]=f[0]-c*y,f[1]=f[1]-c*m);for(var v,_=u(g.f,o,!0),w=new ol.geom.Point(f),S=0;v=_[S];S++){var x,b=!ol.Map.prototype.getFeaturesAtPixel&&v.getImage();b&&(x=b.getScale(),b.setScale(x*d)),h.setStyle?1!==g.f.get("features").length||y||m?(h.setStyle(v),h.drawGeometry(w)):h.drawFeature(g.f.get("features")[0],v):(h.setImageStyle(b),h.setTextStyle(v.getText()),h.drawPointGeometry(w)),b&&b.setScale(x)}}t.context.restore(),t.frameState.animate=!0,t.context.save(),t.context.beginPath(),t.context.rect(0,0,0,0),t.context.clip(),this.clip_=!0}}},ol.layer.AnimatedCluster.prototype.postanimate=function(t){this.clip_&&(t.context.restore(),this.clip_=!1)},ol.source.Source.prototype.getPreview=function(t,e){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAk6QAAJOkBUCTn+AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANeSURBVHic7ZpPiE1RHMc/780MBhkik79JSUlIUbOxI+wkI2yRhYSUlJLNpJF/xcpiJBmZGBZsNM1CkmhKITGkGbH0/BuPmXnP4rxbb/TOn3fvOffeec6nfqvb/b7f93fveeec37ng8Xg8Ho/nf6Uu4d+fDswFssCvhHOJhaXAMeApMAQUyyIPPAdOAiuTStAVy4EHjDWsix5gdRLJ2mY34ulWYz6IEeA4kIk9awtkgTOEM/5vdAKT4k0/Ou3YMR/ELcbRm9AKFLBbgCJwNE4TYZkJfMG++SIwDCyLz0o4bI17WdyJz0r1TAZ+oDcxCBwAFgIzEIuhvcBbg3sLwOK4DFXLFvQGniCGSSUagS4DjUPOHESkA3XiOWCORqMR6Nfo9DjI3QqPUSd+ylBnv0Zn0GrWFvmIOvGNhjqrNDp/EAutyFgRKUM2tgO+Gur81FxvAKYZaimxXYBvmuuLDHWWaK4X0RfJCNsF6NdcbzXU2a65PohYFKWOc+jn8PUajbWIXaBKp9NB7lZYh34OzwFbFfd/NtDYYSth27urLGIm0M31AL3APWAAmIooymaDnPIl/Vz4NN1yHrd7gcvxWQnHAuA3bsyPop8hUsE13BSgK04TUViBeFo2zedJ8S6wElexW4D2eNOPTjNi6WvD/DtEr8E6tk6GGoAmxFY2iFHE9NZiQf8gogiB9gTEH23izAZuE77vHyU+ANucO1QwD3hD/MbLowAcdm20EmkwXx4n3NodS9rMB2HabYpEWs0HcRqHp0fNwAvJD+eBTZr7p6BvmQVxUaEzEbiruNfJekH15L8jtrEm7JJolEcOmKXRqQOuKDQuY7HZY8s8iNfzkSLxIuI43FTrkkLnOlBfRW4VsWk+oAX5weknxFAxJQNckGgVgZuIRVoomoGXEmGTMa+iQ6K7M4SW7k24QYgiuDQPYinbhugiF4H3RGtzZYCzyIvQXfpNI1ybLyeLpf5+iTbkRbiP2EcocTHm4+YI8iI8RFHwWjAfsA95Q+YZFU6wasl8wB7kReijtNbIILa0vcg/PRlGfPQwHmlCviDqAzaA+OREtzqr1ejOIDorxlNEjTGUBV4nnUWCvAJxGDlA8q9j3DEArAn2zvXAfOwfl6eVAmJrPpJ0Ih6Px+PxeJLjLwPul3vj5d0eAAAAAElFTkSuQmCC"},ol.source.Tile.prototype.getPreview=function(t,e){t||(t=[21020,6355964]),e||(e=150);var o=this.getTileGrid().getTileCoordForCoordAndResolution(t,e);return this.getTileUrlFunction().call(this,o,this.getProjection())},ol.source.TileWMS.prototype.getPreview=function(t,e){t||(t=[21020,6355964]),e||(e=150);var o=this.getGetFeatureInfoUrl(t,e,this.getProjection()||"EPSG:3857",{});return o.replace(/getfeatureinfo/i,"GetMap")},ol.layer.Base.prototype.getPreview=function(t,e){if(this.get("preview"))return[this.get("preview")];if(e||(e=150),e<this.getMinResolution()||e>this.getMaxResolution()){var o=this.getMinResolution(),i=this.getMaxResolution();for(i>1e5&&(i=156543),o<.15&&(o=.15),e=i;i>o;)i/=2,e=o*=2}var r=this.getExtent();return t||(t=[21020,6355964]),r&&!ol.extent.containsCoordinate(r,t)&&(t=[(r[0]+r[2])/2,(r[1]+r[3])/2]),this.getSource?[this.getSource().getPreview(t,e)]:[]},ol.layer.Group.prototype.getPreview=function(t,e){if(this.get("preview"))return[this.get("preview")];var o=[];if(this.getLayers)for(var i=this.getLayers().getArray(),r=0;r<i.length;r++)o=o.concat(i[r].getPreview(t,e));return o},ol.layer.Vector.prototype.setRender3D=function(t){t.setLayer(this)},ol.render3D=function(t){t=t||{},this.maxResolution_=t.maxResolution||100,this.defaultHeight_=t.defaultHeight||0,this.height_=this.getHfn(t.height)},ol.render3D.prototype.onPostcompose_=function(t){var e=t.frameState.viewState.resolution;if(!(e>this.maxResolution_)){if(this.res_=400*e,this.animate_){var o=t.frameState.time-this.animate_;o<this.animateDuration_?(this.elapsedRatio_=this.easing_(o/this.animateDuration_),t.frameState.animate=!0):(this.animate_=!1,this.height_=this.toHeight_)}var i=t.frameState.pixelRatio,r=t.context,s=this.matrix_=t.frameState.coordinateToPixelTransform;s||((s=t.frameState.coordinateToPixelMatrix)[2]=s[4],s[3]=s[5],s[4]=s[12],s[5]=s[13]),this.center_=[r.canvas.width/2/i,r.canvas.height/i];var n=this.layer_.getSource().getFeaturesInExtent(t.frameState.extent);r.save(),r.scale(i,i),r.lineWidth=1,r.strokeStyle="red",r.fillStyle="rgba(0,0,255,0.5)";for(var a=[],l=0;l<n.length;l++)a.push(this.getFeature3D_(n[l],this.getFeatureHeight(n[l])));this.drawFeature3D_(r,a),r.restore()}},ol.render3D.prototype.setLayer=function(t){this._listener&&ol.Observable.unByKey(this._listener),this.layer_=t,this._listener=t.on("postcompose",this.onPostcompose_.bind(this))},ol.render3D.prototype.getHfn=function(t){switch(typeof t){case"function":return t;case"string":var e=this.defaultHeight_;return function(o){return Number(o.get(t))||e};case"number":return function(e){return t};default:return function(t){return 10}}},ol.render3D.prototype.animate=function(t){t=t||{},this.toHeight_=this.getHfn(t.height),this.animate_=(new Date).getTime(),this.animateDuration_=t.duration||1e3,this.easing_=t.easing||ol.easing.easeOut,this.layer_.changed()},ol.render3D.prototype.animating=function(){return this.animate_&&(new Date).getTime()-this.animate_>this.animateDuration_&&(this.animate_=!1),!!this.animate_},ol.render3D.prototype.getFeatureHeight=function(t){if(this.animate_){var e=this.height_(t),o=this.toHeight_(t);return e*(1-this.elapsedRatio_)+this.elapsedRatio_*o}return this.height_(t)},ol.render3D.prototype.hvector_=function(t,e){return p0=[t[0]*this.matrix_[0]+t[1]*this.matrix_[1]+this.matrix_[4],t[0]*this.matrix_[2]+t[1]*this.matrix_[3]+this.matrix_[5]],p1=[p0[0]+e/this.res_*(p0[0]-this.center_[0]),p0[1]+e/this.res_*(p0[1]-this.center_[1])],{p0:p0,p1:p1}},ol.render3D.prototype.getFeature3D_=function(t,e){var o=t.getGeometry().getCoordinates();switch(t.getGeometry().getType()){case"Polygon":o=[o];case"MultiPolygon":for(var i=[],r=0;r<o.length;r++)for(var s=0;s<o[r].length;s++){for(var n=[],a=0;a<o[r][s].length;a++)n.push(this.hvector_(o[r][s][a],e));i.push(n)}return{type:"MultiPolygon",feature:t,geom:i};case"Point":return{type:"Point",feature:t,geom:this.hvector_(o,e)};default:return{}}},ol.render3D.prototype.drawFeature3D_=function(t,e){for(var o=0;o<e.length;o++)switch(e[o].type){case"MultiPolygon":for(var i=0;i<e[o].geom.length;i++)for(var r=e[o].geom[i],s=0;s<r.length;s++)t.beginPath(),t.moveTo(r[s].p0[0],r[s].p0[1]),t.lineTo(r[s].p1[0],r[s].p1[1]),t.stroke();break;case"Point":var n=e[o].geom;t.beginPath(),t.moveTo(n.p0[0],n.p0[1]),t.lineTo(n.p1[0],n.p1[1]),t.stroke()}for(o=0;o<e.length;o++)switch(e[o].type){case"MultiPolygon":for(t.beginPath(),i=0;i<e[o].geom.length;i++){if(r=e[o].geom[i],0==i)for(t.moveTo(r[0].p1[0],r[0].p1[1]),s=1;s<r.length;s++)t.lineTo(r[s].p1[0],r[s].p1[1]);else for(t.moveTo(r[0].p1[0],r[0].p1[1]),s=r.length-2;s>=0;s--)t.lineTo(r[s].p1[0],r[s].p1[1]);t.closePath()}t.fill("evenodd"),t.stroke();break;case"Point":var a=(r=e[o]).feature.get("label"),l=r.geom.p1,h=t.fillStyle;t.fillStyle=t.strokeStyle,t.textAlign="center",t.textBaseline="bottom",t.fillText(a,l[0],l[1]);var c=t.measureText(a),p=Number(t.font.match(/\d+(\.\d+)?/g).join([]));t.fillStyle="rgba(255,255,255,0.5)",t.fillRect(l[0]-c.width/2-5,l[1]-p-5,c.width+10,p+10),t.strokeRect(l[0]-c.width/2-5,l[1]-p-5,c.width+10,p+10),t.fillStyle=h}},ol.Overlay.Magnify=function(t){var e=$("<div>").addClass("ol-magnify");this._elt=e.get(0),ol.Overlay.call(this,{positioning:t.positioning||"center-center",element:this._elt,stopEvent:!1}),this.mgmap_=new ol.Map({controls:new ol.Collection,interactions:new ol.Collection,target:t.target||this._elt,view:new ol.View({projection:t.projection}),layers:t.layers}),this.mgview_=this.mgmap_.getView(),this.external_=!!t.target,this.set("zoomOffset",t.zoomOffset||1),this.set("active",!0),this.on("propertychange",this.setView_.bind(this))},ol.inherits(ol.Overlay.Magnify,ol.Overlay),ol.Overlay.Magnify.prototype.setMap=function(t){this.getMap()&&$(this.getMap().getViewport()).off("mousemove",this.onMouseMove_),this._listener&&ol.Observable.unByKey(this._listener),this._listener=null,ol.Overlay.prototype.setMap.call(this,t),$(t.getViewport()).on("mousemove",{self:this},this.onMouseMove_),this._listener=t.getView().on("propertychange",this.setView_.bind(this)),this.setView_()},ol.Overlay.Magnify.prototype.getMagMap=function(){return this.mgmap_},ol.Overlay.Magnify.prototype.getActive=function(){return this.get("active")},ol.Overlay.Magnify.prototype.setActive=function(t){return this.set("active",t)},ol.Overlay.Magnify.prototype.onMouseMove_=function(t){var e=t.data.self;if(e.get("active")){var o=e.getMap().getEventCoordinate(t);e.external_||e.setPosition(o),e.mgview_.setCenter(o),"none"==$("canvas",e._elt).css("display")&&e.mgmap_.updateSize()}else e.setPosition()},ol.Overlay.Magnify.prototype.setView_=function(t){if(this.get("active")){if(!t)return this.setView_({key:"rotation"}),void this.setView_({key:"resolution"});switch(t.key){case"rotation":this.mgview_.setRotation(this.getMap().getView().getRotation());break;case"zoomOffset":case"resolution":var e=Math.max(0,this.getMap().getView().getZoom()+Number(this.get("zoomOffset")));this.mgview_.setZoom(e)}}else this.setPosition()},ol.Overlay.Popup=function(t){var e=this;"number"==typeof t.offsetBox?this.offsetBox=[t.offsetBox,t.offsetBox,t.offsetBox,t.offsetBox]:this.offsetBox=t.offsetBox;var o=$("<div>").addClass("ol-overlaycontainer-stopevent");t.element=o.get(0),$("<div>").addClass("anchor").appendTo(o),this.content=$("<div>").addClass("content").appendTo(o).get(0),this.closeBox=t.closeBox,this.onclose=t.onclose,this.onshow=t.onshow,$("<button>").addClass("closeBox").addClass(t.closeBox?"hasclosebox":"").attr("type","button").prependTo(o).click(function(){e.hide()}),t.stopEvent=!0,o.on("mousedown touchstart",function(t){t.stopPropagation()}),ol.Overlay.call(this,t),this._elt=$(this.element),this.setPositioning(t.positioning),this.setPopupClass(t.popupClass)},ol.inherits(ol.Overlay.Popup,ol.Overlay),ol.Overlay.Popup.prototype.getClassPositioning=function(){var t="",e=this.getPositioning();return/bottom/.test(e)&&(t+="ol-popup-bottom "),/top/.test(e)&&(t+="ol-popup-top "),/left/.test(e)&&(t+="ol-popup-left "),/right/.test(e)&&(t+="ol-popup-right "),/^center/.test(e)&&(t+="ol-popup-middle "),/center$/.test(e)&&(t+="ol-popup-center "),t},ol.Overlay.Popup.prototype.setClosebox=function(t){this.closeBox=t,t?this._elt.addClass("hasclosebox"):this._elt.removeClass("hasclosebox")},ol.Overlay.Popup.prototype.setPopupClass=function(t){this._elt.removeClass().addClass("ol-popup "+(t||"default")+" "+this.getClassPositioning()+(this.closeBox?" hasclosebox":""))},ol.Overlay.Popup.prototype.addPopupClass=function(t){this._elt.addClass(t)},ol.Overlay.Popup.prototype.removePopupClass=function(t){this._elt.removeClass(t)},ol.Overlay.Popup.prototype.setPositioning=function(t){void 0!==t&&(/auto/.test(t)?(this.autoPositioning=t.split("-"),1==this.autoPositioning.length&&(this.autoPositioning[1]="auto")):this.autoPositioning=!1,"center"==(t=t.replace(/auto/g,"center"))&&(t="bottom-center"),this.setPositioning_(t))},ol.Overlay.Popup.prototype.setPositioning_=function(t){this._elt&&(ol.Overlay.prototype.setPositioning.call(this,t),this._elt.removeClass("ol-popup-top ol-popup-bottom ol-popup-left ol-popup-right ol-popup-center ol-popup-middle"),this._elt.addClass(this.getClassPositioning()))},ol.Overlay.Popup.prototype.getVisible=function(){return this._elt.hasClass("visible")},ol.Overlay.Popup.prototype.show=function(t,e){e||"string"!=typeof t||(e=t,t=null);var o=this,i=this.getMap();if(i&&(e&&e!==this.prevHTML&&(this.prevHTML=e,$(this.content).html("").append(e),$("*",this.content).on("load",function(){i.renderSync()})),t)){if(this.autoPositioning){var r=i.getPixelFromCoordinate(t),s=i.getSize(),n=[];"auto"==this.autoPositioning[0]?n[0]=r[1]<s[1]/3?"top":"bottom":n[0]=this.autoPositioning[0],n[1]=r[0]<2*s[0]/3?"left":"right",this.setPositioning_(n[0]+"-"+n[1]),this.offsetBox&&this.setOffset([this.offsetBox["left"==n[1]?2:0],this.offsetBox["top"==n[0]?3:1]])}else this.offsetBox&&this.setOffset(this.offsetBox);this.setPosition(t),this._elt.parent().show(),"function"==typeof this.onshow&&this.onshow(),this._tout=setTimeout(function(){o._elt.addClass("visible")},0)}},ol.Overlay.Popup.prototype.hide=function(){null!=this.getPosition()&&("function"==typeof this.onclose&&this.onclose(),this.setPosition(void 0),this._tout&&clearTimeout(this._tout),this._elt.removeClass("visible"))};let clockwise=function(t,e,o){return(t[0]-o[0])*(e[1]-o[1])-(t[1]-o[1])*(e[0]-o[0])<=0};ol.coordinate.convexHull=function(t){t.sort(function(t,e){return t[0]==e[0]?t[1]-e[1]:t[0]-e[0]});for(var e=[],o=0;o<t.length;o++){for(;e.length>=2&&clockwise(e[e.length-2],e[e.length-1],t[o]);)e.pop();e.push(t[o])}var i=[];for(o=t.length-1;o>=0;o--){for(;i.length>=2&&clockwise(i[i.length-2],i[i.length-1],t[o]);)i.pop();i.push(t[o])}return i.pop(),e.pop(),e.concat(i)};var getCoordinates=function(t){var e=[];switch(t.getType()){case"Point":e.push(t.getCoordinates());break;case"LineString":case"LinearRing":case"MultiPoint":e=t.getCoordinates();break;case"MultiLineString":for(var o=t.getLineStrings(),i=0;i<o.length;i++)e.concat(getCoordinates(o[i]));break;case"Polygon":e=getCoordinates(t.getLinearRing(0));break;case"MultiPolygon":for(o=t.getPolygons(),i=0;i<o.length;i++)e.concat(getCoordinates(o[i]));break;case"GeometryCollection":for(o=t.getGeometries(),i=0;i<o.length;i++)e.concat(getCoordinates(o[i]))}return e};ol.geom.Geometry.prototype.convexHull=function(){return ol.coordinate.convexHull(getCoordinates(this))},ol.coordinate.dist2d=function(t,e){var o=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(o*o+i*i)},ol.coordinate.equal=function(t,e){return t[0]==e[0]&&t[1]==e[1]},ol.coordinate.getFeatureCenter=function(t){return ol.coordinate.getGeomCenter(t.getGeometry())},ol.coordinate.getGeomCenter=function(t){switch(t.getType()){case"Point":return t.getCoordinates();case"MultiPolygon":t=t.getPolygon(0);case"Polygon":return t.getInteriorPoint().getCoordinates();default:return t.getClosestPoint(ol.extent.getCenter(t.getExtent()))}},ol.coordinate.offsetCoords=function(t,e){var o,i,r,s,n,a,l,h,c,p,u,g,d,f=[],y=t.length-1,m=y,v=ol.coordinate.equal(t[0],t[y]);v||(u=t[0],g=t[1],d=[u[0]+(g[1]-u[1])/ol.coordinate.dist2d(u,g)*e,u[1]-(g[0]-u[0])/ol.coordinate.dist2d(u,g)*e],f.push(d),t.push(t[y]),y++,m--);for(var _=0;_<m;_++)u=t[_],g=t[(_+1)%y],d=t[(_+2)%y],o=(g[1]-u[1])/(g[0]-u[0]),i=(d[1]-g[1])/(d[0]-g[0]),Math.abs(o-i)>1e-10&&(r=Math.sqrt((g[0]-u[0])*(g[0]-u[0])+(g[1]-u[1])*(g[1]-u[1])),s=Math.sqrt((d[0]-g[0])*(d[0]-g[0])+(d[1]-g[1])*(d[1]-g[1])),n=u[0]+e*(g[1]-u[1])/r,c=(i*(a=g[0]+e*(d[1]-g[1])/s)-o*n+(l=u[1]-e*(g[0]-u[0])/r)-(h=g[1]-e*(d[0]-g[0])/s))/(i-o),p=(o*i*(a-n)+i*l-o*h)/(i-o),g[0]-u[0]==0&&(p=i*(c=g[0]+e*(g[1]-u[1])/Math.abs(g[1]-u[1]))-i*a+h),d[0]-g[0]==0&&(p=o*(c=d[0]+e*(d[1]-g[1])/Math.abs(d[1]-g[1]))-o*n+l),f.push([c,p]));return v?f.push(f[0]):(t.pop(),u=t[t.length-1],g=t[t.length-2],d=[u[0]-(g[1]-u[1])/ol.coordinate.dist2d(u,g)*e,u[1]+(g[0]-u[0])/ol.coordinate.dist2d(u,g)*e],f.push(d)),f},ol.coordinate.findSegment=function(t,e){for(var o=0;o<e.length-1;o++){var i=e[o],r=e[o+1];if(ol.coordinate.equal(t,i)||ol.coordinate.equal(t,r))return{index:1,segment:[i,r]};var s=ol.coordinate.dist2d(i,r),n=[(r[0]-i[0])/s,(r[1]-i[1])/s],a=ol.coordinate.dist2d(i,t),l=[(t[0]-i[0])/a,(t[1]-i[1])/a];if(Math.abs(n[0]*l[1]-n[1]*l[0])<1e-10)return{index:1,segment:[i,r]}}return{index:-1}},ol.coordinate.splitH=function(t,e,o){for(var i,r,s=[],n=0;n<t.length-1;n++)t[n].length&&t[n+1].length&&(t[n][1]<=e&&t[n+1][1]>e||t[n][1]>=e&&t[n+1][1]<e)&&(i=(r=(e-t[n][1])/(t[n+1][1]-t[n][1]))*(t[n+1][0]-t[n][0])+t[n][0],s.push({contour:o,index:n,pt:[i,e],abs:r}));s.sort(function(t,e){return t.pt[0]-e.pt[0]});for(var a=[],l=0;l<s.length-1;l+=2)a.push([s[l],s[l+1]]);return a},ol.geom.LineString.prototype.splitAt=function(t,e){if(!t)return[this];if(e||(e=1e-10),t.length&&t[0].length){for(var o=[this],i=0;i<t.length;i++){for(var r=[],s=0;s<o.length;s++){var n=o[s].splitAt(t[i],e);r=r.concat(n)}o=r}return o}if(ol.coordinate.equal(t,this.getFirstCoordinate())||ol.coordinate.equal(t,this.getLastCoordinate()))return[this];var a=this.getCoordinates(),l=[a[0]],h=[];for(i=0;i<a.length-1;i++)if(!ol.coordinate.equal(a[i],a[i+1])){if(ol.coordinate.equal(t,a[i+1]))l.push(a[i+1]),h.push(new ol.geom.LineString(l)),l=[];else if(!ol.coordinate.equal(t,a[i])){var c,p;a[i][0]==a[i+1][0]?c=p=(a[i][1]-t[1])/(a[i][1]-a[i+1][1]):a[i][1]==a[i+1][1]?c=p=(a[i][0]-t[0])/(a[i][0]-a[i+1][0]):(c=(a[i][0]-t[0])/(a[i][0]-a[i+1][0]),p=(a[i][1]-t[1])/(a[i][1]-a[i+1][1])),Math.abs(c-p)<e&&0<=c&&c<=1&&(l.push(t),h.push(new ol.geom.LineString(l)),l=[t])}l.push(a[i+1])}return l.length>1&&h.push(new ol.geom.LineString(l)),h.length?h:[this]},ol.geom.MultiPolygon.prototype.scribbleFill=function(t){for(var e,o=[],i=this.getPolygons(),r=0;e=i[r];r++){var s=e.scribbleFill(t);s&&o.push(s)}if(!o.length)return null;var n,a,l=o[0];for(r=0;a=o[r];r++){n=a.getLineStrings();for(var h=0;h<n.length;h++)l.appendLineString(n[h])}return l},ol.geom.Polygon.prototype.scribbleFill=function(t){var e=t.interval,o=t.angle||Math.PI/2,i=this.clone();i.rotate(o,[0,0]);for(var r=i.getCoordinates(),s=r[0],n=1;n<r.length;n++)s.push([]),s=s.concat(r[n]);for(var a=i.getExtent(),l=[],h=(Math.floor(a[1]/e)+1)*e;h<a[3];h+=e){var c=ol.coordinate.splitH(s,h,n);l=l.concat(c)}if(!l.length)return null;for(var p=s.length-1,u=l[0][0].index,g=0;c=l[g];g++)l[g][0].index=(l[g][0].index-u+p)%p,l[g][1].index=(l[g][1].index-u+p)%p;for(var d=[];;){for(g=0;(c=l[g])&&c[0].done;g++);if(!c)break;for(var f=[];c;){c[0].done=!0,f.push(c[0].pt),f.push(c[1].pt);for(var y=c[0].pt[1]+e,m=1/0,v=null;l[g]&&!(l[g][0].pt[1]>y);){if(l[g][0].pt[1]===y){var _=Math.min((l[g][0].index-c[0].index+p)%p,(c[0].index-l[g][0].index+p)%p),w=Math.min((c[1].index-c[0].index+p)%p,(c[0].index-c[1].index+p)%p);_<m&&_<w&&(m=_,v=l[g][0].done?null:l[g])}g++}c=v}f.length&&d.push(f)}if(!d.length)return null;var S=new ol.geom.MultiLineString(d);return S.rotate(-o,[0,0]),S.cspline({pointsPerSeg:8,tension:.9})},ol.Map.prototype.animExtent=function(t,e){var o;(e=e||{}).projection&&(t=ol.proj.transformExtent(t,e.projection,this.getView().getProjection()));var i=(new Date).getTime(),r=e.duration||1e3,s=e.easing||ol.easing.upAndDown,n=e.style&&e.style.getWidth()||2,a=e.style&&e.style.getColr()||"red";o=this.on("postcompose",function(e){var l=e.frameState,h=l.pixelRatio,c=l.time-i;if(c>r)ol.Observable.unByKey(o);else{var p=c/r,u=this.getPixelFromCoordinate([t[0],t[1]]),g=this.getPixelFromCoordinate([t[2],t[3]]),d=e.context;d.save(),d.scale(h,h),d.beginPath(),s(p),d.globalAlpha=s(1-p),d.lineWidth=n,d.strokeStyle=a,d.rect(u[0],u[1],g[0]-u[0],g[1]-u[1]),d.stroke(),d.restore(),l.animate=!0}}.bind(this)),this.renderSync()},ol.geom.Geometry.prototype.cspline=function(t){return this.calcCSpline_?(this.csplineGeometryRevision==this.getRevision()&&this.csplineOption==JSON.stringify(t)||(this.csplineGeometry_=this.calcCSpline_(t),this.csplineGeometryRevision=this.getRevision(),this.csplineOption=JSON.stringify(t)),this.csplineGeometry_):this},ol.geom.GeometryCollection.prototype.calcCSpline_=function(t){for(var e=[],o=this.getGeometries(),i=0;i<o.length;i++)e.push(o[i].cspline(t));return new ol.geom.GeometryCollection(e)},ol.geom.MultiLineString.prototype.calcCSpline_=function(t){for(var e=[],o=this.getLineStrings(),i=0;i<o.length;i++)e.push(o[i].cspline(t).getCoordinates());return new ol.geom.MultiLineString(e)},ol.geom.Polygon.prototype.calcCSpline_=function(t){for(var e=[],o=this.getCoordinates(),i=0;i<o.length;i++)e.push(new ol.geom.LineString(o[i]).cspline(t).getCoordinates());return new ol.geom.Polygon(e)},ol.geom.MultiPolygon.prototype.calcCSpline_=function(t){for(var e=[],o=this.getPolygons(),i=0;i<o.length;i++)e.push(o[i].cspline(t).getCoordinates());return new ol.geom.MultiPolygon(e)},ol.geom.LineString.prototype.calcCSpline_=function(t){t||(t={});var e,o,i,r,s,n,a,l,h,c,p,u,g,d,f=this.getCoordinates(),y="number"==typeof t.tension?t.tension:.5,m=t.resolution||this.getLength()/f.length/(t.pointsPerSeg||10),v=[];function _(t,e,o,i){var r=o-t,s=i-e;return Math.sqrt(r*r+s*s)}for(e=f.slice(0),f.length>2&&f[0][0]==f[f.length-1][0]&&f[0][1]==f[f.length-1][1]?(e.unshift(f[f.length-2]),e.push(f[1])):(e.unshift(f[0]),e.push(f[f.length-1])),d=1;d<e.length-2;d++){var w=_(e[d][0],e[d][1],e[d+1][0],e[d+1][1]),S=Math.round(w/m),x=1;if(t.normalize){w=_(e[d+1][0],e[d+1][1],e[d-1][0],e[d-1][1]);var b=_(e[d+2][0],e[d+2][1],e[d][0],e[d][1]);x=w<b?w/b:b/w}for(r=(e[d+1][0]-e[d-1][0])*y*x,s=(e[d+2][0]-e[d][0])*y*x,n=(e[d+1][1]-e[d-1][1])*y*x,a=(e[d+2][1]-e[d][1])*y*x,g=0;g<=S;g++)u=g/S,l=2*Math.pow(u,3)-3*Math.pow(u,2)+1,h=-2*Math.pow(u,3)+3*Math.pow(u,2),c=Math.pow(u,3)-2*Math.pow(u,2)+u,p=Math.pow(u,3)-Math.pow(u,2),o=l*e[d][0]+h*e[d+1][0]+c*r+p*s,i=l*e[d][1]+h*e[d+1][1]+c*n+p*a,o&&i&&v.push([o,i])}return new ol.geom.LineString(v)},ol.HexGrid=function(t){t=t||{},ol.Object.call(this,t),this.size_=t.size||8e4,this.origin_=t.origin||[0,0],this.layout_=this.layout[t.layout]||this.layout.pointy},ol.inherits(ol.HexGrid,ol.Object),ol.HexGrid.prototype.layout={pointy:[Math.sqrt(3),Math.sqrt(3)/2,0,1.5,Math.sqrt(3)/3,-1/3,0,2/3,Math.cos(Math.PI/180*30),Math.sin(Math.PI/180*30),Math.cos(Math.PI/180*90),Math.sin(Math.PI/180*90),Math.cos(Math.PI/180*150),Math.sin(Math.PI/180*150),Math.cos(Math.PI/180*210),Math.sin(Math.PI/180*210),Math.cos(Math.PI/180*270),Math.sin(Math.PI/180*270),Math.cos(Math.PI/180*330),Math.sin(Math.PI/180*330)],flat:[1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,Math.cos(Math.PI/180*0),Math.sin(Math.PI/180*0),Math.cos(Math.PI/180*60),Math.sin(Math.PI/180*60),Math.cos(Math.PI/180*120),Math.sin(Math.PI/180*120),Math.cos(Math.PI/180*180),Math.sin(Math.PI/180*180),Math.cos(Math.PI/180*240),Math.sin(Math.PI/180*240),Math.cos(Math.PI/180*300),Math.sin(Math.PI/180*300)]},ol.HexGrid.prototype.setLayout=function(t){this.layout_=this.layout[t]||this.layout.pointy,this.changed()},ol.HexGrid.prototype.getLayout=function(){return 0!=this.layout_[9]?"pointy":"flat"},ol.HexGrid.prototype.setOrigin=function(t){this.origin_=t,this.changed()},ol.HexGrid.prototype.getOrigin=function(t){return this.origin_},ol.HexGrid.prototype.setSize=function(t){this.size_=t||8e4,this.changed()},ol.HexGrid.prototype.getSize=function(t){return this.size_},ol.HexGrid.prototype.cube2hex=function(t){return[t[0],t[2]]},ol.HexGrid.prototype.hex2cube=function(t){return[t[0],-t[0]-t[1],t[1]]},ol.HexGrid.prototype.hex2offset=function(t){return this.layout_[9]?[t[0]+(t[1]-(1&t[1]))/2,t[1]]:[t[0],t[1]+(t[0]+(1&t[0]))/2]},ol.HexGrid.prototype.offset2hex=function(t){return this.layout_[9]?[q=t[0]-(t[1]-(1&t[1]))/2,r=t[1]]:[t[0],t[1]-(t[0]+(1&t[0]))/2]},ol.HexGrid.prototype.cube_round=function(t){var e=Math.round(t[0]),o=Math.round(t[1]),i=Math.round(t[2]),r=Math.abs(e-t[0]),s=Math.abs(o-t[1]),n=Math.abs(i-t[2]);return r>s&&r>n?e=-o-i:s>n?o=-e-i:i=-e-o,[e,o,i]},ol.HexGrid.prototype.hex_round=function(t){return this.cube2hex(this.cube_round(this.hex2cube(t)))},ol.HexGrid.prototype.hex_corner=function(t,e,o){return[t[0]+e*this.layout_[8+o%6*2],t[1]+e*this.layout_[9+o%6*2]]},ol.HexGrid.prototype.getHexagonAtCoord=function(t){returhn(this.getHexagon(this.coord2hex(t)))},ol.HexGrid.prototype.getHexagon=function(t){for(var e=[],o=this.hex2coord(t),i=0;i<=7;i++)e.push(this.hex_corner(o,this.size_,i,this.layout_[8]));return e},ol.HexGrid.prototype.hex2coord=function(t){return[this.origin_[0]+this.size_*(this.layout_[0]*t[0]+this.layout_[1]*t[1]),this.origin_[1]+this.size_*(this.layout_[2]*t[0]+this.layout_[3]*t[1])]},ol.HexGrid.prototype.coord2hex=function(t){var e=[(t[0]-this.origin_[0])/this.size_,(t[1]-this.origin_[1])/this.size_],o=this.layout_[4]*e[0]+this.layout_[5]*e[1],i=this.layout_[6]*e[0]+this.layout_[7]*e[1];return this.hex_round([o,i])},ol.HexGrid.prototype.cube_distance=function(t,e){return Math.max(Math.abs(t[0]-e[0]),Math.abs(t[1]-e[1]),Math.abs(t[2]-e[2]))},function(){function t(t,e,o){return t+(e-t)*o}function e(e,o,i){return[t(e[0]+1e-6,o[0],i),t(e[1]+1e-6,o[1],i),t(e[2]+1e-6,o[2],i)]}ol.HexGrid.prototype.cube_line=function(t,o){var i=this.cube_distance(t,o);if(!i)return[t];for(var r=[],s=0;s<=i;s++)r.push(this.cube_round(e(t,o,s/i)));return r}}(),ol.HexGrid.prototype.neighbors={cube:[[1,-1,0],[1,0,-1],[0,1,-1],[-1,1,0],[-1,0,1],[0,-1,1]],hex:[[1,0],[1,-1],[0,-1],[-1,0],[-1,1],[0,1]]},ol.HexGrid.prototype.hex_neighbors=function(t,e){if(void 0!==e)return[t[0]+this.neighbors.hex[e%6][0],t[1]+this.neighbors.hex[e%6][1]];var o=[];for(e=0;e<6;e++)o.push([t[0]+this.neighbors.hex[e][0],t[1]+this.neighbors.hex[e][1]]);return o},ol.HexGrid.prototype.cube_neighbors=function(t,e){if(void 0!==e)return[t[0]+this.neighbors.cube[e%6][0],t[1]+this.neighbors.cube[e%6][1],t[2]+this.neighbors.cube[e%6][2]];var o=[];for(e=0;e<6;e++)o.push([t[0]+this.neighbors.cube[e][0],t[1]+this.neighbors.cube[e][1],t[2]+this.neighbors.cube[e][2]]);for(e=0;e<6;e++)o[e]=this.cube2hex(o[e]);return o},ol.Map.prototype.markup=function(t,e){var o,i=this;(e=e||{}).projection&&(t=ol.proj.transform(t,e.projection,this.getView().getProjection()));var r=(new Date).getTime(),s=e.delay||3e3,n=1e3,a=e.maxZoom||100,l=ol.easing.easeOut,h=e.style;return h||(h=new ol.style.Circle({radius:10,stroke:new ol.style.Stroke({color:"red",width:2})})),h instanceof ol.style.Image&&(h=new ol.style.Style({image:h})),h instanceof Array||(h=[h]),setTimeout(function(){o&&i.renderSync()},s),o=this.on("postcompose",function(e){var i=e.frameState,c=i.time-r;if(c>s+n)ol.Observable.unByKey(o),o=null;else{s>c&&this.getView().getZoom()>a&&(s=c);var p=i.pixelRatio,u=0;c>s&&(u=(c-s)/n);var g=e.context;g.save(),g.beginPath(),g.globalAlpha=l(1-u);for(var d=0;d<h.length;d++){var f=h[d].getImage(),y=f.getScale();f.setScale(y*p),e.vectorContext.setStyle(h[d]),e.vectorContext.drawGeometry(new ol.geom.Point(t)),f.setScale(y)}g.restore(),c>=s&&(i.animate=!0)}}.bind(this)),this.renderSync(),o.stop=function(){s=n=0,this.target.renderSync()},o},ol.ordering={},ol.ordering.yOrdering=function(t){return function(t,e){return e.getGeometry().getExtent()[1]-t.getGeometry().getExtent()[1]}},ol.ordering.zIndex=function(t){t||(t={});var e=t.attribute||"zIndex";return option.equalFn?function(t,o){return t.get(e)==o.get(e)?option.equalFn(t,o):t.get(e)<o.get(e)?1:-1}:function(t,o){return t.get(e)==o.get(e)?0:t.get(e)<o.get(e)?1:-1}},ol.Map.prototype.pulse=function(t,e){var o;(e=e||{}).projection&&(t=ol.proj.transform(t,e.projection,this.getView().getProjection()));var i=(new Date).getTime(),r=e.duration||3e3,s=e.easing||ol.easing.easeOut,n=e.style;n||(n=new ol.style.Circle({radius:30,stroke:new ol.style.Stroke({color:"red",width:2})})),n instanceof ol.style.Image&&(n=new ol.style.Style({image:n})),n instanceof Array||(n=[n]);var a=e.amplitude||1;a<0&&(a=0);var l=e.radius||15;l<0&&(l=5),e.amplitude,e.lineWidth,e.color,console.log("pulse"),o=this.on("postcompose",function(e){var l=e.frameState,h=l.pixelRatio,c=l.time-i;if(c>r)ol.Observable.unByKey(o);else{var p=c/r,u=e.context;u.save(),u.beginPath();var g=s(p);u.globalAlpha=s(1-p),console.log("anim");for(var d=0;d<n.length;d++){var f=n[d].getImage(),y=f.getScale();f.setScale(h*y*(1+a*(g-1))),e.vectorContext.setStyle(n[d]),e.vectorContext.drawGeometry(new ol.geom.Point(t)),f.setScale(y)}u.restore(),l.animate=!0}}.bind(this)),this.renderSync()},ol.style.Chart=function(t){options=t||{};var e=0;t.stroke&&(e=t.stroke.getWidth()),ol.style.RegularShape.call(this,{radius:options.radius+e,fill:new ol.style.Fill({color:[0,0,0]}),rotation:options.rotation,snapToPixel:options.snapToPixel}),options.scale&&this.setScale(options.scale),this.stroke_=options.stroke,this.radius_=options.radius||20,this.donutratio_=options.donutRatio||.5,this.type_=options.type,this.offset_=[options.offsetX?options.offsetX:0,options.offsetY?options.offsetY:0],this.animation_="number"==typeof options.animation?{animate:!0,step:options.animation}:this.animation_={animate:!1,step:1},this.data_=options.data,options.colors instanceof Array?this.colors_=options.colors:(this.colors_=ol.style.Chart.colors[options.colors],this.colors_||(this.colors_=ol.style.Chart.colors.classic)),this.renderChart_()},ol.inherits(ol.style.Chart,ol.style.RegularShape),ol.style.Chart.colors={classic:["#ffa500","blue","red","green","cyan","magenta","yellow","#0f0"],dark:["#960","#003","#900","#060","#099","#909","#990","#090"],pale:["#fd0","#369","#f64","#3b7","#880","#b5d","#666"],pastel:["#fb4","#79c","#f66","#7d7","#acc","#fdd","#ff9","#b9b"],neon:["#ff0","#0ff","#0f0","#f0f","#f00","#00f"]},ol.style.Chart.prototype.clone=function(){var t=new ol.style.Chart({type:this.type_,radius:this.radius_,rotation:this.getRotation(),scale:this.getScale(),data:this.getData(),snapToPixel:this.getSnapToPixel(),stroke:this.stroke_,colors:this.colors_,offsetX:this.offset_[0],offsetY:this.offset_[1],animation:this.animation_});return t.setScale(this.getScale()),t.setOpacity(this.getOpacity()),t},ol.style.Chart.prototype.getData=function(){return this.data_},ol.style.Chart.prototype.setData=function(t){this.data_=t,this.renderChart_()},ol.style.Chart.prototype.getRadius=function(){return this.radius_},ol.style.Chart.prototype.setRadius=function(t,e){this.radius_=t,this.donuratio_=e||this.donuratio_,this.renderChart_()},ol.style.Chart.prototype.setAnimation=function(t){if(!1===t){if(0==this.animation_.animate)return;this.animation_.animate=!1}else{if(this.animation_.step==t)return;this.animation_.animate=!0,this.animation_.step=t}this.renderChart_()},ol.style.Chart.prototype.renderChart_=function(t){var e,o=0;this.stroke_&&(e=ol.color.asString(this.stroke_.getColor()),o=this.stroke_.getWidth());var i=this.getImage(),r=i.getContext("2d");r.clearRect(0,0,i.width,i.height),r.lineJoin="round";for(var s=0,n=0;n<this.data_.length;n++)s+=this.data_[n];r.setTransform(1,0,0,1,0,0),r.translate(0,0);var a=this.animation_.animate?this.animation_.step:1;switch(this.type_){case"donut":case"pie3D":case"pie":var l,h=Math.PI*(a-1.5),c=i.width/2;for(r.strokeStyle=e,r.lineWidth=o,r.save(),"pie3D"==this.type_&&(r.translate(0,.3*c),r.scale(1,.7),r.beginPath(),r.fillStyle="#369",r.arc(c,1.4*c,this.radius_*a,0,2*Math.PI),r.fill(),r.stroke()),"donut"==this.type_&&(r.save(),r.beginPath(),r.rect(0,0,2*c,2*c),r.arc(c,c,this.radius_*a*this.donutratio_,0,2*Math.PI),r.clip("evenodd")),n=0;n<this.data_.length;n++)r.beginPath(),r.moveTo(c,c),r.fillStyle=this.colors_[n%this.colors_.length],l=h+2*Math.PI*this.data_[n]/s*a,r.arc(c,c,this.radius_*a,h,l),r.closePath(),r.fill(),r.stroke(),h=l;"donut"==this.type_&&(r.restore(),r.beginPath(),r.strokeStyle=e,r.lineWidth=o,r.arc(c,c,this.radius_*a*this.donutratio_,Math.PI*(a-1.5),h),r.stroke()),r.restore();break;case"bar":default:var p=0;for(n=0;n<this.data_.length;n++)p<this.data_[n]&&(p=this.data_[n]);var u,g=Math.min(5,2*this.radius_/this.data_.length),d=(c=i.width/2,i.width-o),f=c-this.data_.length*g/2;for(r.strokeStyle=e,r.lineWidth=o,n=0;n<this.data_.length;n++){r.beginPath(),r.fillStyle=this.colors_[n%this.colors_.length],u=f+g;var y=this.data_[n]/p*2*this.radius_*a;r.rect(f,d-y,g,y),r.closePath(),r.fill(),r.stroke(),f=u}}(l=this.getAnchor())[0]=c-this.offset_[0],l[1]=c-this.offset_[1]},ol.style.Chart.prototype.getChecksum=function(){var t=null!==this.stroke_?this.stroke_.getChecksum():"-";if(null===this.checksums_||t!=this.checksums_[1]||fillChecksum!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.data_.join("|")!=this.checksums_[4]){var e="c"+t+fillChecksum+(void 0!==this.radius_?this.radius_.toString():"-")+this.data_.join("|");this.checksums_=[e,t,fillChecksum,this.radius_,this.data_.join("|")]}return this.checksums_[0]},ol.style.FillPattern=function(t){var e;t||(t={});var o=this.canvas_=document.createElement("canvas"),i=(Number(t.scale)>0?Number(t.scale):1)*ol.has.DEVICE_PIXEL_RATIO||ol.has.DEVICE_PIXEL_RATIO,r=o.getContext("2d");if(t.image){t.image.load();var s=t.image.getImage();if(s.width)o.width=Math.round(s.width*i),o.height=Math.round(s.height*i),r.globalAlpha="number"==typeof t.opacity?t.opacity:1,r.drawImage(s,0,0,s.width,s.height,0,0,o.width,o.height),e=r.createPattern(o,"repeat");else{var n=this;e=[0,0,0,0],s.onload=function(){o.width=Math.round(s.width*i),o.height=Math.round(s.height*i),r.globalAlpha="number"==typeof t.opacity?t.opacity:1,r.drawImage(s,0,0,s.width,s.height,0,0,o.width,o.height),e=r.createPattern(o,"repeat"),n.setColor(e)}}}else{var a=this.getPattern_(t);if(o.width=Math.round(a.width*i),o.height=Math.round(a.height*i),r.beginPath(),t.fill&&(r.fillStyle=ol.color.asString(t.fill.getColor()),r.fillRect(0,0,o.width,o.height)),r.scale(i,i),r.lineCap="round",r.lineWidth=a.stroke||1,r.fillStyle=ol.color.asString(t.color||"#000"),r.strokeStyle=ol.color.asString(t.color||"#000"),a.circles)for(var l=0;l<a.circles.length;l++){var h=a.circles[l];r.beginPath(),r.arc(h[0],h[1],h[2],0,2*Math.PI),a.fill&&r.fill(),a.stroke&&r.stroke()}if(a.repeat||(a.repeat=[[0,0]]),a.char&&(r.font=a.font||a.width+"px Arial",r.textAlign="center",r.textBaseline="middle",a.angle?(r.fillText(a.char,a.width/4,a.height/4),r.fillText(a.char,5*a.width/4,5*a.height/4),r.fillText(a.char,a.width/4,5*a.height/4),r.fillText(a.char,5*a.width/4,a.height/4),r.fillText(a.char,3*a.width/4,3*a.height/4),r.fillText(a.char,-a.width/4,-a.height/4),r.fillText(a.char,3*a.width/4,-a.height/4),r.fillText(a.char,-a.width/4,3*a.height/4)):r.fillText(a.char,a.width/2,a.height/2)),a.lines)for(l=0;l<a.lines.length;l++)for(var c=0;c<a.repeat.length;c++){var p=a.lines[l];r.beginPath(),r.moveTo(p[0]+a.repeat[c][0],p[1]+a.repeat[c][1]);for(var u=2;u<p.length;u+=2)r.lineTo(p[u]+a.repeat[c][0],p[u+1]+a.repeat[c][1]);a.fill&&r.fill(),a.stroke&&r.stroke(),r.save(),r.strokeStyle="red",r.strokeWidth=.1,r.restore()}if(e=r.createPattern(o,"repeat"),t.offset){var g=t.offset;if("number"==typeof g&&(g=[g,g]),g instanceof Array){var d=Math.round(g[0]*i),f=Math.round(g[1]*i);r.scale(1/i,1/i),r.clearRect(0,0,o.width,o.height),r.translate(d,f),r.fillStyle=e,r.fillRect(-d,-f,o.width,o.height),e=r.createPattern(o,"repeat")}}}ol.style.Fill.call(this,{color:e})},ol.inherits(ol.style.FillPattern,ol.style.Fill),ol.style.FillPattern.prototype.clone=function(){var t=ol.style.Fill.prototype.clone.call(this);return t.canvas_=this.canvas_,t},ol.style.FillPattern.prototype.getImage=function(){return this.canvas_},ol.style.FillPattern.prototype.getPattern_=function(t){var e=ol.style.FillPattern.prototype.patterns[t.pattern]||ol.style.FillPattern.prototype.patterns.dot,o=Math.round(t.spacing)||10;switch(Math.round(o/2),t.pattern){case"dot":case"circle":var i=0===t.size?0:t.size/2||2;t.angle?(o=e.width=e.height=Math.round(1.4*o),e.circles=[[o/4,o/4,i],[3*o/4,3*o/4,i]],"circle"==t.pattern&&(e.circles=e.circles.concat([[o/4+o,o/4,i],[o/4,o/4+o,i],[3*o/4-o,3*o/4,i],[3*o/4,3*o/4-o,i],[o/4+o,o/4+o,i],[3*o/4-o,3*o/4-o,i]]))):(e.width=e.height=o,e.circles=[[o/2,o/2,i]],"circle"==t.pattern&&(e.circles=e.circles.concat([[o/2+o,o/2,i],[o/2-o,o/2,i],[o/2,o/2+o,i],[o/2,o/2-o,i],[o/2+o,o/2+o,i],[o/2+o,o/2-o,i],[o/2-o,o/2+o,i],[o/2-o,o/2-o,i]])));break;case"tile":case"square":i=0===t.size?0:t.size/2||2,t.angle?(e.width=e.height=o,e.lines=[[o/2-i,o/2,o/2,o/2-i,o/2+i,o/2,o/2,o/2+i,o/2-i,o/2]]):(e.width=e.height=o,e.lines=[[o/2-i,o/2-i,o/2+i,o/2-i,o/2+i,o/2+i,o/2-i,o/2+i,o/2-i,o/2-i]]),"square"==t.pattern&&(e.repeat=[[0,0],[0,o],[o,0],[0,-o],[-o,0],[-o,-o],[o,o],[-o,o],[o,-o]]);break;case"cross":t.angle&&(t.angle=45);case"hatch":var r=Math.round(((t.angle||0)-90)%360);r>180&&(r-=360),r*=Math.PI/180;var s=Math.cos(r),n=Math.sin(r);if(Math.abs(n)<1e-4)e.width=e.height=o,e.lines=[[0,.5,o,.5]],e.repeat=[[0,0],[0,o]];else if(Math.abs(s)<1e-4)e.width=e.height=o,e.lines=[[.5,0,.5,o]],e.repeat=[[0,0],[o,0]],"cross"==t.pattern&&(e.lines.push([0,.5,o,.5]),e.repeat.push([0,o]));else{var a=e.width=Math.round(Math.abs(o/n))||1,l=e.height=Math.round(Math.abs(o/s))||1;"cross"==t.pattern?(e.lines=[[-a,-l,2*a,2*l],[2*a,-l,-a,2*l]],e.repeat=[[0,0]]):s*n>0?(e.lines=[[-a,-l,2*a,2*l]],e.repeat=[[0,0],[a,0],[0,l]]):(e.lines=[[2*a,-l,-a,2*l]],e.repeat=[[0,0],[-a,0],[0,l]])}e.stroke=0===t.size?0:t.size||4}return e},ol.style.FillPattern.addPattern=function(t,e){e||(e={}),ol.style.FillPattern.prototype.patterns[t||e.char]={width:e.width||e.size||10,height:e.height||e.size||10,font:e.font,char:e.char,circles:e.circles,lines:e.lines,repeat:e.repeat,stroke:e.stroke,angle:e.angle,fill:e.fill}},ol.style.FillPattern.prototype.patterns={hatch:{width:5,height:5,lines:[[0,2.5,5,2.5]],stroke:1},cross:{width:7,height:7,lines:[[0,3,10,3],[3,0,3,10]],stroke:1},dot:{width:8,height:8,circles:[[5,5,2]],stroke:!1,fill:!0},circle:{width:10,height:10,circles:[[5,5,2]],stroke:1,fill:!1},square:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],stroke:1,fill:!1},tile:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],fill:!0},woven:{width:12,height:12,lines:[[3,3,9,9],[0,12,3,9],[9,3,12,0],[-1,1,1,-1],[13,11,11,13]],stroke:1},crosses:{width:8,height:8,lines:[[2,2,6,6],[2,6,6,2]],stroke:1},caps:{width:8,height:8,lines:[[2,6,4,2,6,6]],stroke:1},nylon:{width:20,height:20,lines:[[1,6,1,1,6,1],[6,11,11,11,11,6],[11,16,11,21,16,21],[16,11,21,11,21,16]],repeat:[[0,0],[-20,0],[0,-20]],stroke:1},hexagon:{width:20,height:12,lines:[[0,10,4,4,10,4,14,10,10,16,4,16,0,10]],stroke:1,repeat:[[0,0],[10,6],[10,-6],[-10,-6]]},cemetry:{width:15,height:19,lines:[[0,3.5,7,3.5],[3.5,0,3.5,10]],stroke:1,repeat:[[0,0],[7,9]]},sand:{width:20,height:20,circles:[[1,2,1],[9,3,1],[2,16,1],[7,8,1],[6,14,1],[4,19,1],[14,2,1],[12,10,1],[14,18,1],[18,8,1],[18,14,1]],fill:1},conglomerate:{width:30,height:20,circles:[[2,4,1],[17,3,1],[26,18,1],[12,17,1],[5,17,2],[28,11,2]],lines:[[7,5,6,7,9,9,11,8,11,6,9,5,7,5],[16,10,15,13,16,14,19,15,21,13,22,9,20,8,19,8,16,10],[24,6,26,7,27,5,26,4,24,4,24,6]],stroke:1},gravel:{width:15,height:10,circles:[[4,2,1],[5,9,1],[1,7,1]],lines:[[7,5,6,6,7,7,8,7,9,7,10,5,9,4,7,5],[11,2,14,4,14,1,12,1,11,2]],stroke:1},brick:{width:18,height:16,lines:[[0,1,18,1],[0,10,18,10],[6,1,6,10],[12,10,12,18],[12,0,12,1]],stroke:1},dolomite:{width:20,height:16,lines:[[0,1,20,1],[0,9,20,9],[1,9,6,1],[11,9,14,16],[14,0,14.4,1]],stroke:1},coal:{width:20,height:16,lines:[[1,5,7,1,7,7],[11,10,12,5,18,9],[5,10,2,15,9,15],[15,16,15,13,20,16],[15,0,15,2,20,0]],fill:1},breccia:{width:20,height:16,lines:[[1,5,7,1,7,7,1,5],[11,10,12,5,18,9,11,10],[5,10,2,15,9,15,5,10],[15,16,15,13,22,18],[15,0,15,2,20,0]],stroke:1},clay:{width:20,height:20,lines:[[0,0,3,11,0,20],[11,0,10,3,13,13,11,20],[0,0,10,3,20,0],[0,12,3,11,13,13,20,12]],stroke:1},flooded:{width:15,height:10,lines:[[0,1,10,1],[0,6,5,6],[10,6,15,6]],stroke:1},chaos:{width:40,height:40,lines:[[40,2,40,0,38,0,40,2],[4,0,3,2,2,5,0,0,0,3,2,7,5,6,7,7,8,10,9,12,9,13,9,14,8,14,6,15,2,15,0,20,0,22,2,20,5,19,8,15,10,14,11,12.25,10,12,10,10,12,9,13,7,12,6,13,4,16,7,17,4,20,0,18,0,15,3,14,2,14,0,12,1,11,0,10,1,11,4,10,7,9,8,8,5,6,4,5,3,5,1,5,0,4,0],[7,1,7,3,8,3,8,2,7,1],[4,3,5,5,4,5,4,3],[34,5,33,7,38,10,38,8,36,5,34,5],[27,0,23,2,21,8,30,0,27,0],[25,8,26,12,26,16,22.71875,15.375,20,13,18,15,17,18,13,22,17,21,19,22,21,20,19,18,22,17,30,25,26,26,24,28,21.75,33.34375,20,36,18,40,20,40,24,37,25,32,27,31,26,38,27,37,30,32,32,35,36,37,38,40,38,39,40,40,37,36,34,32,37,31,36,29,33,27,34,24,39,21,40,21,40,16,37,20,31,22,32,25,27,20,29,15,30,20,32,20,34,18,33,12,31,11,29,14,26,9,25,8],[39,24,37,26,40,28,39,24],[13,15,9,19,14,18,13,15],[18,23,14,27,16,27,17,25,20,26,18,23],[6,24,2,26,1,28,2,30,5,28,12,30,16,32,18,30,15,30,12,28,9,25,7,27,6,24],[29,27,32,28,33,31,30,29,27,28,29,27],[5,35,1,33,3,36,13,38,15,35,10,36,5,35]],fill:1},grass:{width:27,height:22,lines:[[0,10.5,13,10.5],[2.5,10,1.5,7],[4.5,10,4.5,5,3.5,4],[7,10,7.5,6,8.5,3],[10,10,11,6]],repeat:[[0,0],[14,10]],stroke:1},swamp:{width:24,height:23,lines:[[0,10.5,9.5,10.5],[2.5,10,2.5,7],[4.5,10,4.5,4],[6.5,10,6.5,6],[3,12.5,7,12.5]],repeat:[[0,0],[14,10]],stroke:1},wave:{width:10,height:8,lines:[[0,0,5,4,10,0]],stroke:1},vine:{width:13,height:13,lines:[[3,0,3,6],[9,7,9,13]],stroke:1},forest:{width:55,height:30,circles:[[7,7,3.5],[20,20,1.5],[42,22,3.5],[35,5,1.5]],stroke:1},scrub:{width:26,height:20,lines:[[1,4,4,8,6,4]],circles:[[20,13,1.5]],stroke:1},tree:{width:30,height:30,lines:[[7.78,10.61,4.95,10.61,4.95,7.78,3.54,7.78,2.12,6.36,.71,6.36,0,4.24,.71,2.12,4.24,0,7.78,.71,9.19,3.54,7.78,4.95,7.07,7.07,4.95,7.78]],repeat:[[3,1],[18,16]],stroke:1},pine:{width:30,height:30,lines:[[5.66,11.31,2.83,11.31,2.83,8.49,0,8.49,2.83,0,5.66,8.49,2.83,8.49]],repeat:[[3,1],[18,16]],stroke:1},pines:{width:22,height:20,lines:[[1,4,3.5,1,6,4],[1,8,3.5,5,6,8],[3.5,1,3.5,11],[12,14.5,14.5,14,17,14.5],[12,18,17,18],[14.5,12,14.5,18]],repeat:[[2,1]],stroke:1},rock:{width:20,height:20,lines:[[1,0,1,9],[4,0,4,9],[7,0,7,9],[10,1,19,1],[10,4,19,4],[10,7,19,7],[0,11,9,11],[0,14,9,14],[0,17,9,17],[12,10,12,19],[15,10,15,19],[18,10,18,19]],repeat:[[.5,.5]],stroke:1},rocks:{width:20,height:20,lines:[[5,0,3,0,5,4,4,6,0,3,0,5,3,6,5,9,3.75,10,2.5,10,0,9,0,10,4,11,5,14,4,15,0,13,0,13,0,13,0,14,0,14,5,16,5,18,3,19,0,19,-.25,19.9375,5,20,10,19,10,20,11,20,12,19,14,20,15,20,17,19,20,20,20,19,19,16,20,15,20,11,20,10,19,8,20,5,20,0,19,0,20,2,19,4,17,4,16,3,15,0,14,0,15,4,11,5,10,4,11,0,10,0,9,4,6,5,5,0],[18,5,19,6,18,10,16,10,14,9,16,5,18,5],[5,6,9,5,10,6,10,9,6,10,5,6],[14,5,14,8,13,9,12,9,11,7,12,5,14,5],[5,11,8,10,9,11,10,14,6,15,6,15,5,11],[13,10,14,11,15,14,15,14,15,14,11,15,10,11,11,10,13,10],[15,12,16,11,19,11,19,15,16,14,16,14,15,12],[6,16,9,15,10,18,5,19,6,16],[10,16,14,16,14,18,13,19,11,18,10,16],[15,15,18,16,18,18,16,19,15,18,15,15]],stroke:1}},ol.style.FontSymbol=function(t){var e=0;(t=t||{}).stroke&&(e=t.stroke.getWidth()),ol.style.RegularShape.call(this,{radius:t.radius,fill:t.fill,rotation:t.rotation,rotateWithView:t.rotateWithView}),"number"==typeof t.opacity&&this.setOpacity(t.opacity),this.color_=t.color,this.fontSize_=t.fontSize||1,this.stroke_=t.stroke,this.fill_=t.fill,this.radius_=t.radius-e,this.form_=t.form||"none",this.gradient_=t.gradient,this.offset_=[t.offsetX?t.offsetX:0,t.offsetY?t.offsetY:0],this.glyph_=this.getGlyph(t.glyph)||"",this.renderMarker_()},ol.inherits(ol.style.FontSymbol,ol.style.RegularShape),ol.style.Image.prototype.getImagePNG=function(){var t=this.getImage();if(!t)return!1;try{return t.toDataURL("image/png")}catch(t){return!1}},ol.style.FontSymbol.prototype.defs={fonts:{},glyphs:{}},ol.style.FontSymbol.addDefs=function(t,e){var o=t;if("string"==typeof t&&(o={font:t,name:t,copyright:""}),o.font&&"string"==typeof o.font){var i=o.font;for(var r in ol.style.FontSymbol.prototype.defs.fonts[i]=o,e){var s=e[r];"string"==typeof s&&1==s.length&&(s={char:s}),ol.style.FontSymbol.prototype.defs.glyphs[r]={font:o.font,char:s.char||""+String.fromCharCode(s.code)||"",theme:s.theme||o.name,name:s.name||r,search:s.search||""}}}else console.log("bad font def")},ol.style.FontSymbol.prototype.clone=function(){var t=new ol.style.FontSymbol({glyph:"",color:this.color_,fontSize:this.fontSize_,stroke:this.stroke_,fill:this.fill_,radius:this.radius_+(this.stroke_?this.stroke_.getWidth():0),form:this.form_,gradient:this.gradient_,offsetX:this.offset_[0],offsetY:this.offset_[1],opacity:this.getOpacity(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()});return t.setScale(this.getScale()),t.glyph_=this.glyph_,t.renderMarker_(),t},ol.style.FontSymbol.prototype.getFill=function(){return this.fill_},ol.style.FontSymbol.prototype.getStroke=function(){return this.stroke_},ol.style.FontSymbol.prototype.getGlyph=function(t){return t?ol.style.FontSymbol.prototype.defs.glyphs[t]||{font:"none",char:t.charAt(0),theme:"none",name:"none",search:""}:this.glyph_},ol.style.FontSymbol.prototype.getGlyphName=function(){for(var t in ol.style.FontSymbol.prototype.defs.glyphs)if(ol.style.FontSymbol.prototype.defs.glyphs[t]===this.glyph_)return t;return""},ol.style.FontSymbol.prototype.getFontInfo=function(t){return ol.style.FontSymbol.prototype.defs.fonts[t.font]},ol.style.FontSymbol.prototype.renderMarker_=function(t){var e,o=0;this.stroke_&&(e=ol.color.asString(this.stroke_.getColor()),o=this.stroke_.getWidth());var i=this.getImage(),r={strokeStyle:e,strokeWidth:o,size:i.width},s=i.getContext("2d");s.clearRect(0,0,i.width,i.height),this.drawMarker_(r,s,0,0);var n=this.getAnchor();n[0]=i.width/2-this.offset_[0],n[1]=i.width/2-this.offset_[1]},ol.style.FontSymbol.prototype.drawPath_=function(t,e){var o=2*this.radius_+t.strokeWidth+1,i=t.strokeWidth/2,r=t.size/2,s={fac:1,posX:t.size/2,posY:t.size/2};switch(e.lineJoin="round",e.beginPath(),this.form_){case"none":s.fac=1;break;case"circle":case"ban":e.arc(r,r,o/2,0,2*Math.PI,!0);break;case"poi":e.arc(r,r-.4*this.radius_,.6*this.radius_,.15*Math.PI,.85*Math.PI,!0),e.lineTo(r-.89*.05*o,(.95+.45*.05)*o+i),e.arc(r,.95*o+i,.05*o,.85*Math.PI,.15*Math.PI,!0),s={fac:.45,posX:r,posY:r-.35*this.radius_};break;case"bubble":e.arc(r,r-.2*this.radius_,.8*this.radius_,.4*Math.PI,.6*Math.PI,!0),e.lineTo(.5*o+i,o+i),s={fac:.7,posX:r,posY:r-.2*this.radius_};break;case"marker":e.arc(r,r-.2*this.radius_,.8*this.radius_,.25*Math.PI,.75*Math.PI,!0),e.lineTo(.5*o+i,o+i),s={fac:.7,posX:r,posY:r-.2*this.radius_};break;case"coma":e.moveTo(r+.8*this.radius_,r-.2*this.radius_),e.quadraticCurveTo(.95*o+i,.75*o+i,.5*o+i,o+i),e.arc(r,r-.2*this.radius_,.8*this.radius_,.45*Math.PI,0,!1),s={fac:.7,posX:r,posY:r-.2*this.radius_};break;default:var n;switch(this.form_){case"shield":n=[.05,0,.95,0,.95,.8,.5,1,.05,.8,.05,0],s.posY=.45*o+i;break;case"blazon":n=[.1,0,.9,0,.9,.8,.6,.8,.5,1,.4,.8,.1,.8,.1,0],s.fac=.8,s.posY=.4*o+i;break;case"bookmark":n=[.05,0,.95,0,.95,1,.5,.8,.05,1,.05,0],s.fac=.9,s.posY=.4*o+i;break;case"hexagon":n=[.05,.2,.5,0,.95,.2,.95,.8,.5,1,.05,.8,.05,.2],s.fac=.9,s.posY=.5*o+i;break;case"diamond":n=[.25,0,.75,0,1,.2,1,.4,.5,1,0,.4,0,.2,.25,0],s.fac=.75,s.posY=.35*o+i;break;case"triangle":n=[0,0,1,0,.5,1,0,0],s.fac=.6,s.posY=.3*o+i;break;case"sign":n=[.5,.05,1,.95,0,.95,.5,.05],s.fac=.7,s.posY=.65*o+i;break;case"lozenge":n=[.5,0,1,.5,.5,1,0,.5,.5,0],s.fac=.7;break;case"square":default:n=[0,0,1,0,1,1,0,1,0,0]}for(var a=0;a<n.length;a+=2)e.lineTo(n[a]*o+i,n[a+1]*o+i)}return e.closePath(),s},ol.style.FontSymbol.prototype.drawMarker_=function(t,e,o,i){var r=this.fill_?this.fill_.getColor():"#000",s=this.stroke_?this.stroke_.getColor():"#000";"none"==this.form_&&this.stroke_&&this.fill_&&(s=this.fill_.getColor(),r=this.stroke_.getColor()),e.setTransform(1,0,0,1,0,0),e.translate(o,i);var n=this.drawPath_(t,e);if(this.fill_){if(this.gradient_&&"none"!=this.form_){var a=e.createLinearGradient(0,0,t.size/2,t.size);a.addColorStop(1,ol.color.asString(r)),a.addColorStop(0,ol.color.asString(s)),e.fillStyle=a}else e.fillStyle=ol.color.asString(r);e.fill()}if(this.stroke_&&t.strokeWidth&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.stroke()),this.glyph_.char){e.font=2*n.fac*this.radius_*this.fontSize_+"px "+this.glyph_.font,e.strokeStyle=e.fillStyle,e.lineWidth=t.strokeWidth*("none"==this.form_?2:1),e.fillStyle=ol.color.asString(this.color_||s),e.textAlign="center",e.textBaseline="middle";var l=this.glyph_.char;t.strokeWidth&&"transparent"!=s&&e.strokeText(l,n.posX,n.posY),e.fillText(l,n.posX,n.posY)}if("ban"==this.form_&&this.stroke_&&t.strokeWidth){e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth;var h=this.radius_+t.strokeWidth,c=this.radius_*Math.cos(Math.PI/4);e.moveTo(h+c,h-c),e.lineTo(h-c,h+c),e.stroke()}},ol.style.FontSymbol.prototype.getChecksum=function(){var t=null!==this.stroke_?this.stroke_.getChecksum():"-",e=null!==this.fill_?this.fill_.getChecksum():"-";if(null===this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.form_+"-"+this.glyphs_!=this.checksums_[4]){var o="c"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+this.form_+"-"+this.glyphs_;this.checksums_=[o,t,e,this.radius_,this.form_+"-"+this.glyphs_]}return this.checksums_[0]},ol.style.Photo=function(t){t=t||{},this.sanchor_="anchored"==t.kind?8:0,this.shadow_=Number(t.shadow)||0,t.stroke||(t.stroke=new ol.style.Stroke({width:0,color:"#000"}));var e=t.stroke.getWidth();if(e<0&&(e=0),"folio"==t.kind&&(e+=6),t.stroke.setWidth(e),ol.style.RegularShape.call(this,{radius:t.radius+e+this.sanchor_/2+this.shadow_/2,points:0}),!this.hitDetectionCanvas_){var o=this.getImage();for(var i in this)if(this[i]&&this[i].getContext&&this[i]!==o){this.hitDetectionCanvas_=this[i];break}}this.stroke_=t.stroke,this.fill_=t.fill,this.crop_=t.crop,this.crossOrigin_=t.crossOrigin,this.kind_=t.kind||"default",this.radius_=t.radius,this.src_=t.src,this.offset_=[t.offsetX?t.offsetX:0,t.offsetY?t.offsetY:0],this.onload_=t.onload,"number"==typeof t.opacity&&this.setOpacity(t.opacity),"number"==typeof t.rotation&&this.setRotation(t.rotation),this.renderPhoto_()},ol.inherits(ol.style.Photo,ol.style.RegularShape),ol.style.Photo.prototype.clone=function(){return new ol.style.Photo({stroke:this.stroke_,fill:this.fill_,shadow:this.shadow_,crop:this.crop_,crossOrigin:this.crossOrigin_,kind:this.kind_,radius:this.radius_,src:this.src_,offsetX:this.offset_[0],offsetY:this.offset_[1],opacity:this.getOpacity(),rotation:this.getRotation()})},CanvasRenderingContext2D.prototype.roundRect=function(t,e,o,i,r){return r?(o<2*r&&(r=o/2),i<2*r&&(r=i/2),this.beginPath(),this.moveTo(t+r,e),this.arcTo(t+o,e,t+o,e+i,r),this.arcTo(t+o,e+i,t,e+i,r),this.arcTo(t,e+i,t,e,r),this.arcTo(t,e,t+o,e,r),this.closePath()):this.rect(t,e,o,i),this},ol.style.Photo.prototype.drawBack_=function(t,e,o){var i=t.canvas;switch(t.beginPath(),t.fillStyle=e,t.clearRect(0,0,i.width,i.height),this.kind_){case"square":t.rect(0,0,i.width-this.shadow_,i.height-this.shadow_);break;case"circle":t.arc(this.radius_+o,this.radius_+o,this.radius_+o,0,2*Math.PI,!1);break;case"folio":offset=6,o-=offset,t.strokeStyle="rgba(0,0,0,0.5)";var r=i.width-this.shadow_-2*offset,s=Math.atan(6/r);t.save(),t.rotate(-s),t.translate(-6,2),t.beginPath(),t.rect(offset,offset,r,r),t.stroke(),t.fill(),t.restore(),t.save(),t.translate(6,-1),t.rotate(s),t.beginPath(),t.rect(offset,offset,r,r),t.stroke(),t.fill(),t.restore(),t.beginPath(),t.rect(offset,offset,r,r),t.stroke();break;case"anchored":t.roundRect(this.sanchor_/2,0,i.width-this.sanchor_-this.shadow_,i.height-this.sanchor_-this.shadow_,o),t.moveTo(i.width/2-this.sanchor_-this.shadow_/2,i.height-this.sanchor_-this.shadow_),t.lineTo(i.width/2+this.sanchor_-this.shadow_/2,i.height-this.sanchor_-this.shadow_),t.lineTo(i.width/2-this.shadow_/2,i.height-this.shadow_);break;default:t.roundRect(0,0,i.width-this.shadow_,i.height-this.shadow_,o)}t.closePath()},ol.style.Photo.prototype.renderPhoto_=function(){var t,e=0;this.stroke_&&(t=ol.color.asString(this.stroke_.getColor()),e=this.stroke_.getWidth());var o=this.getImage(),i=this.hitDetectionCanvas_.getContext("2d");this.drawBack_(i,"#000",e),i.fill(),i=o.getContext("2d"),this.drawBack_(i,t,e),this.shadow_&&(i.shadowColor="rgba(0,0,0,0.5)",i.shadowBlur=this.shadow_/2,i.shadowOffsetX=this.shadow_/2,i.shadowOffsetY=this.shadow_/2),i.fill(),i.shadowColor="transparent";var r=this,s=this.img_=new Image;this.crossOrigin_&&(s.crossOrigin=this.crossOrigin_),s.src=this.src_,s.width?r.drawImage_(s):s.onload=function(){r.drawImage_(s),r.onload_&&r.onload_()};var n=this.getAnchor();n[0]=(o.width-this.shadow_)/2,n[1]=(o.height-this.shadow_)/2,this.sanchor_&&(n[1]=o.height-this.shadow_)},ol.style.Photo.prototype.drawImage_=function(t){var e=this.getImage().getContext("2d"),o=0;this.stroke_&&(o=this.stroke_.getWidth());var i,r,s,n,a,l,h,c,p,u=2*this.radius_;e.save(),"circle"==this.kind_&&(e.beginPath(),e.arc(this.radius_+o,this.radius_+o,this.radius_,0,2*Math.PI,!1),e.clip()),this.crop_?(c=p=(i=Math.min(t.width/u,t.height/u))*u,l=(t.width-c)/2,h=(t.height-p)/2,r=s=0,n=a=u+1):(l=h=0,r=(u-(n=(i=Math.min(u/t.width,u/t.height))*(c=t.width)))/2,s=(u-(a=i*(p=t.height)))/2),r+=o+this.sanchor_/2,s+=o,e.drawImage(t,l,h,c,p,r,s,n,a),e.restore(),"circle"==this.kind_&&o&&(e.beginPath(),e.strokeStyle=ol.color.asString(this.stroke_.getColor()),e.lineWidth=o/4,e.arc(this.radius_+o,this.radius_+o,this.radius_,0,2*Math.PI,!1),e.stroke())},ol.style.Photo.prototype.getChecksum=function(){var t=null!==this.stroke_?this.stroke_.getChecksum():"-",e=null!==this.fill_?this.fill_.getChecksum():"-";if(null===this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]){var o="c"+t+e+(void 0!==this.radius_?this.radius_.toString():"-");this.checksums_=[o,t,e,this.radius_]}return this.checksums_[0]},ol.layer.Vector.prototype.setTextPathStyle=function(t,e){if(null===t)return this.textPath_&&this.unByKey(this.textPath_),this.textPath_=null,void this.changed();this.textPath_||(this.textPath_=this.on("postcompose",function(t){if(!(t.frameState.viewState.resolution>this.textPathMaxResolution_)){var e=t.frameState.extent,o=t.frameState.coordinateToPixelTransform,i=t.context;i.save(),i.scale(t.frameState.pixelRatio,t.frameState.pixelRatio);for(var r,s=this.getSource().getFeaturesInExtent(e),n=0;r=s[n];n++)for(var a,l=this.textPathStyle_(r,t.frameState.viewState.resolution),h=0;a=l[h];h++){var c,p=a.getGeometry()||r.getGeometry();switch(p.getType()){case"LineString":c=p.getCoordinates();break;case"MultiLineString":c=p.getLineString(0).getCoordinates();break;default:continue}var u=a.getText(),g=d(c,u.getRotateWithView());i.font=u.getFont(),i.textBaseline=u.getTextBaseline(),i.textAlign=u.getTextAlign(),i.lineWidth=u.getStroke()&&u.getStroke().getWidth()||0,i.strokeStyle=u.getStroke()&&u.getStroke().getColor()||"#fff",i.fillStyle=u.getFill()&&u.getFill().getColor()||"#000",i.textJustify="justify"==u.getTextAlign(),i.textOverflow=u.getTextOverflow?u.getTextOverflow():"",i.minWidth=u.getMinWidth?u.getMinWidth():0,i.textPath(u.getText()||r.get("name"),g)}i.restore()}function d(t,e){for(var i=[],r=0;r<t.length;r++)i.push(o[0]*t[r][0]+o[1]*t[r][1]+o[4]),i.push(o[2]*t[r][0]+o[3]*t[r][1]+o[5]);if(e&&i[0]>i[i.length-2]){var s=[];for(r=i.length-2;r>=0;r-=2)s.push(i[r]),s.push(i[r+1]);return s}return i}}.bind(this))),void 0===t&&(t=[new ol.style.Style({text:new ol.style.Text})]),this.textPathStyle_="function"==typeof t?t:function(){return t},this.textPathMaxResolution_=Number(e)||Number.MAX_VALUE,this.changed()},ol.style.TextPath=function(t){t||(t={}),ol.style.Text.call(this,t),this.textOverflow_=void 0!==t.textOverflow?t.textOverflow:"visible",this.minWidth_=t.minWidth||0},ol.inherits(ol.style.TextPath,ol.style.Text),ol.style.TextPath.prototype.getTextOverflow=function(){return this.textOverflow_},ol.style.TextPath.prototype.getMinWidth=function(){return this.minWidth_},CanvasRenderingContext2D.prototype.textPath=function(t,e){var o=this;function i(t,e,o,i){var r=o-t,s=i-e;return Math.sqrt(r*r+s*s)}var r,s=0,n=2;function a(t,e){if(!r||s+r<e)for(;n<t.length&&(r=i(t[n-2],t[n-1],t[n],t[n+1]),!(s+r>e))&&!((n+=2)>=t.length);)s+=r;var o,a,l,h=e-s;return n>=t.length&&(n=t.length-2),h?(o=t[n-2]+(t[n]-t[n-2])*h/r,a=t[n-1]+(t[n+1]-t[n-1])*h/r,l=Math.atan2(t[n+1]-t[n-1],t[n]-t[n-2])):(o=t[n-2],a=t[n-1],l=Math.atan2(t[n+1]-t[n-1],t[n]-t[n-2])),[o,a,l]}for(var l=.25*o.measureText(" ").width,h=0,c=0,p=2;p<e.length;p+=2)c+=i(e[p-2],e[p-1],e[p],e[p+1]);if(!(c<o.minWidth)){var u=t.split(" ").length-1;if("visible"!=o.textOverflow&&c<o.measureText(t).width+(t.length-1+u)*l){var g="ellipsis"==o.textOverflow?"":o.textOverflow;do{u=t.split(" ").length-1,t=t.slice(0,t.length-1)}while(t&&c<o.measureText(t+g).width+(t.length+g.length-1+u)*l);t+=g}switch(o.textJustify||o.textAlign){case!0:case"center":case"end":case"right":o.textJustify?(h=0,l=(c-o.measureText(t).width)/(t.length-1+u)):(h=c-o.measureText(t).width-(t.length+u)*l,"center"==o.textAlign&&(h/=2))}for(var d=0;d<t.length;d++){var f=t[d],y=o.measureText(f).width,m=a(e,h+y/2);o.save(),o.textAlign="center",o.translate(m[0],m[1]),o.rotate(m[2]),o.lineWidth&&o.strokeText(f,0,0),o.fillText(f,0,0),o.restore(),h+=y+l*(" "==f?2:1)}}},ol.style.Shadow=function(t){(t=t||{}).fill||(t.fill=new ol.style.Fill({color:"rgba(0,0,0,0.5)"})),ol.style.RegularShape.call(this,{radius:t.radius,fill:t.fill}),this.fill_=t.fill,this.radius_=t.radius,this.blur_=0===t.blur?0:t.blur||t.radius/3,this.offset_=[t.offsetX?t.offsetX:0,t.offsetY?t.offsetY:0],this.renderShadow_()},ol.inherits(ol.style.Shadow,ol.style.RegularShape),ol.style.Shadow.prototype.clone=function(){var t=new ol.style.Shadow({fill:this.fill_,radius:this.radius_,blur:this.blur_,offsetX:this.offset_[0],offsetY:this.offset_[1]});return t.setScale(this.getScale()),t.setOpacity(this.getOpacity()),t},ol.style.Shadow.prototype.renderShadow_=function(){var t=this.radius_,e=this.getImage();[e.width,e.height][1]=t;var o=e.getContext("2d");o.beginPath(),o.clearRect(0,0,e.width,e.height),o.scale(1,.5),o.arc(t,-t,t-this.blur_,0,2*Math.PI,!1),o.fillStyle="#000",o.shadowColor=this.fill_.getColor(),o.shadowBlur=.7*this.blur_,o.shadowOffsetX=0,o.shadowOffsetY=t,o.closePath(),o.fill(),o.shadowColor="transparent";var i=this.getAnchor();i[0]=e.width/2-this.offset_[0],i[1]=e.height/5-this.offset_[1]},ol.style.Shadow.prototype.getChecksum=function(){var t=null!==this.stroke_?this.stroke_.getChecksum():"-",e=null!==this.fill_?this.fill_.getChecksum():"-";if(null===this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.form_+"-"+this.glyphs_!=this.checksums_[4]){var o="c"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+this.form_+"-"+this.glyphs_;this.checksums_=[o,t,e,this.radius_,this.form_+"-"+this.glyphs_]}return this.checksums_[0]},ol.style.StrokePattern=function(t){var e;t||(t={});var o=this.canvas_=document.createElement("canvas"),i=(Number(t.scale)>0?Number(t.scale):1)*ol.has.DEVICE_PIXEL_RATIO||ol.has.DEVICE_PIXEL_RATIO,r=o.getContext("2d");if(t.image){t.image.load();var s=t.image.getImage();if(s.width)o.width=Math.round(s.width*i),o.height=Math.round(s.height*i),r.globalAlpha="number"==typeof t.opacity?t.opacity:1,r.drawImage(s,0,0,s.width,s.height,0,0,o.width,o.height),e=r.createPattern(o,"repeat");else{var n=this;e=[0,0,0,0],s.onload=function(){o.width=Math.round(s.width*i),o.height=Math.round(s.height*i),r.globalAlpha="number"==typeof t.opacity?t.opacity:1,r.drawImage(s,0,0,s.width,s.height,0,0,o.width,o.height),e=r.createPattern(o,"repeat"),n.setColor(e)}}}else{var a=this.getPattern_(t);if(o.width=Math.round(a.width*i),o.height=Math.round(a.height*i),r.beginPath(),t.fill&&(r.fillStyle=ol.color.asString(t.fill.getColor()),r.fillRect(0,0,o.width,o.height)),r.scale(i,i),r.lineCap="round",r.lineWidth=a.stroke||1,r.fillStyle=ol.color.asString(t.color||"#000"),r.strokeStyle=ol.color.asString(t.color||"#000"),a.circles)for(var l=0;l<a.circles.length;l++){var h=a.circles[l];r.beginPath(),r.arc(h[0],h[1],h[2],0,2*Math.PI),a.fill&&r.fill(),a.stroke&&r.stroke()}if(a.repeat||(a.repeat=[[0,0]]),a.char&&(r.font=a.font||a.width+"px Arial",r.textAlign="center",r.textBaseline="middle",a.angle?(r.fillText(a.char,a.width/4,a.height/4),r.fillText(a.char,5*a.width/4,5*a.height/4),r.fillText(a.char,a.width/4,5*a.height/4),r.fillText(a.char,5*a.width/4,a.height/4),r.fillText(a.char,3*a.width/4,3*a.height/4),r.fillText(a.char,-a.width/4,-a.height/4),r.fillText(a.char,3*a.width/4,-a.height/4),r.fillText(a.char,-a.width/4,3*a.height/4)):r.fillText(a.char,a.width/2,a.height/2)),a.lines)for(l=0;l<a.lines.length;l++)for(var c=0;c<a.repeat.length;c++){var p=a.lines[l];r.beginPath(),r.moveTo(p[0]+a.repeat[c][0],p[1]+a.repeat[c][1]);for(var u=2;u<p.length;u+=2)r.lineTo(p[u]+a.repeat[c][0],p[u+1]+a.repeat[c][1]);a.fill&&r.fill(),a.stroke&&r.stroke(),r.save(),r.strokeStyle="red",r.strokeWidth=.1,r.restore()}if(e=r.createPattern(o,"repeat"),t.offset){var g=t.offset;if("number"==typeof g&&(g=[g,g]),g instanceof Array){var d=Math.round(g[0]*i),f=Math.round(g[1]*i);r.scale(1/i,1/i),r.clearRect(0,0,o.width,o.height),r.translate(d,f),r.fillStyle=e,r.fillRect(-d,-f,o.width,o.height),e=r.createPattern(o,"repeat")}}}t.color=e,ol.style.Stroke.call(this,t)},ol.inherits(ol.style.StrokePattern,ol.style.Stroke),ol.style.StrokePattern.prototype.clone=function(){var t=ol.style.Fill.prototype.clone.call(this);return t.canvas_=this.canvas_,t},ol.style.StrokePattern.prototype.getImage=function(){return this.canvas_},ol.style.StrokePattern.prototype.getPattern_=function(t){var e=ol.style.FillPattern.prototype.patterns[t.pattern]||ol.style.FillPattern.prototype.patterns.dot,o=Math.round(t.spacing)||10;switch(Math.round(o/2),t.pattern){case"dot":case"circle":var i=0===t.size?0:t.size/2||2;t.angle?(o=e.width=e.height=Math.round(1.4*o),e.circles=[[o/4,o/4,i],[3*o/4,3*o/4,i]],"circle"==t.pattern&&(e.circles=e.circles.concat([[o/4+o,o/4,i],[o/4,o/4+o,i],[3*o/4-o,3*o/4,i],[3*o/4,3*o/4-o,i],[o/4+o,o/4+o,i],[3*o/4-o,3*o/4-o,i]]))):(e.width=e.height=o,e.circles=[[o/2,o/2,i]],"circle"==t.pattern&&(e.circles=e.circles.concat([[o/2+o,o/2,i],[o/2-o,o/2,i],[o/2,o/2+o,i],[o/2,o/2-o,i],[o/2+o,o/2+o,i],[o/2+o,o/2-o,i],[o/2-o,o/2+o,i],[o/2-o,o/2-o,i]])));break;case"tile":case"square":i=0===t.size?0:t.size/2||2,t.angle?(e.width=e.height=o,e.lines=[[o/2-i,o/2,o/2,o/2-i,o/2+i,o/2,o/2,o/2+i,o/2-i,o/2]]):(e.width=e.height=o,e.lines=[[o/2-i,o/2-i,o/2+i,o/2-i,o/2+i,o/2+i,o/2-i,o/2+i,o/2-i,o/2-i]]),"square"==t.pattern&&(e.repeat=[[0,0],[0,o],[o,0],[0,-o],[-o,0],[-o,-o],[o,o],[-o,o],[o,-o]]);break;case"cross":t.angle&&(t.angle=45);case"hatch":var r=Math.round(((t.angle||0)-90)%360);r>180&&(r-=360),r*=Math.PI/180;var s=Math.cos(r),n=Math.sin(r);if(Math.abs(n)<1e-4)e.width=e.height=o,e.lines=[[0,.5,o,.5]],e.repeat=[[0,0],[0,o]];else if(Math.abs(s)<1e-4)e.width=e.height=o,e.lines=[[.5,0,.5,o]],e.repeat=[[0,0],[o,0]],"cross"==t.pattern&&(e.lines.push([0,.5,o,.5]),e.repeat.push([0,o]));else{var a=e.width=Math.round(Math.abs(o/n))||1,l=e.height=Math.round(Math.abs(o/s))||1;"cross"==t.pattern?(e.lines=[[-a,-l,2*a,2*l],[2*a,-l,-a,2*l]],e.repeat=[[0,0]]):s*n>0?(e.lines=[[-a,-l,2*a,2*l]],e.repeat=[[0,0],[a,0],[0,l]]):(e.lines=[[2*a,-l,-a,2*l]],e.repeat=[[0,0],[-a,0],[0,l]])}e.stroke=0===t.size?0:t.size||4}return e};</script>
    <script>!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("ol/extent"),require("ol/proj"),require("ol/geom"),require("ol/Feature"),require("proj4"),require("ol/control/Control"),require("ol"),require("ol/proj/proj4"),require("ol/source"),require("ol/layer"),require("ol/control/OverviewMap"),require("ol/tilegrid"),require("ol/proj/Projection"),require("ol/format/GeoJSON"),require("ol/style")):"function"==typeof define&&define.amd?define(["ol/extent","ol/proj","ol/geom","ol/Feature","proj4","ol/control/Control","ol","ol/proj/proj4","ol/source","ol/layer","ol/control/OverviewMap","ol/tilegrid","ol/proj/Projection","ol/format/GeoJSON","ol/style"],e):"object"==typeof exports?exports.egip=e(require("ol/extent"),require("ol/proj"),require("ol/geom"),require("ol/Feature"),require("proj4"),require("ol/control/Control"),require("ol"),require("ol/proj/proj4"),require("ol/source"),require("ol/layer"),require("ol/control/OverviewMap"),require("ol/tilegrid"),require("ol/proj/Projection"),require("ol/format/GeoJSON"),require("ol/style")):t.egip=e(t["ol/extent"],t["ol/proj"],t["ol/geom"],t["ol/Feature"],t.proj4,t["ol/control/Control"],t.ol,t["ol/proj/proj4"],t["ol/source"],t["ol/layer"],t["ol/control/OverviewMap"],t["ol/tilegrid"],t["ol/proj/Projection"],t["ol/format/GeoJSON"],t["ol/style"])}(window,function(t,e,n,r,o,s,a,u,l,c,h,f,g,d,p){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=36)}([function(t,e){function n(t,e){return{type:"Feature",properties:e||{},geometry:t}}t.exports.feature=n,t.exports.point=function(t,e){if(!Array.isArray(t))throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");return n({type:"Point",coordinates:t.slice()},e)},t.exports.polygon=function(t,e){if(!t)throw new Error("No coordinates passed");for(var i=0;i<t.length;i++){var r=t[i];if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<r[r.length-1].length;o++)if(r[r.length-1][o]!==r[0][o])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e)},t.exports.lineString=function(t,e){if(!t)throw new Error("No coordinates passed");return n({type:"LineString",coordinates:t},e)},t.exports.featureCollection=function(t){return{type:"FeatureCollection",features:t}},t.exports.multiLineString=function(t,e){if(!t)throw new Error("No coordinates passed");return n({type:"MultiLineString",coordinates:t},e)},t.exports.multiPoint=function(t,e){if(!t)throw new Error("No coordinates passed");return n({type:"MultiPoint",coordinates:t},e)},t.exports.multiPolygon=function(t,e){if(!t)throw new Error("No coordinates passed");return n({type:"MultiPolygon",coordinates:t},e)},t.exports.geometryCollection=function(t,e){return n({type:"GeometryCollection",geometries:t},e)};var i={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373};t.exports.radiansToDistance=function(t,e){var n=i[e||"kilometers"];if(void 0===n)throw new Error("Invalid unit");return t*n},t.exports.distanceToRadians=function(t,e){var n=i[e||"kilometers"];if(void 0===n)throw new Error("Invalid unit");return t/n},t.exports.distanceToDegrees=function(t,e){var n=i[e||"kilometers"];if(void 0===n)throw new Error("Invalid unit");return t/n*57.2958}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(12);e.axios=i.default;var r=n(4);!function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(12));var o=r.getConfig(),s=o.baseURL,a=o.withCredentials;e.axiosEgip=i.default.create({baseURL:s,withCredentials:a}),e.defaultInterceptorId=e.axiosEgip.interceptors.response.use(function(t){return t.data?t.data:t},function(t){return Promise.reject(t)})},function(t,e,n){var i=n(7).getCoord,r=n(0).radiansToDistance;t.exports=function(t,e,n){var o=Math.PI/180,s=i(t),a=i(e),u=o*(a[1]-s[1]),l=o*(a[0]-s[0]),c=o*s[1],h=o*a[1],f=Math.pow(Math.sin(u/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(c)*Math.cos(h);return r(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),n)}},function(t,e,n){"use strict";var i=n(19),r=n(42),o=Object.prototype.toString;function s(t){return"[object Array]"===o.call(t)}function a(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===o.call(t)}function l(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),s(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}t.exports={isArray:s,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:r,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:u,isStream:function(t){return a(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function t(){var e={};function n(n,i){"object"==typeof e[i]&&"object"==typeof n?e[i]=t(e[i],n):e[i]=n}for(var i=0,r=arguments.length;i<r;i++)l(arguments[i],n);return e},extend:function(t,e,n){return l(e,function(e,r){t[r]=n&&"function"==typeof e?i(e,n):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r={removeDefaultInterceptor:!1,baseURL:location.origin,apiKey:"",withCredentials:!0,getTiles2gisUrl:function(){return a()+"//tile1.maps.2gis.com/tiles?layerType=nc&x={x}&y={y}&z={z}"},getUrlWmsViewMap:function(){return s()+"egip/views/wms/map"},getUrlWmsLayerMap:function(){return s()+"egip/layers/wms/map"},getUrlWmsClusterMap:function(t){return s()+"egip/clusters/"+t+"/wms/map"},getDefaultExtent3857:function(){return[3861458.3183532483,7345462.657468396,4513619.043682372,7674447.627207794]},getDefaultExtent77:function(){return[-68157.86324698909,-48437.373206405595,51179.470169958106,34785.7191956881]},getEgkoBounds:function(){return[-49221.441968847874,-58770.11777164895,32243.048891816907,45118.46376093146]},getTilesEgkoUrl:function(){return s()+"egip/basemaps/tile/egko_062018/MSK_77/{x}/{-y}/{z}"},getGeoserverUrl:function(){return a()+"//195.88.196.74:8080/geoserver/egip/wms"},getOverViewMapId:function(){return"overviewMap"},getTileLayerId:function(){return"tiles"},getLayerUID:function(t,e){return e?t+"@"+e:""+t},getJournalLayerUrl:function(t){return s()+"egip/services/journal/display/layers/"+t},getWMCSTilesUrl:function(){return s()+"egip/tiles/wms-c"},getSatelliteTilesVersion:function(){return"1"},getEgkoTilesVersion:function(){return"62018"},getEgkoTilesLayerName:function(){return"egko"},getSatelliteTilesLayerName:function(){return"sat"},get2gisCarroutingUrl:function(){return s()+"egip/carrouting/4.0.0/moscow"},get2gisCtxUrl:function(){return s()+"egip/ctx/2.0/moscow"},get2gisGeoUrl:function(){return s()+"egip/geo/search"}};function o(){return r}function s(){var t=o().baseURL||"";return"/"==t.substr(-1)?t:t+"/"}function a(){return-1!=location.protocol.indexOf("http")?location.protocol:"http:"}e.getConfig=o,e.setConfig=function(t){Object.assign(r,t),r.removeDefaultInterceptor&&i.axiosEgip.interceptors.response.eject(i.defaultInterceptorId),Object.assign(i.axiosEgip.defaults,{baseURL:r.baseURL,withCredentials:r.withCredentials})},e.setAxiosDefaults=function(t){Object.assign(i.axiosEgip.defaults,t)}},function(t,e,n){var i=n(7);function r(t,e){for(var n=!1,i=0,r=e.length-1;i<e.length;r=i++){var o=e[i][0],s=e[i][1],a=e[r][0],u=e[r][1];s>t[1]!=u>t[1]&&t[0]<(a-o)*(t[1]-s)/(u-s)+o&&(n=!n)}return n}t.exports=function(t,e){var n=i.getCoord(t),o=e.geometry.coordinates;"Polygon"===e.geometry.type&&(o=[o]);for(var s=0,a=!1;s<o.length&&!a;s++)if(r(n,o[s][0])){for(var u=!1,l=1;l<o[s].length&&!u;)r(n,o[s][l])&&(u=!0),l++;u||(a=!0)}return a}},function(t,e){function n(t,e,n){var i,r,o,s,a,u,l,c,h,f,g=0,d="FeatureCollection"===t.type,p="Feature"===t.type,v=d?t.features.length:1;for(i=0;i<v;i++)for(l=(f="GeometryCollection"===(h=d?t.features[i].geometry:p?t.geometry:t).type)?h.geometries.length:1,s=0;s<l;s++)if(c=(u=f?h.geometries[s]:h).coordinates,g=!n||"Polygon"!==u.type&&"MultiPolygon"!==u.type?0:1,"Point"===u.type)e(c);else if("LineString"===u.type||"MultiPoint"===u.type)for(r=0;r<c.length;r++)e(c[r]);else if("Polygon"===u.type||"MultiLineString"===u.type)for(r=0;r<c.length;r++)for(o=0;o<c[r].length-g;o++)e(c[r][o]);else{if("MultiPolygon"!==u.type)throw new Error("Unknown Geometry Type");for(r=0;r<c.length;r++)for(o=0;o<c[r].length;o++)for(a=0;a<c[r][o].length-g;a++)e(c[r][o][a])}}function i(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties);break;case"Feature":e(t.properties)}}t.exports.coordEach=n,t.exports.coordReduce=function(t,e,i,r){return n(t,function(t){i=e(i,t)},r),i},t.exports.propEach=i,t.exports.propReduce=function(t,e,n){return i(t,function(t){n=e(n,t)}),n},t.exports.featureEach=function(t,e){if("Feature"===t.type)e(t);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n])},t.exports.coordAll=function(t){var e=[];return n(t,function(t){e.push(t)}),e}},function(t,e){t.exports.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},t.exports.collectionOf=function(t,e,n){if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var i=0;i<t.features.length;i++){var r=t.features[i];if(!r||"Feature"!==r.type||!r.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!r.geometry||r.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+r.geometry.type)}},t.exports.featureOf=function(t,e,n){if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},t.exports.getCoord=function(t){if(Array.isArray(t)&&"number"==typeof t[0]&&"number"==typeof t[1])return t;if(t){if("Feature"===t.type&&t.geometry&&"Point"===t.geometry.type&&Array.isArray(t.geometry.coordinates))return t.geometry.coordinates;if("Point"===t.type&&Array.isArray(t.coordinates))return t.coordinates}throw new Error("A coordinate, feature, or point geometry is required")}},function(t,e,n){var i=n(6).coordEach;t.exports=function(t){var e=[1/0,1/0,-1/0,-1/0];return i(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}},function(t,e,n){!function(t){"use strict";function e(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function n(){}function i(){}function r(){}function o(){}function s(){}function a(){}function u(){}function l(t){this.message=t}function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function h(){if(0===arguments.length)l.call(this);else if(1===arguments.length){var t=arguments[0];l.call(this,t)}}function f(){}function g(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)g.call(this,0,0);else if(1===arguments.length){var t=arguments[0];g.call(this,t.x,t.y,t.z)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];g.call(this,e,n,g.NULL_ORDINATE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.x=i,this.y=r,this.z=o}}function d(){if(this.dimensionsToTest=2,0===arguments.length)d.call(this,2);else if(1===arguments.length){var t=arguments[0];if(2!==t&&3!==t)throw new i("only 2 or 3 dimensions may be specified");this.dimensionsToTest=t}}function p(){}function v(){}function y(t){this.message=t||""}function m(){}function x(t){this.message=t||""}function E(t){this.message=t||""}function I(){this.array_=[],arguments[0]instanceof v&&this.addAll(arguments[0])}function N(){if(I.apply(this),0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}function C(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof g){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof C){var e=arguments[0];this.init(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.init(r,o,s,a)}}function w(){}function S(){w.call(this,"Projective point not representable on the Cartesian plane.")}function L(){}function T(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1}function R(){}function b(t){this.str=t}function O(t){this.value=t}function P(){}function _(){if(this.hi=0,this.lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof _){var e=arguments[0];this.init(e)}else if("string"==typeof arguments[0]){var n=arguments[0];_.call(this,_.parse(n))}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.init(i,r)}}function M(){}function A(){}function D(){}function F(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof F&&arguments[1]instanceof F){var i=arguments[0],r=arguments[1];this.x=i.y*r.w-r.y*i.w,this.y=r.x*i.w-i.x*r.w,this.w=i.x*r.y-r.x*i.y}else if(arguments[0]instanceof g&&arguments[1]instanceof g){var o=arguments[0],s=arguments[1];this.x=o.y-s.y,this.y=s.x-o.x,this.w=o.x*s.y-s.x*o.y}}else if(3===arguments.length){var a=arguments[0],u=arguments[1],l=arguments[2];this.x=a,this.y=u,this.w=l}else if(4===arguments.length){var c=arguments[0],h=arguments[1],f=arguments[2],d=arguments[3],p=c.y-h.y,v=h.x-c.x,y=c.x*h.y-h.x*c.y,m=f.y-d.y,x=d.x-f.x,E=f.x*d.y-d.x*f.y;this.x=v*E-x*y,this.y=m*y-p*E,this.w=p*x-m*v}}function G(){}function U(){}function B(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID()}function q(){}function k(){}function V(){}function z(){}function Y(){}function X(){}function j(){}function H(){}function W(){}function Z(){}function K(){}function J(){}function Q(){this.array_=[],arguments[0]instanceof v&&this.addAll(arguments[0])}function $(t){return null==t?Do:t.color}function tt(t){return null==t?null:t.parent}function et(t,e){null!==t&&(t.color=e)}function nt(t){return null==t?null:t.left}function it(t){return null==t?null:t.right}function rt(){this.root_=null,this.size_=0}function ot(){}function st(){}function at(){this.array_=[],arguments[0]instanceof v&&this.addAll(arguments[0])}function ut(){}function lt(){}function ct(){}function ht(){}function ft(){this.geometries=null;var t=arguments[0],e=arguments[1];if(B.call(this,e),null===t&&(t=[]),B.hasNullElements(t))throw new i("geometries must not contain null elements");this.geometries=t}function gt(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function dt(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,1===arguments.length){var t=arguments[0];dt.call(this,t,k.MOD2_BOUNDARY_RULE)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.geom=e,this.geomFact=e.getFactory(),this.bnRule=n}}function pt(){this.count=null}function vt(){}function yt(){}function mt(){}function xt(){this.points=null;var t=arguments[0],e=arguments[1];B.call(this,e),this.init(t)}function Et(){}function It(){this.coordinates=null;var t=arguments[0],e=arguments[1];B.call(this,e),this.init(t)}function Nt(){}function Ct(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(B.call(this,n),null===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),B.hasNullElements(e))throw new i("holes must not contain null elements");if(t.isEmpty()&&B.hasNonEmptyElements(e))throw new i("shell is empty but holes are not");this.shell=t,this.holes=e}function wt(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function St(){if(arguments[0]instanceof g&&arguments[1]instanceof qt){var t=arguments[0],e=arguments[1];St.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(T(arguments[0],A)&&arguments[1]instanceof qt){var n=arguments[0],i=arguments[1];xt.call(this,n,i),this.validateConstruction()}}function Lt(){var t=arguments[0],e=arguments[1];ft.call(this,t,e)}function Tt(){if(this.factory=null,this.isUserDataCopied=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.factory=t}}function Rt(){}function bt(){}function Ot(){}function Pt(){}function _t(){if(this.dimension=3,this.coordinates=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];_t.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(var n=0;e>n;n++)this.coordinates[n]=new g}else if(T(arguments[0],A)){var i=arguments[0];if(null===i)return this.coordinates=new Array(0).fill(null),null;this.dimension=i.getDimension(),this.coordinates=new Array(i.size()).fill(null);for(n=0;n<this.coordinates.length;n++)this.coordinates[n]=i.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this.coordinates=r,this.dimension=o,null===r&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this.coordinates=new Array(s).fill(null),this.dimension=a;for(n=0;s>n;n++)this.coordinates[n]=new g}}function Mt(){}function At(t,e){return t===e||t!=t&&e!=e}function Dt(t,e,n){var i=[0],r=!1;return t.push(i),{next:function(){var o,s=i[0];return!r&&s<e.length?(o=n?[e[s],n[s]]:e[s],i[0]++):(r=!0,t.splice(t.indexOf(i),1)),{done:r,value:o}}}}function Ft(){return this._values.length}function Gt(){this.map_=new qo}function Ut(){if(this.modelType=null,this.scale=null,0===arguments.length)this.modelType=Ut.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof Bt){var t=arguments[0];this.modelType=t,t===Ut.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var e=arguments[0];this.modelType=Ut.FIXED,this.setScale(e)}else if(arguments[0]instanceof Ut){var n=arguments[0];this.modelType=n.modelType,this.scale=n.scale}}function Bt(){this.name=null;var t=arguments[0];this.name=t,Bt.nameToTypeMap.put(t,this)}function qt(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,0===arguments.length)qt.call(this,new Ut,0);else if(1===arguments.length){if(T(arguments[0],G)){var t=arguments[0];qt.call(this,new Ut,0,t)}else if(arguments[0]instanceof Ut){var e=arguments[0];qt.call(this,e,0,qt.getDefaultCoordinateSequenceFactory())}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];qt.call(this,n,i,qt.getDefaultCoordinateSequenceFactory())}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.precisionModel=r,this.coordinateSequenceFactory=s,this.SRID=o}}function kt(t){this.geometryFactory=t||new qt}function Vt(t){this.parser=new kt(t)}function zt(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new g,this.intPt[1]=new g,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function Yt(){zt.apply(this)}function Xt(){}function jt(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t}function Ht(){}function Wt(){if(this.p0=null,this.p1=null,0===arguments.length)Wt.call(this,new g,new g);else if(1===arguments.length){var t=arguments[0];Wt.call(this,t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3];Wt.call(this,new g(i,r),new g(o,s))}}function Zt(){if(this.matrix=null,0===arguments.length)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(lt.FALSE);else if(1===arguments.length)if("string"==typeof arguments[0]){var t=arguments[0];Zt.call(this),this.set(t)}else if(arguments[0]instanceof Zt){var e=arguments[0];Zt.call(this),this.matrix[L.INTERIOR][L.INTERIOR]=e.matrix[L.INTERIOR][L.INTERIOR],this.matrix[L.INTERIOR][L.BOUNDARY]=e.matrix[L.INTERIOR][L.BOUNDARY],this.matrix[L.INTERIOR][L.EXTERIOR]=e.matrix[L.INTERIOR][L.EXTERIOR],this.matrix[L.BOUNDARY][L.INTERIOR]=e.matrix[L.BOUNDARY][L.INTERIOR],this.matrix[L.BOUNDARY][L.BOUNDARY]=e.matrix[L.BOUNDARY][L.BOUNDARY],this.matrix[L.BOUNDARY][L.EXTERIOR]=e.matrix[L.BOUNDARY][L.EXTERIOR],this.matrix[L.EXTERIOR][L.INTERIOR]=e.matrix[L.EXTERIOR][L.INTERIOR],this.matrix[L.EXTERIOR][L.BOUNDARY]=e.matrix[L.EXTERIOR][L.BOUNDARY],this.matrix[L.EXTERIOR][L.EXTERIOR]=e.matrix[L.EXTERIOR][L.EXTERIOR]}}function Kt(){this.areaBasePt=null,this.triangleCent3=new g,this.areasum2=0,this.cg3=new g,this.lineCentSum=new g,this.totalLength=0,this.ptCount=0,this.ptCentSum=new g;var t=arguments[0];this.areaBasePt=null,this.add(t)}function Jt(t){this.message=t||""}function Qt(){this.array_=[]}function $t(){this.treeSet=new at,this.list=new I}function te(){if(this.geomFactory=null,this.inputPts=null,1===arguments.length){var t=arguments[0];te.call(this,te.extractCoordinates(t),t.getFactory())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputPts=$t.filterCoordinates(e),this.geomFactory=n}}function ee(){this.origin=null;var t=arguments[0];this.origin=t}function ne(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function ie(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new Wt,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof xt&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];ie.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1];this.srcPts=n,this._isClosed=ie.isClosed(n),this.snapTolerance=i}}function re(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t}function oe(){if(ne.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this.snapTolerance=t,this.snapPts=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.snapTolerance=n,this.snapPts=i,this.isSelfSnap=r}}function se(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function ae(){this.commonCoord=null,this.ccFilter=new ue}function ue(){this.commonBitsX=new se,this.commonBitsY=new se}function le(){this.trans=null;var t=arguments[0];this.trans=t}function ce(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries()}function he(){if(this.boundaryRule=k.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new i("Rule must be non-null");this.boundaryRule=t}}function fe(){}function ge(){}function de(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function pe(){}function ve(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e}function ye(){this._size=null,this.items=null,this._size=0,this.items=new I,this.items.add(null)}function me(){}function xe(){}function Ee(){if(this.childBoundables=new I,this.bounds=null,this.level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.level=t}}function Ie(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=n,this._distance=this.distance()}function Ne(){if(this.root=null,this.built=!1,this.itemBoundables=new I,this.nodeCapacity=null,0===arguments.length)Ne.call(this,Ne.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];f.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t}}function Ce(){}function we(){if(0===arguments.length)we.call(this,we.DEFAULT_NODE_CAPACITY);else if(1===arguments.length){var t=arguments[0];Ne.call(this,t)}}function Se(){var t=arguments[0];Ee.call(this,t)}function Le(){}function Te(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.segString=t,this.coord=new g(e),this.segmentIndex=n,this.segmentOctant=i,this._isInterior=!e.equals2D(t.getCoordinate(n))}function Re(){this.nodeMap=new rt,this.edge=null;var t=arguments[0];this.edge=t}function be(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var t=arguments[0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode()}function Oe(){}function Pe(){this.nodeList=new Re(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function _e(){this.tempEnv1=new C,this.tempEnv2=new C,this.overlapSeg1=new Wt,this.overlapSeg2=new Wt}function Me(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.pts=t,this.start=e,this.end=n,this.context=i}function Ae(){}function De(){}function Fe(){}function Ge(){if(this.segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}function Ue(){if(this.monoChains=new I,this.index=new we,this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,0===arguments.length);else if(1===arguments.length){var t=arguments[0];Ge.call(this,t)}}function Be(){_e.apply(this),this.si=null;var t=arguments[0];this.si=t}function qe(){if(this.pt=null,1===arguments.length){var t=arguments[0];l.call(this,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];l.call(this,qe.msgWithCoord(e,n)),this.pt=new g(n)}}function ke(){}function Ve(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new I,this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null}function ze(){this.li=new Yt,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t}function Ye(){this.nv=null;var t=arguments[0];this.nv=new ze(Ye.toSegmentStrings(t))}function Xe(){this.mapOp=null;var t=arguments[0];this.mapOp=t}function je(){}function He(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[je.ON]=e}else if(arguments[0]instanceof He){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var i=0;i<this.location.length;i++)this.location[i]=n.location[i]}}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.init(3),this.location[je.ON]=r,this.location[je.LEFT]=o,this.location[je.RIGHT]=s}}function We(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new He(t),this.elt[1]=new He(t)}else if(arguments[0]instanceof We){var e=arguments[0];this.elt[0]=new He(e.elt[0]),this.elt[1]=new He(e.elt[1])}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.elt[0]=new He(L.NONE),this.elt[1]=new He(L.NONE),this.elt[n].setLocation(i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.elt[0]=new He(r,o,s),this.elt[1]=new He(r,o,s)}else if(4===arguments.length){var a=arguments[0],u=arguments[1],l=arguments[2],c=arguments[3];this.elt[0]=new He(L.NONE,L.NONE,L.NONE),this.elt[1]=new He(L.NONE,L.NONE,L.NONE),this.elt[a].setLocations(u,l,c)}}function Ze(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new I,this.pts=new I,this.label=new We(L.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new I,this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing()}function Ke(){var t=arguments[0],e=arguments[1];Ze.call(this,t,e)}function Je(){var t=arguments[0],e=arguments[1];Ze.call(this,t,e)}function Qe(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.label=t}}function $e(){Qe.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new We(0,L.NONE)}function tn(){this.nodeMap=new rt,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function en(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,1===arguments.length){var t=arguments[0];this.edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];en.call(this,e,n,i,null)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];en.call(this,r),this.init(o,s),this.label=a}}function nn(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(en.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}function rn(){}function on(){if(this.edges=new I,this.nodes=null,this.edgeEndList=new I,0===arguments.length)this.nodes=new tn(new rn);else if(1===arguments.length){var t=arguments[0];this.nodes=new tn(t)}}function sn(){this.geometryFactory=null,this.shellList=new I;var t=arguments[0];this.geometryFactory=t}function an(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new I,this.resultLineList=new I;var t=arguments[0],e=arguments[1],n=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=n}function un(){this.op=null,this.geometryFactory=null,this.resultPointList=new I;var t=arguments[0],e=arguments[1];arguments[2],this.op=t,this.geometryFactory=e}function ln(){}function cn(){this.geom=null;var t=arguments[0];this.geom=t}function hn(){this.edgeMap=new rt,this.edgeList=null,this.ptInAreaLocation=[L.NONE,L.NONE]}function fn(){hn.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function gn(){rn.apply(this)}function dn(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function pn(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.eventType=pn.DELETE,this.xValue=t,this.insertEvent=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.eventType=pn.INSERT,this.label=n,this.xValue=i,this.obj=r}}function vn(){}function yn(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=n}function mn(){vn.apply(this),this.events=new I,this.nOverlaps=null}function xn(){this.min=r.POSITIVE_INFINITY,this.max=r.NEGATIVE_INFINITY}function En(){}function In(){xn.apply(this),this.item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.min=t,this.max=e,this.item=n}function Nn(){xn.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2)}function Cn(){this.leaves=new I,this.root=null,this.level=0}function wn(){if(this.lines=null,this.isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this.lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.lines=e,this.isForcedToLineString=n}}function Sn(){this.items=new I}function Ln(){this.index=null;var t=arguments[0];if(!T(t,Nt))throw new i("Argument must be Polygonal");this.index=new Rn(t)}function Tn(){this.counter=null;var t=arguments[0];this.counter=t}function Rn(){this.index=new Cn;var t=arguments[0];this.init(t)}function bn(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new g(t),this.segmentIndex=e,this.dist=n}function On(){this.nodeMap=new rt,this.edge=null;var t=arguments[0];this.edge=t}function Pn(){}function _n(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new C,this.env2=new C;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Pn;this.startIndex=e.getChainStartIndices(this.pts)}function Mn(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;2>t;t++)for(var e=0;3>e;e++)this.depth[t][e]=Mn.NULL_VALUE}function An(){if(Qe.apply(this),this.pts=null,this.env=null,this.eiList=new On(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new Mn,this.depthDelta=0,1===arguments.length){var t=arguments[0];An.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pts=e,this.label=n}}function Dn(){if(on.apply(this),this.parentGeom=null,this.lineEdgeMap=new Gt,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new he,2===arguments.length){var t=arguments[0],e=arguments[1];Dn.call(this,t,e,k.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.argIndex=n,this.parentGeom=i,this.boundaryNodeRule=r,null!==i&&this.add(i)}}function Fn(){if(this.li=new Yt,this.resultPrecisionModel=null,this.arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new Dn(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Fn.call(this,e,n,k.OGC_SFS_BOUNDARY_RULE)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];i.getPrecisionModel().compareTo(r.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(r.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new Dn(0,i,o),this.arg[1]=new Dn(1,r,o)}}function Gn(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=Gn.orientation(t)}function Un(){this.edges=new I,this.ocaMap=new rt}function Bn(){this.ptLocator=new he,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new Un,this.resultPolyList=new I,this.resultLineList=new I,this.resultPointList=new I;var t=arguments[0],e=arguments[1];Fn.call(this,t,e),this.graph=new on(new gn),this.geomFact=t.getFactory()}function qn(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()}function kn(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e}function Vn(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var t=arguments[0];this.factory=t.getFactory(),this.add(t)}function zn(){this.poly=null,this.centreY=null,this.hiY=r.MAX_VALUE,this.loY=-r.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=Vn.avg(this.loY,this.hiY)}function Yn(){this.centroid=null,this.minDistance=r.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),null===this.interiorPoint&&this.addEndpoints(t)}function Xn(){this.centroid=null,this.minDistance=r.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t)}function jn(){}function Hn(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}function Wn(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var t=arguments[0];this.input=t}function Zn(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new Wt,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,1===arguments.length){var t=arguments[0];Zn.call(this,t,!1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isConvex=n}}function Kn(){this.inputGeom=null,this.distanceTolerance=null;var t=arguments[0];this.inputGeom=t}function Jn(){ne.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}function Qn(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function $n(){this._isMarked=!1;var t=arguments[0];Qn.call(this,t)}function ti(){this.vertexMap=new Gt}function ei(){this._isStart=!1;var t=arguments[0];$n.call(this,t)}function ni(){ti.apply(this)}function ii(){this.result=null,this.factory=null,this.graph=null,this.lines=new I,this.nodeEdgeStack=new Qt,this.ringStartEdge=null,this.graph=new ni}function ri(){this.items=new I,this.subnode=new Array(4).fill(null)}function oi(){}function si(){this.pt=new g,this.level=0,this.env=null;var t=arguments[0];this.computeKey(t)}function ai(){ri.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2}function ui(){}function li(){ri.apply(this)}function ci(){this.root=null,this.minExtent=1,this.root=new li}function hi(t){this.geometryFactory=t||new qt}function fi(t){this.geometryFactory=t||new qt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new hi(this.geometryFactory)}function gi(){this.parser=new hi(this.geometryFactory)}function di(t){this.geometryFactory=t||new qt,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new kt(this.geometryFactory)}function pi(t){return[t.x,t.y]}function vi(t){this.geometryFactory=t||new qt}function yi(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];yi.call(this,t,e,0,0)}else if(4===arguments.length){var n=arguments[0],i=arguments[1];arguments[2],arguments[3],this.noder=n,this.scaleFactor=i,this.isScaled=!this.isIntegerPrecision()}}function mi(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,1===arguments.length){var t=arguments[0];this.inputGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isClosedEndpointsInInterior=!n.isInBoundary(2)}}function xi(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function Ei(){if(this.quadrantSegments=Ei.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=Ei.CAP_ROUND,this.joinStyle=Ei.JOIN_ROUND,this.mitreLimit=Ei.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=Ei.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3];this.setQuadrantSegments(i),this.setEndCapStyle(r),this.setJoinStyle(o),this.setMitreLimit(s)}}function Ii(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function Ni(){this.array_=[]}function Ci(){this.finder=null,this.dirEdgeList=new I,this.nodes=new I,this.rightMostCoord=null,this.env=null,this.finder=new Ii}function wi(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=Ht.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t}function Si(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new I}function Li(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new Wt,this.seg1=new Wt,this.offset0=new Wt,this.offset1=new Wt,this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new Yt,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===Ei.JOIN_ROUND&&(this.closingSegLengthFactor=Li.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}function Ti(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e}function Ri(){this.subgraphs=null,this.seg=new Wt,this.cga=new Ht;var t=arguments[0];this.subgraphs=t}function bi(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new Wt(t),this.leftDepth=e}function Oi(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new I;var t=arguments[0],e=arguments[1],n=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=n}function Pi(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this.li=t}function _i(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new Un;var t=arguments[0];this.bufParams=t}function Mi(){this.li=new Yt,this.segStrings=null;var t=arguments[0];this.segStrings=t}function Ai(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=n,0>=e)throw new i("Scale factor must be non-zero");1!==e&&(this.pt=new g(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new g,this.p1Scaled=new g),this.initCorners(this.pt)}function Di(){this.tempEnv1=new C,this.selectedSegment=new Wt}function Fi(){this.index=null;var t=arguments[0];this.index=t}function Gi(){Di.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=n}function Ui(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new I}function Bi(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new Yt,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()}function qi(){if(this.argGeom=null,this.distance=null,this.bufParams=new Ei,this.resultGeometry=null,this.saveException=null,1===arguments.length){var t=arguments[0];this.argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.argGeom=e,this.bufParams=n}}function ki(){this.comps=null;var t=arguments[0];this.comps=t}function Vi(){if(this.component=null,this.segIndex=null,this.pt=null,2===arguments.length){var t=arguments[0],e=arguments[1];Vi.call(this,t,Vi.INSIDE_AREA,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.component=n,this.segIndex=i,this.pt=r}}function zi(){this.pts=null;var t=arguments[0];this.pts=t}function Yi(){this.locations=null;var t=arguments[0];this.locations=t}function Xi(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new he,this.minDistanceLocation=null,this.minDistance=r.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];Xi.call(this,t,e,0)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],o=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=n,this.geom[1]=i,this.terminateDistance=o}}function ji(){this.factory=null,this.directedEdges=new I,this.coordinates=null;var t=arguments[0];this.factory=t}function Hi(){this._isMarked=!1,this._isVisited=!1,this.data=null}function Wi(){Hi.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.from=t,this.to=e,this.edgeDirection=i,this.p0=t.getCoordinate(),this.p1=n;var r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y;this.quadrant=Ae.quadrant(r,o),this.angle=Math.atan2(o,r)}function Zi(){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];Wi.call(this,t,e,n,i)}function Ki(){if(Hi.apply(this),this.dirEdge=null,0===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}function Ji(){this.outEdges=new I,this.sorted=!1}function Qi(){if(Hi.apply(this),this.pt=null,this.deStar=null,1===arguments.length){var t=arguments[0];Qi.call(this,t,new Ji)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.pt=e,this.deStar=n}}function $i(){Ki.apply(this),this.line=null;var t=arguments[0];this.line=t}function tr(){this.nodeMap=new rt}function er(){this.edges=new Q,this.dirEdges=new Q,this.nodeMap=new tr}function nr(){er.apply(this)}function ir(){this.graph=new nr,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function rr(){this.edgeRing=null,this.next=null,this.label=-1;var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];Wi.call(this,t,e,n,i)}function or(){Ki.apply(this),this.line=null;var t=arguments[0];this.line=t}function sr(){this.factory=null,this.deList=new I,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this.factory=t}function ar(){}function ur(){er.apply(this),this.factory=null;var t=arguments[0];this.factory=t}function lr(){if(this.lineStringAdder=new cr(this),this.graph=null,this.dangles=new I,this.cutEdges=new I,this.invalidRingLines=new I,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,0===arguments.length)lr.call(this,!1);else if(1===arguments.length){var t=arguments[0];this.extractOnlyPolygonal=t}}function cr(){this.p=null;var t=arguments[0];this.p=t}function hr(){}function fr(){if(this.edgeEnds=new I,1===arguments.length){var t=arguments[0];fr.call(this,null,t)}else if(2===arguments.length){var e=(arguments[0],arguments[1]);en.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new We(e.getLabel())),this.insert(e)}}function gr(){hn.apply(this)}function dr(){var t=arguments[0],e=arguments[1];$e.call(this,t,e)}function pr(){rn.apply(this)}function vr(){this.li=new Yt,this.ptLocator=new he,this.arg=null,this.nodes=new tn(new pr),this.im=null,this.isolatedEdges=new I,this.invalidPoint=null;var t=arguments[0];this.arg=t}function yr(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal()}function mr(){this.li=new Yt,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new g(t.getMinX(),t.getMinY()),this.diagUp1=new g(t.getMaxX(),t.getMaxY()),this.diagDown0=new g(t.getMinX(),t.getMaxY()),this.diagDown1=new g(t.getMaxX(),t.getMinY())}function xr(){this._isDone=!1}function Er(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()}function Ir(){xr.apply(this),this.rectEnv=null,this._intersects=!1;var t=arguments[0];this.rectEnv=t}function Nr(){xr.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()}function Cr(){xr.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new g,this.p1=new g;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new mr(this.rectEnv)}function wr(){if(this._relate=null,2===arguments.length){var t=arguments[0],e=arguments[1];Fn.call(this,t,e),this._relate=new vr(this.arg)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];Fn.call(this,n,i,r),this._relate=new vr(this.arg)}}function Sr(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=Sr.extractFactory(t),this.inputGeoms=t}function Lr(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()}function Tr(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e}function Rr(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,null===this.inputPolys&&(this.inputPolys=new I)}function br(){if(this.polygons=new I,this.lines=new I,this.points=new I,this.geomFact=null,1===arguments.length){if(T(arguments[0],v)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof B){var e=arguments[0];this.extract(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.geomFact=i,this.extract(n)}}function Or(){this.geometryFactory=new qt,this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t}function Pr(){this.items=new I,this.subnode=[null,null]}function _r(){if(this.min=null,this.max=null,0===arguments.length)this.min=0,this.max=0;else if(1===arguments.length){var t=arguments[0];this.init(t.min,t.max)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.init(e,n)}}function Mr(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t)}function Ar(){Pr.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2}function Dr(){Pr.apply(this)}function Fr(){this.root=null,this.minExtent=1,this.root=new Dr}function Gr(){}function Ur(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new _r;var t=arguments[0];this.ring=t,this.buildIndex()}function Br(){Di.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function qr(){this.nodes=new tn(new pr)}function kr(){this.li=new Yt,this.geomGraph=null,this.nodeGraph=new qr,this.invalidPoint=null;var t=arguments[0];this.geomGraph=t}function Vr(){this.graph=null,this.rings=new I,this.totalEnv=new C,this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t}function zr(){if(this.errorType=null,this.pt=null,1===arguments.length){var t=arguments[0];zr.call(this,t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.errorType=e,null!==n&&(this.pt=n.copy())}}function Yr(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t}function Xr(){Tt.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var t=arguments[0],e=arguments[1];this.targetPM=t,this.removeCollapsed=e}function jr(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var t=arguments[0];this.targetPM=t}function Hr(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new Wt;var t=arguments[0];this.pts=t}function Wr(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var t=arguments[0];this.inputGeom=t}function Zr(){ne.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var t=arguments[0],e=arguments[1];this.isEnsureValidTopology=t,this.distanceTolerance=e}function Kr(){if(this.parent=null,this.index=null,2===arguments.length){var t=arguments[0],e=arguments[1];Kr.call(this,t,e,null,-1)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=arguments[3];Wt.call(this,n,i),this.parent=r,this.index=o}}function Jr(){if(this.parentLine=null,this.segs=null,this.resultSegs=new I,this.minimumSize=null,1===arguments.length){var t=arguments[0];Jr.call(this,t,2)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.parentLine=e,this.minimumSize=n,this.init()}}function Qr(){this.index=new ci}function $r(){this.querySeg=null,this.items=new I;var t=arguments[0];this.querySeg=t}function to(){this.li=new Yt,this.inputIndex=new Qr,this.outputIndex=new Qr,this.line=null,this.linePts=null,this.distanceTolerance=0;var t=arguments[0],e=arguments[1];this.inputIndex=t,this.outputIndex=e}function eo(){this.inputIndex=new Qr,this.outputIndex=new Qr,this.distanceTolerance=0}function no(){this.inputGeom=null,this.lineSimplifier=new eo,this.linestringMap=null;var t=arguments[0];this.inputGeom=t}function io(){ne.apply(this),this.linestringMap=null;var t=arguments[0];this.linestringMap=t}function ro(){this.tps=null;var t=arguments[0];this.tps=t}function oo(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var t=arguments[0];this.seg=t,this.segLen=t.getLength()}function so(){}function ao(){}function uo(){}function lo(){if(this.p=null,1===arguments.length){var t=arguments[0];this.p=new g(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p=new g(e,n)}else if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.p=new g(i,r,o)}}function co(){this._isOnConstraint=null,this.constraint=null;var t=arguments[0];lo.call(this,t)}function ho(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function fo(){this.subdiv=null,this.isUsingTolerance=!1;var t=arguments[0];this.subdiv=t,this.isUsingTolerance=t.getTolerance()>0}function go(){}function po(){this.subdiv=null,this.lastEdge=null;var t=arguments[0];this.subdiv=t,this.init()}function vo(){if(this.seg=null,1===arguments.length){if("string"==typeof arguments[0]){var t=arguments[0];l.call(this,t)}else if(arguments[0]instanceof Wt){var e=arguments[0];l.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new Wt(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];l.call(this,vo.msgWithSpatial(n,i)),this.seg=new Wt(i)}}function yo(){}function mo(){this.visitedKey=0,this.quadEdges=new I,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new Wt,this.triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this.tolerance=e,this.edgeCoincidenceTolerance=e/mo.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new po(this)}function xo(){}function Eo(){this.triList=new I}function Io(){this.triList=new I}function No(){this.coordList=new N,this.triCoords=new I}function Co(){if(this.ls=null,this.data=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.ls=new Wt(t,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.ls=new Wt(n,i),this.data=r}else if(6===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3],l=arguments[4],c=arguments[5];Co.call(this,new g(o,s,a),new g(u,l,c))}else if(7===arguments.length){var h=arguments[0],f=arguments[1],d=arguments[2],p=arguments[3],v=arguments[4],y=arguments[5],m=arguments[6];Co.call(this,new g(h,f,d),new g(p,v,y),m)}}function wo(){}function So(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,2===arguments.length){var t=arguments[0],e=arguments[1];this.p=new g(t),this.left=null,this.right=null,this.count=1,this.data=e}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.p=new g(n,i),this.left=null,this.right=null,this.count=1,this.data=r}}function Lo(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,0===arguments.length)Lo.call(this,0);else if(1===arguments.length){var t=arguments[0];this.tolerance=t}}function To(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var t=arguments[0],e=arguments[1];this.p=t,this.tolerance=e}function Ro(){this.initialVertices=null,this.segVertices=null,this.segments=new I,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new ao,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var t=arguments[0],e=arguments[1];this.initialVertices=new I(t),this.tolerance=e,this.kdt=new Lo(e)}function bo(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function Oo(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new rt}function Po(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function _o(){}Array.prototype.fill||(Array.prototype.fill=function(t){for(var e=Object(this),n=parseInt(e.length,10),i=arguments[1],r=parseInt(i,10)||0,o=0>r?Math.max(n+r,0):Math.min(r,n),s=arguments[2],a=void 0===s?n:parseInt(s,10)||0,u=0>a?Math.max(n+a,0):Math.min(a,n);u>o;o++)e[o]=t;return e}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return 0>t?Math.ceil(t):Math.floor(t)},e(n.prototype,{interfaces_:function(){return[]},getClass:function(){return n}}),n.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n},r.isNaN=function(t){return Number.isNaN(t)},r.doubleToLongBits=function(t){return t},r.longBitsToDouble=function(t){return t},r.isInfinite=function(t){return!Number.isFinite(t)},r.MAX_VALUE=Number.MAX_VALUE,c(h,l),e(h.prototype,{interfaces_:function(){return[]},getClass:function(){return h}}),e(f.prototype,{interfaces_:function(){return[]},getClass:function(){return f}}),f.shouldNeverReachHere=function(){if(0===arguments.length)f.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new h("Should never reach here"+(null!==t?": "+t:""))}},f.isTrue=function(){if(1===arguments.length){var t=arguments[0];f.isTrue(t,null)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(!e)throw null===n?new h:new h(n)}},f.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];f.equals(t,e,null)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(!i.equals(n))throw new h("Expected "+n+" but encountered "+i+(null!==r?": "+r:""))}},e(g.prototype,{setOrdinate:function(t,e){switch(t){case g.X:this.x=e;break;case g.Y:this.y=e;break;case g.Z:this.z=e;break;default:throw new i("Invalid ordinate index: "+t)}},equals2D:function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!n.equalsWithTolerance(this.x,e.x,i)&&!!n.equalsWithTolerance(this.y,e.y,i)}},getOrdinate:function(t){switch(t){case g.X:return this.x;case g.Y:return this.y;case g.Z:return this.z}throw new i("Invalid ordinate index: "+t)},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||r.isNaN(this.z)&&r.isNaN(t.z))},equals:function(t){return t instanceof g&&this.equals2D(t)},equalInZ:function(t,e){return n.equalsWithTolerance(this.z,t.z,e)},compareTo:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},clone:function(){try{var t=null;return null}catch(t){if(t instanceof CloneNotSupportedException)return f.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw t}},copy:function(){return new g(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return Math.sqrt(e*e+n*n+i*i)},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return 37*(t=37*t+g.hashCode(this.x))+g.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[o,s,u]},getClass:function(){return g}}),g.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=r.doubleToLongBits(t);return Math.trunc(e^e>>>32)}},e(d.prototype,{compare:function(t,e){var n=t,i=e,r=d.compare(n.x,i.x);if(0!==r)return r;var o=d.compare(n.y,i.y);return 0!==o?o:this.dimensionsToTest<=2?0:d.compare(n.z,i.z)},interfaces_:function(){return[a]},getClass:function(){return d}}),d.compare=function(t,e){return e>t?-1:t>e?1:r.isNaN(t)?r.isNaN(e)?0:-1:r.isNaN(e)?1:0},g.DimensionalComparator=d,g.serialVersionUID=0x5cbf2c235c7e5800,g.NULL_ORDINATE=r.NaN,g.X=0,g.Y=1,g.Z=2,p.prototype.hasNext=function(){},p.prototype.next=function(){},p.prototype.remove=function(){},v.prototype.add=function(){},v.prototype.addAll=function(){},v.prototype.isEmpty=function(){},v.prototype.iterator=function(){},v.prototype.size=function(){},v.prototype.toArray=function(){},v.prototype.remove=function(){},y.prototype=new Error,y.prototype.name="IndexOutOfBoundsException",m.prototype=Object.create(v.prototype),m.prototype.constructor=m,m.prototype.get=function(){},m.prototype.set=function(){},m.prototype.isEmpty=function(){},x.prototype=new Error,x.prototype.name="NoSuchElementException",E.prototype=new Error,E.prototype.name="OperationNotSupported",I.prototype=Object.create(m.prototype),I.prototype.constructor=I,I.prototype.ensureCapacity=function(){},I.prototype.interfaces_=function(){return[m,v]},I.prototype.add=function(t){return this.array_.push(t),!0},I.prototype.clear=function(){this.array_=[]},I.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},I.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},I.prototype.iterator=function(){return new Mo(this)},I.prototype.get=function(t){if(0>t||t>=this.size())throw new y;return this.array_[t]},I.prototype.isEmpty=function(){return 0===this.array_.length},I.prototype.size=function(){return this.array_.length},I.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},I.prototype.remove=function(t){for(var e=!1,n=0,i=this.array_.length;i>n;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e};var Mo=function(t){this.arrayList_=t,this.position_=0};Mo.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new x;return this.arrayList_.get(this.position_++)},Mo.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},Mo.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},Mo.prototype.remove=function(){throw new E},c(N,I),e(N.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=!1,i=t.iterator();i.hasNext();)this.add(i.next(),e),n=!0;return n}return I.prototype.addAll.apply(this,arguments)},clone:function(){for(var t=I.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).copy());return t},toCoordinateArray:function(){return this.toArray(N.coordArrayType)},add:function(){if(1===arguments.length){var t=arguments[0];I.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof g&&"boolean"==typeof arguments[1]){var i=arguments[0];if(!arguments[1]&&this.size()>=1)if(this.get(this.size()-1).equals2D(i))return null;I.prototype.add.call(this,i)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var r=arguments[0],o=arguments[1];return this.add(r,o),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var s=arguments[0],a=arguments[1];if(arguments[2])for(var u=0;u<s.length;u++)this.add(s[u],a);else for(u=s.length-1;u>=0;u--)this.add(s[u],a);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof g){var l=arguments[0],c=arguments[1];if(!arguments[2]){var h=this.size();if(h>0){if(l>0)if(this.get(l-1).equals2D(c))return null;if(h>l)if(this.get(l).equals2D(c))return null}}I.prototype.add.call(this,l,c)}}else if(4===arguments.length){var f=arguments[0],d=arguments[1],p=arguments[2],v=arguments[3],y=1;p>v&&(y=-1);for(u=p;u!==v;u+=y)this.add(f[u],d);return!0}},closeRing:function(){this.size()>0&&this.add(new g(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return N}}),N.coordArrayType=new Array(0).fill(null),e(C.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof C))return!1;var e=t;return this.isNull()?e.isNull():this.maxx===e.getMaxX()&&this.maxy===e.getMaxY()&&this.minx===e.getMinX()&&this.miny===e.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new C;var e=this.minx>t.minx?this.minx:t.minx,n=this.miny>t.miny?this.miny:t.miny;return new C(e,this.maxx<t.maxx?this.maxx:t.maxx,n,this.maxy<t.maxy?this.maxy:t.maxy)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(1===arguments.length){if(arguments[0]instanceof g){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof C){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&n>=this.minx&&n<=this.maxx&&i>=this.miny&&i<=this.maxy}},intersects:function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)}if(arguments[0]instanceof g){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return!this.isNull()&&!(n>this.maxx||n<this.minx||i>this.maxy||i<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(1===arguments.length){if(arguments[0]instanceof g){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof C){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.isNull()?(this.minx=n,this.maxx=n,this.miny=i,this.maxy=i):(n<this.minx&&(this.minx=n),n>this.maxx&&(this.maxx=n),i<this.miny&&(this.miny=i),i>this.maxy&&(this.maxy=i))}},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e>t?t:e},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this.minx<e.minx?-1:this.minx>e.minx?1:this.miny<e.miny?-1:this.miny>e.miny?1:this.maxx<e.maxx?-1:this.maxx>e.maxx?1:this.maxy<e.maxy?-1:this.maxy>e.maxy?1:0},translate:function(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},expandBy:function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=n,this.maxy+=n,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(1===arguments.length){if(arguments[0]instanceof C){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof g){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return this.covers(n,i)}},centre:function(){return this.isNull()?null:new g((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof g){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof C){var e=arguments[0];this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.init(n.x,i.x,n.y,i.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];o>r?(this.minx=r,this.maxx=o):(this.minx=o,this.maxx=r),a>s?(this.miny=s,this.maxy=a):(this.miny=a,this.maxy=s)}},getMaxY:function(){return this.maxy},distance:function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny?n=t.miny-this.maxy:this.miny>t.maxy&&(n=this.miny-t.maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return 37*(t=37*(t=37*(t=37*t+g.hashCode(this.minx))+g.hashCode(this.maxx))+g.hashCode(this.miny))+g.hashCode(this.maxy)},interfaces_:function(){return[o,u]},getClass:function(){return C}}),C.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),l=Math.min(i.x,r.x),c=Math.max(i.x,r.x);return!(l>u||a>c||(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),l=Math.min(i.y,r.y),c=Math.max(i.y,r.y),l>u||a>c))}},C.serialVersionUID=0x51845cd552189800,c(S,w),e(S.prototype,{interfaces_:function(){return[]},getClass:function(){return S}}),e(L.prototype,{interfaces_:function(){return[]},getClass:function(){return L}}),L.toLocationSymbol=function(t){switch(t){case L.EXTERIOR:return"e";case L.BOUNDARY:return"b";case L.INTERIOR:return"i";case L.NONE:return"-"}throw new i("Unknown location value: "+t)},L.INTERIOR=0,L.BOUNDARY=1,L.EXTERIOR=2,L.NONE=-1,e(R.prototype,{interfaces_:function(){return[]},getClass:function(){return R}}),R.log10=function(t){var e=Math.log(t);return r.isInfinite(e)?e:r.isNaN(e)?e:e/R.LOG_10},R.min=function(t,e,n,i){var r=t;return r>e&&(r=e),r>n&&(r=n),r>i&&(r=i),r},R.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return e>t?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var i=arguments[0],r=arguments[1],o=arguments[2];return r>i?r:i>o?o:i}},R.wrap=function(t,e){return 0>t?e- -t%e:t%e},R.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return e>(i=t)&&(i=e),n>i&&(i=n),i}if(4===arguments.length){var i,r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];return o>(i=r)&&(i=o),s>i&&(i=s),a>i&&(i=a),i}},R.average=function(t,e){return(t+e)/2},R.LOG_10=Math.log(10),b.prototype.append=function(t){this.str+=t},b.prototype.setCharAt=function(t,e){return this.str.substr(0,t)+e+this.str.substr(t+1)},b.prototype.toString=function(t){return this.str},O.prototype.intValue=function(){return this.value},O.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},O.isNaN=function(t){return Number.isNaN(t)},P.isWhitespace=function(t){return 32>=t&&t>=0||127==t},P.toUpperCase=function(t){return t.toUpperCase()},e(_.prototype,{le:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo},extractSignificantDigits:function(t,e){var n=this.abs(),i=_.magnitude(n.hi),r=_.TEN.pow(i);(n=n.divide(r)).gt(_.TEN)?(n=n.divide(_.TEN),i+=1):n.lt(_.ONE)&&(n=n.multiply(_.TEN),i-=1);for(var o=i+1,s=new b,a=_.MAX_PRINT_DIGITS-1,u=0;a>=u;u++){t&&u===o&&s.append(".");var l=Math.trunc(n.hi);if(0>l)break;var c=!1,h=0;l>9?(c=!0,h="9"):h="0"+l,s.append(h),n=n.subtract(_.valueOf(l)).multiply(_.TEN),c&&n.selfAdd(_.TEN);var f=!0,g=_.magnitude(n.hi);if(0>g&&Math.abs(g)>=a-u&&(f=!1),!f)break}return e[0]=i,s.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof _){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},equals:function(){if(1===arguments.length){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo}},isZero:function(){return 0===this.hi&&0===this.lo},selfSubtract:function(){if(arguments[0]instanceof _){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(1===arguments.length){if(arguments[0]instanceof _){var t=arguments[0];return this.selfDivide(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n,i,r,o,s=arguments[0],a=arguments[1],u=null,l=null,c=null,h=null;return r=this.hi/s,h=(u=(c=_.SPLIT*r)-(u=c-r))*(l=(h=_.SPLIT*s)-(l=h-s))-(o=r*s)+u*(i=s-l)+(n=r-u)*l+n*i,h=r+(c=(this.hi-o-h+this.lo-r*a)/s),this.hi=h,this.lo=r-h+c,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof _){var t,e,n,i,o=arguments[0],s=null,a=null,u=null,l=null;return t=(n=this.hi/o.hi)-(s=(u=_.SPLIT*n)-(s=u-n)),l=s*(a=(l=_.SPLIT*o.hi)-(a=l-o.hi))-(i=n*o.hi)+s*(e=o.hi-a)+t*a+t*e,new _(l=n+(u=(this.hi-i-l+this.lo-n*o.lo)/o.hi),n-l+u)}if("number"==typeof arguments[0]){var c=arguments[0];return r.isNaN(c)?_.createNaN():_.copy(this).selfDivide(c,0)}},ge:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo},pow:function(t){if(0===t)return _.valueOf(1);var e=new _(this),n=_.valueOf(1),i=Math.abs(t);if(i>1)for(;i>0;)i%2==1&&n.selfMultiply(e),(i/=2)>0&&(e=e.sqr());else n=e;return 0>t?n.reciprocal():n},ceil:function(){if(this.isNaN())return _.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new _(t,e)},compareTo:function(t){var e=t;return this.hi<e.hi?-1:this.hi>e.hi?1:this.lo<e.lo?-1:this.lo>e.lo?1:0},rint:function(){return this.isNaN()?this:this.add(.5).floor()},setValue:function(){if(arguments[0]instanceof _){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return _.valueOf(0);if(this.isNegative())return _.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,n=_.valueOf(e),i=this.subtract(n.sqr()).hi*(.5*t);return n.add(i)},selfAdd:function(){if(1===arguments.length){if(arguments[0]instanceof _){var t=arguments[0];return this.selfAdd(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,i=null,r=null,o=null,s=null,a=null;return o=(r=this.hi+e)-(s=r-this.hi),i=(a=(o=e-s+(this.hi-o))+this.lo)+(r-(n=r+a)),this.hi=n+i,this.lo=i+(n-this.hi),this}}else if(2===arguments.length){var u,l=arguments[0],c=arguments[1],h=(n=null,i=null,null);r=null,o=null,s=null,a=null;r=this.hi+l,u=this.lo+c,o=r-(s=r-this.hi),h=u-(a=u-this.lo);var f=(n=r+(s=(o=l-s+(this.hi-o))+u))+(s=(h=c-a+(this.lo-h))+(i=s+(r-n))),g=s+(n-f);return this.hi=f,this.lo=g,this}},selfMultiply:function(){if(1===arguments.length){if(arguments[0]instanceof _){var t=arguments[0];return this.selfMultiply(t.hi,t.lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n,i,r=arguments[0],o=arguments[1],s=null,a=null,u=null,l=null;s=(u=_.SPLIT*this.hi)-this.hi,l=_.SPLIT*r,s=u-s,n=this.hi-s,a=l-r;var c=(u=this.hi*r)+(l=s*(a=l-a)-u+s*(i=r-a)+n*a+n*i+(this.hi*o+this.lo*r)),h=l+(s=u-c);return this.hi=c,this.lo=h,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return _.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new _(t,e)},negate:function(){return this.isNaN()?this:new _(-this.hi,-this.lo)},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}},multiply:function(){if(arguments[0]instanceof _){var t=arguments[0];return t.isNaN()?_.createNaN():_.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return r.isNaN(e)?_.createNaN():_.copy(this).selfMultiply(e,0)}},isNaN:function(){return r.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var t=_.magnitude(this.hi);return t>=-3&&20>=t?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),i=e[0]+1,r=n;if("."===n.charAt(0))r="0"+n;else if(0>i)r="0."+_.stringOfChar("0",-i)+n;else if(-1===n.indexOf(".")){var o=i-n.length;r=n+_.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+r:r},reciprocal:function(){var t,e,n,i,r=null,o=null,s=null,a=null;t=(n=1/this.hi)-(r=(s=_.SPLIT*n)-(r=s-n)),o=(a=_.SPLIT*this.hi)-this.hi;var u=n+(s=(1-(i=n*this.hi)-(a=r*(o=a-o)-i+r*(e=this.hi-o)+t*o+t*e)-n*this.lo)/this.hi);return new _(u,n-u+s)},toSciNotation:function(){if(this.isZero())return _.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),i=_.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new IllegalStateException("Found leading zero: "+n);var r="";n.length>1&&(r=n.substring(1));var o=n.charAt(0)+"."+r;return this.isNegative()?"-"+o+i:o+i},abs:function(){return this.isNaN()?_.NaN:this.isNegative()?this.negate():new _(this)},isPositive:function(){return this.hi>0||0===this.hi&&this.lo>0},lt:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo},add:function(){if(arguments[0]instanceof _){var t=arguments[0];return _.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.copy(this).selfAdd(e)}},init:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.hi=t,this.lo=0}else if(arguments[0]instanceof _){var e=arguments[0];this.hi=e.hi,this.lo=e.lo}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];this.hi=n,this.lo=i}},gt:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo},isNegative:function(){return this.hi<0||0===this.hi&&this.lo<0},trunc:function(){return this.isNaN()?_.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0},interfaces_:function(){return[u,o,s]},getClass:function(){return _}}),_.sqr=function(t){return _.valueOf(t).selfMultiply(t)},_.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return _.parse(t)}if("number"==typeof arguments[0])return new _(arguments[0])},_.sqrt=function(t){return _.valueOf(t).sqrt()},_.parse=function(t){for(var e=0,n=t.length;P.isWhitespace(t.charAt(e));)e++;var i=!1;if(n>e){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(i=!0))}for(var o=new _,s=0,a=0,u=0;!(e>=n);){var l=t.charAt(e);if(e++,P.isDigit(l)){var c=l-"0";o.selfMultiply(_.TEN),o.selfAdd(c),s++}else{if("."!==l){if("e"===l||"E"===l){var h=t.substring(e);try{u=O.parseInt(h)}catch(e){throw e instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+h+" in string "+t):e}break}throw new NumberFormatException("Unexpected character '"+l+"' at position "+e+" in string "+t)}a=s}}var f=o,g=s-a-u;if(0===g)f=o;else if(g>0){var d=_.TEN.pow(g);f=o.divide(d)}else if(0>g){d=_.TEN.pow(-g);f=o.multiply(d)}return i?f.negate():f},_.createNaN=function(){return new _(r.NaN,r.NaN)},_.copy=function(t){return new _(t)},_.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),i=Math.trunc(Math.floor(n));return e>=10*Math.pow(10,i)&&(i+=1),i},_.stringOfChar=function(t,e){for(var n=new b,i=0;e>i;i++)n.append(t);return n.toString()},_.PI=new _(3.141592653589793,1.2246467991473532e-16),_.TWO_PI=new _(6.283185307179586,2.4492935982947064e-16),_.PI_2=new _(1.5707963267948966,6.123233995736766e-17),_.E=new _(2.718281828459045,1.4456468917292502e-16),_.NaN=new _(r.NaN,r.NaN),_.EPS=1.23259516440783e-32,_.SPLIT=134217729,_.MAX_PRINT_DIGITS=32,_.TEN=_.valueOf(10),_.ONE=_.valueOf(1),_.SCI_NOT_EXPONENT_CHAR="E",_.SCI_NOT_ZERO="0.0E0",e(M.prototype,{interfaces_:function(){return[]},getClass:function(){return M}}),M.orientationIndex=function(t,e,n){var i=M.orientationIndexFilter(t,e,n);if(1>=i)return i;var r=_.valueOf(e.x).selfAdd(-t.x),o=_.valueOf(e.y).selfAdd(-t.y),s=_.valueOf(n.x).selfAdd(-e.x),a=_.valueOf(n.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},M.signOfDet2x2=function(t,e,n,i){return t.multiply(i).selfSubtract(e.multiply(n)).signum()},M.intersection=function(t,e,n,i){var r=_.valueOf(i.y).selfSubtract(n.y).selfMultiply(_.valueOf(e.x).selfSubtract(t.x)),o=_.valueOf(i.x).selfSubtract(n.x).selfMultiply(_.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=_.valueOf(i.x).selfSubtract(n.x).selfMultiply(_.valueOf(t.y).selfSubtract(n.y)),u=_.valueOf(i.y).selfSubtract(n.y).selfMultiply(_.valueOf(t.x).selfSubtract(n.x)),l=a.subtract(u).selfDivide(s).doubleValue(),c=_.valueOf(t.x).selfAdd(_.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),h=_.valueOf(e.x).selfSubtract(t.x).selfMultiply(_.valueOf(t.y).selfSubtract(n.y)),f=_.valueOf(e.y).selfSubtract(t.y).selfMultiply(_.valueOf(t.x).selfSubtract(n.x)),d=h.subtract(f).selfDivide(s).doubleValue();return new g(c,_.valueOf(n.y).selfAdd(_.valueOf(i.y).selfSubtract(n.y).selfMultiply(d)).doubleValue())},M.orientationIndexFilter=function(t,e,n){var i=null,r=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=r-o;if(r>0){if(0>=o)return M.signum(s);i=r+o}else{if(!(0>r))return M.signum(s);if(o>=0)return M.signum(s);i=-r-o}var a=M.DP_SAFE_EPSILON*i;return s>=a||-s>=a?M.signum(s):2},M.signum=function(t){return t>0?1:0>t?-1:0},M.DP_SAFE_EPSILON=1e-15,e(A.prototype,{setOrdinate:function(t,e,n){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},clone:function(){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[s]},getClass:function(){return A}}),A.X=0,A.Y=1,A.Z=2,A.M=3,D.arraycopy=function(t,e,n,i,r){for(var o=0,s=e;e+r>s;s++)n[i+o]=t[s],o++},D.getProperty=function(t){return{"line.separator":"\n"}[t]},e(F.prototype,{getY:function(){var t=this.y/this.w;if(r.isNaN(t)||r.isInfinite(t))throw new S;return t},getX:function(){var t=this.x/this.w;if(r.isNaN(t)||r.isInfinite(t))throw new S;return t},getCoordinate:function(){var t=new g;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return F}}),F.intersection=function(t,e,n,i){var o=t.y-e.y,s=e.x-t.x,a=t.x*e.y-e.x*t.y,u=n.y-i.y,l=i.x-n.x,c=n.x*i.y-i.x*n.y,h=o*l-u*s,f=(s*c-l*a)/h,d=(u*a-o*c)/h;if(r.isNaN(f)||r.isInfinite(f)||r.isNaN(d)||r.isInfinite(d))throw new S;return new g(f,d)},e(G.prototype,{create:function(){1===arguments.length?arguments[0]instanceof Array?arguments[0]:T(arguments[0],A)&&arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},interfaces_:function(){return[]},getClass:function(){return G}}),e(U.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return U}}),e(B.prototype,{isGeometryCollection:function(){return this.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof B))return!1;var n=e;return this.equalsExact(n)}}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply(B.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(t){return null!==t&&this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];e=n;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,i)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION)throw new i("This method does not support GeometryCollection arguments")},equal:function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return null===this.envelope&&(this.envelope=this.computeEnvelopeInternal()),new C(this.envelope)},setSRID:function(t){this.SRID=t},setUserData:function(t){this.userData=t},compare:function(t,e){for(var n=t.iterator(),i=e.iterator();n.hasNext()&&i.hasNext();){var r=n.next(),o=i.next(),s=r.compareTo(o);if(0!==s)return s}return n.hasNext()?1:i.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===B.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===B.SORTINDEX_MULTIPOINT||this.getSortIndex()===B.SORTINDEX_MULTILINESTRING||this.getSortIndex()===B.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[s,o,u]},getClass:function(){return B}}),B.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},B.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},B.serialVersionUID=0x799ea46522854c00,B.SORTINDEX_POINT=0,B.SORTINDEX_MULTIPOINT=1,B.SORTINDEX_LINESTRING=2,B.SORTINDEX_LINEARRING=3,B.SORTINDEX_MULTILINESTRING=4,B.SORTINDEX_POLYGON=5,B.SORTINDEX_MULTIPOLYGON=6,B.SORTINDEX_GEOMETRYCOLLECTION=7,B.geometryChangedFilter={interfaces_:function(){return[U]},filter:function(t){t.geometryChangedAction()}},e(q.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return q}}),e(k.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return k}}),e(V.prototype,{isInBoundary:function(t){return t%2==1},interfaces_:function(){return[k]},getClass:function(){return V}}),e(z.prototype,{isInBoundary:function(t){return t>0},interfaces_:function(){return[k]},getClass:function(){return z}}),e(Y.prototype,{isInBoundary:function(t){return t>1},interfaces_:function(){return[k]},getClass:function(){return Y}}),e(X.prototype,{isInBoundary:function(t){return 1===t},interfaces_:function(){return[k]},getClass:function(){return X}}),k.Mod2BoundaryNodeRule=V,k.EndPointBoundaryNodeRule=z,k.MultiValentEndPointBoundaryNodeRule=Y,k.MonoValentEndPointBoundaryNodeRule=X,k.MOD2_BOUNDARY_RULE=new V,k.ENDPOINT_BOUNDARY_RULE=new z,k.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new Y,k.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new X,k.OGC_SFS_BOUNDARY_RULE=k.MOD2_BOUNDARY_RULE,e(j.prototype,{interfaces_:function(){return[]},getClass:function(){return j}}),j.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},j.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(j.indexOf(i,e)<0)return i}return null},j.scroll=function(t,e){var n=j.indexOf(e,t);if(0>n)return null;var i=new Array(t.length).fill(null);D.arraycopy(t,n,i,0,t.length-n),D.arraycopy(t,0,i,t.length-n,n),D.arraycopy(i,0,t,0,t.length)},j.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];if(i===r)return!0;if(null===i||null===r)return!1;if(i.length!==r.length)return!1;for(n=0;n<i.length;n++)if(0!==o.compare(i[n],r[n]))return!1;return!0}},j.intersection=function(t,e){for(var n=new N,i=0;i<t.length;i++)e.intersects(t[i])&&n.add(t[i],!0);return n.toCoordinateArray()},j.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},j.removeRepeatedPoints=function(t){return j.hasRepeatedPoints(t)?new N(t,!1).toCoordinateArray():t},j.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),i=0;n>=i;i++){var r=t[i];t[i]=t[e-i],t[e-i]=r}},j.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var i=new Array(e).fill(null);if(0===e)return i;var r=0;for(n=0;n<t.length;n++)null!==t[n]&&(i[r++]=t[n]);return i},j.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new g(t[n]);return e}if(5===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4];for(n=0;a>n;n++)o[s+n]=new g(i[r+n])}},j.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[t.length-n-1];if(0!==i.compareTo(r))return!1}return!0},j.envelope=function(t){for(var e=new C,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},j.toCoordinateArray=function(t){return t.toArray(j.coordArrayType)},j.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},j.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},j.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,i=t[e].compareTo(t[n]);if(0!==i)return i}return 1},j.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var i=t[n].compareTo(e[n]);if(0!==i)return i;n++}return n<e.length?-1:n<t.length?1:0},j.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},j.extract=function(t,e,n){e=R.clamp(e,0,t.length);var i=(n=R.clamp(n,-1,t.length))-e+1;0>n&&(i=0),e>=t.length&&(i=0),e>n&&(i=0);var r=new Array(i).fill(null);if(0===i)return r;for(var o=0,s=e;n>=s;s++)r[o++]=t[s];return r},e(H.prototype,{compare:function(t,e){var n=t,i=e;return j.compare(n,i)},interfaces_:function(){return[a]},getClass:function(){return H}}),e(W.prototype,{compare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;var r=j.compare(n,i);return j.isEqualReversed(n,i)?0:r},OLDcompare:function(t,e){var n=t,i=e;if(n.length<i.length)return-1;if(n.length>i.length)return 1;if(0===n.length)return 0;for(var r=j.increasingDirection(n),o=j.increasingDirection(i),s=r>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var l=n[s].compareTo(i[a]);if(0!==l)return l;s+=r,a+=o}return 0},interfaces_:function(){return[a]},getClass:function(){return W}}),j.ForwardComparator=H,j.BidirectionalComparator=W,j.coordArrayType=new Array(0).fill(null),Z.prototype.get=function(){},Z.prototype.put=function(){},Z.prototype.size=function(){},Z.prototype.values=function(){},Z.prototype.entrySet=function(){},K.prototype=new Z,J.prototype=new v,J.prototype.contains=function(){},Q.prototype=new J,Q.prototype.contains=function(t){for(var e=0,n=this.array_.length;n>e;e++){if(this.array_[e]===t)return!0}return!1},Q.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},Q.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Q.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},Q.prototype.size=function(){return this.array_.length},Q.prototype.isEmpty=function(){return 0===this.array_.length},Q.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},Q.prototype.iterator=function(){return new Ao(this)};var Ao=function(t){this.hashSet_=t,this.position_=0};Ao.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new x;return this.hashSet_.array_[this.position_++]},Ao.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},Ao.prototype.remove=function(){throw new E};var Do=0;rt.prototype=new K,rt.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(0>n)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},rt.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Do,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,i,r=this.root_;do{if(n=r,0>(i=t.compareTo(r.key)))r=r.left;else{if(!(i>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:n,color:Do,getValue:function(){return this.value},getKey:function(){return this.key}};return 0>i?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},rt.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!=this.root_&&1==t.parent.color;)if(tt(t)==nt(tt(tt(t)))){1==$(e=it(tt(tt(t))))?(et(tt(t),Do),et(e,Do),et(tt(tt(t)),1),t=tt(tt(t))):(t==it(tt(t))&&(t=tt(t),this.rotateLeft(t)),et(tt(t),Do),et(tt(tt(t)),1),this.rotateRight(tt(tt(t))))}else{var e;1==$(e=nt(tt(tt(t))))?(et(tt(t),Do),et(e,Do),et(tt(tt(t)),1),t=tt(tt(t))):(t==nt(tt(t))&&(t=tt(t),this.rotateRight(t)),et(tt(t),Do),et(tt(tt(t)),1),this.rotateLeft(tt(tt(t))))}this.root_.color=Do},rt.prototype.values=function(){var t=new I,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=rt.successor(e));)t.add(e.value);return t},rt.prototype.entrySet=function(){var t=new Q,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=rt.successor(e));)t.add(e);return t},rt.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},rt.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null==t.parent?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},rt.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},rt.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}e=t.parent;for(var n=t;null!==e&&n===e.right;)n=e,e=e.parent;return e},rt.prototype.size=function(){return this.size_},e(ot.prototype,{interfaces_:function(){return[]},getClass:function(){return ot}}),st.prototype=new J,at.prototype=new st,at.prototype.contains=function(t){for(var e=0,n=this.array_.length;n>e;e++){if(0===this.array_[e].compareTo(t))return!0}return!1},at.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;n>e;e++){if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},at.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},at.prototype.remove=function(t){throw new E},at.prototype.size=function(){return this.array_.length},at.prototype.isEmpty=function(){return 0===this.array_.length},at.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},at.prototype.iterator=function(){return new Fo(this)};var Fo=function(t){this.treeSet_=t,this.position_=0};Fo.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new x;return this.treeSet_.array_[this.position_++]},Fo.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Fo.prototype.remove=function(){throw new E},ut.sort=function(){var t,e,n,i,r=arguments[0];if(1===arguments.length)return i=function(t,e){return t.compareTo(e)},void r.sort(i);if(2===arguments.length)n=arguments[1],i=function(t,e){return n.compare(t,e)},r.sort(i);else{if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t]);return}if(4===arguments.length){for(e=r.slice(arguments[1],arguments[2]),n=arguments[3],i=function(t,e){return n.compare(t,e)},e.sort(i),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t]);return}}},ut.asList=function(t){for(var e=new I,n=0,i=t.length;i>n;n++)e.add(t[n]);return e},e(lt.prototype,{interfaces_:function(){return[]},getClass:function(){return lt}}),lt.toDimensionSymbol=function(t){switch(t){case lt.FALSE:return lt.SYM_FALSE;case lt.TRUE:return lt.SYM_TRUE;case lt.DONTCARE:return lt.SYM_DONTCARE;case lt.P:return lt.SYM_P;case lt.L:return lt.SYM_L;case lt.A:return lt.SYM_A}throw new i("Unknown dimension value: "+t)},lt.toDimensionValue=function(t){switch(P.toUpperCase(t)){case lt.SYM_FALSE:return lt.FALSE;case lt.SYM_TRUE:return lt.TRUE;case lt.SYM_DONTCARE:return lt.DONTCARE;case lt.SYM_P:return lt.P;case lt.SYM_L:return lt.L;case lt.SYM_A:return lt.A}throw new i("Unknown dimension symbol: "+t)},lt.P=0,lt.L=1,lt.A=2,lt.FALSE=-1,lt.TRUE=-2,lt.DONTCARE=-3,lt.SYM_FALSE="F",lt.SYM_TRUE="T",lt.SYM_DONTCARE="*",lt.SYM_P="0",lt.SYM_L="1",lt.SYM_A="2",e(ct.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return ct}}),e(ht.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return ht}}),c(ft,B),e(ft.prototype,{computeEnvelopeInternal:function(){for(var t=new C,e=0;e<this.geometries.length;e++)t.expandToInclude(this.geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this.geometries[t]},getSortIndex:function(){return B.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this.geometries.length;n++)for(var i=this.geometries[n].getCoordinates(),r=0;r<i.length;r++)t[++e]=i[r];return t},getArea:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getArea();return t},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.geometries.length!==n.geometries.length)return!1;for(var i=0;i<this.geometries.length;i++)if(!this.geometries[i].equalsExact(n.geometries[i],e))return!1;return!0}return B.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<this.geometries.length;t++)this.geometries[t].normalize();ut.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=lt.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getBoundaryDimension());return t},getDimension:function(){for(var t=lt.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=new at(ut.asList(this.geometries)),n=new at(ut.asList(t.geometries));return this.compare(e,n)}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o=i,s=this.getNumGeometries(),a=o.getNumGeometries(),u=0;s>u&&a>u;){var l=this.getGeometryN(u),c=o.getGeometryN(u),h=l.compareToSameClass(c,r);if(0!==h)return h;u++}return s>u?1:a>u?-1:0}},apply:function(){if(T(arguments[0],q))for(var t=arguments[0],e=0;e<this.geometries.length;e++)this.geometries[e].apply(t);else if(T(arguments[0],ht)){var n=arguments[0];if(0===this.geometries.length)return null;for(e=0;e<this.geometries.length&&(this.geometries[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],ct)){var i=arguments[0];i.filter(this);for(e=0;e<this.geometries.length;e++)this.geometries[e].apply(i)}else if(T(arguments[0],U)){var r=arguments[0];r.filter(this);for(e=0;e<this.geometries.length;e++)this.geometries[e].apply(r)}},getBoundary:function(){return this.checkNotGeometryCollection(this),f.shouldNeverReachHere(),null},clone:function(){var t=B.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++)t.geometries[e]=this.geometries[e].clone();return t},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ft(t,this.factory)},isEmpty:function(){for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return ft}}),ft.serialVersionUID=-0x4f07bcb1f857d800,c(gt,ft),e(gt.prototype,{getSortIndex:function(){return B.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?lt.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[t-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new dt(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new gt(t,this.factory)},interfaces_:function(){return[ot]},getClass:function(){return gt}}),gt.serialVersionUID=0x7155d2ab4afa8000,e(dt.prototype,{boundaryMultiLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPointFromCoords(e)},getBoundary:function(){return this.geom instanceof xt?this.boundaryLineString(this.geom):this.geom instanceof gt?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(t){return this.geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this.bnRule.isInBoundary(2)?t.getStartPoint():this.geomFact.createMultiPoint():this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new I;this.endpointMap=new rt;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);0!==i.getNumPoints()&&(this.addEndpoint(i.getCoordinateN(0)),this.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var r=this.endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),s=o.getValue().count;this.bnRule.isInBoundary(s)&&e.add(o.getKey())}return j.toCoordinateArray(e)},addEndpoint:function(t){var e=this.endpointMap.get(t);null===e&&(e=new pt,this.endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return dt}}),dt.getBoundary=function(){return 1===arguments.length?new dt(arguments[0]).getBoundary():2===arguments.length?new dt(arguments[0],arguments[1]).getBoundary():void 0},e(pt.prototype,{interfaces_:function(){return[]},getClass:function(){return pt}}),e(yt.prototype,{interfaces_:function(){return[]},getClass:function(){return yt}}),yt.chars=function(t,e){for(var n=new Array(e).fill(null),i=0;e>i;i++)n[i]=t;return new String(n)},yt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},n=new function(){}(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var i=arguments[0],r=arguments[1],o="",s=new function(){}(new function(){}(yt.getStackTrace(i))),a=0;r>a;a++)try{o+=s.readLine()+yt.NEWLINE}catch(t){if(!(t instanceof vt))throw t;f.shouldNeverReachHere()}return o}},yt.split=function(t,e){for(var n=e.length,i=new I,r=""+t,o=r.indexOf(e);o>=0;){var s=r.substring(0,o);i.add(s),o=(r=r.substring(o+n)).indexOf(e)}r.length>0&&i.add(r);for(var a=new Array(i.size()).fill(null),u=0;u<a.length;u++)a[u]=i.get(u);return a},yt.toString=function(){if(1===arguments.length){var t=arguments[0];return yt.SIMPLE_ORDINATE_FORMAT.format(t)}},yt.spaces=function(t){return yt.chars(" ",t)},yt.NEWLINE=D.getProperty("line.separator"),yt.SIMPLE_ORDINATE_FORMAT=new function(){}("0.#"),e(mt.prototype,{interfaces_:function(){return[]},getClass:function(){return mt}}),mt.copyCoord=function(t,e,n,i){for(var r=Math.min(t.getDimension(),n.getDimension()),o=0;r>o;o++)n.setOrdinate(i,o,t.getOrdinate(e,o))},mt.isRing=function(t){var e=t.size();return 0===e||!(3>=e)&&t.getOrdinate(0,A.X)===t.getOrdinate(e-1,A.X)&&t.getOrdinate(0,A.Y)===t.getOrdinate(e-1,A.Y)},mt.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),o=0;n>o;o++)for(var s=0;i>s;s++){var a=t.getOrdinate(o,s),u=e.getOrdinate(o,s);if(!(t.getOrdinate(o,s)===e.getOrdinate(o,s)||r.isNaN(a)&&r.isNaN(u)))return!1}return!0},mt.extend=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();if(mt.copy(e,0,i,0,r),r>0)for(var o=r;n>o;o++)mt.copy(e,r-1,i,o,1);return i},mt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),i=0;n>=i;i++)mt.swap(t,i,e-i)},mt.swap=function(t,e,n){if(e===n)return null;for(var i=0;i<t.getDimension();i++){var r=t.getOrdinate(e,i);t.setOrdinate(e,i,t.getOrdinate(n,i)),t.setOrdinate(n,i,r)}},mt.copy=function(t,e,n,i,r){for(var o=0;r>o;o++)mt.copyCoord(t,e+o,n,i+o)},mt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),i=new b;i.append("(");for(var r=0;e>r;r++){r>0&&i.append(" ");for(var o=0;n>o;o++)o>0&&i.append(","),i.append(yt.toString(t.getOrdinate(r,o)))}return i.append(")"),i.toString()}},mt.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:3>=n?mt.createClosedRing(t,e,4):e.getOrdinate(0,A.X)===e.getOrdinate(n-1,A.X)&&e.getOrdinate(0,A.Y)===e.getOrdinate(n-1,A.Y)?e:mt.createClosedRing(t,e,n+1)},mt.createClosedRing=function(t,e,n){var i=t.create(n,e.getDimension()),r=e.size();mt.copy(e,0,i,0,r);for(var o=r;n>o;o++)mt.copy(e,0,i,o,1);return i},c(xt,B),e(xt.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new C:this.points.expandEnvelope(new C)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return B.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.points.size()!==n.points.size())return!1;for(var i=0;i<this.points.size();i++)if(!this.equal(this.points.getCoordinate(i),n.points.getCoordinate(i),e))return!1;return!0}return B.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))>0&&mt.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?lt.FALSE:0},isClosed:function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return Ht.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var t=this.points.copy();return mt.reverse(t),this.getFactory().createLineString(t)},compareToSameClass:function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this.points.size()&&n<t.points.size();){var i=this.points.getCoordinate(e).compareTo(t.points.getCoordinate(n));if(0!==i)return i;e++,n++}return e<this.points.size()?1:n<t.points.size()?-1:0}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this.points,t.points)}},apply:function(){if(T(arguments[0],q))for(var t=arguments[0],e=0;e<this.points.size();e++)t.filter(this.points.getCoordinate(e));else if(T(arguments[0],ht)){var n=arguments[0];if(0===this.points.size())return null;for(e=0;e<this.points.size()&&(n.filter(this.points,e),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],ct)){arguments[0].filter(this)}else if(T(arguments[0],U)){arguments[0].filter(this)}},getBoundary:function(){return new dt(this).getBoundary()},isEquivalentClass:function(t){return t instanceof xt},clone:function(){var t=B.prototype.clone.call(this);return t.points=this.points.clone(),t},getCoordinateN:function(t){return this.points.getCoordinate(t)},getGeometryType:function(){return"LineString"},copy:function(){return new xt(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return 0===this.points.size()},init:function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new i("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.points=t},isCoordinate:function(t){for(var e=0;e<this.points.size();e++)if(this.points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this.points.getCoordinate(t))},interfaces_:function(){return[ot]},getClass:function(){return xt}}),xt.serialVersionUID=0x2b2b51ba435c8e00,e(Et.prototype,{interfaces_:function(){return[]},getClass:function(){return Et}}),c(It,B),e(It.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new C;var t=new C;return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t},getSortIndex:function(){return B.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))}return B.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return 0!==this.coordinates.size()?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return lt.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(null===this.getCoordinate())throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){t=arguments[0];return arguments[1].compare(this.coordinates,t.coordinates)}},apply:function(){if(T(arguments[0],q)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(T(arguments[0],ht)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],ct)){arguments[0].filter(this)}else if(T(arguments[0],U)){arguments[0].filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var t=B.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t},getGeometryType:function(){return"Point"},copy:function(){return new It(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(null===this.getCoordinate())throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return 0===this.coordinates.size()},init:function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),f.isTrue(t.size()<=1),this.coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[Et]},getClass:function(){return It}}),It.serialVersionUID=0x44077bad161cbc00,e(Nt.prototype,{interfaces_:function(){return[]},getClass:function(){return Nt}}),c(Ct,B),e(Ct.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return B.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this.shell.getCoordinates(),i=0;i<n.length;i++)t[++e]=n[i];for(var r=0;r<this.holes.length;r++)for(var o=this.holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},getArea:function(){var t=0;t+=Math.abs(Ht.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(Ht.signedArea(this.holes[e].getCoordinateSequence()));return t},isRectangle:function(){if(0!==this.getNumInteriorRing())return!1;if(null===this.shell)return!1;if(5!==this.shell.getNumPoints())return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;5>n;n++){if((o=t.getX(n))!==e.getMinX()&&o!==e.getMaxX())return!1;if((s=t.getY(n))!==e.getMinY()&&s!==e.getMaxY())return!1}var i=t.getX(0),r=t.getY(0);for(n=1;4>=n;n++){var o,s;if((o=t.getX(n))!==i===((s=t.getY(n))!==r))return!1;i=o,r=s}return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,i=this.shell,r=n.shell;if(!i.equalsExact(r,e))return!1;if(this.holes.length!==n.holes.length)return!1;for(var o=0;o<this.holes.length;o++)if(!this.holes[o].equalsExact(n.holes[o],e))return!1;return!0}return B.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(0===arguments.length){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++)this.normalize(this.holes[t],!1);ut.sort(this.holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var i=new Array(e.getCoordinates().length-1).fill(null);D.arraycopy(e.getCoordinates(),0,i,0,i.length);var r=j.minCoordinate(e.getCoordinates());j.scroll(i,r),D.arraycopy(i,0,e.getCoordinates(),0,i.length),e.getCoordinates()[i.length]=i[0],Ht.isCCW(e.getCoordinates())===n&&j.reverse(e.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},getNumPoints:function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(1===arguments.length){var t=arguments[0],e=this.shell,n=t.shell;return e.compareToSameClass(n)}if(2===arguments.length){var i=arguments[0],r=arguments[1],o=i,s=(e=this.shell,n=o.shell,e.compareToSameClass(n,r));if(0!==s)return s;for(var a=this.getNumInteriorRing(),u=o.getNumInteriorRing(),l=0;a>l&&u>l;){var c=this.getInteriorRingN(l),h=o.getInteriorRingN(l),f=c.compareToSameClass(h,r);if(0!==f)return f;l++}return a>l?1:u>l?-1:0}},apply:function(){if(T(arguments[0],q)){var t=arguments[0];this.shell.apply(t);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(t)}else if(T(arguments[0],ht)){var n=arguments[0];if(this.shell.apply(n),!n.isDone())for(e=0;e<this.holes.length&&(this.holes[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(T(arguments[0],ct)){arguments[0].filter(this)}else if(T(arguments[0],U)){var i=arguments[0];i.filter(this),this.shell.apply(i);for(e=0;e<this.holes.length;e++)this.holes[e].apply(i)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++)t[e+1]=this.holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},clone:function(){var t=B.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].clone();return t},getGeometryType:function(){return"Polygon"},copy:function(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),n=0;n<e.length;n++)e[n]=this.holes[n].copy();return new Ct(t,e,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(t){return this.holes[t]},interfaces_:function(){return[Nt]},getClass:function(){return Ct}}),Ct.serialVersionUID=-0x307ffefd8dc97200,c(wt,ft),e(wt.prototype,{getSortIndex:function(){return B.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.geometries[t].getCoordinate()}return ft.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return lt.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new wt(t,this.factory)},interfaces_:function(){return[Et]},getClass:function(){return wt}}),wt.serialVersionUID=-0x6fb1ed4162e0fc00,c(St,xt),e(St.prototype,{getSortIndex:function(){return B.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return lt.FALSE},isClosed:function(){return!!this.isEmpty()||xt.prototype.isClosed.call(this)},reverse:function(){var t=this.points.copy();return mt.reverse(t),this.getFactory().createLinearRing(t)},validateConstruction:function(){if(!this.isEmpty()&&!xt.prototype.isClosed.call(this))throw new i("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<St.MINIMUM_VALID_SIZE)throw new i("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new St(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return St}}),St.MINIMUM_VALID_SIZE=4,St.serialVersionUID=-0x3b229e262367a600,c(Lt,ft),e(Lt.prototype,{getSortIndex:function(){return B.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&ft.prototype.equalsExact.call(this,t,e)}return ft.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new I,e=0;e<this.geometries.length;e++)for(var n=this.geometries[e].getBoundary(),i=0;i<n.getNumGeometries();i++)t.add(n.getGeometryN(i));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Lt(t,this.factory)},interfaces_:function(){return[Nt]},getClass:function(){return Lt}}),Lt.serialVersionUID=-0x7a5aa1369171980,e(Tt.prototype,{setCopyUserData:function(t){this.isUserDataCopied=t},edit:function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this.isUserDataCopied&&n.setUserData(t.getUserData()),n},editInternal:function(t,e){return null===this.factory&&(this.factory=t.getFactory()),t instanceof ft?this.editGeometryCollection(t,e):t instanceof Ct?this.editPolygon(t,e):t instanceof It?e.edit(t,this.factory):t instanceof xt?e.edit(t,this.factory):(f.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var n=e.edit(t,this.factory),i=new I,r=0;r<n.getNumGeometries();r++){var o=this.edit(n.getGeometryN(r),e);null===o||o.isEmpty()||i.add(o)}return n.getClass()===wt?this.factory.createMultiPoint(i.toArray([])):n.getClass()===gt?this.factory.createMultiLineString(i.toArray([])):n.getClass()===Lt?this.factory.createMultiPolygon(i.toArray([])):this.factory.createGeometryCollection(i.toArray([]))},editPolygon:function(t,e){var n=e.edit(t,this.factory);if(null===n&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var i=this.edit(n.getExteriorRing(),e);if(null===i||i.isEmpty())return this.factory.createPolygon();for(var r=new I,o=0;o<n.getNumInteriorRing();o++){var s=this.edit(n.getInteriorRingN(o),e);null===s||s.isEmpty()||r.add(s)}return this.factory.createPolygon(i,r.toArray([]))},interfaces_:function(){return[]},getClass:function(){return Tt}}),Tt.GeometryEditorOperation=Rt,e(bt.prototype,{edit:function(t,e){return t},interfaces_:function(){return[Rt]},getClass:function(){return bt}}),e(Ot.prototype,{edit:function(t,e){if(t instanceof St)return e.createLinearRing(this.editCoordinates(t.getCoordinates(),t));if(t instanceof xt)return e.createLineString(this.editCoordinates(t.getCoordinates(),t));if(t instanceof It){var n=this.editCoordinates(t.getCoordinates(),t);return n.length>0?e.createPoint(n[0]):e.createPoint()}return t},interfaces_:function(){return[Rt]},getClass:function(){return Ot}}),e(Pt.prototype,{edit:function(t,e){return t instanceof St?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof xt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof It?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[Rt]},getClass:function(){return Pt}}),Tt.NoOpGeometryOperation=bt,Tt.CoordinateOperation=Ot,Tt.CoordinateSequenceOperation=Pt,e(_t.prototype,{setOrdinate:function(t,e,n){switch(e){case A.X:this.coordinates[t].x=n;break;case A.Y:this.coordinates[t].y=n;break;case A.Z:this.coordinates[t].z=n;break;default:throw new i("invalid ordinateIndex")}},size:function(){return this.coordinates.length},getOrdinate:function(t,e){switch(e){case A.X:return this.coordinates[t].x;case A.Y:return this.coordinates[t].y;case A.Z:return this.coordinates[t].z}return r.NaN},getCoordinate:function(){if(1===arguments.length){var t=arguments[0];return this.coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this.coordinates[e].x,n.y=this.coordinates[e].y,n.z=this.coordinates[e].z}},getCoordinateCopy:function(t){return new g(this.coordinates[t])},getDimension:function(){return this.dimension},getX:function(t){return this.coordinates[t].x},clone:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].clone();return new _t(t,this.dimension)},expandEnvelope:function(t){for(var e=0;e<this.coordinates.length;e++)t.expandToInclude(this.coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].copy();return new _t(t,this.dimension)},toString:function(){if(this.coordinates.length>0){var t=new b(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++)t.append(", "),t.append(this.coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this.coordinates[t].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[A,u]},getClass:function(){return _t}}),_t.serialVersionUID=-0xcb44a778db18e00,e(Mt.prototype,{readResolve:function(){return Mt.instance()},create:function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new _t(arguments[0]);if(T(arguments[0],A))return new _t(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return e>3&&(e=3),2>e?new _t(t):new _t(t,e)}},interfaces_:function(){return[G,u]},getClass:function(){return Mt}}),Mt.instance=function(){return Mt.instanceObject},Mt.serialVersionUID=-0x38e49fa6cf6f2e00,Mt.instanceObject=new Mt;var Go,Uo=Object.defineProperty,Bo=function(t,e){function n(t){return this&&this.constructor===n?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,void(t&&function(t){this.add?t.forEach(this.add,this):t.forEach(function(t){this.set(t[0],t[1])},this)}.call(this,t))):new n(t)}return e||Uo(t,"size",{get:Ft}),t.constructor=n,n.prototype=t,n}({delete:function(t){return this.has(t)&&(this._keys.splice(Go,1),this._values.splice(Go,1),this._itp.forEach(function(t){Go<t[0]&&t[0]--})),Go>-1},has:function(t){return function(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!=e||0===e)for(Go=t.length;Go--&&!At(t[Go],e););else Go=t.indexOf(e);return Go>-1}.call(this,this._keys,t)},get:function(t){return this.has(t)?this._values[Go]:void 0},set:function(t,e){return this.has(t)?this._values[Go]=e:this._values[this._keys.push(t)-1]=e,this},keys:function(){return Dt(this._itp,this._keys)},values:function(){return Dt(this._itp,this._values)},entries:function(){return Dt(this._itp,this._keys,this._values)},forEach:function(t,e){for(var n=this.entries();;){var i=n.next();if(i.done)break;t.call(e,i.value[1],i.value[0],this)}},clear:function(){(this._keys||0).length=this._values.length=0}}),qo="undefined"!=typeof Map&&Map.prototype.values?Map:Bo;Gt.prototype=new Z,Gt.prototype.get=function(t){return this.map_.get(t)||null},Gt.prototype.put=function(t,e){return this.map_.set(t,e),e},Gt.prototype.values=function(){for(var t=new I,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},Gt.prototype.entrySet=function(){var t=new Q;return this.map_.entries().forEach(function(e){return t.add(e)}),t},Gt.prototype.size=function(){return this.map_.size()},e(Ut.prototype,{equals:function(t){if(!(t instanceof Ut))return!1;var e=t;return this.modelType===e.modelType&&this.scale===e.scale},compareTo:function(t){var e=t,n=this.getMaximumSignificantDigits(),i=e.getMaximumSignificantDigits();return new O(n).compareTo(new O(i))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===Ut.FLOATING||this.modelType===Ut.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var t="UNKNOWN";return this.modelType===Ut.FLOATING?t="Floating":this.modelType===Ut.FLOATING_SINGLE?t="Floating-Single":this.modelType===Ut.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if("number"==typeof arguments[0]){var t=arguments[0];return r.isNaN(t)?t:this.modelType===Ut.FLOATING_SINGLE?t:this.modelType===Ut.FIXED?Math.round(t*this.scale)/this.scale:t}if(arguments[0]instanceof g){var e=arguments[0];if(this.modelType===Ut.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},getMaximumSignificantDigits:function(){var t=16;return this.modelType===Ut.FLOATING?t=16:this.modelType===Ut.FLOATING_SINGLE?t=6:this.modelType===Ut.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this.scale=Math.abs(t)},interfaces_:function(){return[u,o]},getClass:function(){return Ut}}),Ut.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},e(Bt.prototype,{readResolve:function(){return Bt.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[u]},getClass:function(){return Bt}}),Bt.serialVersionUID=-552860263173159e4,Bt.nameToTypeMap=new Gt,Ut.Type=Bt,Ut.serialVersionUID=0x6bee6404e9a25c00,Ut.FIXED=new Bt("FIXED"),Ut.FLOATING=new Bt("FLOATING"),Ut.FLOATING_SINGLE=new Bt("FLOATING SINGLE"),Ut.maximumPreciseValue=9007199254740992,e(qt.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new g(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new g(t.getMinX(),t.getMinY()),new g(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new g(t.getMinX(),t.getMinY()),new g(t.getMinX(),t.getMaxY()),new g(t.getMaxX(),t.getMaxY()),new g(t.getMaxX(),t.getMinY()),new g(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(0===arguments.length)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(T(arguments[0],A))return new xt(arguments[0],this)}},createMultiLineString:function(){return 0===arguments.length?new gt(null,this):1===arguments.length?new gt(arguments[0],this):void 0},buildGeometry:function(t){for(var e=null,n=!1,i=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(i=!0)}if(null===e)return this.createGeometryCollection();if(n||i)return this.createGeometryCollection(qt.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof Ct)return this.createMultiPolygon(qt.toPolygonArray(t));if(a instanceof xt)return this.createMultiLineString(qt.toLineStringArray(t));if(a instanceof It)return this.createMultiPoint(qt.toPointArray(t));f.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},createMultiPointFromCoords:function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof g){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(T(arguments[0],A))return new It(arguments[0],this)}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(0===arguments.length)return new Ct(null,null,this);if(1===arguments.length){if(T(arguments[0],A)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof St){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){return new Ct(arguments[0],arguments[1],this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){return 0===arguments.length?new ft(null,this):1===arguments.length?new ft(arguments[0],this):void 0},createGeometry:function(t){return new Tt(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return arguments[1],this.coordinateSequenceFactory.create(t)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(T(arguments[0],A))return new St(arguments[0],this)}},createMultiPolygon:function(){return 0===arguments.length?new Lt(null,this):1===arguments.length?new Lt(arguments[0],this):void 0},createMultiPoint:function(){if(0===arguments.length)return new wt(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new wt(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(T(arguments[0],A)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),i=0;i<e.size();i++){var r=this.getCoordinateSequenceFactory().create(1,e.getDimension());mt.copy(e,i,r,0,1),n[i]=this.createPoint(r)}return this.createMultiPoint(n)}}},interfaces_:function(){return[u]},getClass:function(){return qt}}),qt.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},qt.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},qt.getDefaultCoordinateSequenceFactory=function(){return Mt.instance()},qt.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},qt.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},qt.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},qt.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},qt.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},qt.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},qt.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},qt.serialVersionUID=-0x5ea75f2051eeb400;var ko={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};e(kt.prototype,{read:function(t){var e,n,i;t=t.replace(/[\n\r]/g," ");var r=ko.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=ko.emptyTypeStr.exec(t))[2]=void 0),r&&(n=r[1].toLowerCase(),i=r[2],zo[n]&&(e=zo[n].apply(this,[i]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!Vo[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+Vo[e].apply(this,[t])+")"}});var Vo={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Vo.coordinate.call(this,t.coordinates.coordinates[0])},multipoint:function(t){for(var e=[],n=0,i=t.geometries.length;i>n;++n)e.push("("+Vo.point.apply(this,[t.geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,i=t.points.coordinates.length;i>n;++n)e.push(Vo.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,i=t.points.coordinates.length;i>n;++n)e.push(Vo.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,i=t.geometries.length;i>n;++n)e.push("("+Vo.linestring.apply(this,[t.geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Vo.linestring.apply(this,[t.shell])+")");for(var n=0,i=t.holes.length;i>n;++n)e.push("("+Vo.linestring.apply(this,[t.holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,i=t.geometries.length;i>n;++n)e.push("("+Vo.polygon.apply(this,[t.geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,i=t.geometries.length;i>n;++n)e.push(this.extractGeometry(t.geometries[n]));return e.join(",")}},zo={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(ko.spaces);return this.geometryFactory.createPoint(new g(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;o>r;++r)e=n[r].replace(ko.trimParens,"$1"),i.push(zo.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;o>r;++r)e=n[r].trim().split(ko.spaces),i.push(new g(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(i)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),i=[],r=0,o=n.length;o>r;++r)e=n[r].trim().split(ko.spaces),i.push(new g(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(i)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(ko.parenComma),i=[],r=0,o=n.length;o>r;++r)e=n[r].replace(ko.trimParens,"$1"),i.push(zo.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,i,r,o=t.trim().split(ko.parenComma),s=[],a=0,u=o.length;u>a;++a)e=o[a].replace(ko.trimParens,"$1"),n=zo.linestring.apply(this,[e]),i=this.geometryFactory.createLinearRing(n.points),0===a?r=i:s.push(i);return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(ko.doubleParenComma),i=[],r=0,o=n.length;o>r;++r)e=n[r].replace(ko.trimParens,"$1"),i.push(zo.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],i=0,r=e.length;r>i;++i)n.push(this.read(e[i]));return this.geometryFactory.createGeometryCollection(n)}};e(Vt.prototype,{write:function(t){return this.parser.write(t)}}),e(Vt,{toLineString:function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),e(zt.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},getTopologySummary:function(){var t=new b;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,n,i){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=i,this.result=this.computeIntersect(t,e,n,i)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(0===arguments.length)null===this.intLineIndex&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this.precisionModel=t},isInteriorIntersection:function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this.intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==zt.NO_INTERSECTION},getEdgeDistance:function(t,e){return zt.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1])},isCollinear:function(){return this.result===zt.COLLINEAR_INTERSECTION},toString:function(){return Vt.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+Vt.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this.inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return zt}}),zt.computeEdgeDistance=function(t,e,n){var i=Math.abs(n.x-e.x),r=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=i>r?i:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=i>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return f.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},zt.nonRobustComputeEdgeDistance=function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.sqrt(i*i+r*r);return f.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},zt.DONT_INTERSECT=0,zt.DO_INTERSECT=1,zt.COLLINEAR=2,zt.NO_INTERSECTION=0,zt.POINT_INTERSECTION=1,zt.COLLINEAR_INTERSECTION=2,c(Yt,zt),e(Yt.prototype,{isInSegmentEnvelopes:function(t){var e=new C(this.inputLines[0][0],this.inputLines[0][1]),n=new C(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t)},computeIntersection:function(){if(3!==arguments.length)return zt.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];return this._isProper=!1,C.intersects(e,n,t)&&0===Ht.orientationIndex(e,n,t)&&0===Ht.orientationIndex(n,e,t)?(this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this.result=zt.POINT_INTERSECTION,null):void(this.result=zt.NO_INTERSECTION)},normalizeToMinimum:function(t,e,n,i,r){r.x=this.smallestInAbsValue(t.x,e.x,n.x,i.x),r.y=this.smallestInAbsValue(t.y,e.y,n.y,i.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},safeHCoordinateIntersection:function(t,e,n,i){var r=null;try{r=F.intersection(t,e,n,i)}catch(o){if(!(o instanceof S))throw o;r=Yt.nearestEndpoint(t,e,n,i)}return r},intersection:function(t,e,n,i){var r=this.intersectionWithNormalization(t,e,n,i);return this.isInSegmentEnvelopes(r)||(r=new g(Yt.nearestEndpoint(t,e,n,i))),null!==this.precisionModel&&this.precisionModel.makePrecise(r),r},smallestInAbsValue:function(t,e,n,i){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(n)<o&&(r=n,o=Math.abs(n)),Math.abs(i)<o&&(r=i),r},checkDD:function(t,e,n,i,r){var o=M.intersection(t,e,n,i),s=this.isInSegmentEnvelopes(o);D.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&D.out.println("Distance = "+r.distance(o))},intersectionWithNormalization:function(t,e,n,i){var r=new g(t),o=new g(e),s=new g(n),a=new g(i),u=new g;this.normalizeToEnvCentre(r,o,s,a,u);var l=this.safeHCoordinateIntersection(r,o,s,a);return l.x+=u.x,l.y+=u.y,l},computeCollinearIntersection:function(t,e,n,i){var r=C.intersects(t,e,n),o=C.intersects(t,e,i),s=C.intersects(n,i,t),a=C.intersects(n,i,e);return r&&o?(this.intPt[0]=n,this.intPt[1]=i,zt.COLLINEAR_INTERSECTION):s&&a?(this.intPt[0]=t,this.intPt[1]=e,zt.COLLINEAR_INTERSECTION):r&&s?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||o||a?zt.COLLINEAR_INTERSECTION:zt.POINT_INTERSECTION):r&&a?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||o||s?zt.COLLINEAR_INTERSECTION:zt.POINT_INTERSECTION):o&&s?(this.intPt[0]=i,this.intPt[1]=t,!i.equals(t)||r||a?zt.COLLINEAR_INTERSECTION:zt.POINT_INTERSECTION):o&&a?(this.intPt[0]=i,this.intPt[1]=e,!i.equals(e)||r||s?zt.COLLINEAR_INTERSECTION:zt.POINT_INTERSECTION):zt.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,n,i,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,l=n.x<i.x?n.x:i.x,c=n.y<i.y?n.y:i.y,h=n.x>i.x?n.x:i.x,f=n.y>i.y?n.y:i.y,g=((o>l?o:l)+(h>a?a:h))/2,d=((s>c?s:c)+(f>u?u:f))/2;r.x=g,r.y=d,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,n.x-=r.x,n.y-=r.y,i.x-=r.x,i.y-=r.y},computeIntersect:function(t,e,n,i){if(this._isProper=!1,!C.intersects(t,e,n,i))return zt.NO_INTERSECTION;var r=Ht.orientationIndex(t,e,n),o=Ht.orientationIndex(t,e,i);if(r>0&&o>0||0>r&&0>o)return zt.NO_INTERSECTION;var s=Ht.orientationIndex(n,i,t),a=Ht.orientationIndex(n,i,e);return s>0&&a>0||0>s&&0>a?zt.NO_INTERSECTION:0===r&&0===o&&0===s&&0===a?this.computeCollinearIntersection(t,e,n,i):(0===r||0===o||0===s||0===a?(this._isProper=!1,t.equals2D(n)||t.equals2D(i)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(i)?this.intPt[0]=e:0===r?this.intPt[0]=new g(n):0===o?this.intPt[0]=new g(i):0===s?this.intPt[0]=new g(t):0===a&&(this.intPt[0]=new g(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,i)),zt.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return Yt}}),Yt.nearestEndpoint=function(t,e,n,i){var r=t,o=Ht.distancePointLine(t,n,i),s=Ht.distancePointLine(e,n,i);return o>s&&(o=s,r=e),o>(s=Ht.distancePointLine(n,t,e))&&(o=s,r=n),o>(s=Ht.distancePointLine(i,t,e))&&(o=s,r=i),r},e(Xt.prototype,{interfaces_:function(){return[]},getClass:function(){return Xt}}),Xt.orientationIndex=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return Xt.signOfDet2x2(i,r,o,s)},Xt.signOfDet2x2=function(t,e,n,i){var r=null,o=null,s=null;if(r=1,0===t||0===i)return 0===e||0===n?0:e>0?n>0?-r:r:n>0?r:-r;if(0===e||0===n)return i>0?t>0?r:-r:t>0?-r:r;if(e>0?i>0?i>=e||(r=-r,o=t,t=n,n=o,o=e,e=i,i=o):-i>=e?(r=-r,n=-n,i=-i):(o=t,t=-n,n=o,o=e,e=-i,i=o):i>0?i>=-e?(r=-r,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=i,i=o):e>=i?(t=-t,e=-e,n=-n,i=-i):(r=-r,o=-t,t=-n,n=o,o=-e,e=-i,i=o),t>0){if(!(n>0))return r;if(!(n>=t))return r}else{if(n>0)return-r;if(!(t>=n))return-r;r=-r,t=-t,n=-n}for(;;){if(0>(i-=(s=Math.floor(n/t))*e))return-r;if(i>e)return r;if(t>(n-=s*t)+n){if(i+i>e)return r}else{if(e>i+i)return-r;n=t-n,i=e-i,r=-r}if(0===i)return 0===n?0:-r;if(0===n)return r;if(0>(e-=(s=Math.floor(t/n))*i))return r;if(e>i)return-r;if(n>(t-=s*n)+t){if(e+e>i)return-r}else{if(i>e+e)return r;t=n-t,e=i-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}},e(jt.prototype,{countSegment:function(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,i=e.x;return n>i&&(n=e.x,i=t.x),this.p.x>=n&&this.p.x<=i&&(this.isPointOnSegment=!0),null}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var r=t.x-this.p.x,o=t.y-this.p.y,s=e.x-this.p.x,a=e.y-this.p.y,u=Xt.signOfDet2x2(r,o,s,a);if(0===u)return this.isPointOnSegment=!0,null;o>a&&(u=-u),u>0&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==L.EXTERIOR},getLocation:function(){return this.isPointOnSegment?L.BOUNDARY:this.crossingCount%2==1?L.INTERIOR:L.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return jt}}),jt.locatePointInRing=function(){if(arguments[0]instanceof g&&T(arguments[1],A)){for(var t=arguments[0],e=arguments[1],n=new jt(t),i=new g,r=new g,o=1;o<e.size();o++)if(e.getCoordinate(o,i),e.getCoordinate(o-1,r),n.countSegment(i,r),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof g&&arguments[1]instanceof Array){var s=arguments[0],a=arguments[1];for(n=new jt(s),o=1;o<a.length;o++){i=a[o],r=a[o-1];if(n.countSegment(i,r),n.isOnSegment())return n.getLocation()}return n.getLocation()}},e(Ht.prototype,{interfaces_:function(){return[]},getClass:function(){return Ht}}),Ht.orientationIndex=function(t,e,n){return M.orientationIndex(t,e,n)},Ht.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,i=1;i<t.length-1;i++){var r=t[i].x-n,o=t[i+1].y;e+=r*(t[i-1].y-o)}return e/2}if(T(arguments[0],A)){var s=arguments[0],a=s.size();if(3>a)return 0;var u=new g,l=new g,c=new g;s.getCoordinate(0,l),s.getCoordinate(1,c);n=l.x;c.x-=n;for(e=0,i=1;a-1>i;i++)u.y=l.y,l.x=c.x,l.y=c.y,s.getCoordinate(i+1,c),c.x-=n,e+=l.x*(u.y-c.y);return e/2}},Ht.distanceLineLine=function(t,e,n,i){if(t.equals(e))return Ht.distancePointLine(t,n,i);if(n.equals(i))return Ht.distancePointLine(i,t,e);var r=!1;if(C.intersects(t,e,n,i)){var o=(e.x-t.x)*(i.y-n.y)-(e.y-t.y)*(i.x-n.x);if(0===o)r=!0;else{var s=(t.y-n.y)*(i.x-n.x)-(t.x-n.x)*(i.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/o,u=s/o;(0>u||u>1||0>a||a>1)&&(r=!0)}}else r=!0;return r?R.min(Ht.distancePointLine(t,n,i),Ht.distancePointLine(e,n,i),Ht.distancePointLine(n,t,e),Ht.distancePointLine(i,t,e)):0},Ht.isPointInRing=function(t,e){return Ht.locatePointInRing(t,e)!==L.EXTERIOR},Ht.computeLength=function(t){var e=t.size();if(1>=e)return 0;var n=0,i=new g;t.getCoordinate(0,i);for(var r=i.x,o=i.y,s=1;e>s;s++){t.getCoordinate(s,i);var a=i.x,u=i.y,l=a-r,c=u-o;n+=Math.sqrt(l*l+c*c),r=a,o=u}return n},Ht.isCCW=function(t){var e=t.length-1;if(3>e)throw new i("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,o=1;e>=o;o++){var s=t[o];s.y>n.y&&(n=s,r=o)}var a=r;do{0>(a-=1)&&(a=e)}while(t[a].equals2D(n)&&a!==r);var u=r;do{u=(u+1)%e}while(t[u].equals2D(n)&&u!==r);var l=t[a],c=t[u];if(l.equals2D(n)||c.equals2D(n)||l.equals2D(c))return!1;var h=Ht.computeOrientation(l,n,c);return 0===h?l.x>c.x:h>0},Ht.locatePointInRing=function(t,e){return jt.locatePointInRing(t,e)},Ht.distancePointLinePerpendicular=function(t,e,n){var i=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),r=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/i;return Math.abs(r)*Math.sqrt(i)},Ht.computeOrientation=function(t,e,n){return Ht.orientationIndex(t,e,n)},Ht.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new i("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var o=Ht.distancePointLine(t,e[r],e[r+1]);n>o&&(n=o)}return n}if(3===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2];if(a.x===u.x&&a.y===u.y)return s.distance(a);var l=(u.x-a.x)*(u.x-a.x)+(u.y-a.y)*(u.y-a.y),c=((s.x-a.x)*(u.x-a.x)+(s.y-a.y)*(u.y-a.y))/l;if(0>=c)return s.distance(a);if(c>=1)return s.distance(u);var h=((a.y-s.y)*(u.x-a.x)-(a.x-s.x)*(u.y-a.y))/l;return Math.abs(h)*Math.sqrt(l)}},Ht.isOnLine=function(t,e){for(var n=new Yt,i=1;i<e.length;i++){var r=e[i-1],o=e[i];if(n.computeIntersection(t,r,o),n.hasIntersection())return!0}return!1},Ht.CLOCKWISE=-1,Ht.RIGHT=Ht.CLOCKWISE,Ht.COUNTERCLOCKWISE=1,Ht.LEFT=Ht.COUNTERCLOCKWISE,Ht.COLLINEAR=0,Ht.STRAIGHT=Ht.COLLINEAR,e(Wt.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof Wt){var t=arguments[0],e=Ht.orientationIndex(this.p0,this.p1,t.p0),n=Ht.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):0>=e&&0>=n?Math.max(e,n):0}if(arguments[0]instanceof g){var i=arguments[0];return Ht.orientationIndex(this.p0,this.p1,i)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof Wt))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},intersection:function(t){var e=new Yt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof g){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new g(t);var e=this.projectionFactor(t),n=new g;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Wt){var i=arguments[0],r=this.projectionFactor(i.p0),o=this.projectionFactor(i.p1);if(r>=1&&o>=1)return null;if(0>=r&&0>=o)return null;var s=this.project(i.p0);0>r&&(s=this.p0),r>1&&(s=this.p1);var a=this.project(i.p1);return 0>o&&(a=this.p0),o>1&&(a=this.p1),new Wt(s,a)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return 0===t?this.p0:this.p1},distancePerpendicular:function(t){return Ht.distancePointLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return Wt.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,i=e*e+n*n;return 0>=i?r.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/i},closestPoints:function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),i=r.MAX_VALUE,o=null,s=this.closestPoint(t.p0);i=s.distance(t.p0),n[0]=s,n[1]=t.p0;var a=this.closestPoint(t.p1);i>(o=a.distance(t.p1))&&(i=o,n[0]=a,n[1]=t.p1);var u=t.closestPoint(this.p0);i>(o=u.distance(this.p0))&&(i=o,n[0]=this.p0,n[1]=u);var l=t.closestPoint(this.p1);return i>(o=l.distance(this.p1))&&(i=o,n[0]=this.p1,n[1]=l),n},closestPoint:function(t){var e=this.projectionFactor(t);if(e>0&&1>e)return this.project(t);var n=this.p0.distance(t);return this.p1.distance(t)>n?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{return F.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof S))throw t}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),i=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,u=0;if(0!==e){if(0>=s)throw new IllegalStateException("Cannot compute offset from zero-length line segment");a=e*r/s,u=e*o/s}return new g(n-u,i+a)},setCoordinates:function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},segmentFraction:function(t){var e=this.projectionFactor(t);return 0>e?e=0:(e>1||r.isNaN(e))&&(e=1),e},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof Wt){var t=arguments[0];return Ht.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof g){var e=arguments[0];return Ht.distancePointLine(e,this.p0,this.p1)}},pointAlong:function(t){var e=new g;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);return n^=31*java.lang.Double.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))},interfaces_:function(){return[o,u]},getClass:function(){return Wt}}),Wt.midPoint=function(t,e){return new g((t.x+e.x)/2,(t.y+e.y)/2)},Wt.serialVersionUID=0x2d2172135f411c00,e(Zt.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){return(Zt.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])||Zt.isTrue(this.matrix[L.INTERIOR][L.BOUNDARY])||Zt.isTrue(this.matrix[L.BOUNDARY][L.INTERIOR])||Zt.isTrue(this.matrix[L.BOUNDARY][L.BOUNDARY]))&&this.matrix[L.EXTERIOR][L.INTERIOR]===lt.FALSE&&this.matrix[L.EXTERIOR][L.BOUNDARY]===lt.FALSE},isCoveredBy:function(){return(Zt.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])||Zt.isTrue(this.matrix[L.INTERIOR][L.BOUNDARY])||Zt.isTrue(this.matrix[L.BOUNDARY][L.INTERIOR])||Zt.isTrue(this.matrix[L.BOUNDARY][L.BOUNDARY]))&&this.matrix[L.INTERIOR][L.EXTERIOR]===lt.FALSE&&this.matrix[L.BOUNDARY][L.EXTERIOR]===lt.FALSE},set:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.matrix[n][i]=lt.toDimensionValue(t.charAt(e))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.matrix[r][o]=s}},isContains:function(){return Zt.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&this.matrix[L.EXTERIOR][L.INTERIOR]===lt.FALSE&&this.matrix[L.EXTERIOR][L.BOUNDARY]===lt.FALSE},setAtLeast:function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),i=e%3;this.setAtLeast(n,i,lt.toDimensionValue(t.charAt(e)))}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this.matrix[r][o]<s&&(this.matrix[r][o]=s)}},setAtLeastIfValid:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)},isWithin:function(){return Zt.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&this.matrix[L.INTERIOR][L.EXTERIOR]===lt.FALSE&&this.matrix[L.BOUNDARY][L.EXTERIOR]===lt.FALSE},isTouches:function(t,e){return t>e?this.isTouches(e,t):(t===lt.A&&e===lt.A||t===lt.L&&e===lt.L||t===lt.L&&e===lt.A||t===lt.P&&e===lt.A||t===lt.P&&e===lt.L)&&this.matrix[L.INTERIOR][L.INTERIOR]===lt.FALSE&&(Zt.isTrue(this.matrix[L.INTERIOR][L.BOUNDARY])||Zt.isTrue(this.matrix[L.BOUNDARY][L.INTERIOR])||Zt.isTrue(this.matrix[L.BOUNDARY][L.BOUNDARY]))},isOverlaps:function(t,e){return t===lt.P&&e===lt.P||t===lt.A&&e===lt.A?Zt.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&Zt.isTrue(this.matrix[L.INTERIOR][L.EXTERIOR])&&Zt.isTrue(this.matrix[L.EXTERIOR][L.INTERIOR]):t===lt.L&&e===lt.L&&1===this.matrix[L.INTERIOR][L.INTERIOR]&&Zt.isTrue(this.matrix[L.INTERIOR][L.EXTERIOR])&&Zt.isTrue(this.matrix[L.EXTERIOR][L.INTERIOR])},isEquals:function(t,e){return t===e&&Zt.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&this.matrix[L.INTERIOR][L.EXTERIOR]===lt.FALSE&&this.matrix[L.BOUNDARY][L.EXTERIOR]===lt.FALSE&&this.matrix[L.EXTERIOR][L.INTERIOR]===lt.FALSE&&this.matrix[L.EXTERIOR][L.BOUNDARY]===lt.FALSE},toString:function(){for(var t=new b("123456789"),e=0;3>e;e++)for(var n=0;3>n;n++)t.setCharAt(3*e+n,lt.toDimensionSymbol(this.matrix[e][n]));return t.toString()},setAll:function(t){for(var e=0;3>e;e++)for(var n=0;3>n;n++)this.matrix[e][n]=t},get:function(t,e){return this.matrix[t][e]},transpose:function(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},matches:function(t){if(9!==t.length)throw new i("Should be length 9: "+t);for(var e=0;3>e;e++)for(var n=0;3>n;n++)if(!Zt.matches(this.matrix[e][n],t.charAt(3*e+n)))return!1;return!0},add:function(t){for(var e=0;3>e;e++)for(var n=0;3>n;n++)this.setAtLeast(e,n,t.get(e,n))},isDisjoint:function(){return this.matrix[L.INTERIOR][L.INTERIOR]===lt.FALSE&&this.matrix[L.INTERIOR][L.BOUNDARY]===lt.FALSE&&this.matrix[L.BOUNDARY][L.INTERIOR]===lt.FALSE&&this.matrix[L.BOUNDARY][L.BOUNDARY]===lt.FALSE},isCrosses:function(t,e){return t===lt.P&&e===lt.L||t===lt.P&&e===lt.A||t===lt.L&&e===lt.A?Zt.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&Zt.isTrue(this.matrix[L.INTERIOR][L.EXTERIOR]):t===lt.L&&e===lt.P||t===lt.A&&e===lt.P||t===lt.A&&e===lt.L?Zt.isTrue(this.matrix[L.INTERIOR][L.INTERIOR])&&Zt.isTrue(this.matrix[L.EXTERIOR][L.INTERIOR]):t===lt.L&&e===lt.L&&0===this.matrix[L.INTERIOR][L.INTERIOR]},interfaces_:function(){return[s]},getClass:function(){return Zt}}),Zt.matches=function(){if(Number.isInteger(arguments[0])&&"string"==typeof arguments[1]){var t=arguments[0],e=arguments[1];return e===lt.SYM_DONTCARE||e===lt.SYM_TRUE&&(t>=0||t===lt.TRUE)||e===lt.SYM_FALSE&&t===lt.FALSE||e===lt.SYM_P&&t===lt.P||e===lt.SYM_L&&t===lt.L||e===lt.SYM_A&&t===lt.A}if("string"==typeof arguments[0]&&"string"==typeof arguments[1]){var n=arguments[0],i=arguments[1];return new Zt(n).matches(i)}},Zt.isTrue=function(t){return t>=0||t===lt.TRUE};var Yo=Object.freeze({Coordinate:g,CoordinateList:N,Envelope:C,LineSegment:Wt,GeometryFactory:qt,Geometry:B,Point:It,LineString:xt,LinearRing:St,Polygon:Ct,GeometryCollection:ft,MultiPoint:wt,MultiLineString:gt,MultiPolygon:Lt,Dimension:lt,IntersectionMatrix:Zt});e(Kt.prototype,{addPoint:function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},setBasePoint:function(t){null===this.areaBasePt&&(this.areaBasePt=t)},addLineSegments:function(t){for(var e=0,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);if(0!==i){e+=i;var r=(t[n].x+t[n+1].x)/2;this.lineCentSum.x+=i*r;var o=(t[n].y+t[n+1].y)/2;this.lineCentSum.y+=i*o}}this.totalLength+=e,0===e&&t.length>0&&this.addPoint(t[0])},addHole:function(t){for(var e=Ht.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new g;if(Math.abs(this.areasum2)>0)t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},addShell:function(t){t.length>0&&this.setBasePoint(t[0]);for(var e=!Ht.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},addTriangle:function(t,e,n,i){var r=i?1:-1;Kt.centroid3(t,e,n,this.triangleCent3);var o=Kt.area2(t,e,n);this.cg3.x+=r*o*this.triangleCent3.x,this.cg3.y+=r*o*this.triangleCent3.y,this.areasum2+=r*o},add:function(){if(arguments[0]instanceof Ct){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof B){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof It)this.addPoint(n.getCoordinate());else if(n instanceof xt)this.addLineSegments(n.getCoordinates());else if(n instanceof Ct){var i=n;this.add(i)}else if(n instanceof ft){var r=n;for(e=0;e<r.getNumGeometries();e++)this.add(r.getGeometryN(e))}}},interfaces_:function(){return[]},getClass:function(){return Kt}}),Kt.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},Kt.centroid3=function(t,e,n,i){return i.x=t.x+e.x+n.x,i.y=t.y+e.y+n.y,null},Kt.getCentroid=function(t){return new Kt(t).getCentroid()},Jt.prototype=new Error,Jt.prototype.name="EmptyStackException",Qt.prototype=new m,Qt.prototype.add=function(t){return this.array_.push(t),!0},Qt.prototype.get=function(t){if(0>t||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},Qt.prototype.push=function(t){return this.array_.push(t),t},Qt.prototype.pop=function(t){if(0===this.array_.length)throw new Jt;return this.array_.pop()},Qt.prototype.peek=function(){if(0===this.array_.length)throw new Jt;return this.array_[this.array_.length-1]},Qt.prototype.empty=function(){return 0===this.array_.length},Qt.prototype.isEmpty=function(){return this.empty()},Qt.prototype.search=function(t){return this.array_.indexOf(t)},Qt.prototype.size=function(){return this.array_.length},Qt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},e($t.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[q]},getClass:function(){return $t}}),$t.filterCoordinates=function(t){for(var e=new $t,n=0;n<t.length;n++)e.filter(t[n]);return e.getCoordinates()},e(te.prototype,{preSort:function(t){for(var e=null,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return ut.sort(t,1,t.length,new ee(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),n=new N;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},lineOrPolygon:function(t){if(3===(t=this.cleanRing(t)).length)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},cleanRing:function(t){f.equals(t[0],t[t.length-1]);for(var e=new I,n=null,i=0;i<=t.length-2;i++){var r=t[i],o=t[i+1];r.equals(o)||null!==n&&this.isBetween(n,r,o)||(e.add(r),n=r)}e.add(t[t.length-1]);var s=new Array(e.size()).fill(null);return e.toArray(s)},isBetween:function(t,e,n){if(0!==Ht.computeOrientation(t,e,n))return!1;if(t.x!==n.x){if(t.x<=e.x&&e.x<=n.x)return!0;if(n.x<=e.x&&e.x<=t.x)return!0}if(t.y!==n.y){if(t.y<=e.y&&e.y<=n.y)return!0;if(n.y<=e.y&&e.y<=t.y)return!0}return!1},reduce:function(t){var e=this.computeOctRing(t);if(null===e)return t;for(var n=new at,i=0;i<e.length;i++)n.add(e[i]);for(i=0;i<t.length;i++)Ht.isPointInRing(t[i],e)||n.add(t[i]);var r=j.toCoordinateArray(n);return r.length<3?this.padArray3(r):r},getConvexHull:function(){if(0===this.inputPts.length)return this.geomFactory.createGeometryCollection(null);if(1===this.inputPts.length)return this.geomFactory.createPoint(this.inputPts[0]);if(2===this.inputPts.length)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),n=this.grahamScan(e),i=this.toCoordinateArray(n);return this.lineOrPolygon(i)},padArray3:function(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++)n<t.length?e[n]=t[n]:e[n]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++)e[n]=t[0];for(var i=1;i<t.length;i++)t[i].x<e[0].x&&(e[0]=t[i]),t[i].x-t[i].y<e[1].x-e[1].y&&(e[1]=t[i]),t[i].y>e[2].y&&(e[2]=t[i]),t[i].x+t[i].y>e[3].x+e[3].y&&(e[3]=t[i]),t[i].x>e[4].x&&(e[4]=t[i]),t[i].x-t[i].y>e[5].x-e[5].y&&(e[5]=t[i]),t[i].y<e[6].y&&(e[6]=t[i]),t[i].x+t[i].y<e[7].x+e[7].y&&(e[7]=t[i]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var i=t.get(n);e[n]=i}return e},grahamScan:function(t){var e=null,n=new Qt;e=n.push(t[0]),e=n.push(t[1]),e=n.push(t[2]);for(var i=3;i<t.length;i++){for(e=n.pop();!n.empty()&&Ht.computeOrientation(n.peek(),e,t[i])>0;)e=n.pop();e=n.push(e),e=n.push(t[i])}return e=n.push(t[0]),n},interfaces_:function(){return[]},getClass:function(){return te}}),te.extractCoordinates=function(t){var e=new $t;return t.apply(e),e.getCoordinates()},e(ee.prototype,{compare:function(t,e){var n=t,i=e;return ee.polarCompare(this.origin,n,i)},interfaces_:function(){return[a]},getClass:function(){return ee}}),ee.polarCompare=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n.x-t.x,s=n.y-t.y,a=Ht.computeOrientation(t,e,n);if(a===Ht.COUNTERCLOCKWISE)return 1;if(a===Ht.CLOCKWISE)return-1;var u=i*i+r*r,l=o*o+s*s;return l>u?-1:u>l?1:0},te.RadialComparator=ee,e(ne.prototype,{transformPoint:function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var n=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof St&&!i.isEmpty()||(n=!1);for(var r=new I,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof St||(n=!1),r.add(s))}if(n)return this.factory.createPolygon(i,r.toArray([]));var a=new I;return null!==i&&a.add(i),a.addAll(r),this.factory.buildGeometry(a)},createCoordinateSequence:function(t){return this.factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(t,e){for(var n=new I,i=0;i<t.getNumGeometries();i++){var r=this.transformLineString(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var n=new I,i=0;i<t.getNumGeometries();i++){var r=this.transformPoint(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},transformMultiPolygon:function(t,e){for(var n=new I,i=0;i<t.getNumGeometries();i++){var r=this.transformPolygon(t.getGeometryN(i),t);null!==r&&(r.isEmpty()||n.add(r))}return this.factory.buildGeometry(n)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var n=new I,i=0;i<t.getNumGeometries();i++){var r=this.transform(t.getGeometryN(i));null!==r&&(this.pruneEmptyGeometry&&r.isEmpty()||n.add(r))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(qt.toGeometryArray(n)):this.factory.buildGeometry(n)},transform:function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof It)return this.transformPoint(t,null);if(t instanceof wt)return this.transformMultiPoint(t,null);if(t instanceof St)return this.transformLinearRing(t,null);if(t instanceof xt)return this.transformLineString(t,null);if(t instanceof gt)return this.transformMultiLineString(t,null);if(t instanceof Ct)return this.transformPolygon(t,null);if(t instanceof Lt)return this.transformMultiPolygon(t,null);if(t instanceof ft)return this.transformGeometryCollection(t,null);throw new i("Unknown Geometry subtype: "+t.getClass().getName())},transformLinearRing:function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this.factory.createLinearRing(null);var i=n.size();return i>0&&4>i&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)},interfaces_:function(){return[]},getClass:function(){return ne}}),e(ie.prototype,{snapVertices:function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),i=0;n>i;i++){var r=t.get(i),o=this.findSnapForVertex(r,e);null!==o&&(t.set(i,new g(o)),0===i&&this._isClosed&&t.set(t.size()-1,new g(o)))}},findSnapForVertex:function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n]}return null},snapTo:function(t){var e=new N(this.srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},snapSegments:function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var i=0;n>i;i++){var r=e[i],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new g(r),!1)}},findSegmentIndexToSnap:function(t,e){for(var n=r.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(this.seg.p0=e.get(o),this.seg.p1=e.get(o+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1}var s=this.seg.distance(t);s<this.snapTolerance&&n>s&&(n=s,i=o)}return i},setAllowSnappingToSourceVertices:function(t){this.allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return ie}}),ie.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])},e(re.prototype,{snapTo:function(t,e){return new oe(e,this.extractTargetCoordinates(t)).transform(this.srcGeom)},snapToSelf:function(t,e){var n=new oe(t,this.extractTargetCoordinates(this.srcGeom),!0).transform(this.srcGeom),i=n;return e&&T(i,Nt)&&(i=n.buffer(0)),i},computeSnapTolerance:function(t){return this.computeMinimumSegmentLength(t)/10},extractTargetCoordinates:function(t){for(var e=new at,n=t.getCoordinates(),i=0;i<n.length;i++)e.add(n[i]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=r.MAX_VALUE,n=0;n<t.length-1;n++){var i=t[n].distance(t[n+1]);e>i&&(e=i)}return e},interfaces_:function(){return[]},getClass:function(){return re}}),re.snap=function(t,e,n){var i=new Array(2).fill(null),r=new re(t);i[0]=r.snapTo(e,n);var o=new re(e);return i[1]=o.snapTo(i[0],n),i},re.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=re.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Ut.FIXED){var i=1/n.getScale()*2/1.415;i>e&&(e=i)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(re.computeOverlaySnapTolerance(r),re.computeOverlaySnapTolerance(o))}},re.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*re.SNAP_PRECISION_FACTOR},re.snapToSelf=function(t,e,n){return new re(t).snapToSelf(e,n)},re.SNAP_PRECISION_FACTOR=1e-9,c(oe,ne),e(oe.prototype,{snapLine:function(t,e){var n=new ie(t,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(e)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(i)},interfaces_:function(){return[]},getClass:function(){return oe}}),e(se.prototype,{getCommon:function(){return r.longBitsToDouble(this.commonBits)},add:function(t){var e=r.doubleToLongBits(t);return this.isFirst?(this.commonBits=e,this.commonSignExp=se.signExpBits(this.commonBits),this.isFirst=!1,null):se.signExpBits(e)!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=se.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=se.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(1===arguments.length){var t=arguments[0],e=r.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+Long.toBinaryString(t),i=n.substring(n.length-64);return i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]"}},interfaces_:function(){return[]},getClass:function(){return se}}),se.getBit=function(t,e){return 0!=(t&1<<e)?1:0},se.signExpBits=function(t){return t>>52},se.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},se.numCommonMostSigMantissaBits=function(t,e){for(var n=0,i=52;i>=0;i--){if(se.getBit(t,i)!==se.getBit(e,i))return n;n++}return 52},e(ae.prototype,{addCommonBits:function(t){var e=new le(this.commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(0===this.commonCoord.x&&0===this.commonCoord.y)return t;var e=new g(this.commonCoord);e.x=-e.x,e.y=-e.y;var n=new le(e);return t.apply(n),t.geometryChanged(),t},getCommonCoordinate:function(){return this.commonCoord},add:function(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return ae}}),e(ue.prototype,{filter:function(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y)},getCommonCoordinate:function(){return new g(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[q]},getClass:function(){return ue}}),e(le.prototype,{filter:function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,i=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,i)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[ht]},getClass:function(){return le}}),ae.CommonCoordinateFilter=ue,ae.Translater=le,e(ce.prototype,{next:function(){if(this.atStart)return this.atStart=!1,ce.isAtomic(this.parent)&&this.index++,this.parent;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new x;var t=this.parent.getGeometryN(this.index++);return t instanceof ft?(this.subcollectionIterator=new ce(t),this.subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(null!==this.subcollectionIterator){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[p]},getClass:function(){return ce}}),ce.isAtomic=function(t){return!(t instanceof ft)},e(he.prototype,{locateInternal:function(){if(arguments[0]instanceof g&&arguments[1]instanceof Ct){var t=arguments[0],e=arguments[1];if(e.isEmpty())return L.EXTERIOR;var n=e.getExteriorRing(),i=this.locateInPolygonRing(t,n);if(i===L.EXTERIOR)return L.EXTERIOR;if(i===L.BOUNDARY)return L.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,o);if(s===L.INTERIOR)return L.EXTERIOR;if(s===L.BOUNDARY)return L.BOUNDARY}return L.INTERIOR}if(arguments[0]instanceof g&&arguments[1]instanceof xt){var a=arguments[0],u=arguments[1];if(!u.getEnvelopeInternal().intersects(a))return L.EXTERIOR;var l=u.getCoordinates();return u.isClosed()||!a.equals(l[0])&&!a.equals(l[l.length-1])?Ht.isOnLine(a,l)?L.INTERIOR:L.EXTERIOR:L.BOUNDARY}if(arguments[0]instanceof g&&arguments[1]instanceof It){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?L.INTERIOR:L.EXTERIOR}},locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?Ht.locatePointInRing(t,e.getCoordinates()):L.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==L.EXTERIOR},updateLocationInfo:function(t){t===L.INTERIOR&&(this.isIn=!0),t===L.BOUNDARY&&this.numBoundaries++},computeLocation:function(t,e){if(e instanceof It&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof xt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Ct)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof gt)for(var n=e,i=0;i<n.getNumGeometries();i++){var r=n.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof Lt){var o=e;for(i=0;i<o.getNumGeometries();i++){var s=o.getGeometryN(i);this.updateLocationInfo(this.locateInternal(t,s))}}else if(e instanceof ft)for(var a=new ce(e);a.hasNext();){var u=a.next();u!==e&&this.computeLocation(t,u)}},locate:function(t,e){return e.isEmpty()?L.EXTERIOR:e instanceof xt?this.locateInternal(t,e):e instanceof Ct?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?L.BOUNDARY:this.numBoundaries>0||this.isIn?L.INTERIOR:L.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return he}}),e(fe.prototype,{interfaces_:function(){return[]},getClass:function(){return fe}}),fe.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new i("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof g&&arguments[1]instanceof g){var o=arguments[0],s=arguments[1],a=s.x-o.x,u=s.y-o.y;if(0===a&&0===u)throw new i("Cannot compute the octant for two identical points "+o);return fe.octant(a,u)}},e(ge.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return ge}}),e(de.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:fe.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},getData:function(){return this.data},toString:function(){return Vt.toLineString(new _t(this.pts))},interfaces_:function(){return[ge]},getClass:function(){return de}}),e(pe.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return pe}}),e(ve.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[pe,u]},getClass:function(){return ve}}),e(ye.prototype,{poll:function(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,n=this.items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(n)<0);t=e)this.items.set(t,this.items.get(e));this.items.set(t,n)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return 0===this._size},add:function(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2)this.items.set(e,this.items.get(Math.trunc(e/2)));this.items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return ye}}),e(me.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return me}}),e(xe.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){1===arguments.length?arguments[0]:2===arguments.length&&(arguments[0],arguments[1])},interfaces_:function(){return[]},getClass:function(){return xe}}),e(Ee.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(t){f.isTrue(null===this.bounds),this.childBoundables.add(t)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return null===this.bounds&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[pe,u]},getClass:function(){return Ee}}),Ee.serialVersionUID=0x5a1e55ec41369800;var Xo={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return Xo.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?ut.sort(n,e):ut.sort(n);for(var i=t.iterator(),r=0,o=n.length;o>r;r++)i.next(),i.set(n[r])},singletonList:function(t){var e=new I;return e.add(t),e}};e(Ie.prototype,{expandToQueue:function(t,e){var n=Ie.isComposite(this.boundable1),r=Ie.isComposite(this.boundable2);if(n&&r)return Ie.area(this.boundable1)>Ie.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,e),null):(this.expand(this.boundable2,this.boundable1,t,e),null);if(n)return this.expand(this.boundable1,this.boundable2,t,e),null;if(r)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new i("neither boundable is composite")},isLeaves:function(){return!(Ie.isComposite(this.boundable1)||Ie.isComposite(this.boundable2))},compareTo:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},expand:function(t,e,n,i){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=new Ie(r.next(),e,this.itemDistance);o.getDistance()<i&&n.add(o)}},getBoundable:function(t){return 0===t?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[o]},getClass:function(){return Ie}}),Ie.area=function(t){return t.getBounds().getArea()},Ie.isComposite=function(t){return t instanceof Ee},e(Ne.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this.root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Ee?t+=this.size(n):n instanceof ve&&(t+=1)}return t}},removeItem:function(t,e){for(var n=null,i=t.getChildBoundables().iterator();i.hasNext();){var r=i.next();r instanceof ve&&r.getItem()===e&&(n=r)}return null!==n&&(t.getChildBoundables().remove(n),!0)},itemsTree:function(){if(0===arguments.length){this.build();var t=this.itemsTree(this.root);return null===t?new I:t}if(1===arguments.length){for(var e=arguments[0],n=new I,i=e.getChildBoundables().iterator();i.hasNext();){var r=i.next();if(r instanceof Ee){var o=this.itemsTree(r);null!==o&&n.add(o)}else r instanceof ve?n.add(r.getItem()):f.shouldNeverReachHere()}return n.size()<=0?null:n}},insert:function(t,e){f.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new ve(t,e))},boundablesAtLevel:function(){if(1===arguments.length){var t=arguments[0],e=new I;return this.boundablesAtLevel(t,this.root,e),e}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];if(f.isTrue(n>-2),i.getLevel()===n)return r.add(i),null;for(var o=i.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Ee?this.boundablesAtLevel(n,s,r):(f.isTrue(s instanceof ve),-1===n&&r.add(s))}return null}},query:function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new I;return this.isEmpty()?e:(this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e)}if(2===arguments.length){var n=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),n)&&this.query(n,this.root,i)}else if(3===arguments.length)if(T(arguments[2],me)&&arguments[0]instanceof Object&&arguments[1]instanceof Ee)for(var r=arguments[0],o=arguments[1],s=arguments[2],a=o.getChildBoundables(),u=0;u<a.size();u++){var l=a.get(u);this.getIntersectsOp().intersects(l.getBounds(),r)&&(l instanceof Ee?this.query(r,l,s):l instanceof ve?s.visitItem(l.getItem()):f.shouldNeverReachHere())}else if(T(arguments[2],m)&&arguments[0]instanceof Object&&arguments[1]instanceof Ee){var c=arguments[0],h=arguments[1],g=arguments[2];for(a=h.getChildBoundables(),u=0;u<a.size();u++){l=a.get(u);this.getIntersectsOp().intersects(l.getBounds(),c)&&(l instanceof Ee?this.query(c,l,g):l instanceof ve?g.add(l.getItem()):f.shouldNeverReachHere())}}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.remove(t,this.root,e)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=this.removeItem(i,r);if(o)return!0;for(var s=null,a=i.getChildBoundables().iterator();a.hasNext();){var u=a.next();if(this.getIntersectsOp().intersects(u.getBounds(),n)&&u instanceof Ee&&(o=this.remove(n,u,r))){s=u;break}}return null!==s&&s.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(s),o}},createHigherLevels:function(t,e){f.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},depth:function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();if(n instanceof Ee){var i=this.depth(n);i>t&&(t=i)}}return t+1}},createParentBoundables:function(t,e){f.isTrue(!t.isEmpty());var n=new I;n.add(this.createNode(e));var i=new I(t);Xo.sort(i,this.getComparator());for(var r=i.iterator();r.hasNext();){var o=r.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[u]},getClass:function(){return Ne}}),Ne.compareDoubles=function(t,e){return t>e?1:e>t?-1:0},Ne.IntersectsOp=function(){},Ne.serialVersionUID=-0x35ef64c82d4c5400,Ne.DEFAULT_NODE_CAPACITY=10,e(Ce.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return Ce}}),c(we,Ne),e(we.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){f.isTrue(t.length>0);for(var n=new I,i=0;i<t.length;i++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[i],e));return n},createNode:function(t){return new Se(t)},size:function(){return 0===arguments.length?Ne.prototype.size.call(this):Ne.prototype.size.apply(this,arguments)},insert:function(){if(2!==arguments.length)return Ne.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];return t.isNull()?null:void Ne.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return we.intersectsOp},verticalSlices:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),i=new Array(e).fill(null),r=t.iterator(),o=0;e>o;o++){i[o]=new I;for(var s=0;r.hasNext()&&n>s;){var a=r.next();i[o].add(a),s++}}return i},query:function(){if(1===arguments.length){var t=arguments[0];return Ne.prototype.query.call(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];Ne.prototype.query.call(this,e,n)}else if(3===arguments.length)if(T(arguments[2],me)&&arguments[0]instanceof Object&&arguments[1]instanceof Ee){var i=arguments[0],r=arguments[1],o=arguments[2];Ne.prototype.query.call(this,i,r,o)}else if(T(arguments[2],m)&&arguments[0]instanceof Object&&arguments[1]instanceof Ee){var s=arguments[0],a=arguments[1],u=arguments[2];Ne.prototype.query.call(this,s,a,u)}},getComparator:function(){return we.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return Ne.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return Ne.prototype.remove.call(this,t,e)}return Ne.prototype.remove.apply(this,arguments)},depth:function(){return 0===arguments.length?Ne.prototype.depth.call(this):Ne.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){f.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new I(t);Xo.sort(i,we.xComparator);var r=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(r,e)},nearestNeighbour:function(){if(1===arguments.length){if(T(arguments[0],Ce)){var t=arguments[0],e=new Ie(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof Ie){var n=arguments[0];return this.nearestNeighbour(n,r.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof we&&T(arguments[1],Ce)){var i=arguments[0],o=arguments[1];e=new Ie(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(e)}if(arguments[0]instanceof Ie&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],u=null,l=new ye;for(l.add(s);!l.isEmpty()&&a>0;){var c=l.poll(),h=c.getDistance();if(h>=a)break;c.isLeaves()?(a=h,u=c):c.expandToQueue(l,a)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var f=arguments[0],g=arguments[1],d=arguments[2],p=new ve(f,g);e=new Ie(this.getRoot(),p,d);return this.nearestNeighbour(e)[0]}},interfaces_:function(){return[xe,u]},getClass:function(){return we}}),we.centreX=function(t){return we.avg(t.getMinX(),t.getMaxX())},we.avg=function(t,e){return(t+e)/2},we.centreY=function(t){return we.avg(t.getMinY(),t.getMaxY())},c(Se,Ee),e(Se.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new C(n.getBounds()):t.expandToInclude(n.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return Se}}),we.STRtreeNode=Se,we.serialVersionUID=0x39920f7d5f261e0,we.xComparator={interfaces_:function(){return[a]},compare:function(t,e){return Ne.compareDoubles(we.centreX(t.getBounds()),we.centreX(e.getBounds()))}},we.yComparator={interfaces_:function(){return[a]},compare:function(t,e){return Ne.compareDoubles(we.centreY(t.getBounds()),we.centreY(e.getBounds()))}},we.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},we.DEFAULT_NODE_CAPACITY=10,e(Le.prototype,{interfaces_:function(){return[]},getClass:function(){return Le}}),Le.relativeSign=function(t,e){return e>t?-1:t>e?1:0},Le.compare=function(t,e,n){if(e.equals2D(n))return 0;var i=Le.relativeSign(e.x,n.x),r=Le.relativeSign(e.y,n.y);switch(t){case 0:return Le.compareValue(i,r);case 1:return Le.compareValue(r,i);case 2:return Le.compareValue(r,-i);case 3:return Le.compareValue(-i,r);case 4:return Le.compareValue(-i,-r);case 5:return Le.compareValue(-r,-i);case 6:return Le.compareValue(-r,i);case 7:return Le.compareValue(i,-r)}return f.shouldNeverReachHere("invalid octant value"),0},Le.compareValue=function(t,e){return 0>t?-1:t>0?1:0>e?-1:e>0?1:0},e(Te.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Le.compare(this.segmentOctant,this.coord,e.coord)},isEndPoint:function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},isInterior:function(){return this._isInterior},interfaces_:function(){return[o]},getClass:function(){return Te}}),e(Re.prototype,{getSplitCoordinates:function(){var t=new N;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next();this.addEdgeCoordinates(n,i,t),n=i}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new I;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this.edge.getCoordinate(n),n)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),i=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(i)&&t.add(new O(e+1))}},addEdgeCoordinates:function(t,e,n){e.segmentIndex,t.segmentIndex;var i=this.edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);n.add(new g(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this.edge.getCoordinate(o));r&&n.add(new g(e.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},findCollapseIndex:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var i=e.segmentIndex-t.segmentIndex;return e.isInterior()||i--,1===i&&(n[0]=t.segmentIndex+1,!0)},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),i=n.next();n.hasNext();){var r=n.next();this.findCollapseIndex(i,r,e)&&t.add(new O(e[0])),i=r}},getEdge:function(){return this.edge},addEndpoints:function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new g(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.getCoordinate(a);return r&&(o[s]=new g(e.coord)),new Pe(o,this.edge.getData())},add:function(t,e){var n=new Te(this.edge,t,e,this.edge.getSegmentOctant(e)),i=this.nodeMap.get(n);return null!==i?(f.isTrue(i.coord.equals2D(t),"Found equal nodes with different coordinates"),i):(this.nodeMap.put(n,n),n)},checkSplitEdgesCorrectness:function(t){var e=this.edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new l("bad split edge start point at "+n);var i=t.get(t.size()-1).getCoordinates(),r=i[i.length-1];if(!r.equals2D(e[e.length-1]))throw new l("bad split edge end point at "+r)},interfaces_:function(){return[]},getClass:function(){return Re}}),e(be.prototype,{next:function(){return null===this.currNode?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):null===this.nextNode?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex,this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return null!==this.nextNode},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[p]},getClass:function(){return be}}),e(Oe.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[ge]},getClass:function(){return Oe}}),e(Pe.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},safeOctant:function(t,e){return t.equals2D(e)?0:fe.octant(t,e)},getData:function(){return this.data},addIntersection:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],i=arguments[1],r=(arguments[2],arguments[3]),o=new g(n.getIntersection(r));this.addIntersection(o,i)}},toString:function(){return Vt.toLineString(new _t(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(t,e){var n=e,i=n+1;if(i<this.pts.length){var r=this.pts[i];t.equals2D(r)&&(n=i)}return this.nodeList.add(t,n)},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[Oe]},getClass:function(){return Pe}}),Pe.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new I;return Pe.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],i=arguments[1],r=n.iterator();r.hasNext();){r.next().getNodeList().addSplitEdges(i)}},e(_e.prototype,{overlap:function(){if(2===arguments.length)arguments[0],arguments[1];else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];t.getLineSegment(e,this.overlapSeg1),n.getLineSegment(i,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}},interfaces_:function(){return[]},getClass:function(){return _e}}),e(Me.prototype,{getLineSegment:function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},computeSelect:function(t,e,n,i){var r=this.pts[e],o=this.pts[n];if(i.tempEnv1.init(r,o),n-e==1)return i.select(this,e),null;if(!t.intersects(i.tempEnv1))return null;var s=Math.trunc((e+n)/2);s>e&&this.computeSelect(t,e,s,i),n>s&&this.computeSelect(t,s,n,i)},getCoordinates:function(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,n=this.start;n<=this.end;n++)t[e++]=this.pts[n];return t},computeOverlaps:function(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e)},setId:function(t){this.id=t},select:function(t,e){this.computeSelect(t,this.start,this.end,e)},getEnvelope:function(){if(null===this.env){var t=this.pts[this.start],e=this.pts[this.end];this.env=new C(t,e)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(t,e,n,i,r,o){var s=this.pts[t],a=this.pts[e],u=n.pts[i],l=n.pts[r];if(e-t==1&&r-i==1)return o.overlap(this,t,n,i),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,l),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),h=Math.trunc((i+r)/2);c>t&&(h>i&&this.computeOverlapsInternal(t,c,n,i,h,o),r>h&&this.computeOverlapsInternal(t,c,n,h,r,o)),e>c&&(h>i&&this.computeOverlapsInternal(c,e,n,i,h,o),r>h&&this.computeOverlapsInternal(c,e,n,h,r,o))},interfaces_:function(){return[]},getClass:function(){return Me}}),e(Ae.prototype,{interfaces_:function(){return[]},getClass:function(){return Ae}}),Ae.isNorthern=function(t){return t===Ae.NE||t===Ae.NW},Ae.isOpposite=function(t,e){return t!==e&&2===(t-e+4)%4},Ae.commonHalfPlane=function(t,e){if(t===e)return t;if(2===(t-e+4)%4)return-1;var n=e>t?t:e;return 0===n&&3===(t>e?t:e)?3:n},Ae.isInHalfPlane=function(t,e){return e===Ae.SE?t===Ae.SE||t===Ae.SW:t===e||t===e+1},Ae.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new i("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Ae.NE:Ae.SE:e>=0?Ae.NW:Ae.SW}if(arguments[0]instanceof g&&arguments[1]instanceof g){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new i("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Ae.NE:Ae.SE:r.y>=n.y?Ae.NW:Ae.SW}},Ae.NE=0,Ae.NW=1,Ae.SW=2,Ae.SE=3,e(De.prototype,{interfaces_:function(){return[]},getClass:function(){return De}}),De.getChainStartIndices=function(t){var e=0,n=new I;n.add(new O(e));do{var i=De.findChainEnd(t,e);n.add(new O(i)),e=i}while(e<t.length-1);return De.toIntArray(n)},De.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var i=Ae.quadrant(t[n],t[n+1]),r=e+1;r<t.length;){if(!t[r-1].equals2D(t[r]))if(Ae.quadrant(t[r-1],t[r])!==i)break;r++}return r-1},De.getChains=function(){if(1===arguments.length){var t=arguments[0];return De.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new I,r=De.getChainStartIndices(e),o=0;o<r.length-1;o++){var s=new Me(e,r[o],r[o+1],n);i.add(s)}return i}},De.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(Fe.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return Fe}}),e(Ge.prototype,{setSegmentIntersector:function(t){this.segInt=t},interfaces_:function(){return[Fe]},getClass:function(){return Ge}}),c(Ue,Ge),e(Ue.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return Pe.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(t){for(var e=De.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this.idCounter++),this.index.insert(n.getEnvelope(),n),this.monoChains.add(n)}},computeNodes:function(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new Be(this.segInt),e=this.monoChains.iterator();e.hasNext();)for(var n=e.next(),i=this.index.query(n.getEnvelope()).iterator();i.hasNext();){var r=i.next();if(r.getId()>n.getId()&&(n.computeOverlaps(r,t),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return Ue}}),c(Be,_e),e(Be.prototype,{overlap:function(){if(4!==arguments.length)return _e.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3],r=t.getContext(),o=n.getContext();this.si.processIntersections(r,e,o,i)},interfaces_:function(){return[]},getClass:function(){return Be}}),Ue.SegmentOverlapAction=Be,c(qe,l),e(qe.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return qe}}),qe.msgWithCoord=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(ke.prototype,{processIntersections:function(t,e,n,i){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return ke}}),e(Ve.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(t){this.isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(t){this.findAllIntersections=t},setKeepIntersections:function(t){this.keepIntersections=t},processIntersections:function(t,e,n,i){if(!this.findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===i)return null;if(this.isCheckEndSegmentsOnly&&!(this.isEndSegment(t,e)||this.isEndSegment(n,i)))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=r,this.intSegments[1]=o,this.intSegments[2]=s,this.intSegments[3]=a,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(t,e){return 0===e||e>=t.size()-2},hasIntersection:function(){return null!==this.interiorIntersection},isDone:function(){return!this.findAllIntersections&&null!==this.interiorIntersection},interfaces_:function(){return[ke]},getClass:function(){return Ve}}),Ve.createAllIntersectionsFinder=function(t){var e=new Ve(t);return e.setFindAllIntersections(!0),e},Ve.createAnyIntersectionFinder=function(t){return new Ve(t)},Ve.createIntersectionCounter=function(t){var e=new Ve(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},e(ze.prototype,{execute:function(){return null!==this.segInt?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this.findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new Ve(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new Ue;return t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection()?(this._isValid=!1,null):void 0},checkValid:function(){if(this.execute(),!this._isValid)throw new qe(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+Vt.toLineString(t[0],t[1])+" and "+Vt.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return ze}}),ze.computeIntersections=function(t){var e=new ze(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},e(Ye.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return Ye}}),Ye.toSegmentStrings=function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();e.add(new de(i.getCoordinates(),i))}return e},Ye.checkValid=function(t){new Ye(t).checkValid()},e(Xe.prototype,{map:function(t){for(var e=new I,n=0;n<t.getNumGeometries();n++){var i=this.mapOp.map(t.getGeometryN(n));i.isEmpty()||e.add(i)}return t.getFactory().createGeometryCollection(qt.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return Xe}}),Xe.map=function(t,e){return new Xe(e).map(t)},e(je.prototype,{interfaces_:function(){return[]},getClass:function(){return je}}),je.opposite=function(t){return t===je.LEFT?je.RIGHT:t===je.RIGHT?je.LEFT:t},je.ON=0,je.LEFT=1,je.RIGHT=2,e(He.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==L.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===L.NONE&&(this.location[e]=t)},isLine:function(){return 1===this.location.length},merge:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[je.ON]=this.location[je.ON],e[je.LEFT]=L.NONE,e[je.RIGHT]=L.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===L.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[je.LEFT];this.location[je.LEFT]=this.location[je.RIGHT],this.location[je.RIGHT]=t},toString:function(){var t=new b;return this.location.length>1&&t.append(L.toLocationSymbol(this.location[je.LEFT])),t.append(L.toLocationSymbol(this.location[je.ON])),this.location.length>1&&t.append(L.toLocationSymbol(this.location[je.RIGHT])),t.toString()},setLocations:function(t,e,n){this.location[je.ON]=t,this.location[je.LEFT]=e,this.location[je.RIGHT]=n},get:function(t){return t<this.location.length?this.location[t]:L.NONE},isArea:function(){return this.location.length>1},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===L.NONE)return!0;return!1},setLocation:function(){if(1===arguments.length){var t=arguments[0];this.setLocation(je.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(L.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return He}}),e(We.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;2>e;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new He(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(je.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},toString:function(){var t=new b;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(je.ON,e)}else if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];this.elt[n].setLocation(i,r)}},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new He(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return We}}),We.toLineLabel=function(t){for(var e=new We(L.NONE),n=0;2>n;n++)e.setLocation(n,t.getLocation(n));return e},e(Ze.prototype,{computeRing:function(){if(null!==this.ring)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++)t[e]=this.pts.get(e);this.ring=this.geometryFactory.createLinearRing(t),this._isHole=Ht.isCCW(this.ring.getCoordinates())},isIsolated:function(){return 1===this.label.getGeometryCount()},computePoints:function(t){this.startDe=t;var e=t,n=!0;do{if(null===e)throw new qe("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new qe("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var i=e.getLabel();f.isTrue(i.isArea()),this.mergeLabel(i),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(t){return this.pts.get(t)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this.maxNodeDegree&&(this.maxNodeDegree=e),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},addPoints:function(t,e,n){var i=t.getCoordinates();if(e){var r=1;n&&(r=0);for(var o=r;o<i.length;o++)this.pts.add(i[o])}else{r=i.length-2;n&&(r=i.length-1);for(o=r;o>=0;o--)this.pts.add(i[o])}},isHole:function(){return this._isHole},setInResult:function(){var t=this.startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this.startDe)},containsPoint:function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!Ht.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this.holes.iterator();n.hasNext();){if(n.next().containsPoint(t))return!1}return!0},addHole:function(t){this.holes.add(t)},isShell:function(){return null===this.shell},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=e.getLocation(n,je.RIGHT);if(i===L.NONE)return null;if(this.label.getLocation(n)===L.NONE)return this.label.setLocation(n,i),null}},setShell:function(t){this.shell=t,null!==t&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this.holes.size()).fill(null),n=0;n<this.holes.size();n++)e[n]=this.holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},interfaces_:function(){return[]},getClass:function(){return Ze}}),c(Ke,Ze),e(Ke.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return Ke}}),c(Je,Ze),e(Je.prototype,{buildMinimalRings:function(){var t=new I,e=this.startDe;do{if(null===e.getMinEdgeRing()){var n=new Ke(e,this.geometryFactory);t.add(n)}e=e.getNext()}while(e!==this.startDe);return t},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this.startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this.startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return Je}}),e(Qe.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){f.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return Qe}}),c($e,Qe),e($e.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){if(t.next().getEdge().isInResult())return!0}return!1},isIsolated:function(){return 1===this.label.getGeometryCount()},getCoordinate:function(){return this.coord},print:function(t){t.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(t){},computeMergedLocation:function(t,e){var n=L.NONE;if(n=this.label.getLocation(e),!t.isNull(e)){var i=t.getLocation(e);n!==L.BOUNDARY&&(n=i)}return n},setLabel:function(){if(2!==arguments.length)return Qe.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this.label?this.label=new We(t,e):this.label.setLocation(t,e)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof $e){var t=arguments[0];this.mergeLabel(t.label)}else if(arguments[0]instanceof We)for(var e=arguments[0],n=0;2>n;n++){var i=this.computeMergedLocation(e,n);this.label.getLocation(n)===L.NONE&&this.label.setLocation(n,i)}},add:function(t){this.edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(null===this.label)return null;var e=L.NONE;null!==this.label&&(e=this.label.getLocation(t));var n=null;switch(e){case L.BOUNDARY:n=L.INTERIOR;break;case L.INTERIOR:n=L.BOUNDARY;break;default:n=L.BOUNDARY}this.label.setLocation(t,n)},interfaces_:function(){return[]},getClass:function(){return $e}}),e(tn.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof g){var t=arguments[0];return null===(e=this.nodeMap.get(t))&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof $e){var e,n=arguments[0];return null===(e=this.nodeMap.get(n.getCoordinate()))?(this.nodeMap.put(n.getCoordinate(),n),n):(e.mergeLabel(n),e)}},print:function(t){for(var e=this.iterator();e.hasNext();){e.next().print(t)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new I,n=this.iterator();n.hasNext();){var i=n.next();i.getLabel().getLocation(t)===L.BOUNDARY&&e.add(i)}return e},add:function(t){var e=t.getCoordinate();this.addNode(e).add(t)},interfaces_:function(){return[]},getClass:function(){return tn}}),e(en.prototype,{compareDirection:function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:Ht.computeOrientation(t.p0,t.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(t){this.node=t},print:function(t){var e=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),i=n.lastIndexOf("."),r=n.substring(i+1);t.print("  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label)},compareTo:function(t){var e=t;return this.compareDirection(e)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label},computeLabel:function(t){},init:function(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=Ae.quadrant(this.dx,this.dy),f.isTrue(!(0===this.dx&&0===this.dy),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[o]},getClass:function(){return en}}),c(nn,en),e(nn.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(t){return this.depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this.label=new We(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(t,e){if(-999!==this.depth[t]&&this.depth[t]!==e)throw new qe("assigned depths do not match",this.getCoordinate());this.depth[t]=e},isInteriorAreaEdge:function(){for(var t=!0,e=0;2>e;e++)this.label.isArea(e)&&this.label.getLocation(e,je.LEFT)===L.INTERIOR&&this.label.getLocation(e,je.RIGHT)===L.INTERIOR||(t=!1);return t},setNextMin:function(t){this.nextMin=t},print:function(t){en.prototype.print.call(this,t),t.print(" "+this.depth[je.LEFT]+"/"+this.depth[je.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this.minEdgeRing=t},isLineEdge:function(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,L.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,L.EXTERIOR);return t&&e&&n},setEdgeRing:function(t){this.edgeRing=t},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t)},setSym:function(t){this.sym=t},setVisitedEdge:function(t){this.setVisited(t),this.sym.setVisited(t)},setEdgeDepths:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var i=1;t===je.LEFT&&(i=-1);var r=je.opposite(t),o=e+n*i;this.setDepth(t,e),this.setDepth(r,o)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this.next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return nn}}),nn.depthFactor=function(t,e){return t===L.EXTERIOR&&e===L.INTERIOR?1:t===L.INTERIOR&&e===L.EXTERIOR?-1:0},e(rn.prototype,{createNode:function(t){return new $e(t,null)},interfaces_:function(){return[]},getClass:function(){return rn}}),e(on.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var n=this.edges.get(e);n.print(t),n.eiList.print(t)}},find:function(t){return this.nodes.find(t)},addNode:function(){if(arguments[0]instanceof $e){var t=arguments[0];return this.nodes.addNode(t)}if(arguments[0]instanceof g){var e=arguments[0];return this.nodes.addNode(e)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().linkResultDirectedEdges()}},debugPrintln:function(t){D.out.println(t)},isBoundaryNode:function(t,e){var n=this.nodes.find(e);if(null===n)return!1;var i=n.getLabel();return null!==i&&i.getLocation(t)===L.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(t,e,n,i){return!!t.equals(n)&&Ht.computeOrientation(t,e,i)===Ht.COLLINEAR&&Ae.quadrant(t,e)===Ae.quadrant(n,i)},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(t){D.out.print(t)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1]))return i;if(this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return i}return null},insertEdge:function(t){this.edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var i=new nn(n,!0),r=new nn(n,!1);i.setSym(r),r.setSym(i),this.add(i),this.add(r)}},add:function(t){this.nodes.add(t),this.edgeEndList.add(t)},getNodes:function(){return this.nodes.values()},findEdge:function(t,e){for(var n=0;n<this.edges.size();n++){var i=this.edges.get(n),r=i.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return i}return null},interfaces_:function(){return[]},getClass:function(){return on}}),on.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){e.next().getEdges().linkResultDirectedEdges()}},e(sn.prototype,{sortShellsAndHoles:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isHole()?n.add(r):e.add(r)}},computePolygons:function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next().toPolygon(this.geometryFactory);e.add(i)}return e},placeFreeHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(null===i.getShell()){var r=this.findEdgeRingContaining(i,t);if(null===r)throw new qe("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(r)}}},buildMinimalEdgeRings:function(t,e,n){for(var i=new I,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):n.addAll(s)}else i.add(o)}return i},containsPoint:function(t){for(var e=this.shellList.iterator();e.hasNext();){if(e.next().containsPoint(t))return!0}return!1},buildMaximalEdgeRings:function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var r=new Je(i,this.geometryFactory);e.add(r),r.setInResult()}}return e},placePolygonHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();i.isHole()&&i.setShell(t)}},getPolygons:function(){return this.computePolygons(this.shellList)},findEdgeRingContaining:function(t,e){for(var n=t.getLinearRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getLinearRing(),c=l.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;c.contains(i)&&Ht.isPointInRing(r,l.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(o=u)}return o},findShell:function(t){for(var e=0,n=null,i=t.iterator();i.hasNext();){var r=i.next();r.isHole()||(n=r,e++)}return f.isTrue(1>=e,"found two shells in MinimalEdgeRing list"),n},add:function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];on.linkResultDirectedEdges(n);var i=this.buildMaximalEdgeRings(e),r=new I,o=this.buildMinimalEdgeRings(i,this.shellList,r);this.sortShellsAndHoles(o,this.shellList,r),this.placeFreeHoles(this.shellList,r)}},interfaces_:function(){return[]},getClass:function(){return sn}}),e(an.prototype,{collectLines:function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList)}},labelIsolatedLine:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,n)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},collectLineEdge:function(t,e,n){var i=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Bn.isResultOfOp(i,e)||r.isCovered()||(n.add(r),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){t.next().getEdges().findCoveredLineEdges()}for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getEdge();if(n.isLineEdge()&&!i.isCoveredSet()){var r=this.op.isCoveredByA(n.getCoordinate());i.setCovered(r)}}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel();n.isIsolated()&&(i.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},buildLines:function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var n=e.next(),i=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(i),n.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,n){var i=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(f.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Bn.isResultOfOp(i,e)&&e===Bn.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return an}}),e(un.prototype,{filterCoveredNodeToPoint:function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var n=this.geometryFactory.createPoint(e);this.resultPointList.add(n)}},extractNonCoveredResultNodes:function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||0!==n.getEdges().getDegree()&&t!==Bn.INTERSECTION)){var i=n.getLabel();Bn.isResultOfOp(i,t)&&this.filterCoveredNodeToPoint(n)}}},build:function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return un}}),e(ln.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return ln}}),e(cn.prototype,{locate:function(t){return cn.locate(t,this.geom)},interfaces_:function(){return[ln]},getClass:function(){return cn}}),cn.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Ht.isPointInRing(t,e.getCoordinates())},cn.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!cn.isPointInRing(t,n))return!1;for(var i=0;i<e.getNumInteriorRing();i++){var r=e.getInteriorRingN(i);if(cn.isPointInRing(t,r))return!1}return!0},cn.containsPoint=function(t,e){if(e instanceof Ct)return cn.containsPointInPolygon(t,e);if(e instanceof ft)for(var n=new ce(e);n.hasNext();){var i=n.next();if(i!==e&&cn.containsPoint(t,i))return!0}return!1},cn.locate=function(t,e){return e.isEmpty()?L.EXTERIOR:cn.containsPoint(t,e)?L.INTERIOR:L.EXTERIOR},e(hn.prototype,{getNextCW:function(t){this.getEdges();var e=this.edgeList.indexOf(t),n=e-1;return 0===e&&(n=this.edgeList.size()-1),this.edgeList.get(n)},propagateSideLabels:function(t){for(var e=L.NONE,n=this.iterator();n.hasNext();){(o=(r=n.next()).getLabel()).isArea(t)&&o.getLocation(t,je.LEFT)!==L.NONE&&(e=o.getLocation(t,je.LEFT))}if(e===L.NONE)return null;var i=e;for(n=this.iterator();n.hasNext();){var r,o;if((o=(r=n.next()).getLabel()).getLocation(t,je.ON)===L.NONE&&o.setLocation(t,je.ON,i),o.isArea(t)){var s=o.getLocation(t,je.LEFT),a=o.getLocation(t,je.RIGHT);if(a!==L.NONE){if(a!==i)throw new qe("side location conflict",r.getCoordinate());s===L.NONE&&f.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")"),i=s}else f.isTrue(o.getLocation(t,je.LEFT)===L.NONE,"found single null side"),o.setLocation(t,je.RIGHT,i),o.setLocation(t,je.LEFT,i)}}},getCoordinate:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},print:function(t){D.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){e.next().print(t)}},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,i=e.get(n).getLabel().getLocation(t,je.LEFT);f.isTrue(i!==L.NONE,"Found unlabelled area edge");for(var r=i,o=this.iterator();o.hasNext();){var s=o.next().getLabel();f.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,je.LEFT),u=s.getLocation(t,je.RIGHT);if(a===u)return!1;if(u!==r)return!1;r=a}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){if(this.edgeList.get(e)===t)return e}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return null===this.edgeList&&(this.edgeList=new I(this.edgeMap.values())),this.edgeList},getLocation:function(t,e,n){return this.ptInAreaLocation[t]===L.NONE&&(this.ptInAreaLocation[t]=cn.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t]},toString:function(){var t=new b;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();){e.next().computeLabel(t)}},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var i=(o=n.next()).getLabel(),r=0;2>r;r++)i.isLine(r)&&i.getLocation(r)===L.BOUNDARY&&(e[r]=!0);for(n=this.iterator();n.hasNext();){var o;for(i=(o=n.next()).getLabel(),r=0;2>r;r++)if(i.isAnyNull(r)){var s=L.NONE;if(e[r])s=L.EXTERIOR;else{var a=o.getCoordinate();s=this.getLocation(r,a,t)}i.setAllLocationsIfNull(r,s)}}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(t,e){this.edgeMap.put(t,e),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return hn}}),c(fn,hn),e(fn.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,i=0;i<this.resultAreaEdgeList.size();i++){var r=this.resultAreaEdgeList.get(i),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),n){case this.SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(null===t)throw new qe("no outgoing dirEdge found",this.getCoordinate());f.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){var e=t;this.insertEdgeEnd(e,e)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(1>e)return null;var n=t.get(0);if(1===e)return n;var i=t.get(e-1),r=n.getQuadrant(),o=i.getQuadrant();return Ae.isNorthern(r)&&Ae.isNorthern(o)?n:Ae.isNorthern(r)||Ae.isNorthern(o)?0!==n.getDy()?n:0!==i.getDy()?i:(f.shouldNeverReachHere("found two horizontal edges incident on node"),null):i},print:function(t){D.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(null!==this.resultAreaEdgeList)return this.resultAreaEdgeList;this.resultAreaEdgeList=new I;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;n>=0;n--){var i=this.edgeList.get(n),r=i.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=i}e.setNext(t)},computeDepths:function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=(t.getLabel(),t.getDepth(je.LEFT)),i=t.getDepth(je.RIGHT),r=this.computeDepths(e+1,this.edgeList.size(),n);if(this.computeDepths(0,e,r)!==i)throw new qe("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],s=arguments[1],a=arguments[2],u=o;s>u;u++){var l=this.edgeList.get(u);l.getLabel(),l.setEdgeDepths(je.RIGHT,a),a=l.getDepth(je.LEFT)}return a}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,n=null,i=this.SCANNING_FOR_INCOMING,r=this.resultAreaEdgeList.size()-1;r>=0;r--){var o=this.resultAreaEdgeList.get(r),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),i){case this.SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;n=s,i=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),i=this.SCANNING_FOR_INCOMING}}i===this.LINKING_TO_OUTGOING&&(f.isTrue(null!==e,"found null for first outgoing dirEdge"),f.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},getOutgoingDegree:function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){e.next().isInResult()&&t++}return t}if(1===arguments.length){var n=arguments[0];for(t=0,e=this.iterator();e.hasNext();){e.next().getEdgeRing()===n&&t++}return t}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var t=L.NONE,e=this.iterator();e.hasNext();){var n=(r=e.next()).getSym();if(!r.isLineEdge()){if(r.isInResult()){t=L.INTERIOR;break}if(n.isInResult()){t=L.EXTERIOR;break}}}if(t===L.NONE)return null;var i=t;for(e=this.iterator();e.hasNext();){var r;n=(r=e.next()).getSym();r.isLineEdge()?r.getEdge().setCovered(i===L.INTERIOR):(r.isInResult()&&(i=L.EXTERIOR),n.isInResult()&&(i=L.INTERIOR))}},computeLabelling:function(t){hn.prototype.computeLabelling.call(this,t),this.label=new We(L.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),i=0;2>i;i++){var r=n.getLocation(i);r!==L.INTERIOR&&r!==L.BOUNDARY||this.label.setLocation(i,L.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return fn}}),c(gn,rn),e(gn.prototype,{createNode:function(t){return new $e(t,new fn)},interfaces_:function(){return[]},getClass:function(){return gn}}),e(dn.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return dn}}),e(pn.prototype,{isDelete:function(){return this.eventType===pn.DELETE},setDeleteEventIndex:function(t){this.deleteEventIndex=t},getObject:function(){return this.obj},compareTo:function(t){var e=t;return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===pn.INSERT},isSameLabel:function(t){return null!==this.label&&this.label===t.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[o]},getClass:function(){return pn}}),pn.INSERT=1,pn.DELETE=2,e(vn.prototype,{interfaces_:function(){return[]},getClass:function(){return vn}}),e(yn.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(yn.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(t){this.isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next().getCoordinate();if(t.isIntersection(i))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},setBoundaryNodes:function(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e},addIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return yn}}),yn.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},c(mn,vn),e(mn.prototype,{prepareEvents:function(){Xo.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof yn&&T(arguments[0],m)&&T(arguments[1],m)){var i=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(i,i),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&T(arguments[0],m)&&arguments[1]instanceof yn){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},addEdge:function(t,e){for(var n=t.getMonotoneChainEdge(),i=n.getStartIndexes(),r=0;r<i.length-1;r++){var o=new dn(n,r),s=new pn(e,n.getMinX(r),o);this.events.add(s),this.events.add(new pn(n.getMaxX(r),s))}},processOverlaps:function(t,e,n,i){for(var r=n.getObject(),o=t;e>o;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();n.isSameLabel(s)||(r.computeIntersections(a,i),this.nOverlaps++)}}},addEdges:function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length){var n=arguments[0],i=arguments[1];for(t=n.iterator();t.hasNext();){e=t.next();this.addEdge(e,i)}}},interfaces_:function(){return[]},getClass:function(){return mn}}),e(xn.prototype,{getMin:function(){return this.min},intersects:function(t,e){return!(this.min>e||this.max<t)},getMax:function(){return this.max},toString:function(){return Vt.toLineString(new g(this.min,0),new g(this.max,0))},interfaces_:function(){return[]},getClass:function(){return xn}}),e(En.prototype,{compare:function(t,e){var n=t,i=e,r=(n.min+n.max)/2,o=(i.min+i.max)/2;return o>r?-1:r>o?1:0},interfaces_:function(){return[a]},getClass:function(){return En}}),xn.NodeComparator=En,c(In,xn),e(In.prototype,{query:function(t,e,n){return this.intersects(t,e)?void n.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return In}}),c(Nn,xn),e(Nn.prototype,{buildExtent:function(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max)},query:function(t,e,n){return this.intersects(t,e)?(null!==this.node1&&this.node1.query(t,e,n),void(null!==this.node2&&this.node2.query(t,e,n))):null},interfaces_:function(){return[]},getClass:function(){return Nn}}),e(Cn.prototype,{buildTree:function(){Xo.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var t=this.leaves,e=null,n=new I;;){if(this.buildLevel(t,n),1===n.size())return n.get(0);e=t,t=n,n=e}},insert:function(t,e,n){if(null!==this.root)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new In(t,e,n))},query:function(t,e,n){this.init(),this.root.query(t,e,n)},buildRoot:function(){return null!==this.root?null:void(this.root=this.buildTree())},printNode:function(t){D.out.println(Vt.toLineString(new g(t.min,this.level),new g(t.max,this.level)))},init:function(){return null!==this.root?null:void this.buildRoot()},buildLevel:function(t,e){this.level++,e.clear();for(var n=0;n<t.size();n+=2){var i=t.get(n);if(null===(n+1<t.size()?t.get(n):null))e.add(i);else{var r=new Nn(t.get(n),t.get(n+1));e.add(r)}}},interfaces_:function(){return[]},getClass:function(){return Cn}}),e(wn.prototype,{filter:function(t){if(this.isForcedToLineString&&t instanceof St){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null}t instanceof xt&&this.lines.add(t)},setForceToLineString:function(t){this.isForcedToLineString=t},interfaces_:function(){return[U]},getClass:function(){return wn}}),wn.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(wn.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(wn.getLines(e,n))}},wn.getLines=function(){if(1===arguments.length){var t=arguments[0];return wn.getLines(t,!1)}if(2===arguments.length){if(T(arguments[0],v)&&T(arguments[1],v)){for(var e=arguments[0],n=arguments[1],i=e.iterator();i.hasNext();){var r=i.next();wn.getLines(r,n)}return n}if(arguments[0]instanceof B&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new I;return o.apply(new wn(a,s)),a}if(arguments[0]instanceof B&&T(arguments[1],v)){var u=arguments[0],l=arguments[1];return u instanceof xt?l.add(u):u.apply(new wn(l)),l}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&T(arguments[0],v)&&T(arguments[1],v)){var c=arguments[0],h=arguments[1],f=arguments[2];for(i=c.iterator();i.hasNext();){r=i.next();wn.getLines(r,h,f)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof B&&T(arguments[1],v)){var g=arguments[0],d=arguments[1],p=arguments[2];return g.apply(new wn(d,p)),d}}},e(Sn.prototype,{visitItem:function(t){this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[me]},getClass:function(){return Sn}}),e(Ln.prototype,{locate:function(t){var e=new jt(t),n=new Tn(e);return this.index.query(t.y,t.y,n),e.getLocation()},interfaces_:function(){return[ln]},getClass:function(){return Ln}}),e(Tn.prototype,{visitItem:function(t){var e=t;this.counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},interfaces_:function(){return[me]},getClass:function(){return Tn}}),e(Rn.prototype,{init:function(t){for(var e=wn.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},addLine:function(t){for(var e=1;e<t.length;e++){var n=new Wt(t[e-1],t[e]),i=Math.min(n.p0.y,n.p1.y),r=Math.max(n.p0.y,n.p1.y);this.index.insert(i,r,n)}},query:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Sn;return this.index.query(t,e,n),n.getItems()}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];this.index.query(i,r,o)}},interfaces_:function(){return[]},getClass:function(){return Rn}}),Ln.SegmentVisitor=Tn,Ln.IntervalIndexedGeometry=Rn,e(bn.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},isEndPoint:function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[o]},getClass:function(){return bn}}),e(On.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){e.next().print(t)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var i=e.next(),r=this.createSplitEdge(n,i);t.add(r),n=i}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(i);r||n--;var o=new Array(n).fill(null),s=0;o[s++]=new g(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return r&&(o[s]=e.coord),new An(o,new We(this.edge.label))},add:function(t,e,n){var i=new bn(t,e,n),r=this.nodeMap.get(i);return null!==r?r:(this.nodeMap.put(i,i),i)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();){if(e.next().coord.equals(t))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return On}}),e(Pn.prototype,{getChainStartIndices:function(t){var e=0,n=new I;n.add(new O(e));do{var i=this.findChainEnd(t,e);n.add(new O(i)),e=i}while(e<t.length-1);return Pn.toIntArray(n)},findChainEnd:function(t,e){for(var n=Ae.quadrant(t[e],t[e+1]),i=e+1;i<t.length;){if(Ae.quadrant(t[i-1],t[i])!==n)break;i++}return i-1},interfaces_:function(){return[]},getClass:function(){return Pn}}),Pn.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},e(_n.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return n>e?e:n},computeIntersectsForChain:function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],i)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],l=arguments[5],c=this.pts[r],h=this.pts[o],f=s.pts[a],g=s.pts[u];if(o-r==1&&u-a==1)return l.addIntersections(this.e,r,s.e,a),null;if(this.env1.init(c,h),this.env2.init(f,g),!this.env1.intersects(this.env2))return null;var d=Math.trunc((r+o)/2),p=Math.trunc((a+u)/2);d>r&&(p>a&&this.computeIntersectsForChain(r,d,s,a,p,l),u>p&&this.computeIntersectsForChain(r,d,s,p,u,l)),o>d&&(p>a&&this.computeIntersectsForChain(d,o,s,a,p,l),u>p&&this.computeIntersectsForChain(d,o,s,p,u,l))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var i=0;i<t.startIndex.length-1;i++)this.computeIntersectsForChain(n,t,i,e)},interfaces_:function(){return[]},getClass:function(){return _n}}),e(Mn.prototype,{getDepth:function(t,e){return this.depth[t][e]},setDepth:function(t,e,n){this.depth[t][e]=n},isNull:function(){if(0===arguments.length){for(var t=0;2>t;t++)for(var e=0;3>e;e++)if(this.depth[t][e]!==Mn.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this.depth[n][1]===Mn.NULL_VALUE}if(2===arguments.length){var i=arguments[0],r=arguments[1];return this.depth[i][r]===Mn.NULL_VALUE}},normalize:function(){for(var t=0;2>t;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),0>e&&(e=0);for(var n=1;3>n;n++){var i=0;this.depth[t][n]>e&&(i=1),this.depth[t][n]=i}}},getDelta:function(t){return this.depth[t][je.RIGHT]-this.depth[t][je.LEFT]},getLocation:function(t,e){return this.depth[t][e]<=0?L.EXTERIOR:L.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(1===arguments.length)for(var t=arguments[0],e=0;2>e;e++)for(var n=1;3>n;n++){var i=t.getLocation(e,n);i!==L.EXTERIOR&&i!==L.INTERIOR||(this.isNull(e,n)?this.depth[e][n]=Mn.depthAtLocation(i):this.depth[e][n]+=Mn.depthAtLocation(i))}else if(3===arguments.length){var r=arguments[0],o=arguments[1];arguments[2]===L.INTERIOR&&this.depth[r][o]++}},interfaces_:function(){return[]},getClass:function(){return Mn}}),Mn.depthAtLocation=function(t){return t===L.EXTERIOR?0:t===L.INTERIOR?1:Mn.NULL_VALUE},Mn.NULL_VALUE=-1,c(An,Qe),e(An.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new An(t,We.toLineLabel(this.label))},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this.name=t},equals:function(t){if(!(t instanceof An))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,i=!0,r=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--r])||(i=!1),!n&&!i)return!1;return!0},getCoordinate:function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(t){An.updateIM(this.label,t)},isCollapsed:function(){return!!this.label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return null===this.mce&&(this.mce=new _n(this)),this.mce},getEnvelope:function(){if(null===this.env){this.env=new C;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(this.pts[t])}return this.env},addIntersection:function(t,e,n,i){var r=new g(t.getIntersection(i)),o=e,s=t.getEdgeDistance(n,i),a=o+1;if(a<this.pts.length){var u=this.pts[a];r.equals2D(u)&&(o=a,s=0)}this.eiList.add(r,o,s)},toString:function(){var t=new b;t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this.label+" "+this.depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this.depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++)this.addIntersection(t,e,n,i)},interfaces_:function(){return[]},getClass:function(){return An}}),An.updateIM=function(){if(2!==arguments.length)return Qe.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,je.ON),t.getLocation(1,je.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,je.LEFT),t.getLocation(1,je.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,je.RIGHT),t.getLocation(1,je.RIGHT),2))},c(Dn,on),e(Dn.prototype,{insertBoundaryPoint:function(t,e){var n=this.nodes.addNode(e).getLabel(),i=1;L.NONE,n.getLocation(t,je.ON)===L.BOUNDARY&&i++;var r=Dn.determineBoundary(this.boundaryNodeRule,i);n.setLocation(t,r)},computeSelfNodes:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2],o=new yn(n,!0,!1);o.setIsDoneIfProperInt(r);var s=this.createEdgeSetIntersector(),a=this.parentGeom instanceof St||this.parentGeom instanceof Ct||this.parentGeom instanceof Lt,u=i||!a;return s.computeIntersections(this.edges,o,u),this.addSelfIntersectionNodes(this.argIndex),o}},computeSplitEdges:function(t){for(var e=this.edges.iterator();e.hasNext();){e.next().eiList.addSplitEdges(t)}},computeEdgeIntersections:function(t,e,n){var i=new yn(e,n,!0);return i.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this.edges,t.edges,i),i},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof It){var t=arguments[0].getCoordinate();this.insertPoint(this.argIndex,t,L.INTERIOR)}else if(arguments[0]instanceof g){var e=arguments[0];this.insertPoint(this.argIndex,e,L.INTERIOR)}},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),L.EXTERIOR,L.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,L.INTERIOR,L.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this.argIndex,e[0],L.BOUNDARY),this.insertPoint(this.argIndex,e[e.length-1],L.BOUNDARY)},addLineString:function(t){var e=j.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var n=new An(e,new We(this.argIndex,L.INTERIOR));this.lineEdgeMap.put(t,n),this.insertEdge(n),f.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,i=t.iterator();i.hasNext();){var r=i.next();e[n++]=r.getCoordinate().copy()}return e},getBoundaryNodes:function(){return null===this.boundaryNodes&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(t,e,n){return this.isBoundaryNode(t,e)?null:void(n===L.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n))},addPolygonRing:function(t,e,n){if(t.isEmpty())return null;var i=j.removeRepeatedPoints(t.getCoordinates());if(i.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=i[0],null;var r=e,o=n;Ht.isCCW(i)&&(r=n,o=e);var s=new An(i,new We(this.argIndex,L.BOUNDARY,r,o));this.lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this.argIndex,i[0],L.BOUNDARY)},insertPoint:function(t,e,n){var i=this.nodes.addNode(e),r=i.getLabel();null===r?i.label=new We(t,n):r.setLocation(t,n)},createEdgeSetIntersector:function(){return new mn},addSelfIntersectionNodes:function(t){for(var e=this.edges.iterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,i)}},add:function(){if(1!==arguments.length)return on.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof Lt&&(this.useBoundaryDeterminationRule=!1),t instanceof Ct)this.addPolygon(t);else if(t instanceof xt)this.addLineString(t);else if(t instanceof It)this.addPoint(t);else if(t instanceof wt)this.addCollection(t);else if(t instanceof gt)this.addCollection(t);else if(t instanceof Lt)this.addCollection(t);else{if(!(t instanceof ft))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},locate:function(t){return T(this.parentGeom,Nt)&&this.parentGeom.getNumGeometries()>50?(null===this.areaPtLocator&&(this.areaPtLocator=new Ln(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom)},findEdge:function(){if(1===arguments.length){var t=arguments[0];return this.lineEdgeMap.get(t)}return on.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return Dn}}),Dn.determineBoundary=function(t,e){return t.isInBoundary(e)?L.BOUNDARY:L.INTERIOR},e(Fn.prototype,{getArgGeometry:function(t){return this.arg[t].getGeometry()},setComputationPrecision:function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return Fn}}),e(Gn.prototype,{compareTo:function(t){var e=t;return Gn.compareOriented(this.pts,this._orientation,e.pts,e._orientation)},interfaces_:function(){return[o]},getClass:function(){return Gn}}),Gn.orientation=function(t){return 1===j.increasingDirection(t)},Gn.compareOriented=function(t,e,n,i){for(var r=e?1:-1,o=i?1:-1,s=e?t.length:-1,a=i?n.length:-1,u=e?0:t.length-1,l=i?0:n.length-1;;){var c=t[u].compareTo(n[l]);if(0!==c)return c;var h=(u+=r)===s,f=(l+=o)===a;if(h&&!f)return-1;if(!h&&f)return 1;if(h&&f)return 0}},e(Un.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var n=this.edges.get(e);e>0&&t.print(","),t.print("(");for(var i=n.getCoordinates(),r=0;r<i.length;r++)r>0&&t.print(","),t.print(i[r].x+" "+i[r].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(t){return this.edges.get(t)},findEqualEdge:function(t){var e=new Gn(t.getCoordinates());return this.ocaMap.get(e)},add:function(t){this.edges.add(t);var e=new Gn(t.getCoordinates());this.ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return Un}}),c(Bn,Fn),e(Bn.prototype,{insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new We(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(n),r.add(i),n.merge(i)}else this.edgeList.add(t)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},isCoveredByLA:function(t){return!!this.isCovered(t,this.resultLineList)||!!this.isCovered(t,this.resultPolyList)},computeGeometry:function(t,e,n,i){var r=new I;return r.addAll(t),r.addAll(e),r.addAll(n),r.isEmpty()?Bn.createEmptyResult(i,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(r)},mergeSymLabels:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){t.next().getEdges().mergeSymLabels()}},isCovered:function(t,e){for(var n=e.iterator();n.hasNext();){var i=n.next();if(this.ptLocator.locate(t,i)!==L.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new I,e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this.edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},getResultGeometry:function(t){return this.computeOverlay(t),this.resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new I;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Ye.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new sn(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var i=new an(this,this.geomFact,this.ptLocator);this.resultLineList=i.build(t);var r=new un(this,this.geomFact,this.ptLocator);this.resultPointList=r.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},labelIncompleteNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n)},copyPoints:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next();this.graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),i=n.getLabel();i.isArea()&&!n.isInteriorAreaEdge()&&Bn.isResultOfOp(i.getLocation(0,je.RIGHT),i.getLocation(1,je.RIGHT),t)&&n.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),i=e.getDepth();if(!i.isNull()){i.normalize();for(var r=0;2>r;r++)n.isNull(r)||!n.isArea()||i.isNull(r)||(0===i.getDelta(r)?n.toLine(r):(f.isTrue(!i.isNull(r,je.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(r,je.LEFT,i.getLocation(r,je.LEFT)),f.isTrue(!i.isNull(r,je.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(r,je.RIGHT,i.getLocation(r,je.RIGHT))))}}},computeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){t.next().getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},isCoveredByA:function(t){return!!this.isCovered(t,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return Bn}}),Bn.overlayOp=function(t,e,n){return new Bn(t,e).getResultGeometry(n)},Bn.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Bn.createEmptyResult(Bn.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Xe.map(t,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),kn.overlayOp(t,e,Bn.INTERSECTION)},Bn.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Bn.createEmptyResult(Bn.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),kn.overlayOp(t,e,Bn.SYMDIFFERENCE)},Bn.resultDimension=function(t,e,n){var i=e.getDimension(),r=n.getDimension(),o=-1;switch(t){case Bn.INTERSECTION:o=Math.min(i,r);break;case Bn.UNION:o=Math.max(i,r);break;case Bn.DIFFERENCE:o=i;break;case Bn.SYMDIFFERENCE:o=Math.max(i,r)}return o},Bn.createEmptyResult=function(t,e,n,i){var r=null;switch(Bn.resultDimension(t,e,n)){case-1:r=i.createGeometryCollection(new Array(0).fill(null));break;case 0:r=i.createPoint();break;case 1:r=i.createLineString();break;case 2:r=i.createPolygon()}return r},Bn.difference=function(t,e){return t.isEmpty()?Bn.createEmptyResult(Bn.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),kn.overlayOp(t,e,Bn.DIFFERENCE))},Bn.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),i=t.getLocation(1);return Bn.isResultOfOp(n,i,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];switch(r===L.BOUNDARY&&(r=L.INTERIOR),o===L.BOUNDARY&&(o=L.INTERIOR),s){case Bn.INTERSECTION:return r===L.INTERIOR&&o===L.INTERIOR;case Bn.UNION:return r===L.INTERIOR||o===L.INTERIOR;case Bn.DIFFERENCE:return r===L.INTERIOR&&o!==L.INTERIOR;case Bn.SYMDIFFERENCE:return r===L.INTERIOR&&o!==L.INTERIOR||r!==L.INTERIOR&&o===L.INTERIOR}return!1}},Bn.INTERSECTION=1,Bn.UNION=2,Bn.DIFFERENCE=3,Bn.SYMDIFFERENCE=4,e(qn.prototype,{selfSnap:function(t){return new re(t).snapTo(t,this.snapTolerance)},removeCommonBits:function(t){this.cbr=new ae,this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this.cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this.geom),n=Bn.overlayOp(e[0],e[1],t);return this.prepareResult(n)},checkValid:function(t){t.isValid()||D.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=re.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(t){var e=this.removeCommonBits(t);return re.snap(e[0],e[1],this.snapTolerance)},interfaces_:function(){return[]},getClass:function(){return qn}}),qn.overlayOp=function(t,e,n){return new qn(t,e).getResultGeometry(n)},qn.union=function(t,e){return qn.overlayOp(t,e,Bn.UNION)},qn.intersection=function(t,e){return qn.overlayOp(t,e,Bn.INTERSECTION)},qn.symDifference=function(t,e){return qn.overlayOp(t,e,Bn.SYMDIFFERENCE)},qn.difference=function(t,e){return qn.overlayOp(t,e,Bn.DIFFERENCE)},e(kn.prototype,{getResultGeometry:function(t){var e=null,n=!1,i=null;try{e=Bn.overlayOp(this.geom[0],this.geom[1],t),n=!0}catch(t){if(!(t instanceof l))throw t;i=t}if(!n)try{e=qn.overlayOp(this.geom[0],this.geom[1],t)}catch(t){throw t instanceof l?i:t}return e},interfaces_:function(){return[]},getClass:function(){return kn}}),kn.overlayOp=function(t,e,n){return new kn(t,e).getResultGeometry(n)},kn.union=function(t,e){return kn.overlayOp(t,e,Bn.UNION)},kn.intersection=function(t,e){return kn.overlayOp(t,e,Bn.INTERSECTION)},kn.symDifference=function(t,e){return kn.overlayOp(t,e,Bn.SYMDIFFERENCE)},kn.difference=function(t,e){return kn.overlayOp(t,e,Bn.DIFFERENCE)},e(Vn.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,n=0,i=this.horizontalBisector(t);if(0===i.getLength())n=0,e=i.getCoordinate();else{var r=kn.overlayOp(i,t,Bn.INTERSECTION),o=this.widestGeometry(r);n=o.getEnvelopeInternal().getWidth(),e=Vn.centre(o.getEnvelopeInternal())}(null===this.interiorPoint||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function(){if(arguments[0]instanceof ft){var t=arguments[0];if(t.isEmpty())return t;for(var e=t.getGeometryN(0),n=1;n<t.getNumGeometries();n++)t.getGeometryN(n).getEnvelopeInternal().getWidth()>e.getEnvelopeInternal().getWidth()&&(e=t.getGeometryN(n));return e}if(arguments[0]instanceof B){var i=arguments[0];return i instanceof ft?this.widestGeometry(i):i}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),n=zn.getBisectorY(t);return this.factory.createLineString([new g(e.getMinX(),n),new g(e.getMaxX(),n)])},add:function(t){if(t instanceof Ct)this.addPolygon(t);else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},interfaces_:function(){return[]},getClass:function(){return Vn}}),Vn.centre=function(t){return new g(Vn.avg(t.getMinX(),t.getMaxX()),Vn.avg(t.getMinY(),t.getMaxY()))},Vn.avg=function(t,e){return(t+e)/2},e(zn.prototype,{updateInterval:function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));return Vn.avg(this.hiY,this.loY)},process:function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var i=e.getY(n);this.updateInterval(i)}},interfaces_:function(){return[]},getClass:function(){return zn}}),zn.getBisectorY=function(t){return new zn(t).getBisectorY()},Vn.SafeBisectorFinder=zn,e(Yn.prototype,{addEndpoints:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t instanceof xt)this.addEndpoints(t.getCoordinates());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addEndpoints(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var i=arguments[0];this.add(i[0]),this.add(i[i.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t instanceof xt)this.addInterior(t.getCoordinates());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addInterior(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var i=arguments[0];for(n=1;n<i.length-1;n++)this.add(i[n])}},add:function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new g(t),this.minDistance=e)},interfaces_:function(){return[]},getClass:function(){return Yn}}),e(Xn.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof B){var t=arguments[0];if(t instanceof It)this.add(t.getCoordinate());else if(t instanceof ft)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}else if(arguments[0]instanceof g){var i=arguments[0],r=i.distance(this.centroid);r<this.minDistance&&(this.interiorPoint=new g(i),this.minDistance=r)}},interfaces_:function(){return[]},getClass:function(){return Xn}}),e(jn.prototype,{interfaces_:function(){return[]},getClass:function(){return jn}}),jn.toDegrees=function(t){return 180*t/Math.PI},jn.normalize=function(t){for(;t>Math.PI;)t-=jn.PI_TIMES_2;for(;t<=-Math.PI;)t+=jn.PI_TIMES_2;return t},jn.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],i=n.x-e.x,r=n.y-e.y;return Math.atan2(r,i)}},jn.isAcute=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return i*(n.x-e.x)+r*(n.y-e.y)>0},jn.isObtuse=function(t,e,n){var i=t.x-e.x,r=t.y-e.y;return 0>i*(n.x-e.x)+r*(n.y-e.y)},jn.interiorAngle=function(t,e,n){var i=jn.angle(e,t),r=jn.angle(e,n);return Math.abs(r-i)},jn.normalizePositive=function(t){if(0>t){for(;0>t;)t+=jn.PI_TIMES_2;t>=jn.PI_TIMES_2&&(t=0)}else{for(;t>=jn.PI_TIMES_2;)t-=jn.PI_TIMES_2;0>t&&(t=0)}return t},jn.angleBetween=function(t,e,n){var i=jn.angle(e,t),r=jn.angle(e,n);return jn.diff(i,r)},jn.diff=function(t,e){var n=null;return(n=e>t?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},jn.toRadians=function(t){return t*Math.PI/180},jn.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?jn.COUNTERCLOCKWISE:0>n?jn.CLOCKWISE:jn.NONE},jn.angleBetweenOriented=function(t,e,n){var i=jn.angle(e,t),r=jn.angle(e,n)-i;return r<=-Math.PI?r+jn.PI_TIMES_2:r>Math.PI?r-jn.PI_TIMES_2:r},jn.PI_TIMES_2=2*Math.PI,jn.PI_OVER_2=Math.PI/2,jn.PI_OVER_4=Math.PI/4,jn.COUNTERCLOCKWISE=Ht.COUNTERCLOCKWISE,jn.CLOCKWISE=Ht.CLOCKWISE,jn.NONE=Ht.COLLINEAR,e(Hn.prototype,{area:function(){return Hn.area(this.p0,this.p1,this.p2)},signedArea:function(){return Hn.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(null===t)throw new i("Supplied point is null.");return Hn.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return Hn.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return Hn.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return Hn.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return Hn.area3D(this.p0,this.p1,this.p2)},centroid:function(){return Hn.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return Hn.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return Hn}}),Hn.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Hn.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Hn.det=function(t,e,n,i){return t*i-e*n},Hn.interpolateZ=function(t,e,n,i){var r=e.x,o=e.y,s=n.x-r,a=i.x-r,u=n.y-o,l=i.y-o,c=s*l-a*u,h=t.x-r,f=t.y-o,g=(l*h-a*f)/c,d=(-u*h+s*f)/c;return e.z+g*(n.z-e.z)+d*(i.z-e.z)},Hn.longestSideLength=function(t,e,n){var i=t.distance(e),r=e.distance(n),o=n.distance(t),s=i;return r>s&&(s=r),o>s&&(s=o),s},Hn.isAcute=function(t,e,n){return!(!jn.isAcute(t,e,n)||!jn.isAcute(e,n,t)||!jn.isAcute(n,t,e))},Hn.circumcentre=function(t,e,n){var i=n.x,r=n.y,o=t.x-i,s=t.y-r,a=e.x-i,u=e.y-r,l=2*Hn.det(o,s,a,u);return new g(i-Hn.det(s,o*o+s*s,u,a*a+u*u)/l,r+Hn.det(o,o*o+s*s,a,a*a+u*u)/l)},Hn.perpendicularBisector=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=new F(t.x+n/2,t.y+i/2,1),o=new F(t.x-i+n/2,t.y+n+i/2,1);return new F(r,o)},Hn.angleBisector=function(t,e,n){var i=e.distance(t),r=i/(i+e.distance(n)),o=n.x-t.x,s=n.y-t.y;return new g(t.x+r*o,t.y+r*s)},Hn.area3D=function(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,l=r*u-o*a,c=o*s-i*u,h=i*a-r*s,f=l*l+c*c+h*h;return Math.sqrt(f)/2},Hn.centroid=function(t,e,n){return new g((t.x+e.x+n.x)/3,(t.y+e.y+n.y)/3)},Hn.inCentre=function(t,e,n){var i=e.distance(n),r=t.distance(n),o=t.distance(e),s=i+r+o;return new g((i*t.x+r*e.x+o*n.x)/s,(i*t.y+r*e.y+o*n.y)/s)},e(Wn.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[1];return this.input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(1===this.input.getNumPoints()){var t=this.input.getCoordinates();return this.extremalPts=[new g(t[0])],null}var e=this.input.convexHull().getCoordinates();t=e;if(e[0].equals2D(e[e.length-1])&&(t=new Array(e.length-1).fill(null),j.copyDeep(e,0,t,0,e.length-1)),t.length<=2)return this.extremalPts=j.copyDeep(t),null;for(var n=Wn.lowestPoint(t),i=Wn.pointWitMinAngleWithX(t,n),r=0;r<t.length;r++){var o=Wn.pointWithMinAngleWithSegment(t,n,i);if(jn.isObtuse(n,o,i))return this.extremalPts=[new g(n),new g(i)],null;if(jn.isObtuse(o,n,i))n=o;else{if(!jn.isObtuse(o,i,n))return this.extremalPts=[new g(n),new g(i),new g(o)],null;i=o}}f.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return null!==this.extremalPts?null:(this.computeCirclePoints(),this.computeCentre(),void(null!==this.centre&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),null===this.centre)return this.input.getFactory().createPolygon();var t=this.input.getFactory().createPoint(this.centre);return 0===this.radius?t:t.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new g((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=Hn.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return Wn}}),Wn.pointWitMinAngleWithX=function(t,e){for(var n=r.MAX_VALUE,i=null,o=0;o<t.length;o++){var s=t[o];if(s!==e){var a=s.x-e.x,u=s.y-e.y;0>u&&(u=-u);var l=u/Math.sqrt(a*a+u*u);n>l&&(n=l,i=s)}}return i},Wn.lowestPoint=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e},Wn.pointWithMinAngleWithSegment=function(t,e,n){for(var i=r.MAX_VALUE,o=null,s=0;s<t.length;s++){var a=t[s];if(a!==e&&a!==n){var u=jn.angleBetween(e,a,n);i>u&&(i=u,o=a)}}return o},e(Zn.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),null===this.minWidthPt)return this.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([t,this.minWidthPt])},computeWidthConvex:function(t){this.convexHullPts=t instanceof Ct?t.getExteriorRing().getCoordinates():t.getCoordinates(),0===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):1===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):2===this.convexHullPts.length||3===this.convexHullPts.length?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(t){this.minWidth=r.MAX_VALUE;for(var e=1,n=new Wt,i=0;i<t.length-1;i++)n.p0=t[i],n.p1=t[i+1],e=this.findMaxPerpDistance(t,n,e)},computeMinimumDiameter:function(){if(null!==this.minWidthPt)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var t=new te(this.inputGeom).getConvexHull();this.computeWidthConvex(t)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(t,e,n){for(var i=e.distancePerpendicular(t[n]),r=i,o=n,s=o;r>=i;)i=r,o=s,s=Zn.nextIndex(t,o),r=e.distancePerpendicular(t[s]);return i<this.minWidth&&(this.minPtIndex=o,this.minWidth=i,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new Wt(e)),o},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),0===this.minWidth)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,n=r.MAX_VALUE,i=-r.MAX_VALUE,o=r.MAX_VALUE,s=-r.MAX_VALUE,a=0;a<this.convexHullPts.length;a++){var u=Zn.computeC(t,e,this.convexHullPts[a]);u>i&&(i=u),n>u&&(n=u);var l=Zn.computeC(-e,t,this.convexHullPts[a]);l>s&&(s=l),o>l&&(o=l)}var c=Zn.computeSegmentForLine(-t,-e,s),h=Zn.computeSegmentForLine(-t,-e,o),f=Zn.computeSegmentForLine(-e,t,i),g=Zn.computeSegmentForLine(-e,t,n),d=f.lineIntersection(c),p=g.lineIntersection(c),v=g.lineIntersection(h),y=f.lineIntersection(h),m=this.inputGeom.getFactory().createLinearRing([d,p,v,y,d]);return this.inputGeom.getFactory().createPolygon(m,null)},interfaces_:function(){return[]},getClass:function(){return Zn}}),Zn.nextIndex=function(t,e){return++e>=t.length&&(e=0),e},Zn.computeC=function(t,e,n){return t*n.y-e*n.x},Zn.getMinimumDiameter=function(t){return new Zn(t).getDiameter()},Zn.getMinimumRectangle=function(t){return new Zn(t).getMinimumRectangle()},Zn.computeSegmentForLine=function(t,e,n){var i=null,r=null;return Math.abs(e)>Math.abs(t)?(i=new g(0,n/e),r=new g(1,n/e-t/e)):(i=new g(n/t,0),r=new g(n/t-e/t,1)),new Wt(i,r)};var jo=Object.freeze({Centroid:Kt,CGAlgorithms:Ht,ConvexHull:te,InteriorPointArea:Vn,InteriorPointLine:Yn,InteriorPointPoint:Xn,RobustLineIntersector:Yt,MinimumBoundingCircle:Wn,MinimumDiameter:Zn});e(Kn.prototype,{getResultGeometry:function(){return new Jn(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(0>=t)throw new i("Tolerance must be positive");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return Kn}}),Kn.densifyPoints=function(t,e,n){for(var i=new Wt,r=new N,o=0;o<t.length-1;o++){i.p0=t[o],i.p1=t[o+1],r.add(i.p0,!1);var s=i.getLength(),a=Math.trunc(s/e)+1;if(a>1)for(var u=s/a,l=1;a>l;l++){var c=l*u/s,h=i.pointAlong(c);n.makePrecise(h),r.add(h,!1)}}return r.add(t[t.length-1],!1),r.toCoordinateArray()},Kn.densify=function(t,e){var n=new Kn(t);return n.setDistanceTolerance(e),n.getResultGeometry()},c(Jn,ne),e(Jn.prototype,{transformMultiPolygon:function(t,e){var n=ne.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformPolygon:function(t,e){var n=ne.prototype.transformPolygon.call(this,t,e);return e instanceof Lt?n:this.createValidArea(n)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),i=Kn.densifyPoints(n,this.distanceTolerance,e.getPrecisionModel());return e instanceof xt&&1===i.length&&(i=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(i)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return Jn}}),Kn.DensifyTransformer=Jn;var Ho=Object.freeze({Densifier:Kn});e(Qn.prototype,{find:function(t){var e=this;do{if(null===e)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var i=n.oNext();if(i.compareTo(t)!==e||i===this)return n.insertAfter(t),null;n=i}while(n!==this);f.shouldNeverReachHere()},insertAfter:function(t){f.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function(){var t=0,e=this;do{t++,e=e.oNext()}while(e!==this);return t},equals:function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),n=this.deltaY(),i=t.deltaX(),r=t.deltaY();if(e===i&&n===r)return 0;var o=Ae.quadrant(e,n),s=Ae.quadrant(i,r);return o>s?1:s>o?-1:Ht.computeOrientation(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;2===t.degree();)if((t=t.prev())===this)return null;return t},compareTo:function(t){var e=t;return this.compareAngularDirection(e)},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return Qn}}),Qn.init=function(t,e){if(null!==t._sym||null!==e._sym||null!==t._next||null!==e._next)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},Qn.create=function(t,e){var n=new Qn(t),i=new Qn(e);return n.init(i),n},c($n,Qn),e($n.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return $n}}),$n.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},$n.isMarked=function(t){return t.isMarked()},$n.setMark=function(t,e){t.setMark(e)},$n.markBoth=function(t){t.mark(),t.sym().mark()},$n.mark=function(t){t.mark()},e(ti.prototype,{insert:function(t,e,n){var i=this.create(t,e);null!==n?n.insert(i):this.vertexMap.put(t,i);var r=this.vertexMap.get(e);return null!==r?r.insert(i.sym()):this.vertexMap.put(e,i.sym()),i},create:function(t,e){var n=this.createEdge(t),i=this.createEdge(e);return Qn.init(n,i),n},createEdge:function(t){return new Qn(t)},addEdge:function(t,e){if(!ti.isValidEdge(t,e))return null;var n=this.vertexMap.get(t),i=null;return null!==n&&(i=n.find(e)),null!==i?i:this.insert(t,e,n)},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(t,e){var n=this.vertexMap.get(t);return null===n?null:n.find(e)},interfaces_:function(){return[]},getClass:function(){return ti}}),ti.isValidEdge=function(t,e){return 0!==e.compareTo(t)},c(ei,$n),e(ei.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return ei}}),c(ni,ti),e(ni.prototype,{createEdge:function(t){return new ei(t)},interfaces_:function(){return[]},getClass:function(){return ni}}),e(ii.prototype,{addLine:function(t){this.lines.add(this.factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym()).isStart()?null===this.ringStartEdge?(this.ringStartEdge=t,null):void(t.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=t)):null},getResult:function(){return null===this.result&&this.computeResult(),this.result},process:function(t){var e=t.prevNode();null===e&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new N,n=t;for(e.add(n.orig().copy(),!1);2===n.sym().degree();){var i=n.next();if(i===t)break;e.add(i.orig().copy(),!1),n=i}e.add(n.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new N,n=t;for(this.ringStartEdge=null,$n.markBoth(n),e.add(n.orig().copy(),!1);2===n.sym().degree();){this.updateRingStartEdge(n);var i=n.next();if(i===t)return this.buildRing(this.ringStartEdge),null;e.add(i.orig().copy(),!1),n=i,$n.markBoth(n)}e.add(n.dest().copy(),!1),this.stackEdges(n.sym()),this.addLine(e)},stackEdges:function(t){var e=t;do{$n.isMarked(e)||this.nodeEdgeStack.add(e),e=e.oNext()}while(e!==t)},computeResult:function(){for(var t=this.graph.getVertexEdges().iterator();t.hasNext();){var e=t.next();$n.isMarked(e)||this.process(e)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var t=this.nodeEdgeStack.pop();$n.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof B)arguments[0].apply({interfaces_:function(){return[U]},filter:function(t){t instanceof xt&&this.add(t)}});else if(T(arguments[0],v))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.add(e)}else if(arguments[0]instanceof xt){var n=arguments[0];null===this.factory&&(this.factory=n.getFactory());var i=n.getCoordinateSequence(),r=!1;for(t=1;t<i.size();t++){var o=this.graph.addEdge(i.getCoordinate(t-1),i.getCoordinate(t));null!==o&&(r||(o.setStart(),r=!0))}}},interfaces_:function(){return[]},getClass:function(){return ii}}),ii.dissolve=function(t){var e=new ii;return e.add(t),e.getResult()};var Wo=Object.freeze({LineDissolver:ii});e(ri.prototype,{hasChildren:function(){for(var t=0;4>t;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;4>e;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;4>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+1},size:function(){for(var t=0,e=0;4>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var n=0;4>n;n++)null!==this.subnode[n]&&this.subnode[n].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var n=this.items.iterator();n.hasNext();)e.visitItem(n.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;4>i;i++)if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break}return n||this.items.remove(e)},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;4>n;n++)null!==this.subnode[n]&&this.subnode[n].visit(t,e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;4>e;e++)if(null!==this.subnode[e]){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},isEmpty:function(){var t=!0;this.items.isEmpty()||(t=!1);for(var e=0;4>e;e++)null!==this.subnode[e]&&(this.subnode[e].isEmpty()||(t=!1));return t},add:function(t){this.items.add(t)},interfaces_:function(){return[u]},getClass:function(){return ri}}),ri.getSubnodeIndex=function(t,e,n){var i=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(i=3),t.getMaxY()<=n&&(i=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(i=2),t.getMaxY()<=n&&(i=0)),i},oi.exponent=function(t){return function(t,e){var n,i,r,o;if(o||(n=0>e||0>1/e,isFinite(e)||(o={d:32752,c:0,b:0,a:0},n&&(o.d+=32768),i=Math.pow(2,11)-1,r=0)),!o){for(i=1023,r=Math.abs(e);r>=2;)i++,r/=2;for(;1>r&&i>0;)i--,r*=2;0>=i&&(r/=2)}return i}(0,t)-1023},oi.powerOf2=function(t){return Math.pow(2,t)},e(si.prototype,{getLevel:function(){return this.level},computeKey:function(){if(1===arguments.length){var t=arguments[0];for(this.level=si.computeQuadLevel(t),this.env=new C,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=oi.powerOf2(e);this.pt.x=Math.floor(n.getMinX()/i)*i,this.pt.y=Math.floor(n.getMinY()/i)*i,this.env.init(this.pt.x,this.pt.x+i,this.pt.y,this.pt.y+i)}},getEnvelope:function(){return this.env},getCentre:function(){return new g((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return si}}),si.computeQuadLevel=function(t){var e=t.getWidth(),n=t.getHeight(),i=e>n?e:n;return oi.exponent(i)+1},c(ai,ri),e(ai.prototype,{find:function(t){var e=ri.getSubnodeIndex(t,this.centrex,this.centrey);return-1===e?this:null!==this.subnode[e]?this.subnode[e].find(t):this},isSearchMatch:function(t){return this.env.intersects(t)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getEnvelope:function(){return this.env},getNode:function(t){var e=ri.getSubnodeIndex(t,this.centrex,this.centrey);return-1!==e?this.getSubnode(e).getNode(t):this},createSubnode:function(t){var e=0,n=0,i=0,r=0;switch(t){case 0:e=this.env.getMinX(),n=this.centrex,i=this.env.getMinY(),r=this.centrey;break;case 1:e=this.centrex,n=this.env.getMaxX(),i=this.env.getMinY(),r=this.centrey;break;case 2:e=this.env.getMinX(),n=this.centrex,i=this.centrey,r=this.env.getMaxY();break;case 3:e=this.centrex,n=this.env.getMaxX(),i=this.centrey,r=this.env.getMaxY()}return new ai(new C(e,n,i,r),this.level-1)},insertNode:function(t){f.isTrue(null===this.env||this.env.contains(t.env));var e=ri.getSubnodeIndex(t.env,this.centrex,this.centrey);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insertNode(t),this.subnode[e]=n}},interfaces_:function(){return[]},getClass:function(){return ai}}),ai.createNode=function(t){var e=new si(t);return new ai(e.getEnvelope(),e.getLevel())},ai.createExpanded=function(t,e){var n=new C(e);null!==t&&n.expandToInclude(t.env);var i=ai.createNode(n);return null!==t&&i.insertNode(t),i},e(ui.prototype,{interfaces_:function(){return[]},getClass:function(){return ui}}),ui.isZeroWidth=function(t,e){var n=e-t;if(0===n)return!0;var i=n/Math.max(Math.abs(t),Math.abs(e));return oi.exponent(i)<=ui.MIN_BINARY_EXPONENT},ui.MIN_BINARY_EXPONENT=-50,c(li,ri),e(li.prototype,{insert:function(t,e){var n=ri.getSubnodeIndex(t,li.origin.x,li.origin.y);if(-1===n)return this.add(e),null;var i=this.subnode[n];if(null===i||!i.getEnvelope().contains(t)){var r=ai.createExpanded(i,t);this.subnode[n]=r}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){f.isTrue(t.getEnvelope().contains(e));var i=ui.isZeroWidth(e.getMinX(),e.getMaxX()),r=ui.isZeroWidth(e.getMinY(),e.getMaxY());(i||r?t.find(e):t.getNode(e)).add(n)},interfaces_:function(){return[]},getClass:function(){return li}}),li.origin=new g(0,0),e(ci.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=ci.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(1===arguments.length){var t=arguments[0],e=new Sn;return this.query(t,e),e.getItems()}if(2===arguments.length){var n=arguments[0],i=arguments[1];this.root.visit(n,i)}},queryAll:function(){var t=new I;return this.root.addAllItems(t),t},remove:function(t,e){var n=ci.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var n=t.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)},depth:function(){return null!==this.root?this.root.depth():0},isEmpty:function(){return null===this.root},interfaces_:function(){return[xe,u]},getClass:function(){return ci}}),ci.ensureExtent=function(t,e){var n=t.getMinX(),i=t.getMaxX(),r=t.getMinY(),o=t.getMaxY();return n!==i&&r!==o?t:(n===i&&(i=(n-=e/2)+e/2),r===o&&(o=(r-=e/2)+e/2),new C(n,i,r,o))},ci.serialVersionUID=-0x678b60c967a25400;var Zo=Object.freeze({Quadtree:ci}),Ko=Object.freeze({STRtree:we}),Jo=Object.freeze({quadtree:Zo,strtree:Ko}),Qo=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];e(hi.prototype,{read:function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!$o[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==Qo.indexOf(n)?$o[n].apply(this,[e.coordinates]):"GeometryCollection"===n?$o[n].apply(this,[e.geometries]):$o[n].apply(this,[e])},write:function(t){var e=t.getGeometryType();if(!ts[e])throw new Error("Geometry is not supported");return ts[e].apply(this,[t])}});var $o={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var i=t.geometry.type;if(!$o[i])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=$o.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(new g(i[0],i[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new g(t[0],t[1]),new g(t[2],t[1]),new g(t[2],t[3]),new g(t[0],t[3]),new g(t[0],t[1])])},Point:function(t){var e=new g(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push($o.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=$o.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push($o.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=$o.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),i=[],r=1;r<t.length;++r){var o=t[r],s=$o.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);i.push(a)}return this.geometryFactory.createPolygon(n,i)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push($o.Polygon.apply(this,[i]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var i=t[n];e.push(this.read(i))}return this.geometryFactory.createGeometryCollection(e)}},ts={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:ts.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=ts.Point.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),i=0;i<n.length;++i){var r=n[i];e.push(ts.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=ts.LineString.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=ts.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var i=0;i<t.holes.length;++i){var r=t.holes[i],o=ts.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=ts.Polygon.apply(this,[i]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var i=t.geometries[n],r=i.getGeometryType();e.push(ts[r].apply(this,[i]))}return{type:"GeometryCollection",geometries:e}}};e(fi.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Ut.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;n>e;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;n>e;e++)this.reducePrecision(t.geometries[e])}}),e(gi.prototype,{write:function(t){return this.parser.write(t)}}),e(di.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Ut.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(var e=0,n=t.points.coordinates.length;n>e;e++)this.precisionModel.makePrecise(t.points.coordinates[e]);else if(t.geometries)for(var i=0,r=t.geometries.length;r>i;i++)this.reducePrecision(t.geometries[i])}}),e(vi.prototype,{read:function(t){return t instanceof ol.geom.Point?this.convertFromPoint(t):t instanceof ol.geom.LineString?this.convertFromLineString(t):t instanceof ol.geom.LinearRing?this.convertFromLinearRing(t):t instanceof ol.geom.Polygon?this.convertFromPolygon(t):t instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof ol.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new g(e[0],e[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(t){return new g(t[0],t[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(t){return new g(t[0],t[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),n=null,i=[],r=0;r<e.length;r++){var o=this.convertFromLinearRing(e[r]);0===r?n=o:i.push(o)}return this.geometryFactory.createPolygon(n,i)},convertFromMultiPoint:function(t){var e=t.getPoints().map(function(t){return this.convertFromPoint(t)},this);return this.geometryFactory.createMultiPoint(e)},convertFromMultiLineString:function(t){var e=t.getLineStrings().map(function(t){return this.convertFromLineString(t)},this);return this.geometryFactory.createMultiLineString(e)},convertFromMultiPolygon:function(t){var e=t.getPolygons().map(function(t){return this.convertFromPolygon(t)},this);return this.geometryFactory.createMultiPolygon(e)},convertFromCollection:function(t){var e=t.getGeometries().map(function(t){return this.read(t)},this);return this.geometryFactory.createGeometryCollection(e)},write:function(t){return"Point"===t.getGeometryType()?this.convertToPoint(t.getCoordinate()):"LineString"===t.getGeometryType()?this.convertToLineString(t):"LinearRing"===t.getGeometryType()?this.convertToLinearRing(t):"Polygon"===t.getGeometryType()?this.convertToPolygon(t):"MultiPoint"===t.getGeometryType()?this.convertToMultiPoint(t):"MultiLineString"===t.getGeometryType()?this.convertToMultiLineString(t):"MultiPolygon"===t.getGeometryType()?this.convertToMultiPolygon(t):"GeometryCollection"===t.getGeometryType()?this.convertToCollection(t):void 0},convertToPoint:function(t){return new ol.geom.Point([t.x,t.y])},convertToLineString:function(t){var e=t.points.coordinates.map(pi);return new ol.geom.LineString(e)},convertToLinearRing:function(t){var e=t.points.coordinates.map(pi);return new ol.geom.LinearRing(e)},convertToPolygon:function(t){for(var e=[t.shell.points.coordinates.map(pi)],n=0;n<t.holes.length;n++)e.push(t.holes[n].points.coordinates.map(pi));return new ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new ol.geom.MultiPoint(t.getCoordinates().map(pi))},convertToMultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToLineString(t.geometries[n]).getCoordinates());return new ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToPolygon(t.geometries[n]).getCoordinates());return new ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],n=0;n<t.geometries.length;n++){var i=t.geometries[n];e.push(this.write(i))}return new ol.geom.GeometryCollection(e)}});var es=Object.freeze({GeoJSONReader:fi,GeoJSONWriter:gi,OL3Parser:vi,WKTReader:di,WKTWriter:Vt});e(yi.prototype,{rescale:function(){if(T(arguments[0],v))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){var n=arguments[0];2===n.length&&(new g(n[0]),new g(n[1]));for(t=0;t<n.length;t++)n[t].x=n[t].x/this.scaleFactor+this.offsetX,n[t].y=n[t].y/this.scaleFactor+this.offsetY;2===n.length&&n[0].equals2D(n[1])&&D.out.println(n)}},scale:function(){if(T(arguments[0],v)){for(var t=arguments[0],e=new I,n=t.iterator();n.hasNext();){var i=n.next();e.add(new Pe(this.scale(i.getCoordinates()),i.getData()))}return e}if(arguments[0]instanceof Array){var r=arguments[0],o=new Array(r.length).fill(null);for(n=0;n<r.length;n++)o[n]=new g(Math.round((r[n].x-this.offsetX)*this.scaleFactor),Math.round((r[n].y-this.offsetY)*this.scaleFactor),r[n].z);return j.removeRepeatedPoints(o)}},isIntegerPrecision:function(){return 1===this.scaleFactor},getNodedSubstrings:function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},interfaces_:function(){return[Fe]},getClass:function(){return yi}});var ns=Object.freeze({MCIndexNoder:Ue,ScaledNoder:yi,SegmentString:ge});e(mi.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new at,n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n).getCoordinate();if(e.contains(i))return this.nonSimpleLocation=i,!1;e.add(i)}return!0},isSimplePolygonal:function(t){for(var e=wn.getLines(t).iterator();e.hasNext();){var n=e.next();if(!this.isSimpleLinearGeometry(n))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new rt,n=t.getEdgeIterator();n.hasNext();){var i=n.next(),r=(i.getMaximumSegmentIndex(),i.isClosed()),o=i.getCoordinate(0);this.addEndpoint(e,o,r);var s=i.getCoordinate(i.getNumPoints()-1);this.addEndpoint(e,s,r)}for(n=e.values().iterator();n.hasNext();){var a=n.next();if(a.isClosed&&2!==a.degree)return this.nonSimpleLocation=a.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new Dn(0,t),n=new Yt,i=e.computeSelfNodes(n,!0);return!(i.hasIntersection()&&(i.hasProperIntersection()?(this.nonSimpleLocation=i.getProperIntersectionPoint(),1):this.hasNonEndpointIntersection(e)||this.isClosedEndpointsInInterior&&this.hasClosedEndpointIntersection(e)))},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getMaximumSegmentIndex(),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next();if(!o.isEndPoint(i))return this.nonSimpleLocation=o.getCoordinate(),!0}return!1},addEndpoint:function(t,e,n){var i=t.get(e);null===i&&(i=new xi(e),t.put(e,i)),i.addEndpoint(n)},computeSimple:function(t){return this.nonSimpleLocation=null,!!t.isEmpty()||(t instanceof xt?this.isSimpleLinearGeometry(t):t instanceof gt?this.isSimpleLinearGeometry(t):t instanceof wt?this.isSimpleMultiPoint(t):T(t,Nt)?this.isSimplePolygonal(t):!(t instanceof ft)||this.isSimpleGeometryCollection(t))},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return mi}}),e(xi.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return xi}}),mi.EndpointInfo=xi,e(Ei.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this.quadrantSegments=t,0===this.quadrantSegments&&(this.joinStyle=Ei.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=Ei.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),0>=t&&(this.quadrantSegments=1),this.joinStyle!==Ei.JOIN_ROUND&&(this.quadrantSegments=Ei.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(t){this.joinStyle=t},setSimplifyFactor:function(t){this.simplifyFactor=0>t?0:t},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(t){this.endCapStyle=t},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(t){this.mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return Ei}}),Ei.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Ei.CAP_ROUND=1,Ei.CAP_FLAT=2,Ei.CAP_SQUARE=3,Ei.JOIN_ROUND=1,Ei.JOIN_MITRE=2,Ei.JOIN_BEVEL=3,Ei.DEFAULT_QUADRANT_SEGMENTS=8,Ei.DEFAULT_MITRE_LIMIT=5,Ei.DEFAULT_SIMPLIFY_FACTOR=.01,e(Ii.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return 0>n&&(n=this.getRightmostSideOfSegment(t,e-1)),0>n&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n},findRightmostEdgeAtVertex:function(){var t=this.minDe.getEdge().getCoordinates();f.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],i=Ht.computeOrientation(this.minCoord,n,e),r=!1;e.y<this.minCoord.y&&n.y<this.minCoord.y&&i===Ht.COUNTERCLOCKWISE?r=!0:e.y>this.minCoord.y&&n.y>this.minCoord.y&&i===Ht.CLOCKWISE&&(r=!0),r&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(t,e){var n=t.getEdge().getCoordinates();if(0>e||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var i=je.LEFT;return n[e].y<n[e+1].y&&(i=je.RIGHT),i},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this.minCoord||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n])},findRightmostEdgeAtNode:function(){var t=this.minDe.getNode().getEdges();this.minDe=t.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}f.isTrue(0!==this.minIndex||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this.minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe,this.getRightmostSide(this.minDe,this.minIndex)===je.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return Ii}}),Ni.prototype.addLast=function(t){this.array_.push(t)},Ni.prototype.removeFirst=function(){return this.array_.shift()},Ni.prototype.isEmpty=function(){return 0===this.array_.length},e(Ci.prototype,{clearVisitedEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){t.next().setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){if((i=n.next()).isVisited()||i.getSym().isVisited()){e=i;break}}if(null===e)throw new qe("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(n=t.getEdges().iterator();n.hasNext();){var i;(i=n.next()).setVisited(!0),this.copySymDepths(i)}},computeDepth:function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(je.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(je.RIGHT)>=1&&e.getDepth(je.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new Q,n=new Ni,i=t.getNode();for(n.addLast(i),e.add(i),t.setVisited(!0);!n.isEmpty();){var r=n.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(n.addLast(a),e.add(a))}}}},compareTo:function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},getEnvelope:function(){if(null===this.env){for(var t=new C,e=this.dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),i=0;i<n.length-1;i++)t.expandToInclude(n[i]);this.env=t}return this.env},addReachable:function(t){var e=new Qt;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth(je.LEFT,t.getDepth(je.RIGHT)),e.setDepth(je.RIGHT,t.getDepth(je.LEFT))},add:function(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var i=n.next();this.dirEdgeList.add(i);var r=i.getSym().getNode();r.isVisited()||e.push(r)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[o]},getClass:function(){return Ci}}),e(wi.prototype,{isDeletable:function(t,e,n,i){var r=this.inputLine[t],o=this.inputLine[e],s=this.inputLine[n];return!(!this.isConcave(r,o,s)||!this.isShallow(r,o,s,i))&&this.isShallowSampled(r,o,t,n,i)},deleteShallowConcavities:function(){for(var t=1,e=(this.inputLine.length,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),i=!1;n<this.inputLine.length;){var r=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=wi.DELETE,r=!0,i=!0),t=r?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return i},isShallowConcavity:function(t,e,n,i){return Ht.computeOrientation(t,e,n)===this.angleOrientation&&i>Ht.distancePointLine(e,t,n)},isShallowSampled:function(t,e,n,i,r){var o=Math.trunc((i-n)/wi.NUM_PTS_TO_CHECK);0>=o&&(o=1);for(var s=n;i>s;s+=o)if(!this.isShallow(t,e,this.inputLine[s],r))return!1;return!0},isConcave:function(t,e,n){return Ht.computeOrientation(t,e,n)===this.angleOrientation},simplify:function(t){this.distanceTol=Math.abs(t),0>t&&(this.angleOrientation=Ht.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===wi.DELETE;)e++;return e},isShallow:function(t,e,n,i){return i>Ht.distancePointLine(e,t,n)},collapseLine:function(){for(var t=new N,e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==wi.DELETE&&t.add(this.inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return wi}}),wi.simplify=function(t,e){return new wi(t).simplify(e)},wi.INIT=0,wi.DELETE=1,wi.KEEP=1,wi.NUM_PTS_TO_CHECK=10,e(Si.prototype,{getCoordinates:function(){return this.ptList.toArray(Si.COORDINATE_ARRAY_TYPE)},setPrecisionModel:function(t){this.precisionModel=t},addPt:function(t){var e=new g(t);return this.precisionModel.makePrecise(e),this.isRedundant(e)?null:void this.ptList.add(e)},reverse:function(){},addPts:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(n=t.length-1;n>=0;n--)this.addPt(t[n])},isRedundant:function(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1);return t.distance(e)<this.minimimVertexDistance},toString:function(){return(new qt).createLineString(this.getCoordinates()).toString()},closeRing:function(){if(this.ptList.size()<1)return null;var t=new g(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1);return this.ptList.size()>=2&&this.ptList.get(this.ptList.size()-2),t.equals(e)?null:void this.ptList.add(t)},setMinimumVertexDistance:function(t){this.minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return Si}}),Si.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),e(Li.prototype,{addNextSegment:function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=Ht.computeOrientation(this.s0,this.s1,this.s2),i=n===Ht.CLOCKWISE&&this.side===je.LEFT||n===Ht.COUNTERCLOCKWISE&&this.side===je.RIGHT;0===n?this.addCollinear(e):i?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},addLineEndCap:function(t,e){var n=new Wt(t,e),i=new Wt;this.computeOffsetSegment(n,je.LEFT,this.distance,i);var r=new Wt;this.computeOffsetSegment(n,je.RIGHT,this.distance,r);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this.bufParams.getEndCapStyle()){case Ei.CAP_ROUND:this.segList.addPt(i.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Ht.CLOCKWISE,this.distance),this.segList.addPt(r.p1);break;case Ei.CAP_FLAT:this.segList.addPt(i.p1),this.segList.addPt(r.p1);break;case Ei.CAP_SQUARE:var u=new g;u.x=Math.abs(this.distance)*Math.cos(a),u.y=Math.abs(this.distance)*Math.sin(a);var l=new g(i.p1.x+u.x,i.p1.y+u.y),c=new g(r.p1.x+u.x,r.p1.y+u.y);this.segList.addPt(l),this.segList.addPt(c)}},getCoordinates:function(){return this.segList.getCoordinates()},addMitreJoin:function(t,e,n,i){var r=!0,o=null;try{o=F.intersection(e.p0,e.p1,n.p0,n.p1),(0>=i?1:o.distance(t)/Math.abs(i))>this.bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof S))throw t;o=new g(0,0),r=!1}r?this.segList.addPt(o):this.addLimitedMitreJoin(e,n,i,this.bufParams.getMitreLimit())},addFilletCorner:function(t,e,n,i,r){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,l=n.y-t.y,c=Math.atan2(l,u);i===Ht.CLOCKWISE?c>=a&&(a+=2*Math.PI):a>=c&&(a-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,a,c,i,r),this.segList.addPt(n)},addOutsideTurn:function(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*Li.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===Ei.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===Ei.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(t){this.segList.addPt(new g(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new g(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new g(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new g(t.x-this.distance,t.y+this.distance)),this.segList.closeRing()},addSegments:function(t,e){this.segList.addPts(t,e)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)},addLimitedMitreJoin:function(t,e,n,i){var r=this.seg0.p1,o=jn.angle(r,this.seg0.p0),s=(jn.angle(r,this.seg1.p1),jn.angleBetweenOriented(this.seg0.p0,r,this.seg1.p1))/2,a=jn.normalize(o+s),u=jn.normalize(a+Math.PI),l=i*n,c=n-l*Math.abs(Math.sin(s)),h=new Wt(r,new g(r.x+l*Math.cos(u),r.y+l*Math.sin(u))),f=h.pointAlongOffset(1,c),d=h.pointAlongOffset(1,-c);this.side===je.LEFT?(this.segList.addPt(f),this.segList.addPt(d)):(this.segList.addPt(d),this.segList.addPt(f))},computeOffsetSegment:function(t,e,n,i){var r=e===je.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=r*n*o/a,l=r*n*s/a;i.p0.x=t.p0.x-l,i.p0.y=t.p0.y+u,i.p1.x=t.p1.x-l,i.p1.y=t.p1.y+u},addFilletArc:function(t,e,n,i,r){var o=i===Ht.CLOCKWISE?-1:1,s=Math.abs(e-n),a=Math.trunc(s/this.filletAngleQuantum+.5);if(1>a)return null;var u;u=s/a;for(var l=0,c=new g;s>l;){var h=e+o*l;c.x=t.x+r*Math.cos(h),c.y=t.y+r*Math.sin(h),this.segList.addPt(c),l+=u}},addInsideTurn:function(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*Li.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var n=new g((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n);var i=new g((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(i)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(t){var e=new g(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},init:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new Si,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*Li.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2),this.li.getIntersectionNum()>=2&&(this.bufParams.getJoinStyle()===Ei.JOIN_BEVEL||this.bufParams.getJoinStyle()===Ei.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,Ht.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return Li}}),Li.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Li.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Li.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Li.MAX_CLOSING_SEG_LEN_FACTOR=80,e(Ti.prototype,{getOffsetCurve:function(t,e){if(this.distance=e,0===e)return null;var n=0>e,i=Math.abs(e),r=this.getSegGen(i);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,n,r);var o=r.getCoordinates();return n&&j.reverse(o),o},computeSingleSidedBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var r=wi.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],je.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{n.addSegments(t,!1);var a=wi.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],je.LEFT),n.addFirstSegment();for(s=2;u>=s;s++)n.addNextSegment(a[s],!0)}n.addLastSegment(),n.closeRing()},computeRingBufferCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);e===je.RIGHT&&(i=-i);var r=wi.simplify(t,i),o=r.length-1;n.initSideSegments(r[o-1],r[0],e);for(var s=1;o>=s;s++){var a=1!==s;n.addNextSegment(r[s],a)}n.closeRing()},computeLineBufferCurve:function(t,e){var n=this.simplifyTolerance(this.distance),i=wi.simplify(t,n),r=i.length-1;e.initSideSegments(i[0],i[1],je.LEFT);for(var o=2;r>=o;o++)e.addNextSegment(i[o],!0);e.addLastSegment(),e.addLineEndCap(i[r-1],i[r]);var s=wi.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],je.LEFT);for(o=a-2;o>=0;o--)e.addNextSegment(s[o],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},computePointCurve:function(t,e){switch(this.bufParams.getEndCapStyle()){case Ei.CAP_ROUND:e.createCircle(t);break;case Ei.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if(this.distance=e,0>e&&!this.bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),i=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],i);else if(this.bufParams.isSingleSided()){var r=0>e;this.computeSingleSidedBufferCurve(t,r,i)}else this.computeLineBufferCurve(t,i);return i.getCoordinates()},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(t){return t*this.bufParams.getSimplifyFactor()},getRingCurve:function(t,e,n){if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Ti.copyCoordinates(t);var i=this.getSegGen(n);return this.computeRingBufferCurve(t,e,i),i.getCoordinates()},computeOffsetCurve:function(t,e,n){var i=this.simplifyTolerance(this.distance);if(e){var r=wi.simplify(t,-i),o=r.length-1;n.initSideSegments(r[o],r[o-1],je.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(r[s],!0)}else{var a=wi.simplify(t,i),u=a.length-1;n.initSideSegments(a[0],a[1],je.LEFT),n.addFirstSegment();for(s=2;u>=s;s++)n.addNextSegment(a[s],!0)}n.addLastSegment()},getSegGen:function(t){return new Li(this.precisionModel,this.bufParams,t)},interfaces_:function(){return[]},getClass:function(){return Ti}}),Ti.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new g(t[n]);return e},e(Ri.prototype,{findStabbedSegments:function(){if(1===arguments.length){for(var t=arguments[0],e=new I,n=this.subgraphs.iterator();n.hasNext();){var i=n.next(),r=i.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,i.getDirectedEdges(),e)}return e}if(3===arguments.length)if(T(arguments[2],m)&&arguments[0]instanceof g&&arguments[1]instanceof nn){var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getEdge().getCoordinates();for(n=0;n<u.length-1;n++){if(this.seg.p0=u[n],this.seg.p1=u[n+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse(),!(Math.max(this.seg.p0.x,this.seg.p1.x)<o.x||this.seg.isHorizontal()||o.y<this.seg.p0.y||o.y>this.seg.p1.y||Ht.computeOrientation(this.seg.p0,this.seg.p1,o)===Ht.RIGHT)){var l=s.getDepth(je.LEFT);this.seg.p0.equals(u[n])||(l=s.getDepth(je.RIGHT));var c=new bi(this.seg,l);a.add(c)}}}else if(T(arguments[2],m)&&arguments[0]instanceof g&&T(arguments[1],m)){var h=arguments[0],f=arguments[1],d=arguments[2];for(n=f.iterator();n.hasNext();){var p=n.next();p.isForward()&&this.findStabbedSegments(h,p,d)}}},getDepth:function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Xo.min(e).leftDepth},interfaces_:function(){return[]},getClass:function(){return Ri}}),e(bi.prototype,{compareTo:function(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(e.upwardSeg);return 0!==n?n:0!=(n=-1*e.upwardSeg.orientationIndex(this.upwardSeg))?n:this.upwardSeg.compareTo(e.upwardSeg)},compareX:function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[o]},getClass:function(){return bi}}),Ri.DepthSegment=bi,e(Oi.prototype,{addPoint:function(t){if(this.distance<=0)return null;var e=t.getCoordinates(),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,L.EXTERIOR,L.INTERIOR)},addPolygon:function(t){var e=this.distance,n=je.LEFT;this.distance<0&&(e=-this.distance,n=je.RIGHT);var i=t.getExteriorRing(),r=j.removeRepeatedPoints(i.getCoordinates());if(this.distance<0&&this.isErodedCompletely(i,this.distance))return null;if(this.distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,n,L.EXTERIOR,L.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=j.removeRepeatedPoints(s.getCoordinates());this.distance>0&&this.isErodedCompletely(s,-this.distance)||this.addPolygonRing(a,e,je.opposite(n),L.INTERIOR,L.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var n=new Hn(t[0],t[1],t[2]),i=n.inCentre();return Ht.distancePointLine(i,n.p0,n.p1)<Math.abs(e)},addLineString:function(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var e=j.removeRepeatedPoints(t.getCoordinates()),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,L.EXTERIOR,L.INTERIOR)},addCurve:function(t,e,n){if(null===t||t.length<2)return null;var i=new Pe(t,new We(0,L.BOUNDARY,e,n));this.curveList.add(i)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(t,e,n,i,r){if(0===e&&t.length<St.MINIMUM_VALID_SIZE)return null;var o=i,s=r;t.length>=St.MINIMUM_VALID_SIZE&&Ht.isCCW(t)&&(o=r,s=i,n=je.opposite(n));var a=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},add:function(t){if(t.isEmpty())return null;if(t instanceof Ct)this.addPolygon(t);else if(t instanceof xt)this.addLineString(t);else if(t instanceof It)this.addPoint(t);else if(t instanceof wt)this.addCollection(t);else if(t instanceof gt)this.addCollection(t);else if(t instanceof Lt)this.addCollection(t);else{if(!(t instanceof ft))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var n=t.getCoordinates();if(n.length<4)return 0>e;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var i=t.getEnvelopeInternal(),r=Math.min(i.getHeight(),i.getWidth());return 0>e&&2*Math.abs(e)>r},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},interfaces_:function(){return[]},getClass:function(){return Oi}}),e(Pi.prototype,{isTrivialIntersection:function(t,e,n,i){if(t===n&&1===this.li.getIntersectionNum()){if(Pi.isAdjacentSegments(e,i))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&i===r||0===i&&e===r)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,i)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[ke]},getClass:function(){return Pi}}),Pi.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)},e(_i.prototype,{setWorkingPrecisionModel:function(t){this.workingPrecisionModel=t},insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),i=t.getLabel();e.isPointwiseEqual(t)||(i=new We(t.getLabel())).flip(),n.merge(i);var r=_i.depthDelta(i),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this.edgeList.add(t),t.setDepthDelta(_i.depthDelta(t.getLabel()))},buildSubgraphs:function(t,e){for(var n=new I,i=t.iterator();i.hasNext();){var r=i.next(),o=r.getRightmostCoordinate(),s=new Ri(n).getDepth(o);r.computeDepth(s),r.findResultEdges(),n.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},createSubgraphs:function(t){for(var e=new I,n=t.getNodes().iterator();n.hasNext();){var i=n.next();if(!i.isVisited()){var r=new Ci;r.create(i),e.add(r)}}return Xo.sort(e,Xo.reverseOrder()),e},createEmptyResultGeometry:function(){return this.geomFact.createPolygon()},getNoder:function(t){if(null!==this.workingNoder)return this.workingNoder;var e=new Ue,n=new Yt;return n.setPrecisionModel(t),e.setSegmentIntersector(new Pi(n)),e},buffer:function(t,e){var n=this.workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();var i=new Oi(t,e,new Ti(n,this.bufParams)).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this.graph=new on(new gn),this.graph.addEdges(this.edgeList.getEdges());var r=this.createSubgraphs(this.graph),o=new sn(this.geomFact);this.buildSubgraphs(r,o);var s=o.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this.geomFact.buildGeometry(s)},computeNodedEdges:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var i=n.getNodedSubstrings().iterator();i.hasNext();){var r=i.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=r.getData(),a=new An(r.getCoordinates(),new We(s));this.insertUniqueEdge(a)}}},setNoder:function(t){this.workingNoder=t},interfaces_:function(){return[]},getClass:function(){return _i}}),_i.depthDelta=function(t){var e=t.getLocation(0,je.LEFT),n=t.getLocation(0,je.RIGHT);return e===L.INTERIOR&&n===L.EXTERIOR?1:e===L.EXTERIOR&&n===L.INTERIOR?-1:0},_i.convertSegStrings=function(t){for(var e=new qt,n=new I;t.hasNext();){var i=t.next(),r=e.createLineString(i.getCoordinates());n.add(r)}return e.buildGeometry(n)},e(Mi.prototype,{checkEndPtVertexIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this.segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this.segStrings)}else if(2===arguments.length){var n=arguments[0];for(t=arguments[1].iterator();t.hasNext();){e=t.next().getCoordinates();for(var i=1;i<e.length-1;i++)if(e[i].equals(n))throw new l("found endpt/interior pt intersection at index "+i+" :pt "+n)}}},checkInteriorIntersections:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this.segStrings.iterator();n.hasNext();){var i=n.next();this.checkInteriorIntersections(e,i)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),u=0;u<s.length-1;u++)for(var c=0;c<a.length-1;c++)this.checkInteriorIntersections(r,u,o,c);else if(4===arguments.length){var h=arguments[0],f=arguments[1],g=arguments[2],d=arguments[3];if(h===g&&f===d)return null;var p=h.getCoordinates()[f],v=h.getCoordinates()[f+1],y=g.getCoordinates()[d],m=g.getCoordinates()[d+1];if(this.li.computeIntersection(p,v,y,m),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,p,v)||this.hasInteriorIntersection(this.li,y,m)))throw new l("found non-noded intersection at "+p+"-"+v+" and "+y+"-"+m)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(0===arguments.length)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length){var n=arguments[0].getCoordinates();for(t=0;t<n.length-2;t++)this.checkCollapse(n[t],n[t+1],n[t+2])}},hasInteriorIntersection:function(t,e,n){for(var i=0;i<t.getIntersectionNum();i++){var r=t.getIntersection(i);if(!r.equals(e)&&!r.equals(n))return!0}return!1},checkCollapse:function(t,e,n){if(t.equals(n))throw new l("found non-noded collapse at "+Mi.fact.createLineString([t,e,n]))},interfaces_:function(){return[]},getClass:function(){return Mi}}),Mi.fact=new qt,e(Ai.prototype,{intersectsScaled:function(t,e){var n=Math.min(t.x,e.x),i=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this.maxx<n||this.minx>i||this.maxy<r||this.miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return f.isTrue(!(s&&a),"Found bad envelope test"),a},initCorners:function(t){this.minx=t.x-.5,this.maxx=t.x+.5,this.miny=t.y-.5,this.maxy=t.y+.5,this.corner[0]=new g(this.maxx,this.maxy),this.corner[1]=new g(this.minx,this.maxy),this.corner[2]=new g(this.minx,this.miny),this.corner[3]=new g(this.maxx,this.miny)},intersects:function(t,e){return 1===this.scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(t){return Math.round(t*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){if(null===this.safeEnv){var t=Ai.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new C(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},intersectsPixelClosure:function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!(this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.hasIntersection()||(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.hasIntersection()))))},intersectsToleranceSquare:function(t,e){var n=!1,i=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),!!(this.li.isProper()||(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.isProper()||(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.isProper()||(this.li.hasIntersection()&&(i=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.isProper()||n&&i||t.equals(this.pt)||e.equals(this.pt)))))},addSnappedNode:function(t,e){var n=t.getCoordinate(e),i=t.getCoordinate(e+1);return!!this.intersects(n,i)&&(t.addIntersection(this.getCoordinate(),e),!0)},interfaces_:function(){return[]},getClass:function(){return Ai}}),Ai.SAFE_ENV_EXPANSION_FACTOR=.75,e(Di.prototype,{select:function(){if(1===arguments.length)arguments[0];else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},interfaces_:function(){return[]},getClass:function(){return Di}}),e(Fi.prototype,{snap:function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2],r=e.getSafeEnvelope(),o=new Gi(e,n,i);return this.index.query(r,{interfaces_:function(){return[me]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return Fi}}),c(Gi,Di),e(Gi.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(2!==arguments.length)return Di.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();return null!==this.parentEdge&&n===this.parentEdge&&e===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(n,e))},interfaces_:function(){return[]},getClass:function(){return Gi}}),Fi.HotPixelSnapAction=Gi,e(Ui.prototype,{processIntersections:function(t,e,n,i){if(t===n&&e===i)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[i],a=n.getCoordinates()[i+1];if(this.li.computeIntersection(r,o,s,a),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var u=0;u<this.li.getIntersectionNum();u++)this.interiorIntersections.add(this.li.getIntersection(u));t.addIntersections(this.li,e,0),n.addIntersections(this.li,i,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[ke]},getClass:function(){return Ui}}),e(Bi.prototype,{checkCorrectness:function(t){var e=new Mi(Pe.getNodedSubstrings(t));try{e.checkValid()}catch(t){if(!(t instanceof w))throw t;t.printStackTrace()}},getNodedSubstrings:function(){return Pe.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){var n=new Ui(e);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(t),n.getInteriorIntersections()},computeVertexSnaps:function(){if(T(arguments[0],v))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Pe)for(var n=arguments[0],i=n.getCoordinates(),r=0;r<i.length;r++){var o=new Ai(i[r],this.scaleFactor,this.li);this.pointSnapper.snap(o,n,r)&&n.addIntersection(i[r],r)}},computeNodes:function(t){this.nodedSegStrings=t,this.noder=new Ue,this.pointSnapper=new Fi(this.noder.getIndex()),this.snapRound(t,this.li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var n=new Ai(e.next(),this.scaleFactor,this.li);this.pointSnapper.snap(n)}},interfaces_:function(){return[Fe]},getClass:function(){return Bi}}),e(qi.prototype,{bufferFixedPrecision:function(t){var e=new yi(new Bi(new Ut(1)),t.getScale()),n=new _i(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(0===arguments.length){for(var t=qi.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(t){if(!(t instanceof qe))throw t;this.saveException=t}if(null!==this.resultGeometry)return null}throw this.saveException}if(1===arguments.length){var e=arguments[0],n=new Ut(qi.precisionScaleFactor(this.argGeom,this.distance,e));this.bufferFixedPrecision(n)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),null!==this.resultGeometry)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===Ut.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this.bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new _i(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(t){if(!(t instanceof l))throw t;this.saveException=t}},getResultGeometry:function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(t){this.bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return qi}}),qi.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new qi(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof B&&"number"==typeof arguments[1]){var n=arguments[0],i=arguments[1],r=arguments[2];return(a=new qi(n)).setQuadrantSegments(r),a.getResultGeometry(i)}if(arguments[2]instanceof Ei&&arguments[0]instanceof B&&"number"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return(a=new qi(o,arguments[2])).getResultGeometry(s)}}else if(4===arguments.length){var a,u=arguments[0],l=arguments[1],c=arguments[2],h=arguments[3];return(a=new qi(u)).setQuadrantSegments(c),a.setEndCapStyle(h),a.getResultGeometry(l)}},qi.precisionScaleFactor=function(t,e,n){var i=t.getEnvelopeInternal(),r=R.max(Math.abs(i.getMaxX()),Math.abs(i.getMaxY()),Math.abs(i.getMinX()),Math.abs(i.getMinY()))+2*(e>0?e:0),o=n-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},qi.CAP_ROUND=Ei.CAP_ROUND,qi.CAP_BUTT=Ei.CAP_FLAT,qi.CAP_FLAT=Ei.CAP_FLAT,qi.CAP_SQUARE=Ei.CAP_SQUARE,qi.MAX_PRECISION_DIGITS=12;var is=Object.freeze({BufferOp:qi,BufferParameters:Ei});e(ki.prototype,{filter:function(t){t instanceof Ct&&this.comps.add(t)},interfaces_:function(){return[ct]},getClass:function(){return ki}}),ki.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return ki.getPolygons(t,new I)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Ct?n.add(e):e instanceof ft&&e.apply(new ki(n)),n}},e(Vi.prototype,{isInsideArea:function(){return this.segIndex===Vi.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return Vi}}),Vi.INSIDE_AREA=-1,e(zi.prototype,{filter:function(t){t instanceof It&&this.pts.add(t)},interfaces_:function(){return[ct]},getClass:function(){return zi}}),zi.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof It?Xo.singletonList(t):zi.getPoints(t,new I)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof It?n.add(e):e instanceof ft&&e.apply(new zi(n)),n}},e(Yi.prototype,{filter:function(t){(t instanceof It||t instanceof xt||t instanceof Ct)&&this.locations.add(new Vi(t,0,t.getCoordinate()))},interfaces_:function(){return[ct]},getClass:function(){return Yi}}),Yi.getLocations=function(t){var e=new I;return t.apply(new Yi(e)),e},e(Xi.prototype,{computeContainmentDistance:function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],i=1-e,r=ki.getPolygons(this.geom[e]);if(r.size()>0){var o=Yi.getLocations(this.geom[i]);if(this.computeContainmentDistance(o,r,n),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[i]=n[0],this.minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&T(arguments[0],m)&&T(arguments[1],m)){for(var s=arguments[0],a=arguments[1],u=arguments[2],l=0;l<s.size();l++)for(var c=s.get(l),h=0;h<a.size();h++)if(this.computeContainmentDistance(c,a.get(h),u),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Vi&&arguments[1]instanceof Ct){var f=arguments[0],g=arguments[1],d=arguments[2],p=f.getCoordinate();if(L.EXTERIOR!==this.ptLocator.locate(p,g))return this.minDistance=0,d[0]=f,d[1]=new Vi(g,p),null}},computeMinDistanceLinesPoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=wn.getLines(this.geom[0]),n=wn.getLines(this.geom[1]),i=zi.getPoints(this.geom[0]),r=zi.getPoints(this.geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,i,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(i,r,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(t,e){return null===t[0]?null:void(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},nearestPoints:function(){return this.computeMinDistance(),[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()]},computeMinDistance:function(){if(0===arguments.length){if(null!==this.minDistanceLocation)return null;if(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof xt&&arguments[1]instanceof It){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var i=t.getCoordinates(),r=e.getCoordinate(),o=0;o<i.length-1;o++){if((f=Ht.distancePointLine(r,i[o],i[o+1]))<this.minDistance){this.minDistance=f;var s=new Wt(i[o],i[o+1]).closestPoint(r);n[0]=new Vi(t,o,s),n[1]=new Vi(e,0,r)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof xt&&arguments[1]instanceof xt){var a=arguments[0],u=arguments[1],l=arguments[2];if(a.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this.minDistance)return null;i=a.getCoordinates();var c=u.getCoordinates();for(o=0;o<i.length-1;o++)for(var h=0;h<c.length-1;h++){var f;if((f=Ht.distanceLineLine(i[o],i[o+1],c[h],c[h+1]))<this.minDistance){this.minDistance=f;var g=new Wt(i[o],i[o+1]),d=new Wt(c[h],c[h+1]),p=g.closestPoints(d);l[0]=new Vi(a,o,p[0]),l[1]=new Vi(u,h,p[1])}if(this.minDistance<=this.terminateDistance)return null}}},computeMinDistancePoints:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o),a=r.getCoordinate().distance(s.getCoordinate());if(a<this.minDistance&&(this.minDistance=a,n[0]=new Vi(r,0,r.getCoordinate()),n[1]=new Vi(s,0,s.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(null===this.geom[0]||null===this.geom[1])throw new i("null geometries are not supported");return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(t,e,n){for(var i=0;i<t.size();i++)for(var r=t.get(i),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,n),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return Xi}}),Xi.distance=function(t,e){return new Xi(t,e).distance()},Xi.isWithinDistance=function(t,e,n){return new Xi(t,e,n).distance()<=n},Xi.nearestPoints=function(t,e){return new Xi(t,e).nearestPoints()};var rs=Object.freeze({DistanceOp:Xi});e(ji.prototype,{getCoordinates:function(){if(null===this.coordinates){for(var t=0,e=0,n=new N,i=this.directedEdges.iterator();i.hasNext();){var r=i.next();r.getEdgeDirection()?t++:e++,n.add(r.getEdge().getLine().getCoordinates(),!1,r.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),e>t&&j.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(t){this.directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return ji}}),e(Hi.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this.data=t},getData:function(){return this.data},setMarked:function(t){this._isMarked=t},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(t){this.data=t},interfaces_:function(){return[]},getClass:function(){return Hi}}),Hi.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()===e)return n}return null},Hi.setVisited=function(t,e){for(;t.hasNext();){t.next().setVisited(e)}},Hi.setMarked=function(t,e){for(;t.hasNext();){t.next().setMarked(e)}},c(Wi,Hi),e(Wi.prototype,{isRemoved:function(){return null===this.parentEdge},compareDirection:function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:Ht.computeOrientation(t.p0,t.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(t){var e=this.getClass().getName(),n=e.lastIndexOf("."),i=e.substring(n+1);t.print("  "+i+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(t){var e=t;return this.compareDirection(e)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(t){this.parentEdge=t},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(t){this.sym=t},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[o]},getClass:function(){return Wi}}),Wi.toEdges=function(t){for(var e=new I,n=t.iterator();n.hasNext();)e.add(n.next().parentEdge);return e},c(Zi,Wi),e(Zi.prototype,{getNext:function(){return 2!==this.getToNode().getDegree()?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(f.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return Zi}}),c(Ki,Hi),e(Ki.prototype,{isRemoved:function(){return null===this.dirEdge},setDirectedEdges:function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this.dirEdge[t]}if(arguments[0]instanceof Qi){var e=arguments[0];return this.dirEdge[0].getFromNode()===e?this.dirEdge[0]:this.dirEdge[1].getFromNode()===e?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(t){return this.dirEdge[0].getFromNode()===t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===t?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return Ki}}),e(Ji.prototype,{getNextEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e+1))},getCoordinate:function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(Xo.sort(this.outEdges),this.sorted=!0)},remove:function(t){this.outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e-1))},getIndex:function(){if(arguments[0]instanceof Ki){var t=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){if(this.outEdges.get(e).getEdge()===t)return e}return-1}if(arguments[0]instanceof Wi){var n=arguments[0];this.sortEdges();for(e=0;e<this.outEdges.size();e++){if(this.outEdges.get(e)===n)return e}return-1}if(Number.isInteger(arguments[0])){var i=arguments[0]%this.outEdges.size();return 0>i&&(i+=this.outEdges.size()),i}},add:function(t){this.outEdges.add(t),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return Ji}}),c(Qi,Hi),e(Qi.prototype,{isRemoved:function(){return null===this.pt},addOutEdge:function(t){this.deStar.add(t)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(0===arguments.length)this.pt=null;else if(1===arguments.length){var t=arguments[0];this.deStar.remove(t)}},getIndex:function(t){return this.deStar.getIndex(t)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return Qi}}),Qi.getEdgesBetween=function(t,e){var n=new Q(Wi.toEdges(t.getOutEdges().getEdges())),i=Wi.toEdges(e.getOutEdges().getEdges());return n.retainAll(i),n},c($i,Ki),e($i.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return $i}}),e(tr.prototype,{find:function(t){return this.nodeMap.get(t)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(t){return this.nodeMap.remove(t)},values:function(){return this.nodeMap.values()},add:function(t){return this.nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return tr}}),e(er.prototype,{findNodesOfDegree:function(t){for(var e=new I,n=this.nodeIterator();n.hasNext();){var i=n.next();i.getDegree()===t&&e.add(i)}return e},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof Ki){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),t.remove()}else if(arguments[0]instanceof Wi){var e=arguments[0];null!==(r=e.getSym())&&r.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)}else if(arguments[0]instanceof Qi){for(var n=arguments[0],i=n.getOutEdges().getEdges().iterator();i.hasNext();){var r,o=i.next();null!==(r=o.getSym())&&this.remove(r),this.dirEdges.remove(o);var s=o.getEdge();null!==s&&this.edges.remove(s)}this.nodeMap.remove(n.getCoordinate()),n.remove()}},findNode:function(t){return this.nodeMap.find(t)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof Ki){var t=arguments[0];return this.edges.contains(t)}if(arguments[0]instanceof Wi){var e=arguments[0];return this.dirEdges.contains(e)}},add:function(){if(arguments[0]instanceof Qi){var t=arguments[0];this.nodeMap.add(t)}else if(arguments[0]instanceof Ki){var e=arguments[0];this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof Wi){var n=arguments[0];this.dirEdges.add(n)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return er}}),c(nr,er),e(nr.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=j.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),o=this.getNode(i),s=new Zi(r,o,e[1],!0),a=new Zi(o,r,e[e.length-2],!1),u=new $i(t);u.setDirectedEdges(s,a),this.add(u)},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new Qi(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return nr}}),e(ir.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(f.isTrue(2===e.getDegree()),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();2!==e.getDegree()&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var n=e.next();n.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(n))}},merge:function(){if(null!==this.mergedLineStrings)return null;Hi.setMarked(this.graph.nodeIterator(),!1),Hi.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new I,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new I;for(var t=this.edgeStrings.iterator();t.hasNext();){var e=t.next();this.mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){var e=new ji(this.factory),n=t;do{e.add(n),n.getEdge().setMarked(!0),n=n.getNext()}while(null!==n&&n!==t);return e},add:function(){if(arguments[0]instanceof B)arguments[0].apply({interfaces_:function(){return[U]},filter:function(t){t instanceof xt&&this.add(t)}});else if(T(arguments[0],v)){var t=arguments[0];this.mergedLineStrings=null;for(var e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}}else if(arguments[0]instanceof xt){var i=arguments[0];null===this.factory&&(this.factory=i.getFactory()),this.graph.addEdge(i)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return ir}});var os=Object.freeze({LineMerger:ir}),ss=Object.freeze({OverlayOp:Bn});c(rr,Wi),e(rr.prototype,{getNext:function(){return this.next},isInRing:function(){return null!==this.edgeRing},setRing:function(t){this.edgeRing=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setNext:function(t){this.next=t},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return rr}}),c(or,Ki),e(or.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return or}}),e(sr.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(null===this.ringPts){for(var t=new N,e=this.deList.iterator();e.hasNext();){var n=e.next(),i=n.getEdge();sr.addEdge(i.getLine().getCoordinates(),n.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),!(this.ringPts.length<=3)&&(this.getRing(),this.ring.isValid())},build:function(t){var e=t;do{this.add(e),e.setRing(this),e=e.getNext(),f.isTrue(null!==e,"found null DE in ring"),f.isTrue(e===t||!e.isInRing(),"found DE already in ring")}while(e!==t)},isOuterHole:function(){return!!this._isHole&&!this.hasShell()},getPolygon:function(){var t=null;if(null!==this.holes){t=new Array(this.holes.size()).fill(null);for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}return this.factory.createPolygon(this.ring,t)},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof St){var t=arguments[0];null===this.holes&&(this.holes=new I),this.holes.add(t)}else if(arguments[0]instanceof sr){var e=arguments[0];e.setShell(this);var n=e.getRing();null===this.holes&&(this.holes=new I),this.holes.add(n)}},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t).getSym().getRing();if(e.isOuterHole())return e}return null},computeHole:function(){var t=this.getRing();this._isHole=Ht.isCCW(t.getCoordinates())},hasShell:function(){return null!==this.shell},isOuterShell:function(){return null!==this.getOuterHole()},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return Vt.toLineString(new _t(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(t){this.deList.add(t)},getRing:function(){if(null!==this.ring)return this.ring;this.getCoordinates(),this.ringPts.length<3&&D.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){if(!(t instanceof w))throw t;D.out.println(this.ringPts)}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t).getSym().getRing().getShell();if(null!==e&&e.isIncludedSet())return this.setIncluded(!e.isIncluded()),null}},setShell:function(t){this.shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return sr}}),sr.findDirEdgesInRing=function(t){var e=t,n=new I;do{n.add(e),e=e.getNext(),f.isTrue(null!==e,"found null DE in ring"),f.isTrue(e===t||!e.isInRing(),"found DE already in ring")}while(e!==t);return n},sr.addEdge=function(t,e,n){if(e)for(var i=0;i<t.length;i++)n.add(t[i],!1);else for(i=t.length-1;i>=0;i--)n.add(t[i],!1)},sr.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),i=n.getEnvelopeInternal(),r=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),l=u.getRing(),c=l.getEnvelopeInternal();if(!c.equals(i)&&c.contains(i)){r=j.ptNotInList(n.getCoordinates(),l.getCoordinates());var h=!1;Ht.isPointInRing(r,l.getCoordinates())&&(h=!0),h&&(null===o||s.contains(c))&&(s=(o=u).getRing().getEnvelopeInternal())}}return o},e(ar.prototype,{compare:function(t,e){var n=e;return t.getRing().getEnvelope().compareTo(n.getRing().getEnvelope())},interfaces_:function(){return[a]},getClass:function(){return ar}}),sr.EnvelopeComparator=ar,c(ur,er),e(ur.prototype,{findEdgeRing:function(t){var e=new sr(this.factory);return e.build(t),e},computeDepthParity:function(){if(0===arguments.length)for(;;)return null;else 1===arguments.length&&arguments[0]},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();ur.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=j.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var n=e[0],i=e[e.length-1],r=this.getNode(n),o=this.getNode(i),s=new rr(r,o,e[1],!0),a=new rr(o,r,e[e.length-2],!1),u=new or(t);u.setDirectedEdges(s,a),this.add(u)},deleteCutEdges:function(){this.computeNextCWEdges(),ur.findLabeledEdgeRings(this.dirEdges);for(var t=new I,e=this.dirEdges.iterator();e.hasNext();){var n=e.next();if(!n.isMarked()){var i=n.getSym();if(n.getLabel()===i.getLabel()){n.setMarked(!0),i.setMarked(!0);var r=n.getEdge();t.add(r.getLine())}}}return t},getEdgeRings:function(){this.computeNextCWEdges(),ur.label(this.dirEdges,-1);var t=ur.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new I,n=this.dirEdges.iterator();n.hasNext();){var i=n.next();if(!i.isMarked()&&!i.isInRing()){var r=this.findEdgeRing(i);e.add(r)}}return e},getNode:function(t){var e=this.findNode(t);return null===e&&(e=new Qi(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getLabel(),r=ur.findIntersectionNodes(n,i);if(null!==r)for(var o=r.iterator();o.hasNext();){var s=o.next();ur.computeNextCCWEdges(s,i)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new Q,n=new Qt,i=t.iterator();i.hasNext();)n.push(i.next());for(;!n.isEmpty();){var r=n.pop();ur.deleteAllEdges(r);for(i=r.getOutEdges().getEdges().iterator();i.hasNext();){var o=i.next();o.setMarked(!0);var s=o.getSym();null!==s&&s.setMarked(!0);var a=o.getEdge();e.add(a.getLine());var u=o.getToNode();1===ur.getDegreeNonDeleted(u)&&n.push(u)}}return e},interfaces_:function(){return[]},getClass:function(){return ur}}),ur.findLabeledEdgeRings=function(t){for(var e=new I,n=1,i=t.iterator();i.hasNext();){var r=i.next();if(!(r.isMarked()||r.getLabel()>=0)){e.add(r);var o=sr.findDirEdgesInRing(r);ur.label(o,n),n++}}return e},ur.getDegreeNonDeleted=function(t){for(var e=0,n=t.getOutEdges().getEdges().iterator();n.hasNext();){n.next().isMarked()||e++}return e},ur.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges().iterator();e.hasNext();){var n=e.next();n.setMarked(!0);var i=n.getSym();null!==i&&i.setMarked(!0)}},ur.label=function(t,e){for(var n=t.iterator();n.hasNext();){n.next().setLabel(e)}},ur.computeNextCWEdges=function(t){for(var e=null,n=null,i=t.getOutEdges().getEdges().iterator();i.hasNext();){var r=i.next();if(!r.isMarked()){if(null===e&&(e=r),null!==n)n.getSym().setNext(r);n=r}}null!==n&&n.getSym().setNext(e)},ur.computeNextCCWEdges=function(t,e){for(var n=null,i=null,r=t.getOutEdges().getEdges(),o=r.size()-1;o>=0;o--){var s=r.get(o),a=s.getSym(),u=null;s.getLabel()===e&&(u=s);var l=null;a.getLabel()===e&&(l=a),null===u&&null===l||(null!==l&&(i=l),null!==u&&(null!==i&&(i.setNext(u),i=null),null===n&&(n=u)))}null!==i&&(f.isTrue(null!==n),i.setNext(n))},ur.getDegree=function(t,e){for(var n=0,i=t.getOutEdges().getEdges().iterator();i.hasNext();){i.next().getLabel()===e&&n++}return n},ur.findIntersectionNodes=function(t,e){var n=t,i=null;do{var r=n.getFromNode();ur.getDegree(r,e)>1&&(null===i&&(i=new I),i.add(r)),n=n.getNext(),f.isTrue(null!==n,"found null DE in ring"),f.isTrue(n===t||!n.isInRing(),"found DE already in ring")}while(n!==t);return i},e(lr.prototype,{getGeometry:function(){return null===this.geomFactory&&(this.geomFactory=new qt),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(qt.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(t,e,n){for(var i=t.iterator();i.hasNext();){var r=i.next();r.isValid()?e.add(r):n.add(r.getLineString())}},polygonize:function(){if(null!==this.polyList)return null;if(this.polyList=new I,null===this.graph)return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),e=new I;this.invalidRingLines=new I,this.isCheckingRingsValid?this.findValidRings(t,e,this.invalidRingLines):e=t,this.findShellsAndHoles(e),lr.assignHolesToShells(this.holeList,this.shellList),Xo.sort(this.shellList,new sr.EnvelopeComparator);var n=!0;this.extractOnlyPolygonal&&(lr.findDisjointShells(this.shellList),n=!1),this.polyList=lr.extractPolygons(this.shellList,n)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(T(arguments[0],v))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.add(e)}else if(arguments[0]instanceof xt){var n=arguments[0];this.geomFactory=n.getFactory(),null===this.graph&&(this.graph=new ur(this.geomFactory)),this.graph.addEdge(n)}else if(arguments[0]instanceof B){arguments[0].apply(this.lineStringAdder)}},setCheckRingsValid:function(t){this.isCheckingRingsValid=t},findShellsAndHoles:function(t){this.holeList=new I,this.shellList=new I;for(var e=t.iterator();e.hasNext();){var n=e.next();n.computeHole(),n.isHole()?this.holeList.add(n):this.shellList.add(n)}},interfaces_:function(){return[]},getClass:function(){return lr}}),lr.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),i=n.getOuterHole();null===i||i.isProcessed()||(n.setIncluded(!0),i.setProcessed(!0))}},lr.extractPolygons=function(t,e){for(var n=new I,i=t.iterator();i.hasNext();){var r=i.next();(e||r.isIncluded())&&n.add(r.getPolygon())}return n},lr.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var i=n.next();lr.assignHoleToShell(i,e)}},lr.assignHoleToShell=function(t,e){var n=sr.findEdgeRingContaining(t,e);null!==n&&n.addHole(t)},lr.findDisjointShells=function(t){lr.findOuterShells(t);var e=null;do{e=!1;for(var n=t.iterator();n.hasNext();){var i=n.next();i.isIncludedSet()||(i.updateIncluded(),i.isIncludedSet()||(e=!0))}}while(e)},e(cr.prototype,{filter:function(t){t instanceof xt&&this.p.add(t)},interfaces_:function(){return[U]},getClass:function(){return cr}}),lr.LineStringAdder=cr;var as=Object.freeze({Polygonizer:lr});e(hr.prototype,{createEdgeEndForNext:function(t,e,n,i){var r=n.segmentIndex+1;if(r>=t.getNumPoints()&&null===i)return null;var o=t.getCoordinate(r);null!==i&&i.segmentIndex===n.segmentIndex&&(o=i.coord);var s=new en(t,n.coord,o,new We(t.getLabel()));e.add(s)},createEdgeEndForPrev:function(t,e,n,i){var r=n.segmentIndex;if(0===n.dist){if(0===r)return null;r--}var o=t.getCoordinate(r);null!==i&&i.segmentIndex>=r&&(o=i.coord);var s=new We(t.getLabel());s.flip();var a=new en(t,n.coord,o,s);e.add(a)},computeEdgeEnds:function(){if(1===arguments.length){for(var t=arguments[0],e=new I,n=t;n.hasNext();){var i=n.next();this.computeEdgeEnds(i,e)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1],s=r.getEdgeIntersectionList();s.addEndpoints();var a=s.iterator(),u=null,l=null;if(!a.hasNext())return null;var c=a.next();do{u=l,l=c,c=null,a.hasNext()&&(c=a.next()),null!==l&&(this.createEdgeEndForPrev(r,o,l,u),this.createEdgeEndForNext(r,o,l,c))}while(null!==l)}},interfaces_:function(){return[]},getClass:function(){return hr}}),c(fr,en),e(fr.prototype,{insert:function(t){this.edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--\x3e Label: "+this.label);for(var e=this.iterator();e.hasNext();){e.next().print(t),t.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(t,e){for(var n=0,i=!1,r=this.iterator();r.hasNext();){(o=r.next().getLabel().getLocation(t))===L.BOUNDARY&&n++,o===L.INTERIOR&&(i=!0)}var o=L.NONE;i&&(o=L.INTERIOR),n>0&&(o=Dn.determineBoundary(e,n)),this.label.setLocation(t,o)},computeLabelSide:function(t,e){for(var n=this.iterator();n.hasNext();){var i=n.next();if(i.getLabel().isArea()){var r=i.getLabel().getLocation(t,e);if(r===L.INTERIOR)return this.label.setLocation(t,e,L.INTERIOR),null;r===L.EXTERIOR&&this.label.setLocation(t,e,L.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(t){this.computeLabelSide(t,je.LEFT),this.computeLabelSide(t,je.RIGHT)},updateIM:function(t){An.updateIM(this.label,t)},computeLabel:function(t){for(var e=!1,n=this.iterator();n.hasNext();){n.next().getLabel().isArea()&&(e=!0)}this.label=e?new We(L.NONE,L.NONE,L.NONE):new We(L.NONE);for(var i=0;2>i;i++)this.computeLabelOn(i,t),e&&this.computeLabelSides(i)},interfaces_:function(){return[]},getClass:function(){return fr}}),c(gr,hn),e(gr.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();){e.next().updateIM(t)}},insert:function(t){var e=this.edgeMap.get(t);null===e?(e=new fr(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return gr}}),c(dr,$e),e(dr.prototype,{updateIMFromEdges:function(t){this.edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return dr}}),c(pr,rn),e(pr.prototype,{createNode:function(t){return new dr(t,new gr)},interfaces_:function(){return[]},getClass:function(){return pr}}),e(vr.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},computeProperIntersectionIM:function(t,e){var n=this.arg[0].getGeometry().getDimension(),i=this.arg[1].getGeometry().getDimension(),r=t.hasProperIntersection(),o=t.hasProperInteriorIntersection();2===n&&2===i?r&&e.setAtLeast("212101212"):2===n&&1===i?(r&&e.setAtLeast("FFF0FFFF2"),o&&e.setAtLeast("1FFFFF1FF")):1===n&&2===i?(r&&e.setAtLeast("F0FFFFFF2"),o&&e.setAtLeast("1F1FFFFFF")):1===n&&1===i&&o&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var i=n.next();i.isIsolated()&&(this.labelIsolatedEdge(i,e,this.arg[e].getGeometry()),this.isolatedEdges.add(i))}},labelIsolatedEdge:function(t,e,n){if(n.getDimension()>0){var i=this.ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,i)}else t.getLabel().setAllLocations(e,L.EXTERIOR)},computeIM:function(){var t=new Zt;if(t.set(L.EXTERIOR,L.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new hr,i=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(i);var r=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(r),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){t.next().getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next();this.nodes.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next(),s=this.nodes.find(o.coord);s.getLabel().isNull(t)&&(i===L.BOUNDARY?s.setLabelBoundary(t):s.setLabel(t,L.INTERIOR))}},labelIsolatedNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n)},computeIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),i=n.getLabel().getLocation(t),r=n.getEdgeIntersectionList().iterator();r.hasNext();){var o=r.next(),s=this.nodes.addNode(o.coord);i===L.BOUNDARY?s.setLabelBoundary(t):s.getLabel().isNull(t)&&s.setLabel(t,L.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();f.isTrue(n.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){e.next().updateIM(t)}for(var n=this.nodes.iterator();n.hasNext();){var i=n.next();i.updateIM(t),i.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(L.INTERIOR,L.EXTERIOR,e.getDimension()),t.set(L.BOUNDARY,L.EXTERIOR,e.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(t.set(L.EXTERIOR,L.INTERIOR,n.getDimension()),t.set(L.EXTERIOR,L.BOUNDARY,n.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return vr}}),e(yr.prototype,{isContainedInBoundary:function(t){if(t instanceof Ct)return!1;if(t instanceof It)return this.isPointContainedInBoundary(t);if(t instanceof xt)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),n=new g,i=new g,r=0;r<e.size()-1;r++)if(e.getCoordinate(r,n),e.getCoordinate(r+1,i),!this.isLineSegmentContainedInBoundary(n,i))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof It){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof g){var e=arguments[0];return e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX()||e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()}},contains:function(t){return!!this.rectEnv.contains(t.getEnvelopeInternal())&&!this.isContainedInBoundary(t)},interfaces_:function(){return[]},getClass:function(){return yr}}),yr.contains=function(t,e){return new yr(t).contains(e)},e(mr.prototype,{intersects:function(t,e){var n=new C(t,e);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(t))return!0;if(this.rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var i=t;t=e,e=i}var r=!1;return e.y>t.y&&(r=!0),r?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return mr}}),e(xr.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof ft)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return xr}}),e(Er.prototype,{intersects:function(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new Ir(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new Nr(this.rectangle);if(n.applyTo(t),n.containsPoint())return!0;var i=new Cr(this.rectangle);return i.applyTo(t),!!i.intersects()},interfaces_:function(){return[]},getClass:function(){return Er}}),Er.intersects=function(t,e){return new Er(t).intersects(e)},c(Ir,xr),e(Ir.prototype,{isDone:function(){return!0===this._intersects},visit:function(t){var e=t.getEnvelopeInternal();return this.rectEnv.intersects(e)?this.rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this.rectEnv.getMinX()&&e.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this.rectEnv.getMinY()&&e.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return Ir}}),c(Nr,xr),e(Nr.prototype,{isDone:function(){return!0===this._containsPoint},visit:function(t){if(!(t instanceof Ct))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var n=new g,i=0;4>i;i++)if(this.rectSeq.getCoordinate(i,n),e.contains(n)&&cn.containsPointInPolygon(n,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return Nr}}),c(Cr,xr),e(Cr.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return!0===this.hasIntersection},visit:function(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;var n=wn.getLines(t);this.checkIntersectionWithLineStrings(n)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this.p0),e.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return Cr}}),c(wr,Fn),e(wr.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return wr}}),wr.covers=function(t,e){return!!t.getEnvelopeInternal().covers(e.getEnvelopeInternal())&&(!!t.isRectangle()||wr.relate(t,e).isCovers())},wr.intersects=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&(t.isRectangle()?Er.intersects(t,e):e.isRectangle()?Er.intersects(e,t):wr.relate(t,e).isIntersects())},wr.touches=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&wr.relate(t,e).isTouches(t.getDimension(),e.getDimension())},wr.within=function(t,e){return e.contains(t)},wr.coveredBy=function(t,e){return wr.covers(e,t)},wr.relate=function(){if(2===arguments.length)return new wr(arguments[0],arguments[1]).getIntersectionMatrix();if(3===arguments.length){if("string"==typeof arguments[2]&&arguments[0]instanceof B&&arguments[1]instanceof B){var t=arguments[0],e=arguments[1],n=arguments[2];return wr.relateWithCheck(t,e).matches(n)}if(T(arguments[2],k)&&arguments[0]instanceof B&&arguments[1]instanceof B)return new wr(arguments[0],arguments[1],arguments[2]).getIntersectionMatrix()}},wr.overlaps=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&wr.relate(t,e).isOverlaps(t.getDimension(),e.getDimension())},wr.disjoint=function(t,e){return!t.intersects(e)},wr.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),wr.relate(t,e)},wr.crosses=function(t,e){return!!t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())&&wr.relate(t,e).isCrosses(t.getDimension(),e.getDimension())},wr.contains=function(t,e){return!!t.getEnvelopeInternal().contains(e.getEnvelopeInternal())&&(t.isRectangle()?yr.contains(t,e):wr.relate(t,e).isContains())};var us=Object.freeze({RelateOp:wr});e(Sr.prototype,{extractElements:function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var i=t.getGeometryN(n);this.skipEmpty&&i.isEmpty()||e.add(i)}},combine:function(){for(var t=new I,e=this.inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this.geomFactory?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return Sr}}),Sr.combine=function(){if(1===arguments.length)return new Sr(arguments[0]).combine();if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Sr(Sr.createList(t,e)).combine()}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];return new Sr(Sr.createList(n,i,r)).combine()}},Sr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Sr.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return(n=new I).add(t),n.add(e),n}if(3===arguments.length){var n,i=arguments[0],r=arguments[1],o=arguments[2];return(n=new I).add(i),n.add(r),n.add(o),n}},e(Lr.prototype,{union:function(){for(var t=new he,e=new at,n=0;n<this.pointGeom.getNumGeometries();n++){var i=this.pointGeom.getGeometryN(n).getCoordinate();t.locate(i,this.otherGeom)===L.EXTERIOR&&e.add(i)}if(0===e.size())return this.otherGeom;var r,o=j.toCoordinateArray(e);return r=1===o.length?this.geomFact.createPoint(o[0]):this.geomFact.createMultiPointFromCoords(o),Sr.combine(r,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return Lr}}),Lr.union=function(t,e){return new Lr(t,e).union()},e(Tr.prototype,{filter:function(t){-1!==this.sortIndex&&t.getSortIndex()!==this.sortIndex||this.comps.add(t)},interfaces_:function(){return[ct]},getClass:function(){return Tr}}),Tr.extract=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return Tr.extract(t,e,new I)}if(3===arguments.length){var n=arguments[0],i=arguments[1],r=arguments[2];return n.getSortIndex()===i?r.add(n):n instanceof ft&&n.apply(new Tr(i,r)),r}},e(Rr.prototype,{reduceToGeometries:function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next(),r=null;T(i,m)?r=this.unionTree(i):i instanceof B&&(r=i),e.add(r)}return e},extractByEnvelope:function(t,e,n){for(var i=new I,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?i.add(o):n.add(o)}return this.geomFactory.buildGeometry(i)},unionOptimized:function(t,e){var n=t.getEnvelopeInternal(),i=e.getEnvelopeInternal();if(!n.intersects(i))return Sr.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=n.intersection(i);return this.unionUsingEnvelopeIntersection(t,e,r)},union:function(){if(null===this.inputPolys)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new we(Rr.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this.inputPolys=null;var i=t.itemsTree();return this.unionTree(i)},binaryUnion:function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],i=arguments[2];if(1>=i-n){var r=Rr.getGeometry(e,n);return this.unionSafe(r,null)}if(i-n==2)return this.unionSafe(Rr.getGeometry(e,n),Rr.getGeometry(e,n+1));var o=Math.trunc((i+n)/2),s=(r=this.binaryUnion(e,n,o),this.binaryUnion(e,o,i));return this.unionSafe(r,s)}},repeatedUnion:function(t){for(var e=null,n=t.iterator();n.hasNext();){var i=n.next();e=null===e?i.copy():e.union(i)}return e},unionSafe:function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return Rr.restrictToPolygons(t.union(e))},unionTree:function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},unionUsingEnvelopeIntersection:function(t,e,n){var i=new I,r=this.extractByEnvelope(n,t,i),o=this.extractByEnvelope(n,e,i),s=this.unionActual(r,o);return i.add(s),Sr.combine(i)},bufferUnion:function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},interfaces_:function(){return[]},getClass:function(){return Rr}}),Rr.restrictToPolygons=function(t){if(T(t,Nt))return t;var e=ki.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(qt.toPolygonArray(e))},Rr.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Rr.union=function(t){return new Rr(t).union()},Rr.STRTREE_NODE_CAPACITY=4,e(br.prototype,{unionNoOpt:function(t){var e=this.geomFact.createPoint();return kn.overlayOp(t,e,Bn.UNION)},unionWithNull:function(t,e){return null===t&&null===e?null:null===e?t:null===t?e:t.union(e)},extract:function(){if(T(arguments[0],v))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.extract(e)}else if(arguments[0]instanceof B){var n=arguments[0];null===this.geomFact&&(this.geomFact=n.getFactory()),Tr.extract(n,B.SORTINDEX_POLYGON,this.polygons),Tr.extract(n,B.SORTINDEX_LINESTRING,this.lines),Tr.extract(n,B.SORTINDEX_POINT,this.points)}},union:function(){if(null===this.geomFact)return null;var t=null;if(this.points.size()>0){var e=this.geomFact.buildGeometry(this.points);t=this.unionNoOpt(e)}var n=null;if(this.lines.size()>0){var i=this.geomFact.buildGeometry(this.lines);n=this.unionNoOpt(i)}var r=null;this.polygons.size()>0&&(r=Rr.union(this.polygons));var o,s=this.unionWithNull(n,r);return null===(o=null===t?s:null===s?t:Lr.union(t,s))?this.geomFact.createGeometryCollection():o},interfaces_:function(){return[]},getClass:function(){return br}}),br.union=function(){if(1===arguments.length){if(T(arguments[0],v))return new br(arguments[0]).union();if(arguments[0]instanceof B)return new br(arguments[0]).union()}else if(2===arguments.length){return new br(arguments[0],arguments[1]).union()}};var ls=Object.freeze({UnaryUnionOp:br});e(Or.prototype,{visitInteriorRing:function(t,e){var n=t.getCoordinates(),i=n[0],r=Or.findDifferentPoint(n,i),o=e.findEdgeInSameDirection(i,r),s=e.findEdgeEnd(o),a=null;s.getLabel().getLocation(0,je.RIGHT)===L.INTERIOR?a=s:s.getSym().getLabel().getLocation(0,je.RIGHT)===L.INTERIOR&&(a=s.getSym()),f.isTrue(null!==a,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(a)},visitShellInteriors:function(t,e){if(t instanceof Ct){var n=t;this.visitInteriorRing(n.getExteriorRing(),e)}if(t instanceof Lt)for(var i=t,r=0;r<i.getNumGeometries();r++){n=i.getGeometryN(r);this.visitInteriorRing(n.getExteriorRing(),e)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,je.RIGHT)===L.INTERIOR&&n.setInResult(!0)}},visitLinkedDirectedEdges:function(t){var e=t,n=t;do{f.isTrue(null!==n,"found null Directed Edge"),n.setVisited(!0),n=n.getNext()}while(n!==e)},buildEdgeRings:function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();if(i.isInResult()&&null===i.getEdgeRing()){var r=new Je(i,this.geometryFactory);r.linkDirectedEdgesForMinimalEdgeRings();var o=r.buildMinimalRings();e.addAll(o)}}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var i=n.getEdges(),r=i.get(0);if(r.getLabel().getLocation(0,je.RIGHT)===L.INTERIOR)for(var o=0;o<i.size();o++)if(!(r=i.get(o)).isVisited())return this.disconnectedRingcoord=r.getCoordinate(),!0}}return!1},isInteriorsConnected:function(){var t=new I;this.geomGraph.computeSplitEdges(t);var e=new on(new gn);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)},interfaces_:function(){return[]},getClass:function(){return Or}}),Or.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null},e(Pr.prototype,{hasChildren:function(){for(var t=0;2>t;t++)if(null!==this.subnode[t])return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;2>e;e++)null!==this.subnode[e]&&this.subnode[e].addAllItems(t);return t},size:function(){for(var t=0,e=0;2>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){return null===t||this.isSearchMatch(t)?(e.addAll(this.items),null!==this.subnode[0]&&this.subnode[0].addAllItemsFromOverlapping(t,e),void(null!==this.subnode[1]&&this.subnode[1].addAllItemsFromOverlapping(t,e))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,i=0;2>i;i++)if(null!==this.subnode[i]&&(n=this.subnode[i].remove(t,e))){this.subnode[i].isPrunable()&&(this.subnode[i]=null);break}return n||this.items.remove(e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;2>e;e++)if(null!==this.subnode[e]){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},nodeSize:function(){for(var t=0,e=0;2>e;e++)null!==this.subnode[e]&&(t+=this.subnode[e].nodeSize());return t+1},add:function(t){this.items.add(t)},interfaces_:function(){return[]},getClass:function(){return Pr}}),Pr.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},e(_r.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(1===arguments.length){var t=arguments[0];return this.overlaps(t.min,t.max)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!(this.min>n||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(1===arguments.length){if(arguments[0]instanceof _r){var t=arguments[0];return this.contains(t.min,t.max)}if("number"==typeof arguments[0]){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(2===arguments.length){var n=arguments[0],i=arguments[1];return n>=this.min&&i<=this.max}},init:function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return _r}}),e(Mr.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(t){for(this.level=Mr.computeLevel(t),this.interval=new _r,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},computeInterval:function(t,e){var n=oi.powerOf2(t);this.pt=Math.floor(e.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Mr}}),Mr.computeLevel=function(t){var e=t.getWidth();return oi.exponent(e)+1},c(Ar,Pr),e(Ar.prototype,{getInterval:function(){return this.interval},find:function(t){var e=Pr.getSubnodeIndex(t,this.centre);return-1===e?this:null!==this.subnode[e]?this.subnode[e].find(t):this},insert:function(t){f.isTrue(null===this.interval||this.interval.contains(t.interval));var e=Pr.getSubnodeIndex(t.interval,this.centre);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insert(t),this.subnode[e]=n}},isSearchMatch:function(t){return t.overlaps(this.interval)},getSubnode:function(t){return null===this.subnode[t]&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getNode:function(t){var e=Pr.getSubnodeIndex(t,this.centre);return-1!==e?this.getSubnode(e).getNode(t):this},createSubnode:function(t){var e=0,n=0;switch(t){case 0:e=this.interval.getMin(),n=this.centre;break;case 1:e=this.centre,n=this.interval.getMax()}return new Ar(new _r(e,n),this.level-1)},interfaces_:function(){return[]},getClass:function(){return Ar}}),Ar.createNode=function(t){var e=new Mr(t);return new Ar(e.getInterval(),e.getLevel())},Ar.createExpanded=function(t,e){var n=new _r(e);null!==t&&n.expandToInclude(t.interval);var i=Ar.createNode(n);return null!==t&&i.insert(t),i},c(Dr,Pr),e(Dr.prototype,{insert:function(t,e){var n=Pr.getSubnodeIndex(t,Dr.origin);if(-1===n)return this.add(e),null;var i=this.subnode[n];if(null===i||!i.getInterval().contains(t)){var r=Ar.createExpanded(i,t);this.subnode[n]=r}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){f.isTrue(t.getInterval().contains(e)),(ui.isZeroWidth(e.getMin(),e.getMax())?t.find(e):t.getNode(e)).add(n)},interfaces_:function(){return[]},getClass:function(){return Dr}}),Dr.origin=0,e(Fr.prototype,{size:function(){return null!==this.root?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=Fr.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];return this.query(new _r(t,t))}if(arguments[0]instanceof _r){var e=arguments[0],n=new I;return this.query(e,n),n}}else if(2===arguments.length){var i=arguments[0],r=arguments[1];this.root.addAllItemsFromOverlapping(i,r)}},iterator:function(){var t=new I;return this.root.addAllItems(t),t.iterator()},remove:function(t,e){var n=Fr.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e)},depth:function(){return null!==this.root?this.root.depth():0},nodeSize:function(){return null!==this.root?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return Fr}}),Fr.ensureExtent=function(t,e){var n=t.getMin(),i=t.getMax();return n!==i?t:(n===i&&(i=(n-=e/2)+e/2),new _r(n,i))},e(Gr.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return Gr}}),e(Ur.prototype,{testLineSegment:function(t,e){var n,i,r,o,s=e.p0,a=e.p1;n=s.x-t.x,i=s.y-t.y,r=a.x-t.x,o=a.y-t.y,(i>0&&0>=o||o>0&&0>=i)&&Xt.signOfDet2x2(n,i,r,o)/(o-i)>0&&this.crossings++},buildIndex:function(){this.tree=new Fr;for(var t=j.removeRepeatedPoints(this.ring.getCoordinates()),e=De.getChains(t),n=0;n<e.size();n++){var i=e.get(n),r=i.getEnvelope();this.interval.min=r.getMinY(),this.interval.max=r.getMaxY(),this.tree.insert(this.interval,i)}},testMonotoneChain:function(t,e,n){n.select(t,e)},isInside:function(t){this.crossings=0;var e=new C(r.NEGATIVE_INFINITY,r.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),i=new Br(this,t),o=n.iterator();o.hasNext();){var s=o.next();this.testMonotoneChain(e,i,s)}return this.crossings%2==1},interfaces_:function(){return[Gr]},getClass:function(){return Ur}}),c(Br,Di),e(Br.prototype,{select:function(){if(1!==arguments.length)return Di.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return Br}}),Ur.MCSelecter=Br,e(qr.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var i=n.next();this.nodes.addNode(i.getCoordinate()).setLabel(e,i.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=(new hr).computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(e)},computeIntersectionNodes:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var i=n.next(),r=i.getLabel().getLocation(e),o=i.getEdgeIntersectionList().iterator();o.hasNext();){var s=o.next(),a=this.nodes.addNode(s.coord);r===L.BOUNDARY?a.setLabelBoundary(e):a.getLabel().isNull(e)&&a.setLabel(e,L.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return qr}}),e(kr.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next().getEdges().iterator();e.hasNext();){var n=e.next();if(n.getEdgeEnds().size()>1)return this.invalidPoint=n.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return kr}}),e(Vr.prototype,{buildIndex:function(){this.index=new we;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),n=e.getCoordinates(),i=this.index.query(e.getEnvelopeInternal()),r=0;r<i.size();r++){var o=i.get(r),s=o.getCoordinates();if(e!==o&&e.getEnvelopeInternal().intersects(o.getEnvelopeInternal())){var a=Yr.findPtNotNode(n,o,this.graph);if(null!==a)if(Ht.isPointInRing(a,s))return this.nestedPt=a,!1}}return!0},add:function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return Vr}}),e(zr.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return zr.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var t="";return null!==this.pt&&(t=" at or near point "+this.pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return zr}}),zr.ERROR=0,zr.REPEATED_POINT=1,zr.HOLE_OUTSIDE_SHELL=2,zr.NESTED_HOLES=3,zr.DISCONNECTED_INTERIOR=4,zr.SELF_INTERSECTION=5,zr.RING_SELF_INTERSECTION=6,zr.NESTED_SHELLS=7,zr.DUPLICATE_RINGS=8,zr.TOO_FEW_POINTS=9,zr.INVALID_COORDINATE=10,zr.RING_NOT_CLOSED=11,zr.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],e(Yr.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!Yr.isValid(t[e]))return this.validErr=new zr(zr.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof Ct){var n=arguments[0];if(this.checkInvalidCoordinates(n.getExteriorRing().getCoordinates()),null!==this.validErr)return null;for(e=0;e<n.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(n.getInteriorRingN(e).getCoordinates()),null!==this.validErr)return null}},checkHolesNotNested:function(t,e){for(var n=new Vr(e),i=0;i<t.getNumInteriorRing();i++){var r=t.getInteriorRingN(i);n.add(r)}n.isNonNested()||(this.validErr=new zr(zr.NESTED_HOLES,n.getNestedPoint()))},checkConsistentArea:function(t){var e=new kr(t);return e.isNodeConsistentArea()?void(e.hasDuplicateRings()&&(this.validErr=new zr(zr.DUPLICATE_RINGS,e.getInvalidPoint()))):(this.validErr=new zr(zr.SELF_INTERSECTION,e.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),null===this.validErr},checkShellInsideHole:function(t,e,n){var i=t.getCoordinates(),r=e.getCoordinates(),o=Yr.findPtNotNode(i,e,n);if(null!==o&&!Ht.isPointInRing(o,r))return o;var s=Yr.findPtNotNode(r,t,n);return null!==s?Ht.isPointInRing(s,i)?s:null:(f.shouldNeverReachHere("points in shell and hole appear to be equal"),null)},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),null!==this.validErr)return null}},checkConnectedInteriors:function(t){var e=new Or(t);e.isInteriorsConnected()||(this.validErr=new zr(zr.DISCONNECTED_INTERIOR,e.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new at,n=!0,i=t.iterator();i.hasNext();){var r=i.next();if(n)n=!1;else{if(e.contains(r.coord))return this.validErr=new zr(zr.RING_SELF_INTERSECTION,r.coord),null;e.add(r.coord)}}},checkHolesInShell:function(t,e){for(var n=t.getExteriorRing(),i=new Ur(n),r=0;r<t.getNumInteriorRing();r++){var o=t.getInteriorRingN(r),s=Yr.findPtNotNode(o.getCoordinates(),n,e);if(null===s)return null;if(!i.isInside(s))return this.validErr=new zr(zr.HOLE_OUTSIDE_SHELL,s),null}},checkTooFewPoints:function(t){return t.hasTooFewPoints()?(this.validErr=new zr(zr.TOO_FEW_POINTS,t.getInvalidPoint()),null):void 0},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof It){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof wt){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof St){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),null!==this.validErr)return null;if(this.checkClosedRing(n),null!==this.validErr)return null;var i=new Dn(0,n);if(this.checkTooFewPoints(i),null!==this.validErr)return null;var r=new Yt;i.computeSelfNodes(r,!0,!0),this.checkNoSelfIntersectingRings(i)}else if(arguments[0]instanceof xt){var o=arguments[0];if(this.checkInvalidCoordinates(o.getCoordinates()),null!==this.validErr)return null;i=new Dn(0,o);this.checkTooFewPoints(i)}else if(arguments[0]instanceof Ct){var s=arguments[0];if(this.checkInvalidCoordinates(s),null!==this.validErr)return null;if(this.checkClosedRings(s),null!==this.validErr)return null;i=new Dn(0,s);if(this.checkTooFewPoints(i),null!==this.validErr)return null;if(this.checkConsistentArea(i),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this.validErr))return null;if(this.checkHolesInShell(s,i),null!==this.validErr)return null;if(this.checkHolesNotNested(s,i),null!==this.validErr)return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof Lt){for(var a=arguments[0],u=0;u<a.getNumGeometries();u++){var l=a.getGeometryN(u);if(this.checkInvalidCoordinates(l),null!==this.validErr)return null;if(this.checkClosedRings(l),null!==this.validErr)return null}i=new Dn(0,a);if(this.checkTooFewPoints(i),null!==this.validErr)return null;if(this.checkConsistentArea(i),null!==this.validErr)return null;if(!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(i),null!==this.validErr))return null;for(u=0;u<a.getNumGeometries();u++){l=a.getGeometryN(u);if(this.checkHolesInShell(l,i),null!==this.validErr)return null}for(u=0;u<a.getNumGeometries();u++){l=a.getGeometryN(u);if(this.checkHolesNotNested(l,i),null!==this.validErr)return null}if(this.checkShellsNotNested(a,i),null!==this.validErr)return null;this.checkConnectedInteriors(i)}else if(arguments[0]instanceof ft){var c=arguments[0];for(u=0;u<c.getNumGeometries();u++){var h=c.getGeometryN(u);if(this.checkValid(h),null!==this.validErr)return null}}else if(arguments[0]instanceof B){var f=arguments[0];if(this.validErr=null,f.isEmpty())return null;if(f instanceof It)this.checkValid(f);else if(f instanceof wt)this.checkValid(f);else if(f instanceof St)this.checkValid(f);else if(f instanceof xt)this.checkValid(f);else if(f instanceof Ct)this.checkValid(f);else if(f instanceof Lt)this.checkValid(f);else{if(!(f instanceof ft))throw new UnsupportedOperationException(f.getClass().getName());this.checkValid(f)}}},setSelfTouchingRingFormingHoleValid:function(t){this.isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,n){var i=t.getCoordinates(),r=e.getExteriorRing(),o=r.getCoordinates(),s=Yr.findPtNotNode(i,r,n);if(null===s)return null;if(!Ht.isPointInRing(s,o))return null;if(e.getNumInteriorRing()<=0)return this.validErr=new zr(zr.NESTED_SHELLS,s),null;for(var a=null,u=0;u<e.getNumInteriorRing();u++){var l=e.getInteriorRingN(u);if(null===(a=this.checkShellInsideHole(t,l,n)))return null}this.validErr=new zr(zr.NESTED_SHELLS,a)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),null!==this.validErr)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),null!==this.validErr)return null},checkClosedRing:function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new zr(zr.RING_NOT_CLOSED,e)}},checkShellsNotNested:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var i=t.getGeometryN(n).getExteriorRing(),r=0;r<t.getNumGeometries();r++)if(n!==r){var o=t.getGeometryN(r);if(this.checkShellNotNested(i,o,e),null!==this.validErr)return null}},interfaces_:function(){return[]},getClass:function(){return Yr}}),Yr.findPtNotNode=function(t,e,n){for(var i=n.findEdge(e).getEdgeIntersectionList(),r=0;r<t.length;r++){var o=t[r];if(!i.isIntersection(o))return o}return null},Yr.isValid=function(){if(arguments[0]instanceof B)return new Yr(arguments[0]).isValid();if(arguments[0]instanceof g){var t=arguments[0];return!(r.isNaN(t.x)||r.isInfinite(t.x)||r.isNaN(t.y)||r.isInfinite(t.y))}};var cs=Object.freeze({IsValidOp:Yr}),hs=Object.freeze({BoundaryOp:dt,IsSimpleOp:mi,buffer:is,distance:rs,linemerge:os,overlay:ss,polygonize:as,relate:us,union:ls,valid:cs});c(Xr,Tt.CoordinateOperation),e(Xr.prototype,{editCoordinates:function(t,e){if(0===t.length)return null;for(var n=new Array(t.length).fill(null),i=0;i<t.length;i++){var r=new g(t[i]);this.targetPM.makePrecise(r),n[i]=r}var o=new N(n,!1).toCoordinateArray(),s=0;e instanceof xt&&(s=2),e instanceof St&&(s=4);var a=n;return this.removeCollapsed&&(a=null),o.length<s?a:o},interfaces_:function(){return[]},getClass:function(){return Xr}}),e(jr.prototype,{fixPolygonalTopology:function(t){var e=t;this.changePrecisionModel||(e=this.changePM(t,this.targetPM));var n=e.buffer(0),i=n;return this.changePrecisionModel||(i=t.getFactory().createGeometry(n)),i},reducePointwise:function(t){var e=null;this.changePrecisionModel?e=new Tt(this.createFactory(t.getFactory(),this.targetPM)):e=new Tt;var n=this.removeCollapsed;return t.getDimension()>=2&&(n=!0),e.edit(t,new Xr(this.targetPM,n))},changePM:function(t,e){return this.createEditor(t.getFactory(),e).edit(t,new Tt.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this.removeCollapsed=t},createFactory:function(t,e){return new qt(e,t.getSRID(),t.getCoordinateSequenceFactory())},setChangePrecisionModel:function(t){this.changePrecisionModel=t},reduce:function(t){var e=this.reducePointwise(t);return this.isPointwise?e:T(e,Nt)?e.isValid()?e:this.fixPolygonalTopology(e):e},setPointwise:function(t){this.isPointwise=t},createEditor:function(t,e){return t.getPrecisionModel()===e?new Tt:new Tt(this.createFactory(t,e))},interfaces_:function(){return[]},getClass:function(){return jr}}),jr.reduce=function(t,e){return new jr(e).reduce(t)},jr.reducePointwise=function(t,e){var n=new jr(e);return n.setPointwise(!0),n.reduce(t)};var fs=Object.freeze({GeometryPrecisionReducer:jr});e(Hr.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var n=-1,i=t,r=t+1;e>r;r++){var o=this.seg.distance(this.pts[r]);o>n&&(n=o,i=r)}if(n<=this.distanceTolerance)for(r=t+1;e>r;r++)this.usePt[r]=!1;else this.simplifySection(t,i),this.simplifySection(i,e)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var t=0;t<this.pts.length;t++)this.usePt[t]=!0;this.simplifySection(0,this.pts.length-1);var e=new N;for(t=0;t<this.pts.length;t++)this.usePt[t]&&e.add(new g(this.pts[t]));return e.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Hr}}),Hr.simplify=function(t,e){var n=new Hr(t);return n.setDistanceTolerance(e),n.simplify()},e(Wr.prototype,{setEnsureValid:function(t){this.isEnsureValidTopology=t},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new Zr(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(0>t)throw new i("Tolerance must be non-negative");this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return Wr}}),Wr.simplify=function(t,e){var n=new Wr(t);return n.setDistanceTolerance(e),n.getResultGeometry()},c(Zr,ne),e(Zr.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;var n=ne.prototype.transformPolygon.call(this,t,e);return e instanceof Lt?n:this.createValidArea(n)},createValidArea:function(t){return this.isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var n,i=t.toCoordinateArray();return n=0===i.length?new Array(0).fill(null):Hr.simplify(i,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(n)},transformMultiPolygon:function(t,e){var n=ne.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformLinearRing:function(t,e){var n=e instanceof Ct,i=ne.prototype.transformLinearRing.call(this,t,e);return!n||i instanceof St?i:null},interfaces_:function(){return[]},getClass:function(){return Zr}}),Wr.DPTransformer=Zr,c(Kr,Wt),e(Kr.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return Kr}}),e(Jr.prototype,{addToResult:function(t){this.resultSegs.add(t)},asLineString:function(){return this.parentLine.getFactory().createLineString(Jr.extractCoordinates(this.resultSegs))},getResultSize:function(){var t=this.resultSegs.size();return 0===t?0:t+1},getParent:function(){return this.parentLine},getSegment:function(t){return this.segs[t]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(Jr.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var t=this.parentLine.getCoordinates();this.segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var n=new Kr(t[e],t[e+1],this.parentLine,e);this.segs[e]=n}},getResultCoordinates:function(){return Jr.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return Jr}}),Jr.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),n=null,i=0;i<t.size();i++)n=t.get(i),e[i]=n.p0;return e[e.length-1]=n.p1,e},e(Qr.prototype,{remove:function(t){this.index.remove(new C(t.p0,t.p1),t)},add:function(){if(arguments[0]instanceof Jr)for(var t=arguments[0].getSegments(),e=0;e<t.length;e++){var n=t[e];this.add(n)}else if(arguments[0]instanceof Wt){var i=arguments[0];this.index.insert(new C(i.p0,i.p1),i)}},query:function(t){var e=new C(t.p0,t.p1),n=new $r(t);return this.index.query(e,n),n.getItems()},interfaces_:function(){return[]},getClass:function(){return Qr}}),e($r.prototype,{visitItem:function(t){var e=t;C.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[me]},getClass:function(){return $r}}),e(to.prototype,{flatten:function(t,e){var n=new Wt(this.linePts[t],this.linePts[e]);return this.remove(this.line,t,e),this.outputIndex.add(n),n},hasBadIntersection:function(t,e,n){return!!this.hasBadOutputIntersection(n)||!!this.hasBadInputIntersection(t,e,n)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplifySection:function(t,e,n){n+=1;var i=new Array(2).fill(null);if(t+1===e){var r=this.line.getSegment(t);return this.line.addToResult(r),null}var o=!0;this.line.getResultSize()<this.line.getMinimumSize()&&(n+1<this.line.getMinimumSize()&&(o=!1));var s=new Array(1).fill(null),a=this.findFurthestPoint(this.linePts,t,e,s);s[0]>this.distanceTolerance&&(o=!1);var u=new Wt;if(u.p0=this.linePts[t],u.p1=this.linePts[e],i[0]=t,i[1]=e,this.hasBadIntersection(this.line,i,u)&&(o=!1),o){r=this.flatten(t,e);return this.line.addToResult(r),null}this.simplifySection(t,a,n),this.simplifySection(a,e,n)},hasBadOutputIntersection:function(t){for(var e=this.outputIndex.query(t).iterator();e.hasNext();){var n=e.next();if(this.hasInteriorIntersection(n,t))return!0}return!1},findFurthestPoint:function(t,e,n,i){var r=new Wt;r.p0=t[e],r.p1=t[n];for(var o=-1,s=e,a=e+1;n>a;a++){var u=t[a],l=r.distance(u);l>o&&(o=l,s=a)}return i[0]=o,s},simplify:function(t){this.line=t,this.linePts=t.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(t,e,n){for(var i=e;n>i;i++){var r=t.getSegment(i);this.inputIndex.remove(r)}},hasInteriorIntersection:function(t,e){return this.li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,n){for(var i=this.inputIndex.query(n).iterator();i.hasNext();){var r=i.next();if(this.hasInteriorIntersection(r,n)){if(to.isInLineSection(t,e,r))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return to}}),to.isInLineSection=function(t,e,n){if(n.getParent()!==t.getParent())return!1;var i=n.getIndex();return i>=e[0]&&i<e[1]},e(eo.prototype,{setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(t){for(var e=t.iterator();e.hasNext();)this.inputIndex.add(e.next());for(e=t.iterator();e.hasNext();){var n=new to(this.inputIndex,this.outputIndex);n.setDistanceTolerance(this.distanceTolerance),n.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return eo}}),e(no.prototype,{getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():(this.linestringMap=new Gt,this.inputGeom.apply(new ro(this)),this.lineSimplifier.simplify(this.linestringMap.values()),new io(this.linestringMap).transform(this.inputGeom))},setDistanceTolerance:function(t){if(0>t)throw new i("Tolerance must be non-negative");this.lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return no}}),no.simplify=function(t,e){var n=new no(t);return n.setDistanceTolerance(e),n.getResultGeometry()},c(io,ne),e(io.prototype,{transformCoordinates:function(t,e){if(0===t.size())return null;if(e instanceof xt){var n=this.linestringMap.get(e);return this.createCoordinateSequence(n.getResultCoordinates())}return ne.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return io}}),e(ro.prototype,{filter:function(t){if(t instanceof xt){var e=t;if(e.isEmpty())return null;var n=e.isClosed()?4:2,i=new Jr(e,n);this.tps.linestringMap.put(e,i)}},interfaces_:function(){return[U]},getClass:function(){return ro}}),no.LineStringTransformer=io,no.LineStringMapBuilderFilter=ro;var gs=Object.freeze({DouglasPeuckerSimplifier:Wr,TopologyPreservingSimplifier:no});e(oo.prototype,{splitAt:function(){if(1===arguments.length){var t=arguments[0],e=this.minimumLen/this.segLen;if(t.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(e),null;if(t.distance(this.seg.p1)<this.minimumLen)return this.splitPt=oo.pointAlongReverse(this.seg,e),null;this.splitPt=t}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this.getConstrainedLength(n)/this.segLen;i.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(r):this.splitPt=oo.pointAlongReverse(this.seg,r)}},setMinimumLength:function(t){this.minimumLen=t},getConstrainedLength:function(t){return t<this.minimumLen?this.minimumLen:t},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return oo}}),oo.pointAlongReverse=function(t,e){var n=new g;return n.x=t.p1.x-e*(t.p1.x-t.p0.x),n.y=t.p1.y-e*(t.p1.y-t.p0.y),n},e(so.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return so}}),e(ao.prototype,{findSplitPoint:function(t,e){var n=t.getLineSegment(),i=n.getLength()/2,r=new oo(n),o=ao.projectedSplitPoint(t,e),s=2*o.distance(e)*.8;return s>i&&(s=i),r.setMinimumLength(s),r.splitAt(o),r.getSplitPoint()},interfaces_:function(){return[so]},getClass:function(){return ao}}),ao.projectedSplitPoint=function(t,e){return t.getLineSegment().project(e)},e(uo.prototype,{interfaces_:function(){return[]},getClass:function(){return uo}}),uo.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},uo.isInCircleDDNormalized=function(t,e,n,i){var r=_.valueOf(t.x).selfSubtract(i.x),o=_.valueOf(t.y).selfSubtract(i.y),s=_.valueOf(e.x).selfSubtract(i.x),a=_.valueOf(e.y).selfSubtract(i.y),u=_.valueOf(n.x).selfSubtract(i.x),l=_.valueOf(n.y).selfSubtract(i.y),c=r.multiply(a).selfSubtract(s.multiply(o)),h=s.multiply(l).selfSubtract(u.multiply(a)),f=u.multiply(o).selfSubtract(r.multiply(l)),g=r.multiply(r).selfAdd(o.multiply(o)),d=s.multiply(s).selfAdd(a.multiply(a)),p=u.multiply(u).selfAdd(l.multiply(l));return g.selfMultiply(h).selfAdd(d.selfMultiply(f)).selfAdd(p.selfMultiply(c)).doubleValue()>0},uo.checkRobustInCircle=function(t,e,n,i){var r=uo.isInCircleNonRobust(t,e,n,i),o=uo.isInCircleDDSlow(t,e,n,i),s=uo.isInCircleCC(t,e,n,i),a=Hn.circumcentre(t,e,n);D.out.println("p radius diff a = "+Math.abs(i.distance(a)-t.distance(a))/t.distance(a)),r===o&&r===s||(D.out.println("inCircle robustness failure (double result = "+r+", DD result = "+o+", CC result = "+s+")"),D.out.println(Vt.toLineString(new _t([t,e,n,i]))),D.out.println("Circumcentre = "+Vt.toPoint(a)+" radius = "+t.distance(a)),D.out.println("p radius diff a = "+Math.abs(i.distance(a)/t.distance(a)-1)),D.out.println("p radius diff b = "+Math.abs(i.distance(a)/e.distance(a)-1)),D.out.println("p radius diff c = "+Math.abs(i.distance(a)/n.distance(a)-1)),D.out.println())},uo.isInCircleDDFast=function(t,e,n,i){var r=_.sqr(t.x).selfAdd(_.sqr(t.y)).selfMultiply(uo.triAreaDDFast(e,n,i)),o=_.sqr(e.x).selfAdd(_.sqr(e.y)).selfMultiply(uo.triAreaDDFast(t,n,i)),s=_.sqr(n.x).selfAdd(_.sqr(n.y)).selfMultiply(uo.triAreaDDFast(t,e,i)),a=_.sqr(i.x).selfAdd(_.sqr(i.y)).selfMultiply(uo.triAreaDDFast(t,e,n));return r.selfSubtract(o).selfAdd(s).selfSubtract(a).doubleValue()>0},uo.isInCircleCC=function(t,e,n,i){var r=Hn.circumcentre(t,e,n),o=t.distance(r);return 0>=i.distance(r)-o},uo.isInCircleNormalized=function(t,e,n,i){var r=t.x-i.x,o=t.y-i.y,s=e.x-i.x,a=e.y-i.y,u=n.x-i.x,l=n.y-i.y;return(r*r+o*o)*(s*l-u*a)+(s*s+a*a)*(u*o-r*l)+(u*u+l*l)*(r*a-s*o)>0},uo.isInCircleDDSlow=function(t,e,n,i){var r=_.valueOf(i.x),o=_.valueOf(i.y),s=_.valueOf(t.x),a=_.valueOf(t.y),u=_.valueOf(e.x),l=_.valueOf(e.y),c=_.valueOf(n.x),h=_.valueOf(n.y),f=s.multiply(s).add(a.multiply(a)).multiply(uo.triAreaDDSlow(u,l,c,h,r,o)),g=u.multiply(u).add(l.multiply(l)).multiply(uo.triAreaDDSlow(s,a,c,h,r,o)),d=c.multiply(c).add(h.multiply(h)).multiply(uo.triAreaDDSlow(s,a,u,l,r,o)),p=r.multiply(r).add(o.multiply(o)).multiply(uo.triAreaDDSlow(s,a,u,l,c,h));return f.subtract(g).add(d).subtract(p).doubleValue()>0},uo.isInCircleNonRobust=function(t,e,n,i){return(t.x*t.x+t.y*t.y)*uo.triArea(e,n,i)-(e.x*e.x+e.y*e.y)*uo.triArea(t,n,i)+(n.x*n.x+n.y*n.y)*uo.triArea(t,e,i)-(i.x*i.x+i.y*i.y)*uo.triArea(t,e,n)>0},uo.isInCircleRobust=function(t,e,n,i){return uo.isInCircleNormalized(t,e,n,i)},uo.triAreaDDSlow=function(t,e,n,i,r,o){return n.subtract(t).multiply(o.subtract(e)).subtract(i.subtract(e).multiply(r.subtract(t)))},uo.triAreaDDFast=function(t,e,n){var i=_.valueOf(e.x).selfSubtract(t.x).selfMultiply(_.valueOf(n.y).selfSubtract(t.y)),r=_.valueOf(e.y).selfSubtract(t.y).selfMultiply(_.valueOf(n.x).selfSubtract(t.x));return i.selfSubtract(r)},e(lo.prototype,{circleCenter:function(t,e){var n,i=new lo(this.getX(),this.getY()),r=new F(this.bisector(i,t),this.bisector(t,e)),o=null;try{o=new lo(r.getX(),r.getY())}catch(n){if(!(n instanceof S))throw n;D.err.println("a: "+i+"  b: "+t+"  c: "+e),D.err.println(n)}return o},dot:function(t){return this.p.x*t.getX()+this.p.y*t.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(t,e){var n=e.getX()-t.getX(),i=e.getY()-t.getY(),r=new F(t.getX()+n/2,t.getY()+i/2,1),o=new F(t.getX()-i+n/2,t.getY()+n+i/2,1);return new F(r,o)},equals:function(){if(1===arguments.length){var t=arguments[0];return this.p.x===t.getX()&&this.p.y===t.getY()}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.p.distance(e.getCoordinate())<n}},getCoordinate:function(){return this.p},isInCircle:function(t,e,n){return uo.isInCircleRobust(t.p,e.p,n.p,this.p)},interpolateZValue:function(t,e,n){var i=t.getX(),r=t.getY(),o=e.getX()-i,s=n.getX()-i,a=e.getY()-r,u=n.getY()-r,l=o*u-s*a,c=this.getX()-i,h=this.getY()-r,f=(u*c-s*h)/l,g=(-a*c+o*h)/l;return t.getZ()+f*(e.getZ()-t.getZ())+g*(n.getZ()-t.getZ())},midPoint:function(t){return new lo((this.p.x+t.getX())/2,(this.p.y+t.getY())/2,(this.p.z+t.getZ())/2)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)>0},getX:function(){return this.p.x},crossProduct:function(t){return this.p.x*t.getY()-this.p.y*t.getX()},setZ:function(t){this.p.z=t},times:function(t){return new lo(t*this.p.x,t*this.p.y)},cross:function(){return new lo(this.p.y,-this.p.x)},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(t){return new lo(this.p.x-t.getX(),this.p.y-t.getY())},getY:function(){return this.p.y},classify:function(t,e){var n=this,i=e.sub(t),r=n.sub(t),o=i.crossProduct(r);return o>0?lo.LEFT:0>o?lo.RIGHT:i.getX()*r.getX()<0||i.getY()*r.getY()<0?lo.BEHIND:i.magn()<r.magn()?lo.BEYOND:t.equals(n)?lo.ORIGIN:e.equals(n)?lo.DESTINATION:lo.BETWEEN},sum:function(t){return new lo(this.p.x+t.getX(),this.p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var n=this.circleCenter(t,e),i=this.distance(n,t),r=this.distance(this,t),o=this.distance(t,e);return r>o&&(r=o),r>(o=this.distance(e,this))&&(r=o),i/r},interfaces_:function(){return[]},getClass:function(){return lo}}),lo.interpolateZ=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],i=e.distance(n),r=t.distance(e),o=n.z-e.z;return e.z+o*(r/i)}if(4===arguments.length){var s=arguments[0],a=arguments[1],u=arguments[2],l=arguments[3],c=a.x,h=a.y,f=u.x-c,g=l.x-c,d=u.y-h,p=l.y-h,v=f*p-g*d,y=s.x-c,m=s.y-h,x=(p*y-g*m)/v,E=(-d*y+f*m)/v;return a.z+x*(u.z-a.z)+E*(l.z-a.z)}},lo.LEFT=0,lo.RIGHT=1,lo.BEYOND=2,lo.BEHIND=3,lo.BETWEEN=4,lo.ORIGIN=5,lo.DESTINATION=6,c(co,lo),e(co.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=t.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this.constraint=t},interfaces_:function(){return[]},getClass:function(){return co}}),e(ho.prototype,{equalsNonOriented:function(t){return!!this.equalsOriented(t)||!!this.equalsOriented(t.sym())},toLineSegment:function(){return new Wt(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this.vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this.data=t},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var t=this.vertex.getCoordinate(),e=this.dest().getCoordinate();return Vt.toLineString(t,e)},isLive:function(){return null!==this._rot},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this.next=t},interfaces_:function(){return[]},getClass:function(){return ho}}),ho.makeEdge=function(t,e){var n=new ho,i=new ho,r=new ho,o=new ho;n._rot=i,i._rot=r,r._rot=o,o._rot=n,n.setNext(n),i.setNext(o),r.setNext(r),o.setNext(i);var s=n;return s.setOrig(t),s.setDest(e),s},ho.swap=function(t){var e=t.oPrev(),n=t.sym().oPrev();ho.splice(t,e),ho.splice(t.sym(),n),ho.splice(t,e.lNext()),ho.splice(t.sym(),n.lNext()),t.setOrig(e.dest()),t.setDest(n.dest())},ho.splice=function(t,e){var n=t.oNext().rot(),i=e.oNext().rot(),r=e.oNext(),o=t.oNext(),s=i.oNext(),a=n.oNext();t.setNext(r),e.setNext(o),n.setNext(s),i.setNext(a)},ho.connect=function(t,e){var n=ho.makeEdge(t.dest(),e.orig());return ho.splice(n,t.lNext()),ho.splice(n.sym(),e),n},e(fo.prototype,{insertSite:function(t){var e=this.subdiv.locate(t);if(this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete(e.oNext()));var n=this.subdiv.makeEdge(e.orig(),t);ho.splice(n,e);var i=n;do{e=(n=this.subdiv.connect(e,n.sym())).oPrev()}while(e.lNext()!==i);for(;;){var r=e.oPrev();if(r.dest().rightOf(e)&&t.isInCircle(e.orig(),r.dest(),e.dest()))ho.swap(e),e=e.oPrev();else{if(e.oNext()===i)return n;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},interfaces_:function(){return[]},getClass:function(){return fo}}),e(go.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return go}}),e(po.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e,e},findEdge:function(){return this.subdiv.getEdges().iterator().next()},interfaces_:function(){return[go]},getClass:function(){return po}}),c(vo,l),e(vo.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return vo}}),vo.msgWithSpatial=function(t,e){return null!==e?t+" [ "+e+" ]":t},e(yo.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return yo}}),e(mo.prototype,{getTriangleVertices:function(t){var e=new Io;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return!!t.equals(this.frameVertex[0])||!!t.equals(this.frameVertex[1])||!!t.equals(this.frameVertex[2])},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},connect:function(t,e){var n=ho.connect(t,e);return this.quadEdges.add(n),n},getVoronoiCellPolygon:function(t,e){var n=new I,i=t;do{var r=t.rot().orig().getCoordinate();n.add(r),t=t.oPrev()}while(t!==i);var o=new N;o.addAll(n,!1),o.closeRing(),o.size()<4&&(D.out.println(o),o.add(o.get(o.size()-1),!0));var s=o.toCoordinateArray(),a=e.createPolygon(e.createLinearRing(s),null),u=i.orig();return a.setUserData(u.getCoordinate()),a},setLocator:function(t){this.locator=t},initSubdiv:function(){var t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);ho.splice(t.sym(),e);var n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return ho.splice(e.sym(),n),ho.splice(n.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);mo.getTriangleEdges(t,e);var n=new Array(3).fill(null);mo.getTriangleEdges(t.sym(),n);var i=t.lNext().dest();if(this.isFrameVertex(i))return!0;var r=t.sym().lNext().dest();return!!this.isFrameVertex(r)},makeEdge:function(t,e){var n=ho.makeEdge(t,e);return this.quadEdges.add(n),n},visitTriangles:function(t,e){this.visitedKey++;var n=new Qt;n.push(this.startingEdge);for(var i=new Q;!n.empty();){var r=n.pop();if(!i.contains(r)){var o=this.fetchTriangleToVisit(r,n,e,i);null!==o&&t.visit(o)}}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){return this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate()),this.seg.distance(e)<this.edgeCoincidenceTolerance},getEnvelope:function(){return new C(this.frameEnv)},createFrame:function(t){var e,n=t.getWidth(),i=t.getHeight();e=n>i?10*n:10*i,this.frameVertex[0]=new lo((t.getMaxX()+t.getMinX())/2,t.getMaxY()+e),this.frameVertex[1]=new lo(t.getMinX()-e,t.getMinY()-e),this.frameVertex[2]=new lo(t.getMaxX()+e,t.getMinY()-e),this.frameEnv=new C(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new No;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new Q,n=this.quadEdges.iterator();n.hasNext();){var i=n.next(),r=i.orig();!t&&this.isFrameVertex(r)||e.add(r);var o=i.dest();!t&&this.isFrameVertex(o)||e.add(o)}return e},fetchTriangleToVisit:function(t,e,n,i){var r=t,o=0,s=!1;do{this.triEdges[o]=r,this.isFrameEdge(r)&&(s=!0);var a=r.sym();i.contains(a)||e.push(a),i.add(r),o++,r=r.lNext()}while(r!==t);return s&&!n?null:this.triEdges},getEdges:function(){if(0===arguments.length)return this.quadEdges;if(1===arguments.length){for(var t=arguments[0],e=this.getPrimaryEdges(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var o=r.next();n[i++]=t.createLineString([o.orig().getCoordinate(),o.dest().getCoordinate()])}return t.createMultiLineString(n)}},getVertexUniqueEdges:function(t){for(var e=new I,n=new Q,i=this.quadEdges.iterator();i.hasNext();){var r=i.next(),o=r.orig();n.contains(o)||(n.add(o),!t&&this.isFrameVertex(o)||e.add(r));var s=r.sym(),a=s.orig();n.contains(a)||(n.add(a),!t&&this.isFrameVertex(a)||e.add(s))}return e},getTriangleEdges:function(t){var e=new Eo;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this.visitedKey++;var e=new I,n=new Qt;n.push(this.startingEdge);for(var i=new Q;!n.empty();){var r=n.pop();if(!i.contains(r)){var o=r.getPrimary();!t&&this.isFrameEdge(o)||e.add(o),n.push(r.oNext()),n.push(r.sym().oNext()),i.add(r),i.add(r.sym())}}return e},delete:function(t){ho.splice(t,t.oPrev()),ho.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),i=t.rot().sym();this.quadEdges.remove(t),this.quadEdges.remove(e),this.quadEdges.remove(n),this.quadEdges.remove(i),t.delete(),e.delete(),n.delete(),i.delete()},locateFromEdge:function(t,e){for(var n=0,i=this.quadEdges.size(),r=e;;){if(++n>i)throw new vo(r.toLineSegment());if(t.equals(r.orig())||t.equals(r.dest()))break;if(t.rightOf(r))r=r.sym();else if(t.rightOf(r.oNext())){if(t.rightOf(r.dPrev()))break;r=r.dPrev()}else r=r.oNext()}return r},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new xo,!0);for(var e=new I,n=this.getVertexUniqueEdges(!1).iterator();n.hasNext();){var i=n.next();e.add(this.getVoronoiCellPolygon(i,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(qt.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),n=new Array(e.size()).fill(null),i=0,r=e.iterator();r.hasNext();){var o=r.next();n[i++]=t.createPolygon(t.createLinearRing(o),null)}return t.createGeometryCollection(n)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;var n=this.makeEdge(e.orig(),t);ho.splice(n,e);var i=n;do{e=(n=this.connect(e,n.sym())).oPrev()}while(e.lNext()!==i);return i},locate:function(){if(1===arguments.length){if(arguments[0]instanceof lo){var t=arguments[0];return this.locator.locate(t)}if(arguments[0]instanceof g){var e=arguments[0];return this.locator.locate(new lo(e))}}else if(2===arguments.length){var n=arguments[0],i=arguments[1],r=this.locator.locate(new lo(n));if(null===r)return null;var o=r;r.dest().getCoordinate().equals2D(n)&&(o=r.sym());var s=o;do{if(s.dest().getCoordinate().equals2D(i))return s;s=s.oNext()}while(s!==o);return null}},interfaces_:function(){return[]},getClass:function(){return mo}}),mo.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new i("Edges do not form a triangle")},e(xo.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),i=t[2].orig().getCoordinate(),r=new lo(Hn.circumcentre(e,n,i)),o=0;3>o;o++)t[o].rot().setOrig(r)},interfaces_:function(){return[yo]},getClass:function(){return xo}}),e(Eo.prototype,{getTriangleEdges:function(){return this.triList},visit:function(t){this.triList.add(t.clone())},interfaces_:function(){return[yo]},getClass:function(){return Eo}}),e(Io.prototype,{visit:function(t){this.triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[yo]},getClass:function(){return Io}}),e(No.prototype,{checkTriangleSize:function(t){t.length>=2?Vt.toLineString(t[0],t[1]):t.length>=1&&Vt.toPoint(t[0])},visit:function(t){this.coordList.clear();for(var e=0;3>e;e++){var n=t[e].orig();this.coordList.add(n.getCoordinate())}if(this.coordList.size()>0){this.coordList.closeRing();var i=this.coordList.toCoordinateArray();if(4!==i.length)return null;this.triCoords.add(i)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[yo]},getClass:function(){return No}}),mo.TriangleCircumcentreVisitor=xo,mo.TriangleEdgesListVisitor=Eo,mo.TriangleVertexListVisitor=Io,mo.TriangleCoordinatesVisitor=No,mo.EDGE_COINCIDENCE_TOL_FACTOR=1e3,e(Co.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){return this.ls.getCoordinate(1).z},getStartZ:function(){return this.ls.getCoordinate(0).z},intersection:function(t){return this.ls.intersection(t.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){return this.ls.getCoordinate(1).y},getStartX:function(){return this.ls.getCoordinate(0).x},equalsTopo:function(t){return this.ls.equalsTopo(t.getLineSegment())},getStartY:function(){return this.ls.getCoordinate(0).y},setData:function(t){this.data=t},getData:function(){return this.data},getEndX:function(){return this.ls.getCoordinate(1).x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return Co}}),e(wo.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return wo}}),e(So.prototype,{isRepeated:function(){return this.count>1},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(t){this.left=t},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(t){this.right=t},interfaces_:function(){return[]},getClass:function(){return So}}),e(Lo.prototype,{insert:function(){if(1===arguments.length){var t=arguments[0];return this.insert(t,null)}if(2===arguments.length){var e=arguments[0],n=arguments[1];if(null===this.root)return this.root=new So(e,n),this.root;if(this.tolerance>0){var i=this.findBestMatchNode(e);if(null!==i)return i.increment(),i}return this.insertExact(e,n)}},query:function(){var t=arguments,e=this;if(1===arguments.length){var n=arguments[0],i=new I;return this.query(n,i),i}if(2===arguments.length)if(arguments[0]instanceof C&&T(arguments[1],m))!function(){var n=t[0],i=t[1];e.queryNode(e.root,n,!0,{interfaces_:function(){return[wo]},visit:function(t){i.add(t)}})}();else if(arguments[0]instanceof C&&T(arguments[1],wo)){var r=arguments[0],o=arguments[1];this.queryNode(this.root,r,!0,o)}},queryNode:function(t,e,n,i){if(null===t)return null;var r=null,o=null,s=null;n?(r=e.getMinX(),o=e.getMaxX(),s=t.getX()):(r=e.getMinY(),o=e.getMaxY(),s=t.getY());var a=o>=s;s>r&&this.queryNode(t.getLeft(),e,!n,i),e.contains(t.getCoordinate())&&i.visit(t),a&&this.queryNode(t.getRight(),e,!n,i)},findBestMatchNode:function(t){var e=new To(t,this.tolerance);return this.query(e.queryEnvelope(),e),e.getNode()},isEmpty:function(){return null===this.root},insertExact:function(t,e){for(var n=this.root,i=this.root,r=!0,o=!0;null!==n;){if(null!==n)if(t.distance(n.getCoordinate())<=this.tolerance)return n.increment(),n;o=r?t.x<n.getX():t.y<n.getY(),i=n,n=o?n.getLeft():n.getRight(),r=!r}this.numberOfNodes=this.numberOfNodes+1;var s=new So(t,e);return o?i.setLeft(s):i.setRight(s),s},interfaces_:function(){return[]},getClass:function(){return Lo}}),Lo.toCoordinates=function(){if(1===arguments.length){var t=arguments[0];return Lo.toCoordinates(t,!1)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],i=new N,r=e.iterator();r.hasNext();)for(var o=r.next(),s=n?o.getCount():1,a=0;s>a;a++)i.add(o.getCoordinate(),!0);return i.toCoordinateArray()}},e(To.prototype,{visit:function(t){var e=this.p.distance(t.getCoordinate());if(!(e<=this.tolerance))return null;var n=!1;(null===this.matchNode||e<this.matchDist||null!==this.matchNode&&e===this.matchDist&&t.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(n=!0),n&&(this.matchNode=t,this.matchDist=e)},queryEnvelope:function(){var t=new C(this.p);return t.expandBy(this.tolerance),t},getNode:function(){return this.matchNode},interfaces_:function(){return[wo]},getClass:function(){return To}}),Lo.BestMatchVisitor=To,e(Ro.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();var t=0,e=0;do{e=this.enforceGabriel(this.segments),t++}while(e>0&&t<Ro.MAX_SPLIT_ITER)},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var t=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),e=0,n=this.initialVertices.iterator();n.hasNext();){var i=n.next();t[e++]=i.getCoordinate()}for(var r=this.segVertices.iterator();r.hasNext();){i=r.next();t[e++]=i.getCoordinate()}return t},setConstraints:function(t,e){this.segments=t,this.segVertices=e},computeConvexHull:function(){var t=new qt,e=new te(this.getPointArray(),t);this.convexHull=e.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),n=t.getEnd(),i=new g((e.x+n.x)/2,(e.y+n.y)/2),o=e.distance(i),s=new C(i);s.expandBy(o);for(var a=this.kdt.query(s),u=null,l=r.MAX_VALUE,c=a.iterator();c.hasNext();){var h=c.next().getCoordinate();if(!h.equals2D(e)&&!h.equals2D(n)){var f=i.distance(h);if(o>f){(null===u||l>f)&&(u=h,l=f)}}}return u},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(t){this.splitFinder=t},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(t){for(var e=new I,n=0,i=new I,r=t.iterator();r.hasNext();){var o=r.next(),s=this.findNonGabrielPoint(o);if(null!==s){this.splitPt=this.splitFinder.findSplitPoint(o,s);var a=this.createVertex(this.splitPt,o),u=(this.insertSite(a),new Co(o.getStartX(),o.getStartY(),o.getStartZ(),a.getX(),a.getY(),a.getZ(),o.getData())),l=new Co(a.getX(),a.getY(),a.getZ(),o.getEndX(),o.getEndY(),o.getEndZ(),o.getData());e.add(u),e.add(l),i.add(o),n+=1}}return t.removeAll(i),t.addAll(e),n},createVertex:function(){if(1===arguments.length){var t=arguments[0],e=null;return null!==this.vertexFactory?this.vertexFactory.createVertex(t,null):new co(t)}if(2===arguments.length){var n=arguments[0],i=arguments[1];e=null;return(e=null!==this.vertexFactory?this.vertexFactory.createVertex(n,i):new co(n)).setOnConstraint(!0),e}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var t=Ro.computeVertexEnvelope(this.initialVertices),e=Ro.computeVertexEnvelope(this.segVertices),n=new C(t);n.expandToInclude(e);var i=.2*n.getWidth(),r=.2*n.getHeight(),o=Math.max(i,r);this.computeAreaEnv=new C(n),this.computeAreaEnv.expandBy(o)},setVertexFactory:function(t){this.vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new mo(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new po(this.subdiv)),this.incDel=new fo(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof co){var t=arguments[0],e=this.kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var n=e.getData();return n.merge(t),n}return this.incDel.insertSite(t),t}if(arguments[0]instanceof g){var i=arguments[0];this.insertSite(this.createVertex(i))}},interfaces_:function(){return[]},getClass:function(){return Ro}}),Ro.computeVertexEnvelope=function(t){for(var e=new C,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i.getCoordinate())}return e},Ro.MAX_SPLIT_ITER=99,e(bo.prototype,{create:function(){if(null!==this.subdiv)return null;var t=bo.envelope(this.siteCoords),e=bo.toVertices(this.siteCoords);this.subdiv=new mo(t,this.tolerance),new fo(this.subdiv).insertSites(e)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof B){var t=arguments[0];this.siteCoords=bo.extractUniqueCoordinates(t)}else if(T(arguments[0],v)){var e=arguments[0];this.siteCoords=bo.unique(j.toCoordinateArray(e))}},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return bo}}),bo.extractUniqueCoordinates=function(t){if(null===t)return new N;var e=t.getCoordinates();return bo.unique(e)},bo.envelope=function(t){for(var e=new C,n=t.iterator();n.hasNext();){var i=n.next();e.expandToInclude(i)}return e},bo.unique=function(t){var e=j.copyDeep(t);return ut.sort(e),new N(e,!1)},bo.toVertices=function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();e.add(new lo(i))}return e},e(Oo.prototype,{createSiteVertices:function(t){for(var e=new I,n=t.iterator();n.hasNext();){var i=n.next();this.constraintVertexMap.containsKey(i)||e.add(new co(i))}return e},create:function(){if(null!==this.subdiv)return null;var t=bo.envelope(this.siteCoords),e=new I;null!==this.constraintLines&&(t.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),e=Oo.createConstraintSegments(this.constraintLines));var n=new Ro(this.createSiteVertices(this.siteCoords),this.tolerance);n.setConstraints(e,new I(this.constraintVertexMap.values())),n.formInitialDelaunay(),n.enforceConstraints(),this.subdiv=n.getSubdivision()},setTolerance:function(t){this.tolerance=t},setConstraints:function(t){this.constraintLines=t},setSites:function(t){this.siteCoords=bo.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),n=0;n<e.length;n++){var i=new co(e[n]);this.constraintVertexMap.put(e[n],i)}},interfaces_:function(){return[]},getClass:function(){return Oo}}),Oo.createConstraintSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=wn.getLines(t),n=new I,i=e.iterator();i.hasNext();){var r=i.next();Oo.createConstraintSegments(r,n)}return n}if(2===arguments.length){var o=arguments[0],s=arguments[1],a=o.getCoordinates();for(i=1;i<a.length;i++)s.add(new Co(a[i-1],a[i]))}},e(Po.prototype,{create:function(){if(null!==this.subdiv)return null;var t=bo.envelope(this.siteCoords);this.diagramEnv=t;var e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(e),null!==this.clipEnv&&this.diagramEnv.expandToInclude(this.clipEnv);var n=bo.toVertices(this.siteCoords);this.subdiv=new mo(t,this.tolerance),new fo(this.subdiv).insertSites(n)},getDiagram:function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return Po.clipGeometryCollection(e,this.diagramEnv)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof B){var t=arguments[0];this.siteCoords=bo.extractUniqueCoordinates(t)}else if(T(arguments[0],v)){var e=arguments[0];this.siteCoords=bo.unique(j.toCoordinateArray(e))}},setClipEnvelope:function(t){this.clipEnv=t},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return Po}}),Po.clipGeometryCollection=function(t,e){for(var n=t.getFactory().toGeometry(e),i=new I,r=0;r<t.getNumGeometries();r++){var o=t.getGeometryN(r),s=null;e.contains(o.getEnvelopeInternal())?s=o:e.intersects(o.getEnvelopeInternal())&&(s=n.intersection(o)).setUserData(o.getUserData()),null===s||s.isEmpty()||i.add(s)}return t.getFactory().createGeometryCollection(qt.toGeometryArray(i))};var ds=Object.freeze({ConformingDelaunayTriangulationBuilder:Oo,DelaunayTriangulationBuilder:bo,VoronoiDiagramBuilder:Po});e(_o.prototype,{interfaces_:function(){return[]},getClass:function(){return _o}}),_o.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Bn.createEmptyResult(Bn.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),kn.overlayOp(t,e,Bn.UNION)},e(B.prototype,{equalsTopo:function(t){return!!this.getEnvelopeInternal().equals(t.getEnvelopeInternal())&&wr.relate(this,t).isEquals(this.getDimension(),t.getDimension())},union:function(){if(0===arguments.length)return br.union(this);if(1===arguments.length){var t=arguments[0];return _o.union(this,t)}},isValid:function(){return Yr.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return Bn.createEmptyResult(Bn.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return Xe.map(this,{interfaces_:function(){return[MapOp]},map:function(t){return t.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),kn.overlayOp(this,t,Bn.INTERSECTION)},covers:function(t){return wr.covers(this,t)},coveredBy:function(t){return wr.coveredBy(this,t)},touches:function(t){return wr.touches(this,t)},intersects:function(t){return wr.intersects(this,t)},within:function(t){return wr.within(this,t)},overlaps:function(t){return wr.overlaps(this,t)},disjoint:function(t){return wr.disjoint(this,t)},crosses:function(t){return wr.crosses(this,t)},buffer:function(){if(1===arguments.length){var t=arguments[0];return qi.bufferOp(this,t)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return qi.bufferOp(this,e,n)}if(3===arguments.length){var i=arguments[0],r=arguments[1],o=arguments[2];return qi.bufferOp(this,i,r,o)}},convexHull:function(){return new te(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return wr.relate.apply(wr,[this].concat(e))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var t=Kt.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();if(0===e)t=new Xn(this).getInteriorPoint();else if(1===e){t=new Yn(this).getInteriorPoint()}else{t=new Vn(this).getInteriorPoint()}return this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return Bn.createEmptyResult(Bn.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),kn.overlayOp(this,t,Bn.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){return(new Vt).write(this)},toString:function(){this.toText()},contains:function(t){return wr.contains(this,t)},difference:function(t){return this.isEmpty()?Bn.createEmptyResult(Bn.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),kn.overlayOp(this,t,Bn.DIFFERENCE))},isSimple:function(){return new mi(this).isSimple()},isWithinDistance:function(t,e){return!(this.getEnvelopeInternal().distance(t.getEnvelopeInternal())>e)&&Xi.isWithinDistance(this,t,e)},distance:function(t){return Xi.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}}),t.version="1.1.2 (248dab8)",t.algorithm=jo,t.densify=Ho,t.dissolve=Wo,t.geom=Yo,t.index=Jo,t.io=es,t.noding=ns,t.operation=hs,t.precision=fs,t.simplify=gs,t.triangulate=ds}(e)},function(t,e,n){var i=n(7).getCoord;t.exports=function(t,e){var n=Math.PI/180,r=180/Math.PI,o=i(t),s=i(e),a=n*o[0],u=n*s[0],l=n*o[1],c=n*s[1],h=Math.sin(u-a)*Math.cos(c),f=Math.cos(l)*Math.sin(c)-Math.sin(l)*Math.cos(c)*Math.cos(u-a);return r*Math.atan2(h,f)}},function(t,e,n){var i=n(7).getCoord,r=n(0),o=r.point,s=r.distanceToRadians;t.exports=function(t,e,n,r){var a=Math.PI/180,u=180/Math.PI,l=i(t),c=a*l[0],h=a*l[1],f=a*n,g=s(e,r),d=Math.asin(Math.sin(h)*Math.cos(g)+Math.cos(h)*Math.sin(g)*Math.cos(f)),p=c+Math.atan2(Math.sin(f)*Math.sin(g)*Math.cos(h),Math.cos(g)-Math.sin(h)*Math.sin(d));return o([u*p,u*d])}},function(t,e,n){t.exports=n(41)},function(t,e,n){"use strict";(function(e){var i=n(3),r=n(45),o={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var a={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=n(20):void 0!==e&&(t=n(20)),t}(),transformRequest:[function(t,e){return r(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],function(t){a.headers[t]={}}),i.forEach(["post","put","patch"],function(t){a.headers[t]=i.merge(o)}),t.exports=a}).call(this,n(44))},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(72)),i(n(73)),function(t){t.MSK_77="MSK_77",t.EPSG_3857="EPSG_3857",t.EPSG_4326="EPSG_4326"}(e.BackendSRS||(e.BackendSRS={})),function(t){t.OK="OK",t.FAIL="FAIl"}(e.ResultType||(e.ResultType={})),function(t){t.Point="POINT",t.MultiPoint="MULTIPOINT",t.LineString="LINESTRING",t.Polygon="POLYGON",t.MultiLineString="MULTILINESTRING",t.MultiPolygon="MULTIPOLYGON",t.GeometryCollection="GEOMETRYCOLLECTION"}(e.GeometryType||(e.GeometryType={})),function(t){t.STRING="STRING",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.DATE="DATE",t.DECIMAL="DECIMAL",t.PHOTO="PHOTO"}(e.BackendDataType||(e.BackendDataType={})),function(t){t.DISTRICT="DISTRICT",t.CITY="CITY",t.WARD="WARD",t.NONE="NONE",t.ADDRESS="ADDRESS",t.GRID="GRID"}(e.AdministrativeDivision||(e.AdministrativeDivision={})),function(t){t.GEOJSON="geojson",t.SHP="shp",t.XLSX="xlsx"}(e.LayerFileType||(e.LayerFileType={})),function(t){t.LAYER_ICON="LAYER_ICON",t.STYLE_ICON="STYLE_ICON",t.PHOTO="PHOTO"}(e.ImageCategory||(e.ImageCategory={})),function(t){t.SEARCH_BY_LAYER_INTERSECTION="SEARCH_BY_LAYER_INTERSECTION",t.CONSTRUCTION_BY_LAYER_INTERSECTION="CONSTRUCTION_BY_LAYER_INTERSECTION",t.CONSTRUCTION_BY_ATTRIBUTE_IMPORT="CONSTRUCTION_BY_ATTRIBUTE_IMPORT",t.CONSTRUCTION_BY_VIEW_COPYING="CONSTRUCTION_BY_VIEW_COPYING",t.CONSTRUCTION_BY_BUFFER_CALCULATION="CONSTRUCTION_BY_BUFFER_CALCULATION",t.EXPORT="EXPORT",t.ODOPM_METADATA_IMPORT="ODOPM_METADATA_IMPORT",t.ODOPM_SEMANTICS_RELOAD="ODOPM_SEMANTICS_RELOAD",t.ODOPM_SEMANTICS_IMPORT="ODOPM_SEMANTICS_IMPORT",t.CONSTRUCTION_BY_LAYER_COPYING="CONSTRUCTION_BY_LAYER_COPYING",t.GEOFLK_META_VALIDATION="GEOFLK_META_VALIDATION",t.GEOFLK_VALIDATION="GEOFLK_VALIDATION",t.METRICS_REPORT="METRICS_REPORT",t.FEATURE_REPORT="FEATURE_REPORT",t.CONSTRUCTION_BY_LAYER_SUBTRACTION="CONSTRUCTION_BY_LAYER_SUBTRACTION",t.CONSTRUCTION_BY_AGGREGATION="CONSTRUCTION_BY_AGGREGATION",t.BUFFER_REPORT="BUFFER_REPORT",t.IMPORT_LAYER_GEOJSON="IMPORT_LAYER_GEOJSON",t.IMPORT_LAYER_SHAPEFILE="IMPORT_LAYER_SHAPEFILE",t.IMPORT_LAYER_XLSX="IMPORT_LAYER_XLSX",t.CONSTRUCTION_BY_ATTRIBUTE_AGGREGATION="CONSTRUCTION_BY_ATTRIBUTE_AGGREGATION",t.SEARCH_BY_LAYER_DISJUNCTION="SEARCH_BY_LAYER_DISJUNCTION",t.CONSTRUCTION_BY_LAYER_FILTRATION="CONSTRUCTION_BY_LAYER_FILTRATION",t.USER_REPORT="USER_REPORT",t.USER_HISTORY_REPORT="USER_HISTORY_REPORT",t.ADDRESS_ATTRIBUTE_POPULATION="ADDRESS_ATTRIBUTE_POPULATION",t.CENTROID_ATTRIBUTE_POPULATION="CENTROID_ATTRIBUTE_POPULATION",t.CONSTANT_ATTRIBUTE_POPULATION="CONSTANT_ATTRIBUTE_POPULATION",t.METRICS_ATTRIBUTE_POPULATION="METRICS_ATTRIBUTE_POPULATION",t.REON_IDENTIFIER_ATTRIBUTE_POPULATION="REON_IDENTIFIER_ATTRIBUTE_POPULATION",t.TYPE_CONVERSION_ATTRIBUTE_POPULATION="TYPE_CONVERSION_ATTRIBUTE_POPULATION",t.FORMULA_ATTRIBUTE_POPULATION="FORMULA_ATTRIBUTE_POPULATION",t.MODIFICATION_BY_ATTRIBUTE_IMPORT="MODIFICATION_BY_ATTRIBUTE_IMPORT",t.SEARCH_BY_LAYER_INCLUSION="SEARCH_BY_LAYER_INCLUSION",t.GEOFLK_META_VALIDATION_NOTIFICATION="GEOFLK_META_VALIDATION_NOTIFICATION",t.LAYER_REVISION_COMPARISON="LAYER_REVISION_COMPARISON",t.REON_LAYER_IMPORT="REON_LAYER_IMPORT"}(e.EgipTaskType||(e.EgipTaskType={})),function(t){t.ACCOMPLISHED="ACCOMPLISHED",t.SCHEDULED="SCHEDULED",t.FAILED="FAILED",t.IN_PROGRESS="IN_PROGRESS",t.CANCELED="CANCELED"}(e.EgipTaskStatus||(e.EgipTaskStatus={})),function(t){t.COUNT="COUNT",t.MAX="MAX",t.MIN="MIN",t.AVERAGE="AVERAGE",t.SUM="SUM"}(e.MetricType||(e.MetricType={})),function(t){t.LENGTH="LENGTH",t.PERIMETER="PERIMETER",t.AREA="AREA"}(e.MetricMeasureType||(e.MetricMeasureType={})),function(t){t.METER="METER",t.KILOMETER="KILOMETER",t.SQ_METER="SQ_METER",t.SQ_KILOMETER="SQ_KILOMETER"}(e.MetricUnit||(e.MetricUnit={})),function(t){t.ODOPM_ZERO="ODOPM_ZERO",t.ODOPM_FIRST="ODOPM_FIRST",t.ODOPM_SECOND="ODOPM_SECOND"}(e.LayerTypeOdopm||(e.LayerTypeOdopm={})),function(t){t.UTF8="UTF-8",t._866="866",t.CP1251="CP1251"}(e.Charsets||(e.Charsets={}))},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){var i=n(0).polygon,r=n(0).featureCollection;function o(t,e,n){this.a=t,this.b=e,this.c=n;var i,r,o,s,a=e.x-t.x,u=e.y-t.y,l=n.x-t.x,c=n.y-t.y,h=a*(t.x+e.x)+u*(t.y+e.y),f=l*(t.x+n.x)+c*(t.y+n.y),g=2*(a*(n.y-e.y)-u*(n.x-e.x));Math.abs(g)<1e-6?(i=Math.min(t.x,e.x,n.x),r=Math.min(t.y,e.y,n.y),o=.5*(Math.max(t.x,e.x,n.x)-i),s=.5*(Math.max(t.y,e.y,n.y)-r),this.x=i+o,this.y=r+s,this.r=o*o+s*s):(this.x=(c*h-u*f)/g,this.y=(a*f-l*h)/g,o=this.x-t.x,s=this.y-t.y,this.r=o*o+s*s)}function s(t,e){return e.x-t.x}function a(t){var e,n,i,r,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],i=s;i;)if(o=t[--i],e===(r=t[--i])&&n===o||e===o&&n===r){t.splice(s,2),t.splice(i,2),s-=2;continue t}}t.exports=function(t,e){return r(function(t){if(t.length<3)return[];t.sort(s);for(var e=t.length-1,n=t[e].x,i=t[0].x,r=t[e].y,u=r;e--;)t[e].y<r&&(r=t[e].y),t[e].y>u&&(u=t[e].y);var l,c,h,f=i-n,g=u-r,d=f>g?f:g,p=.5*(i+n),v=.5*(u+r),y=[new o({x:p-20*d,y:v-d,__sentinel:!0},{x:p,y:v+20*d,__sentinel:!0},{x:p+20*d,y:v-d,__sentinel:!0})],m=[],x=[];for(e=t.length;e--;){for(x.length=0,l=y.length;l--;)(f=t[e].x-y[l].x)>0&&f*f>y[l].r?(m.push(y[l]),y.splice(l,1)):f*f+(g=t[e].y-y[l].y)*g>y[l].r||(x.push(y[l].a,y[l].b,y[l].b,y[l].c,y[l].c,y[l].a),y.splice(l,1));for(a(x),l=x.length;l;)h=x[--l],c=x[--l],y.push(new o(c,h,t[e]))}for(Array.prototype.push.apply(m,y),e=m.length;e--;)(m[e].a.__sentinel||m[e].b.__sentinel||m[e].c.__sentinel)&&m.splice(e,1);return m}(t.features.map(function(t){var n={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e&&(n.z=t.properties[e]),n})).map(function(t){return i([[[t.a.x,t.a.y],[t.b.x,t.b.y],[t.c.x,t.c.y],[t.a.x,t.a.y]]],{a:t.a.z,b:t.b.z,c:t.c.z})}))}},function(t,e,n){"use strict";var i=n(30),r=n(109),o=n(110),s=n(112);function a(t,e){for(var n=new Array(t.length-1),i=1;i<t.length;++i)for(var r=n[i-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(r[s++]=t[i][o]);return n}function u(t){return 1&t?"-":""}function l(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",l(t.slice(0,e)),",",l(t.slice(e)),")"].join("")}function c(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],n=0;n<t.length;++n)e.push(["scale(",l(c(a(t,n))),",",u(n),t[0][n],")"].join(""));return e}function h(t){for(var e=[],n=[],u=function(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var i=0;i<t;++i)e[n][i]=["m",i,"[",t-n-1,"]"].join("")}return e}(t),h=[],f=0;f<t;++f)0==(1&f)?e.push.apply(e,c(a(u,f))):n.push.apply(n,c(a(u,f))),h.push("m"+f);var g=l(e),d=l(n),p="orientation"+t+"Exact",v=["function ",p,"(",h.join(),"){var p=",g,",n=",d,",d=sub(p,n);return d[d.length-1];};return ",p].join("");return new Function("sum","prod","scale","sub",v)(r,i,o,s)}var f=h(3),g=h(4),d=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var i,r=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=r-o;if(r>0){if(o<=0)return s;i=r+o}else{if(!(r<0))return s;if(o>=0)return s;i=-(r+o)}var a=3.3306690738754716e-16*i;return s>=a||s<=-a?s:f(t,e,n)},function(t,e,n,i){var r=t[0]-i[0],o=e[0]-i[0],s=n[0]-i[0],a=t[1]-i[1],u=e[1]-i[1],l=n[1]-i[1],c=t[2]-i[2],h=e[2]-i[2],f=n[2]-i[2],d=o*l,p=s*u,v=s*a,y=r*l,m=r*u,x=o*a,E=c*(d-p)+h*(v-y)+f*(m-x),I=7.771561172376103e-16*((Math.abs(d)+Math.abs(p))*Math.abs(c)+(Math.abs(v)+Math.abs(y))*Math.abs(h)+(Math.abs(m)+Math.abs(x))*Math.abs(f));return E>I||-E>I?E:g(t,e,n,i)}];!function(){for(;d.length<=5;)d.push(h(d.length));for(var e=[],n=["slow"],i=0;i<=5;++i)e.push("a"+i),n.push("o"+i);var r=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(i=2;i<=5;++i)r.push("case ",i,":return o",i,"(",e.slice(0,i).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(r.join(""));var o=Function.apply(void 0,n);for(t.exports=o.apply(void 0,[function(t){var e=d[t.length];return e||(e=d[t.length]=h(t.length)),e.apply(void 0,t)}].concat(d)),i=0;i<=5;++i)t.exports[i]=d[i]}()},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}},function(t,e,n){"use strict";var i=n(3),r=n(46),o=n(48),s=n(49),a=n(50),u=n(21),l="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(51);t.exports=function(t){return new Promise(function(e,c){var h=t.data,f=t.headers;i.isFormData(h)&&delete f["Content-Type"];var g=new XMLHttpRequest,d="onreadystatechange",p=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in g||a(t.url)||(g=new window.XDomainRequest,d="onload",p=!0,g.onprogress=function(){},g.ontimeout=function(){}),t.auth){var v=t.auth.username||"",y=t.auth.password||"";f.Authorization="Basic "+l(v+":"+y)}if(g.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),g.timeout=t.timeout,g[d]=function(){if(g&&(4===g.readyState||p)&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in g?s(g.getAllResponseHeaders()):null,i={data:t.responseType&&"text"!==t.responseType?g.response:g.responseText,status:1223===g.status?204:g.status,statusText:1223===g.status?"No Content":g.statusText,headers:n,config:t,request:g};r(e,c,i),g=null}},g.onerror=function(){c(u("Network Error",t,null,g)),g=null},g.ontimeout=function(){c(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",g)),g=null},i.isStandardBrowserEnv()){var m=n(52),x=(t.withCredentials||a(t.url))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;x&&(f[t.xsrfHeaderName]=x)}if("setRequestHeader"in g&&i.forEach(f,function(t,e){void 0===h&&"content-type"===e.toLowerCase()?delete f[e]:g.setRequestHeader(e,t)}),t.withCredentials&&(g.withCredentials=!0),t.responseType)try{g.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&g.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&g.upload&&g.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){g&&(g.abort(),c(t),g=null)}),void 0===h&&(h=null),g.send(h)})}},function(t,e,n){"use strict";var i=n(47);t.exports=function(t,e,n,r,o){var s=new Error(t);return i(s,e,n,r,o)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function i(t){this.message=t}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,t.exports=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getSettings=function(t){var e=new URLSearchParams(t);return i.axiosEgip.get("/egip/settings",{params:e})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),r=n(1);function o(t,e){return new(window.URL||window.webkitURL)(t,e&&-1!=e.indexOf("http")?e:[location.hostname?location.origin:location.ancestorOrigins&&location.ancestorOrigins.item(0),e].join(""))}e.tileLoadFunction=function(t,e){var n=i.getConfig(),s=n.apiKey,a=n.baseURL,u=n.withCredentials,l=o(e,a);s&&l.searchParams.append("apiKey",s),l.searchParams.get("layerId"),r.axiosEgip.get(l.toString(),{headers:{"Content-Type":"image/png"},data:{},responseType:"arraybuffer",withCredentials:u}).then(function(e){var n=new Uint8Array(e),i=new Blob([n],{type:"image/png"}),r=(window.URL||window.webkitURL).createObjectURL(i);t.getImage().src=r})},e.clusterTileLoadFunction=function(t,e){var n=i.getConfig(),s=n.apiKey,a=n.baseURL,u=n.withCredentials,l=o(e,a);s&&l.searchParams.append("apiKey",s),l.searchParams.delete("SERVICE"),l.searchParams.delete("VERSION"),l.searchParams.delete("REQUEST"),l.searchParams.delete("FORMAT"),l.searchParams.delete("STYLES"),l.searchParams.delete("TRANSPARENT"),l.searchParams.delete("CRS"),l.searchParams.delete("WIDTH"),l.searchParams.delete("HEIGHT"),l.searchParams.delete("BBOX"),r.axiosEgip.get(l.toString(),{headers:{"Content-Type":"image/png"},data:{},responseType:"arraybuffer",withCredentials:u}).then(function(e){var n=new Uint8Array(e),i=new Blob([n],{type:"image/png"}),r=(window.URL||window.webkitURL).createObjectURL(i);t.getImage().src=r})},e.tileLoadFunctionTiles=function(t,e){var n=i.getConfig(),s=(n.apiKey,n.baseURL),a=n.withCredentials,u=o(e,s);u.searchParams.delete("SERVICE"),u.searchParams.delete("VERSION"),u.searchParams.delete("REQUEST"),u.searchParams.delete("FORMAT"),u.searchParams.delete("STYLES"),u.searchParams.delete("TRANSPARENT"),u.searchParams.delete("CRS"),r.axiosEgip.get(u.toString(),{headers:{"Content-Type":"image/png"},data:{},responseType:"arraybuffer",withCredentials:a}).then(function(e){var n=new Uint8Array(e),i=new Blob([n],{type:"image/png"}),r=(window.URL||window.webkitURL).createObjectURL(i);t.getImage().src=r})}},function(t,e){t.exports=n},function(t,e){t.exports=r},function(t,e){t.exports=function(t,e){var n=t.geometry.coordinates[0],i=t.geometry.coordinates[1],r=e.geometry.coordinates[0][0][0],o=e.geometry.coordinates[0][0][1],s=e.properties.a,a=e.geometry.coordinates[0][1][0],u=e.geometry.coordinates[0][1][1],l=e.properties.b,c=e.geometry.coordinates[0][2][0],h=e.geometry.coordinates[0][2][1],f=e.properties.c;return(f*(n-r)*(i-u)+s*(n-a)*(i-h)+l*(n-c)*(i-o)-l*(n-r)*(i-h)-f*(n-a)*(i-o)-s*(n-c)*(i-u))/((n-r)*(i-u)+(n-a)*(i-h)+(n-c)*(i-o)-(n-r)*(i-h)-(n-a)*(i-o)-(n-c)*(i-u))}},function(t,e,n){var i=n(2);t.exports=function(t){if(i(t.slice(0,2),[t[2],t[1]],"miles")>=i(t.slice(0,2),[t[0],t[3]],"miles")){var e=(t[1]+t[3])/2;return[t[0],e-(t[2]-t[0])/2,t[2],e+(t[2]-t[0])/2]}var n=(t[0]+t[2])/2;return[n-(t[3]-t[1])/2,t[1],n+(t[3]-t[1])/2,t[3]]}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=t*e,o=i*t,s=o-(o-t),a=t-s,u=i*e,l=u-(u-e),c=e-l,h=a*c-(r-s*l-a*l-s*c);return n?(n[0]=h,n[1]=r,n):[h,r]};var i=+(Math.pow(2,27)+1)},function(t,e,n){var i=n(9);t.exports=function(t,e){var n=new i.io.GeoJSONReader,r=n.read(JSON.stringify(t.geometry)),o=n.read(JSON.stringify(e.geometry)),s=r.union(o);return{type:"Feature",geometry:s=(new i.io.GeoJSONWriter).write(s),properties:t.properties}}},function(t,e,n){var i=n(0).polygon;t.exports=function(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]],o=[t[2],t[1]];return i([[e,o,r,n,e]])}},function(t,e,n){var i=n(8),r=n(0).point;t.exports=function(t){var e=i(t),n=(e[0]+e[2])/2,o=(e[1]+e[3])/2;return r([n,o])}},function(t,e,n){var i=n(0).featureCollection,r=n(6).coordEach,o=n(0).point;t.exports=function(t){var e=[];return r(t,function(t){e.push(o(t))}),i(e)}},function(t,e,n){var i=n(2),r=n(0).point,o=n(10),s=n(11);function a(t,e,n,i,r,o,s,a){var u,l,c,h,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(n-t)-(s-r)*(i-e))?null!==f.x&&null!==f.y&&f:(h=(n-t)*(l=e-o)-(i-e)*(c=t-r),l=((s-r)*l-(a-o)*c)/u,c=h/u,f.x=t+l*(n-t),f.y=e+l*(i-e),l>0&&l<1&&(f.onLine1=!0),c>0&&c<1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}t.exports=function(t,e){var n;if("Feature"===t.type)n=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");n=t.coordinates}return function(t,e){for(var n=r([1/0,1/0],{dist:1/0}),u=0;u<e.length-1;u++){var l=r(e[u]),c=r(e[u+1]);l.properties.dist=i(t,l,"miles"),c.properties.dist=i(t,c,"miles");var h,f=Math.max(l.properties.dist,c.properties.dist),g=o(l,c),d=s(t,f,g+90,"miles"),p=s(t,f,g-90,"miles"),v=a(d.geometry.coordinates[0],d.geometry.coordinates[1],p.geometry.coordinates[0],p.geometry.coordinates[1],l.geometry.coordinates[0],l.geometry.coordinates[1],c.geometry.coordinates[0],c.geometry.coordinates[1]);v&&((h=r(v)).properties.dist=i(t,h,"miles")),l.properties.dist<n.properties.dist&&((n=l).properties.index=u),c.properties.dist<n.properties.dist&&((n=c).properties.index=u),h&&h.properties.dist<n.properties.dist&&((n=h).properties.index=u)}return n}(e,n)}},function(t,e,n){t.exports=n(37)},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0});var r=n(38);e.api=r;var o=n(83);e.layers=o;var s=n(157);e.geo=s;var a=n(162);e.VERSION=a.VERSION,i(n(14)),i(n(4))},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(39)),i(n(1)),i(n(82))},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(40)),i(n(60)),i(n(61)),i(n(62)),i(n(63)),i(n(66)),i(n(24)),i(n(67)),i(n(68)),i(n(69)),i(n(77)),i(n(78)),i(n(79))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(24);e.login=function(t){return i.axiosEgip.post("/egip/login",t,{headers:{"Content-Type":"application/json"}})},e.logout=function(){return i.axiosEgip.post("/egip/logout",{},{})},e.getPasswordPolicy=function(){return i.axiosEgip.get("/egip/acl/system/settings/current",{})},e.verificationRequest=function(){return r.getSettings()}},function(t,e,n){"use strict";var i=n(3),r=n(19),o=n(43),s=n(13);function a(t){var e=new o(t),n=r(o.prototype.request,e);return i.extend(n,o.prototype,e),i.extend(n,e),n}var u=a(s);u.Axios=o,u.create=function(t){return a(i.merge(s,t))},u.Cancel=n(23),u.CancelToken=n(58),u.isCancel=n(22),u.all=function(t){return Promise.all(t)},u.spread=n(59),t.exports=u,t.exports.default=u},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){"use strict";var i=n(13),r=n(3),o=n(53),s=n(54);function a(t){this.defaults=t,this.interceptors={request:new o,response:new o}}a.prototype.request=function(t){"string"==typeof t&&(t=r.merge({url:arguments[0]},arguments[1])),(t=r.merge(i,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},r.forEach(["delete","get","head","options"],function(t){a.prototype[t]=function(e,n){return this.request(r.merge(n||{},{method:t,url:e}))}}),r.forEach(["post","put","patch"],function(t){a.prototype[t]=function(e,n,i){return this.request(r.merge(i||{},{method:t,url:e,data:n}))}}),t.exports=a},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&g())}function g(){if(!c){var t=a(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function p(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||c||a(g)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";var i=n(3);t.exports=function(t,e){i.forEach(t,function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])})}},function(t,e,n){"use strict";var i=n(21);t.exports=function(t,e,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(i("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n,i,r){return t.config=e,n&&(t.code=n),t.request=i,t.response=r,t}},function(t,e,n){"use strict";var i=n(3);function r(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(i.isURLSearchParams(e))o=e.toString();else{var s=[];i.forEach(e,function(t,e){null!=t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),s.push(r(e)+"="+r(t))}))}),o=s.join("&")}return o&&(t+=(-1===t.indexOf("?")?"?":"&")+o),t}},function(t,e,n){"use strict";var i=n(3),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,s={};return t?(i.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=i.trim(t.substr(0,o)).toLowerCase(),n=i.trim(t.substr(o+1)),e){if(s[e]&&r.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}}),s):s}},function(t,e,n){"use strict";var i=n(3);t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(t){var i=t;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){var n=i.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";function i(){this.message="String contains an invalid character"}i.prototype=new Error,i.prototype.code=5,i.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,n,r=String(t),o="",s=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.charAt(0|s)||(a="=",s%1);o+=a.charAt(63&e>>8-s%1*8)){if((n=r.charCodeAt(s+=.75))>255)throw new i;e=e<<8|n}return o}},function(t,e,n){"use strict";var i=n(3);t.exports=i.isStandardBrowserEnv()?{write:function(t,e,n,r,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),i.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),i.isString(r)&&a.push("path="+r),i.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var i=n(3);function r(){this.handlers=[]}r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},function(t,e,n){"use strict";var i=n(3),r=n(55),o=n(22),s=n(13),a=n(56),u=n(57);function l(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return l(t),t.baseURL&&!a(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=r(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||s.adapter)(t).then(function(e){return l(t),e.data=r(e.data,e.headers,t.transformResponse),e},function(e){return o(e)||(l(t),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var i=n(3);t.exports=function(t,e,n){return i.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var i=n(23);function r(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new i(t),e(n.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t;return{token:new r(function(e){t=e}),cancel:t}},t.exports=r},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getDirectory=function(t){return void 0===t&&(t="current"),i.axiosEgip.get("/egip/users/"+t+"/catalog",{})},e.postDirectory=function(t){return i.axiosEgip.post("/egip/users/1/createCatalog ",t,{})},e.putDirectory=function(t,e){return void 0===t&&(t="current"),i.axiosEgip.put("/egip/users/"+t+"/catalog ",e,{})},e.getCatalogDeafult=function(t){return i.axiosEgip.get("/egip/users/default/catalog",{})},e.putCatalogDeafult=function(t,e){return i.axiosEgip.put("/egip/users/default/catalog ",e,{})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getImages=function(t){var e=new URLSearchParams(t);return i.axiosEgip.get("/egip/images",{params:e})},e.postImage=function(t,e){var n=new URLSearchParams(e);return i.axiosEgip.post("/egip/images",t,{params:n})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getCompositeLayers=function(t){var e=new URLSearchParams(t);return i.axiosEgip.get("/egip/composite-layers",{params:e})},e.postCompositeLayer=function(t){return i.axiosEgip.post("/egip/composite-layers",t,{})},e.patchCompositeLayer=function(t,e){return i.axiosEgip.patch("/egip/composite-layers/"+t,e,{})},e.deleteCompositeLayer=function(t){return i.axiosEgip.delete("/egip/composite-layers/"+t,{})}},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((i=i.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function s(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),u=n(12);s(n(64)),s(n(65)),e.getStandardLayers=function(t){var e=new URLSearchParams(t);return a.axiosEgip.get("/egip/layers",{params:e})},e.getStandardLayer=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,a.axiosEgip.get("/egip/layers",{params:{filter:"id.in("+t+")"}})]})})},e.getStandardLayerWfs=function(t,e,n){void 0===e&&(e="current");var i=new URLSearchParams(n);return a.axiosEgip.get("/egip/layers/"+t+"/revisions/"+e+"/features/wfs",{params:i})},e.getStandardLayerWms=function(t,e,n){var i=new URLSearchParams(n);return a.axiosEgip.get("/egip/layers/wms/info?layerId="+t+"&revisionId="+e,{params:i})},e.getStandardLayerWfsMock=function(t,e){var n=new URLSearchParams(e);return u.default.get("./geojson/"+t+".json",{params:n})},e.getStandardLayerRevisions=function(t,e){var n=new URLSearchParams(e);return a.axiosEgip.get("/egip/layers/"+t+"/revisions",{params:n})},e.postStandardLayer=function(t,e){return r(this,void 0,void 0,function(){var n;return o(this,function(i){return n=new URLSearchParams(e),[2,a.axiosEgip.post("/egip/layers",t,{params:n,headers:{"Content-Type":"application/json"}})]})})},e.deleteStandardLayer=function(t){return a.axiosEgip.delete("/egip/layers/"+t,{})},e.patchStandardLayer=function(t,e){return a.axiosEgip.patch("/egip/layers/"+t,e,{})},e.postStandardLayerFeatures=function(t,e,n){var i=new URLSearchParams(n);return a.axiosEgip.post("/egip/layers/"+t+"/features",e,{params:i,headers:{"Content-Type":"application/json"}})},e.deleteStandardLayerFeatures=function(t,e){var n="featureIds=";return e.forEach(function(t){return n+=t+","}),a.axiosEgip.delete("/egip/layers/"+t+"/features?"+n,{})},e.patchUserLayerStyle=function(t,e){return r(this,void 0,void 0,function(){return o(this,function(n){return[2,a.axiosEgip.put("/egip/layers/"+t+"/style",{styleId:e},{headers:{"Content-Type":"application/json"}})]})})},e.getStandartLayersAndObjects=function(t,e){return r(this,void 0,void 0,function(){var n,r,s,u;return o(this,function(l){switch(l.label){case 0:n=[],r=[],s=function(s){var u,l,c,h,f;return o(this,function(o){switch(o.label){case 0:return u=t[s][0],l=t[s][1],[4,a.axiosEgip.get("/egip/layers",{params:{filter:"id.in("+u+")"}})];case 1:return c=o.sent(),h=new URLSearchParams(e),[4,a.axiosEgip.get("/egip/layers/"+u+"/revisions/"+l+"/features/wfs",{params:h}).then(function(t){return t.data})];case 2:return f=o.sent(),n.push({id:u,geojson:f}),r[u]=f.features.map(function(t){var e,n=t.properties,r={id:["id",t.id]};for(var o in n)if(c.data.content.length){var s=c.data.content[0].metadata.find(function(t){return t.id==o});s&&"id"!==s.name&&(r=i({},r,((e={})[s.description]=[s.name,n[o]],e)))}return r}),[2]}})},u=0,l.label=1;case 1:return u<t.length?[5,s(u)]:[3,4];case 2:l.sent(),l.label=3;case 3:return u++,[3,1];case 4:return[2,{layers:n,objects:r}]}})})},e.getCurrentRevisions=function(t){void 0===t&&(t=[]);var e=a.axiosEgip.defaults.baseURL;return fetch(e+"/egip/revisions/current?filter=layerId.in("+t.join(",")+")",{credentials:"omit"}).then(function(t){return t.json()})}},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1);e.postBufferCalc=function(t,e){return i(this,void 0,void 0,function(){var n;return r(this,function(i){return n=new URLSearchParams(e),[2,o.axiosEgip.post("/egip/layers/construction/buffer-calculation",t,{params:n,headers:{"Content-Type":"application/json"}})]})})},e.postLayerIntersection=function(t,e){return i(this,void 0,void 0,function(){var n;return r(this,function(i){return n=new URLSearchParams(e),[2,o.axiosEgip.post("/egip/layers/construction/layer-intersection",t,{params:n,headers:{"Content-Type":"application/json"}})]})})},e.postLayerSubtract=function(t,e){return i(this,void 0,void 0,function(){var n;return r(this,function(i){return n=new URLSearchParams(e),[2,o.axiosEgip.post("/egip/layers/construction/layer-subtraction ",t,{params:n,headers:{"Content-Type":"application/json"}})]})})},e.postLayerAggregation=function(t,e){return i(this,void 0,void 0,function(){var n;return r(this,function(i){return n=new URLSearchParams(e),[2,o.axiosEgip.post("/egip/layers/construction/attribute-aggregation ",t,{params:n,headers:{"Content-Type":"application/json"}})]})})},e.postLayerAttributeImport=function(t,e){return i(this,void 0,void 0,function(){var n,i;return r(this,function(r){return n=new URLSearchParams(e),(i=new FormData).append("file",t.file),i.append("parameters",JSON.stringify(t.parameters)),[2,o.axiosEgip.post("/egip/layers/construction/attribute-import",i,{params:n,headers:{"Content-Type":"application/json"}})]})})},e.postLayerCopying=function(t){return o.axiosEgip.post("/egip/layers/construction/layer-copying",t,{})},e.postLayerFiltration=function(t){return o.axiosEgip.post("/egip/layers/construction/layer-filtration",t,{})},e.postViewCopying=function(t){return o.axiosEgip.post("/egip/layers/construction/view-copying",t,{})}},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1);e.getLayersAttributeStats=function(t,e,n){return i(this,void 0,void 0,function(){var i;return r(this,function(r){return i=new URLSearchParams(n),[2,o.axiosEgip.get("/egip/layers/"+t+"/revisions/"+e+"/attributes",{params:i})]})})},e.getLayersPopulationAddress=function(t){return i(this,void 0,void 0,function(){var e,n,i;return r(this,function(r){return e=new URLSearchParams,n=t.layerId,i=t.attributeId,[2,o.axiosEgip.get("/egip/layers/"+n+"/attribute/"+i+"/population/address",{params:e})]})})},e.getLayersPopulationCentroid=function(t){return i(this,void 0,void 0,function(){var e,n,i,s;return r(this,function(r){return e=new URLSearchParams,n=t.layerId,i=t.attributeId,s=t.srsType,e.set("srsType",s),[2,o.axiosEgip.get("/egip/layers/"+n+"/attribute/"+i+"/population/centroid",{params:e})]})})},e.getLayersPopulationConstant=function(t){return i(this,void 0,void 0,function(){var e,n,i,s;return r(this,function(r){return e=new URLSearchParams,n=t.layerId,i=t.attributeId,s=t.value,e.set("value",s),[2,o.axiosEgip.get("/egip/layers/"+n+"/attribute/"+i+"/population/constant",{params:e})]})})},e.getLayersPopulationMetrics=function(t){return i(this,void 0,void 0,function(){var e,n,i,s,a;return r(this,function(r){return e=new URLSearchParams,n=t.layerId,i=t.attributeId,s=t.metricsType,a=t.metricUnit,e.set("metricsType",s),e.set("metricUnit",a),[2,o.axiosEgip.get("/egip/layers/"+n+"/attribute/"+i+"/population/metrics",{params:e})]})})},e.getLayersPopulationReonIdentifiers=function(t){return i(this,void 0,void 0,function(){var e,n,i,s;return r(this,function(r){return e=new URLSearchParams,n=t.layerId,i=t.attributeId,s=t.reonIdentifierType,e.set("reonIdentifierType",s),[2,o.axiosEgip.get("/egip/layers/"+n+"/attribute/"+i+"/population/reon-identifiers",{params:e})]})})},e.getLayersPopulationTypeConversion=function(t){return i(this,void 0,void 0,function(){var e,n,i,s;return r(this,function(r){return e=new URLSearchParams,n=t.layerId,i=t.attributeId,s=t.sourceAttributeId,e.set("sourceAttributeId",s),[2,o.axiosEgip.get("/egip/layers/"+n+"/attribute/"+i+"/population/type-conversion",{params:e})]})})},e.postLayersPopulationFormula=function(t){return i(this,void 0,void 0,function(){var e,n,i,s;return r(this,function(r){return e=new URLSearchParams,n=t.layerId,i=t.attributeId,s=t.formula,[2,o.axiosEgip.post("/egip/layers/"+n+"/attribute/"+i+"/population/formula",{formula:s},{params:e})]})})},e.postLayersAttributeImport=function(t){return i(this,void 0,void 0,function(){var e,n,i,s,a;return r(this,function(r){return e=t.layerId,n=t.file,i=t.parameters,(s=new FormData).append("file",n),s.append("parameters",JSON.stringify(i)),a=new URLSearchParams,[2,o.axiosEgip.post("/egip/layers/"+e+"/attribute-import",s,{params:a})]})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getViewLayers=function(t){var e=new URLSearchParams(t);return i.axiosEgip.get("/egip/views",{params:e})},e.getViewLayerWFS=function(t,e){var n=new URLSearchParams(e);return i.axiosEgip.get("/egip/views/"+t+"/features/wfs",{params:n})},e.postViewLayer=function(t){return i.axiosEgip.post("/egip/views",t,{})},e.patchViewLayer=function(t,e){return i.axiosEgip.patch("/egip/views/"+t,e,{})},e.deleteViewLayer=function(t){return i.axiosEgip.delete("/egip/views/"+t,{})},e.getDefaultLayerRevisionObjects=function(t,e){var n=new URLSearchParams(e);return i.axiosEgip.get("/egip/layers/"+t+"/revisions/current/features/wfs",{params:n})}},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1);function s(t){return"MULTI"===t.substring(0,5)?t.split("MULTI")[1]:t}e.getDefaultGeometryTypeStyle=function(t){return i(this,void 0,void 0,function(){return r(this,function(e){return[2,o.axiosEgip.get("/egip/styles/default/"+t).then(function(t){return t.data})]})})},e.setDefaultGeometryTypeStyle=function(t,e){return i(this,void 0,void 0,function(){return r(this,function(n){return[2,o.axiosEgip.put("/egip/styles/default/"+t,{styleId:e})]})})},e.deleteDefaultGeometryTypeStyle=function(t){return i(this,void 0,void 0,function(){return r(this,function(e){return[2,o.axiosEgip.delete("/egip/styles/default/"+t)]})})},e.getUserStylesList=function(t,e){return i(this,void 0,void 0,function(){return r(this,function(t){return[2,o.axiosEgip.get("/egip/styles",{params:{filter:e}})]})})},e.getUserStyle=function(t){return i(this,void 0,void 0,function(){return r(this,function(e){return[2,o.axiosEgip.get("/egip/styles/"+t)]})})},e.deleteUserStyle=function(t){return i(this,void 0,void 0,function(){return r(this,function(e){return[2,o.axiosEgip.delete("/egip/styles/"+t)]})})},e.updateUserStyle=function(t,e,n){return i(this,void 0,void 0,function(){return r(this,function(i){return[2,o.axiosEgip.put("/egip/styles/"+e,t,{params:n,headers:{"Content-Type":"application/json"}})]})})},e.createUserStyle=function(t,e){return i(this,void 0,void 0,function(){return r(this,function(n){return[2,o.axiosEgip.post("/egip/styles",t,{params:e,headers:{"Content-Type":"application/json"}})]})})},e.patchStyle=function(t,e){return i(this,void 0,void 0,function(){return r(this,function(n){return[2,o.axiosEgip.patch("/egip/styles/"+t,e)]})})},e.getUserStylesListNew=function(){return i(this,void 0,void 0,function(){return r(this,function(t){return[2,o.axiosEgip.get("/egip/styles")]})})},e.getUserStylesListForGeometryType=function(t,e){return i(this,void 0,void 0,function(){var n;return r(this,function(i){return n=s(t),[2,o.axiosEgip.get("/egip/styles?filter=type.eq(PRIVATE),geometryType.contains("+n+"),withIconId.eq(false)&page="+e)]})})},e.getCommonStylesListForGeometryType=function(t,e){return i(this,void 0,void 0,function(){var n;return r(this,function(i){return n=s(t),[2,o.axiosEgip.get("/egip/styles?filter=type.eq(PUBLIC),geometryType.contains("+n+"),withIconId.eq(false)&page="+e)]})})},e.findUserStylesByName=function(t,e){return i(this,void 0,void 0,function(){var n;return r(this,function(i){return n=s(t),[2,o.axiosEgip.get("/egip/styles?filter=type.eq(PRIVATE),geometryType.contains("+n+"),name.contains("+e+"),withIconId.eq(false)")]})})},e.findCommonStylesByName=function(t,e){return i(this,void 0,void 0,function(){var n;return r(this,function(i){return n=s(t),[2,o.axiosEgip.get("/egip/styles?filter=type.eq(PUBLIC),geometryType.contains("+n+"),name.contains("+e+"),withIconId.eq(false)")]})})},e.getCommonStylesWithIcon=function(t,e){return i(this,void 0,void 0,function(){var n;return r(this,function(i){return n=s(t),[2,o.axiosEgip.get("/egip/styles?filter=type.eq(PUBLIC),geometryType.contains("+n+"),withIconId.eq(true)&page="+e)]})})},e.getUserStylesWithIcon=function(t,e){return i(this,void 0,void 0,function(){var n;return r(this,function(i){return n=s(t),[2,o.axiosEgip.get("/egip/styles?filter=type.eq(PRIVATE),geometryType.contains("+n+"),withIconId.eq(true)&page="+e)]})})},e.createNewUserStyle=function(t){return i(this,void 0,void 0,function(){return r(this,function(e){return[2,o.axiosEgip.post("/egip/styles",t,{headers:{"Content-Type":"application/json"}})]})})},e.patchUserStyle=function(t,e){return i(this,void 0,void 0,function(){return r(this,function(n){return[2,o.axiosEgip.patch("/egip/styles/"+t,e,{headers:{"Content-Type":"application/json"}})]})})},e.replaceLayerIcon=function(t,e){return o.axiosEgip.put("/egip/layers/"+t+"/icon",e,{headers:{"Content-Type":"application/json"}})},e.generateIntervals=function(t,e,n,s,a){return i(this,void 0,void 0,function(){return r(this,function(i){return[2,o.axiosEgip.post("/egip/layers/"+t+"/attributes/"+n+"/division?revisionId="+e,s,{params:a,headers:{"Content-Type":"application/json"}})]})})},e.getImageById=function(t){return i(this,void 0,void 0,function(){return r(this,function(e){return[2,o.axiosEgip.get("/egip/images/"+t)]})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.postClustersBuild=function(t){return i.axiosEgip.post("/egip/clusters/build",t,{})}},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(70)),i(n(71)),i(n(74)),i(n(75)),i(n(76))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getServicesExportLayer=function(t,e,n){var r=new URLSearchParams(n);return i.axiosEgip.get("/egip/services/export/layers/"+t+"."+e,{params:r})},e.getServicesExportView=function(t,e,n){var r=new URLSearchParams(n);return i.axiosEgip.get("/egip/services/export/views/"+t+"."+e,{params:r})}},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(14),s=n(1);e.postServicesImport=function(t,e,n){return i(this,void 0,void 0,function(){var i,a;return r(this,function(r){return i=new URLSearchParams(n),(a=new FormData).append("file",e.file),a.append("parameters",JSON.stringify(e.parameters)),a.append("charset",e.charset),[2,s.axiosEgip.post("/egip/services/import/"+function(t){return t==o.LayerFileType.GEOJSON?"geojson":t==o.LayerFileType.SHP?"shapefile":t==o.LayerFileType.XLSX?"xlsx":void 0}(t),a,{params:i})]})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.NAMED="NAMED",t.TECHNICAL="TECHNICAL"}(e.ViewLayerType||(e.ViewLayerType={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.FOLDER="FOLDER",t.PROJECT="PROJECT",t.VIEW="VIEW",t.LAYER="LAYER",t.COMPOSITE="COMPOSITE",t.GROUP="GROUP"}(e.NodeType||(e.NodeType={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getServicesTaskResult=function(t,e){var n=new URLSearchParams(e);return i.axiosEgip.get("/egip/services/tasks/"+t+"/result",{params:n})},e.getTasks=function(t){var e=new URLSearchParams(t);return i.axiosEgip.get("/egip/services//tasks/current-user",{params:e})},e.getFile=function(t,e,n){return i.axiosEgip.get("/egip/services/tasks/"+t+"/files/"+e,n)},e.cancelTasks=function(t,e){var n=new URLSearchParams(e);return n.append("taskIds",t),i.axiosEgip.get("/egip/services/tasks/cancel",{params:n})}},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1);e.postServiceReportsMetrics=function(t,e){return i(this,void 0,void 0,function(){var n;return r(this,function(i){return n=new URLSearchParams(e),[2,o.axiosEgip.post("/egip/services/reports/metrics",t,{params:n})]})})},e.postServiceReportsFeature=function(t,e){return i(this,void 0,void 0,function(){var n;return r(this,function(i){return n=new URLSearchParams(e),[2,o.axiosEgip.post("/egip/services/reports/feature ",t,{params:n})]})})},e.postServiceReportsBuffer=function(t,e){return i(this,void 0,void 0,function(){var n;return r(this,function(i){return n=new URLSearchParams(e),[2,o.axiosEgip.post("/egip/services/reports/buffer ",t,{params:n})]})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=n(4);e.getJournalLayersDisplay=function(t,e){var n=new URLSearchParams(e),o=r.getConfig().apiKey;return i.axiosEgip.get("/egip/services/journal/display/layers/"+t+"?apiKey="+o,{params:n})}},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1);e.getFeaturesDisjunction=function(t,e,n){return i(this,void 0,void 0,function(){var i;return r(this,function(r){return(i=new URLSearchParams(n)).set("maskLayerIds",e),[2,o.axiosEgip.get("/egip/analysis/layers/"+t+"/search/features/disjunction",{params:i})]})})},e.getFeaturesInclusion=function(t,e,n){return i(this,void 0,void 0,function(){var i;return r(this,function(r){return(i=new URLSearchParams(n)).set("maskLayerIds",e),[2,o.axiosEgip.get("/egip/analysis/layers/"+t+"/search/features/inclusion",{params:i})]})})},e.getFeaturesIntersection=function(t,e,n){return i(this,void 0,void 0,function(){var i;return r(this,function(r){return(i=new URLSearchParams(n)).set("maskLayerIds",e),[2,o.axiosEgip.get("/egip/analysis/layers/"+t+"/search/features/intersection",{params:i})]})})}},function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((i=i.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1);e.getBasemaps=function(){return i(this,void 0,void 0,function(){return r(this,function(t){return[2,o.axiosEgip.get("/egip/basemaps",{headers:{"Content-Type":"application/json"}})]})})}},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(80)),i(n(81));var r=n(1);e.getAclTypes=function(t){void 0===t&&(t="filter=kind.in(SERVICE)&page=0&size=1000&sort=type,desc");var e=new URLSearchParams(t);return r.axiosEgip.get("/egip/acl/types",{params:e})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getUsers=function(t){var e=new URLSearchParams(t);return Promise.all([i.axiosEgip.get("/egip/acl/users",{params:e}),i.axiosEgip.get("/egip/acl/users/count")]).then(function(t){var e=t[0],n=t[1];return e.request?(e.data.totalCount=n.data.data.response,e):(e.totalCount=n.data.response,e)})},e.getUsersSearch=function(t){var e=new URLSearchParams(t);return Promise.all([i.axiosEgip.get("/egip/acl/users/search",{params:e}),i.axiosEgip.get("/egip/acl/users/count")]).then(function(t){var e=t[0],n=t[1];return e.request?(e.data.totalCount=n.data.data.response,e):(e.totalCount=n.data.response,e)})},e.getUser=function(t,e){var n=new URLSearchParams(e);return i.axiosEgip.get("/egip/acl/users/"+t,{params:n})},e.updateCredentials=function(t){return i.axiosEgip.post("/egip/acl/password/expired",t,{headers:{"Content-Type":"application/json"}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);!function(t){t[t.READ=1]="READ",t[t.WRITE=2]="WRITE",t[t.CREATE=4]="CREATE",t[t.DELETE=8]="DELETE"}(e.PermissionMask||(e.PermissionMask={})),function(t){t.ROLE="ROLE",t.USER="USER",t.ORGANIZATION="ORGANIZATION"}(e.SidType||(e.SidType={})),e.postPermissions=function(t){return Promise.all(t.map(function(t){return i.axiosEgip.post("/egip/acl/permissions",t,{})}))},e.getPermissions=function(t){var e=new URLSearchParams(t);return i.axiosEgip.get("/egip/acl/permissions ",{params:e})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(14);e.checkResponse=function(t){if(t.result!=i.ResultType.OK){var e=new Error;throw e.name="SERVER_ERROR",e.errorCode=t.errorCode,e.message=t.details,e}return t}},function(t,e,n){"use strict";function i(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),i(n(84)),i(n(25)),i(n(95)),i(n(96)),i(n(97));var r=n(154);e.mock=r;var o=n(155);e.style=o},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=window.proj4?window.proj4:n(85).default,o=n(4),s=n(25),a=n(86),u=window.ol?window.ol:n(88),l=u.Map,c=u.View,h=(window.ol?window.ol.proj.proj4:n(89)).register,f=window.ol?window.ol.source:n(90),g=f.TileWMS,d=f.ImageWMS,p=f.XYZ,v=f.OSM,y=f.Cluster,m=f.Vector,x=window.ol?window.ol.layer:n(91),E=x.Vector,I=x.Tile,N=x.Image,C=window.ol?window.ol.control.OverviewMap:n(92).default,w=window.ol?window.ol.tilegrid.createXYZ:n(93).createXYZ,S=window.ol?window.ol.extent.containsExtent:n(15).containsExtent,L=window.ol?window.ol.extent.getBottomLeft:n(15).getBottomLeft,T=window.ol?window.ol.extent.getTopRight:n(15).getTopRight,R=window.ol?window.ol.proj:n(16),b=R.fromLonLat,O=(R.transform,R.get),P=window.ol?window.ol.proj.Projection:n(94).default;function _(t,e){return void 0===e&&(e=q()),H(t,e),t.setView(G()),t}function M(){var t=this.getMap(),e=this.getOverviewMap();if(t.isRendered()&&e.isRendered()){var n=t.getSize(),i=t.getView(),r=i.calculateExtent(n),o=e.getSize(),s=e.getView(),a=s.calculateExtent(o);S(a,r)||s.setCenter(i.getCenter());var u=e.getOverlays().getArray()[0],l=u.getElement(),c=s.getResolution(),h=L(r),f=T(r);u.setPosition(h),s.setZoom(i.getZoom()-4),l&&(l.style.width=Math.abs((h[0]-f[0])/c)+"px",l.style.height=Math.abs((f[1]-h[1])/c)+"px")}}function A(t,e){var n=Z(t,o.getConfig().getOverViewMapId());n&&n.getOverviewMap().setView(e)}function D(t){return void 0===t&&(t={}),F(i({center:b([37.6173,55.7558]),zoom:9},t))}function F(t){return void 0===t&&(t={}),new c(t)}function G(t){return void 0===t&&(t={}),F(i({projection:V(),center:[0,0],zoom:0},t))}function U(){return new I({id:o.getConfig().getTileLayerId(),source:new p({url:o.getConfig().getTiles2gisUrl(),crossOrigin:"anonymous"})})}function B(){return new I({id:o.getConfig().getTileLayerId(),source:new p({url:o.getConfig().getTilesEgkoUrl(),crossOrigin:"anonymous",serverType:"geoserver",projection:new P({code:"EPSG:77",extent:o.getConfig().getEgkoBounds()}),tileGrid:w({extent:o.getConfig().getEgkoBounds()})})})}function q(t){return void 0===t&&(t="egip:egko_062018"),new N({id:o.getConfig().getTileLayerId(),source:new d({ratio:1,url:o.getConfig().getGeoserverUrl(),params:{FORMAT:"image/png",VERSION:"1.1.1",STYLES:"",LAYERS:t,SRS:"EPSG:77"},projection:new P({code:"EPSG:77",extent:o.getConfig().getEgkoBounds()})})})}function k(t){return void 0===t&&(t="egko"),new I({id:o.getConfig().getTileLayerId(),visible:!0,source:new g({url:o.getConfig().getWMCSTilesUrl(),params:{FORMAT:"image/png",VERSION:"1.1.1",tiled:!0,exceptions:"application/vnd.ogc.se_inimage",tilesOrigin:"-90729.30511444107,-72763.00686049464",layer:o.getConfig().getEgkoTilesLayerName(),version:o.getConfig().getEgkoTilesVersion(),srsType:"MSK_77",transparent:!0}})})}function V(){return new P({code:"EPSG:77",units:"m",axisOrientation:"neu",global:!1})}function z(t,e,n,i){return void 0===n&&(n="EPSG:3857"),new N({id:o.getConfig().getLayerUID(t,i),source:new d({url:e,ratio:1,params:{layerId:t,STYLES:"",revisionId:i,transparent:!0},imageLoadFunction:s.tileLoadFunction,serverType:"geoserver",projection:n})})}function Y(t,e,n,r,a){void 0===n&&(n="EPSG:3857"),void 0===a&&(a={});var u=e.includes("view")?i({viewId:t,STYLES:"",revisionId:r,tiled:!0,transparent:!0},a):i({layerId:t,STYLES:"",revisionId:r,tiled:!0,transparent:!0,srs:"EPSG:3857"==n?"EPSG_3857":"EPSG:4326"==n?"EPSG_3857":"EPSG:77"==n?"MSK_77":void 0},a);return new I({id:o.getConfig().getLayerUID(t,r),source:new g({url:e,FORMAT:"image/png",VERSION:"1.1.1",params:u,serverType:"geoserver",tileLoadFunction:s.tileLoadFunction,projection:"EPSG:77"==n?new P({code:"EPSG:77",extent:o.getConfig().getEgkoBounds()}):"EPSG:3857"})})}function X(t,e,n,i){return void 0===n&&(n="EPSG:3857"),void 0===i&&(i={}),new I({id:o.getConfig().getLayerUID(t),source:new g({url:e,FORMAT:"image/png",VERSION:"1.1.1",params:i,serverType:"geoserver",tileLoadFunction:s.clusterTileLoadFunction,projection:"EPSG:77"==n?new P({code:"EPSG:77",extent:o.getConfig().getEgkoBounds()}):n})})}function j(t){void 0===t&&(t={});var e=new C(i({},t));return e.set("id",o.getConfig().getOverViewMapId()),e}function H(t,e){var n=W(t,o.getConfig().getTileLayerId());return t.removeLayer(n),t.getLayers().insertAt(0,e),et(t),t}function W(t,e){return t.getLayers().getArray().find(function(t){return t.get("id")==e})}function Z(t,e){return t.getControls().getArray().find(function(t){return t.get("id")==e})}function K(t){return W(t,o.getConfig().getTileLayerId())}function J(t){return Z(t,o.getConfig().getOverViewMapId())}function Q(t,e,n){var i=e[0],r=e[1],o=e[2],s=e[3];return void 0===n&&(n={}),t.getView().fit([i,r,o,s],n),t}function $(t){var e=document.createElement("span");e.innerHTML="   2";var n=document.createElement("div");n.style.position="absolute",n.style.bottom="0",n.style.right="0",n.appendChild(e);var i=a.getCopyrightControl();t.addControl(i)}function tt(t){if(t){var e=a.getCopyrightControl();t.removeControl(e)}}function et(t){var e=W(t,o.getConfig().getTileLayerId());if(e){var n=e.getSource();n&&((n.urls||[]).some(function(t){return-1!==t.indexOf("2gis")})?$(t):tt(t))}}h(r),r.defs("EPSG:77","+proj=tmerc +ellps=bessel +towgs84=367.93,88.45,553.73,-0.8777,1.3231,2.6248,8.96 +units=m +lon_0=37.5 +lat_0=55.66666666667 +k_0=1 +x_0=0 +y_0=0"),h(r),O("EPSG:77")?O("EPSG:77").setExtent(o.getConfig().getEgkoBounds()):console.error("Failed to register projection in OpenLayers"),e.createMap=function(t){var e=new l(t);return t.extent&&Q(e,t.extent),et(e),e},e.createVectorLayer=function(t){return new E(t)},e.createVectorSource=function(t){return new m(t)},e.createClusterSource=function(t){return new y(t)},e.switchMapTo77=_,e.switchMapTo77XYZ=function(t){return _(t,B())},e.switchMapTo77WMS=function(t){return _(t,q())},e.switchMapTo77WMSC=function(t){return _(t,k())},e.switchMapTo3857=function(t,e){void 0===e&&(e=U()),H(t,e);var n=D();return t.setView(n),t},e.addOverViewMap=function(t,e){var n=J(t);t.removeControl(n);var i=j({layers:[K(t)],tipLabel:" ",collapsed:!n||n.getCollapsed()});t.addControl(i),A(t,e)},e.addOverViewMapWithZoom=function(t,e){var n=J(t);t.removeControl(n);var i=j({layers:[K(t)],view:e,tipLabel:" ",collapsed:!n||n.getCollapsed(),render:M});t.addControl(i)},e.renderOverViewMap=M,e.setOverviewMapView=A,e.refetchWMSLayer=function(t,e){var n=W(t,e);return n&&n.getSource().changed(),t},e.createViewWGS=D,e.createView=F,e.fit77=function(t){return t.getView().fit(o.getConfig().getEgkoBounds(),t.getSize()),t},e.createView77=G,e.createTiles2GIS=U,e.createTiles77XYZ=B,e.createTilesOSM=function(){return new I({id:o.getConfig().getTileLayerId(),source:new v})},e.createTilesSatellite=function(){return new I({id:o.getConfig().getTileLayerId(),visible:!0,source:new g({url:o.getConfig().getWMCSTilesUrl(),params:{FORMAT:"image/png",VERSION:"1.1.1",layer:o.getConfig().getSatelliteTilesLayerName(),version:o.getConfig().getSatelliteTilesVersion(),srsType:"EPSG_3857",transparent:!0}})})},e.createTiles77WMS=q,e.createTiles77WMSC=k,e.createTiles77WMSCGEoserver=function(t){return void 0===t&&(t="egko_62018"),new I({id:o.getConfig().getTileLayerId(),source:new g({url:o.getConfig().getGeoserverUrl(),params:{FORMAT:"image/png",VERSION:"1.1.1",tiled:!0,STYLES:"",LAYERS:t,tilesOrigin:"-49221.441968847874,-58770.11777164895"}})})},e.createProjection77=V,e.createLayerWMS=z,e.createLayerWMSC=Y,e.createClusterLayerWMSC=X,e.createClusterWMSC=function(t,e,n){return void 0===e&&(e="EPSG:3857"),void 0===n&&(n={}),X(t,o.getConfig().getUrlWmsClusterMap(t),e,n)},e.createClusterWMS=function(t,e,n){return void 0===e&&(e="EPSG:3857"),z(t,o.getConfig().getUrlWmsClusterMap(t),e,n)},e.createStandardLayerWMSC=function(t,e,n,i){return void 0===e&&(e="EPSG:3857"),void 0===i&&(i={}),Y(t,o.getConfig().getUrlWmsLayerMap(),e,n,i)},e.createViewWMSC=function(t,e,n,i){return void 0===e&&(e="EPSG:3857"),void 0===i&&(i={}),Y(t,o.getConfig().getUrlWmsViewMap(),e,n,i)},e.createStandardLayerWMS=function(t,e,n){return void 0===e&&(e="EPSG:3857"),z(t,o.getConfig().getUrlWmsLayerMap(),e,n)},e.createViewWMS=function(t,e,n){return void 0===e&&(e="EPSG:3857"),z(t,o.getConfig().getUrlWmsViewMap(),e,n)},e.createOverviewMap=j,e.removeTileLayer=function(t){var e=W(t,o.getConfig().getTileLayerId());return t.removeLayer(e),t},e.setTileLayer=H,e.setTileLayerUrl=function(t,e){return W(t,o.getConfig().getTileLayerId()).getSource().setUrl(e),t},e.setTileLayerUrls=function(t,e){return W(t,o.getConfig().getTileLayerId()).getSource().setUrls(e),t},e.getLayerById=W,e.getControlById=Z,e.getTileLayer=K,e.getOverviewMap=J,e.swapLayerIndex=function(t,e,n){var i=t.getLayers().getArray().findIndex(function(t){return t==e}),r=t.getLayers().getArray().findIndex(function(t){return t==n});return t.removeLayer(e),t.getLayers().insertAt(r,e),t.removeLayer(n),t.getLayers().insertAt(i,n),t},e.fitExtentDeg=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3];return t.getView().fit(b([n,i]).concat(b([r,o]))),t},e.fitExtent=Q,e.clearMap=function(t){var e=W(t,o.getConfig().getTileLayerId());return t.getLayers().clear(),t.addLayer(e),t},e.bringToFront=function(t,e){return t.removeLayer(e),t.addLayer(e),e},e.bringToBack=function(t,e){return t.removeLayer(e),t.getLayers().insertAt(1,e),e},e.getLayerByKeyValue=function(t,e,n){return t.getLayers().getArray().find(function(t){return t.get(e)==n})},e.setLayerIndex=function(t,e,n){return t.removeLayer(e),t.getLayers().insertAt(n,e),e},e.getLayerIndex=function(t,e){return t.getLayers().getArray().findIndex(function(t){return t==e})},e.getCenterOfExtent=function(t){return[t[0]+(t[2]-t[0])/2,t[1]+(t[3]-t[1])/2]},e.addCopyrightControl=$,e.deleteCopyrightControl=tt,e.add2gisCopyrightControl=et},function(t,e){t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=window.ol?window.ol.control.Control:n(87).default,r=document.createElement("span");r.innerHTML="   2";var o=document.createElement("div");o.style.position="absolute",o.style.bottom="0",o.style.right="40px",o.appendChild(r);var s=new i({element:o});e.getCopyrightControl=function(){return s}},function(t,e){t.exports=s},function(t,e){t.exports=a},function(t,e){t.exports=u},function(t,e){t.exports=l},function(t,e){t.exports=c},function(t,e){t.exports=h},function(t,e){t.exports=f},function(t,e){t.exports=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decreaseZoom=function(t,e){return void 0===e&&(e=1),t.getView().setZoom(t.getView().getZoom()-e),t},e.getZoom=function(t){return t.getView().getZoom()},e.getZoomForFeature=function(t,e){return 0|t.getView().getZoomForResolution(t.getView().getResolutionForExtent(e.getGeometry().getExtent()))},e.getZoomForExtent=function(t,e){return 0|t.getView().getZoomForResolution(t.getView().getResolutionForExtent(e))},e.setZoom=function(t,e){return t.getView().setZoom(e),t},e.increaseZoom=function(t,e){return void 0===e&&(e=1),t.getView().setZoom(t.getView().getZoom()+e),t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=window.ol?window.ol.proj:n(16),r=i.fromLonLat,o=(i.Projection,i.transform),s=(window.ol?window.ol.geom:n(26)).Polygon,a=(window.ol?window.ol:n(27)).Feature;e.toMetric=function(t,e){return void 0===e&&(e="EPSG:3857"),r(t,e)},e.toWGS=function(t){return o(t,"EPSG:102100","EPSG:4326")},e.wktToCoords=function(t){var e=/POINT\(([-?\d+.]+)\s([-?\d+.]+)\)/.exec(t);return[Number(e[1]),Number(e[2])]},e.circle3857=function(t,e,n){var i=s.circular(t,e,n).clone().transform("EPSG:4326","EPSG:3857");return new a(i)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(window.ol?window.ol:n(27)).Feature,r=window.ol?window.ol.geom:n(26),o=r.MultiPolygon,s=r.MultiLineString,a=r.MultiPoint,u=(window.ol?window.ol.format:n(98)).GeoJSON,l=window.turf?window.turf:n(99);e.changeShape=function(t,e,n){var i,r=new u,o=r.writeFeatureObject(t),s=r.writeFeatureObject(e);if(i=n?l.union(s,o):l.difference(o,s)){var a=r.readFeature(i);t.setGeometry(a.getGeometry())}},e.autocomplete=function(t,e){var n=new u,i=n.writeFeatureObject(t),r=n.writeFeatureObject(e),o=l.difference(r,i);return o?n.readFeature(o):null},e.ungroupFeature=function(t){var e=[],n=t.getGeometry();if("MultiPolygon"===n.getType()){var r=n.getPolygons();if(r.length<=1)return;for(var u=0;u<r.length;u++){var l=new o([]);l.appendPolygon(r[u]);var c=new i(l);e.push(c)}return e}if("MultiLineString"===n.getType()){var h=n.getLineStrings();if(h.length<=1)return;for(u=0;u<h.length;u++){var f=new s([]);f.appendLineString(h[u]),c=new i(f),e.push(c)}return e}if("MultiPoint"===n.getType()){var g=n.getPoints();if(g.length<=1)return;for(u=0;u<g.length;u++){var d=new a([]);d.appendPoint(g[u]),c=new i(d),e.push(c)}return e}throw new Error("Inappropriate feature type! Should be: MultiPolygon | MultiLineString | MultiPoint. Got: "+n.getType())},e.canBeUngrouped=function(t){if(t){var e=t.getGeometry();return"MultiPolygon"===e.getType()?e.getPolygons().length>1:"MultiLineString"===e.getType()?e.getLineStrings().length>1:"MultiPoint"===e.getType()&&e.getPoints().length>1}return!1}},function(t,e){t.exports=d},function(t,e,n){t.exports={isolines:n(100),convex:n(104),within:n(119),concave:n(120),difference:n(121),collect:n(122),flip:n(123),simplify:n(124),bezier:n(126),tag:n(128),sample:n(129),envelope:n(130),square:n(29),midpoint:n(131),buffer:n(132),center:n(33),centroid:n(134),combine:n(135),distance:n(2),explode:n(34),bbox:n(8),tesselate:n(136),bboxPolygon:n(32),inside:n(5),intersect:n(138),nearest:n(139),planepoint:n(28),random:n(140),tin:n(17),union:n(31),bearing:n(10),destination:n(11),kinks:n(142),pointOnSurface:n(143),area:n(144),along:n(147),lineDistance:n(148),lineSlice:n(149),pointOnLine:n(35),pointGrid:n(150),squareGrid:n(151),triangleGrid:n(152),hexGrid:n(153)};var i=n(0);t.exports.point=i.point,t.exports.polygon=i.polygon,t.exports.lineString=i.lineString,t.exports.multiPoint=i.multiPoint,t.exports.multiPolygon=i.multiPolygon,t.exports.multiLineString=i.multiLineString,t.exports.feature=i.feature,t.exports.featureCollection=i.featureCollection,t.exports.geometryCollection=i.geometryCollection},function(t,e,n){var i=n(17),r=n(5),o=n(101),s=n(8),a=n(28),u=n(0).featureCollection,l=n(0).lineString,c=n(29),h=n(103);t.exports=function(t,e,n,f){for(var g=i(t,e),d=s(t),p=c(d),v=o(p,n),y=[],m=0;m<v.features.length;m++)for(var x=v.features[m],E=0;E<g.features.length;E++){var I=g.features[E];r(x,I)&&(x.properties={},x.properties[e]=a(x,I))}for(var N=Math.sqrt(v.features.length),C=0;C<N;C++){for(var w=v.features.slice(C*N,(C+1)*N),S=[],L=0;L<w.length;L++)w[L].properties?S.push(w[L].properties[e]):S.push(0);y.push(S)}for(var T=(p[2]-p[0])/N,R=[],b=[],O=0;O<N;O++)R.push(O*T+p[0]),b.push(O*T+p[1]);var P=new h;P.contour(y,0,n,0,n,R,b,f.length,f);var _=P.contourList(),M=u([]);return _.forEach(function(t){if(t.length>2){var n=[];t.forEach(function(t){n.push([t.x,t.y])});var i=l(n);i.properties={},i.properties[e]=t.level,M.features.push(i)}}),M}},function(t,e,n){var i=n(102);t.exports=function(t,e){for(var n=t[0],r=t[1],o=t[2],s=(t[3],(o-n)/e),a={type:"FeatureCollection",features:[]},u=0;u<=e;u++)for(var l=0;l<=e;l++)a.features.push(i([u*s+n,l*s+r]));return a}},function(t,e){var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};t.exports=function(t,e){if(!n(t))throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");return{type:"Feature",geometry:{type:"Point",coordinates:t},properties:e||{}}}},function(t,e){t.exports=s;var n=1e-10;function i(t,e){var i=t.x-e.x,r=t.y-e.y;return i*i+r*r<n}function r(t){for(var e=t.head;e;){var n=e.next;e.next=e.prev,e.prev=n,e=n}n=t.head,t.head=t.tail,t.tail=n}function o(t){this.level=t,this.s=null,this.count=0}function s(t){if(t)this.drawContour=t;else{var e=this;e.contours={},this.drawContour=function(t,n,i,r,s,a){var u=e.contours[a];u||(u=e.contours[a]=new o(s)),u.addSegment({x:t,y:n},{x:i,y:r})},this.contourList=function(){var t=[],n=e.contours;for(var i in n)for(var r=n[i].s,o=n[i].level;r;){var s=r.head,a=[];for(a.level=o,a.k=i;s&&s.p;)a.push(s.p),s=s.next;t.push(a),r=r.next}return t.sort(function(t,e){return t.k-e.k}),t}}this.h=new Array(5),this.sh=new Array(5),this.xh=new Array(5),this.yh=new Array(5)}o.prototype.remove_seq=function(t){t.prev?t.prev.next=t.next:this.s=t.next,t.next&&(t.next.prev=t.prev),--this.count},o.prototype.addSegment=function(t,e){for(var n=this.s,o=null,s=null,a=!1,u=!1;n&&(null==o&&(i(t,n.head.p)?(o=n,a=!0):i(t,n.tail.p)&&(o=n)),null==s&&(i(e,n.head.p)?(s=n,u=!0):i(e,n.tail.p)&&(s=n)),null==s||null==o);)n=n.next;switch((null!=o?1:0)|(null!=s?2:0)){case 0:var l={p:t,prev:null},c={p:e,next:null};l.next=c,c.prev=l,o={head:l,tail:c,next:this.s,prev:null,closed:!1},this.s&&(this.s.prev=o),this.s=o,++this.count;break;case 1:var h={p:e};a?(h.next=o.head,h.prev=null,o.head.prev=h,o.head=h):(h.next=null,h.prev=o.tail,o.tail.next=h,o.tail=h);break;case 2:h={p:t},u?(h.next=s.head,h.prev=null,s.head.prev=h,s.head=h):(h.next=null,h.prev=s.tail,s.tail.next=h,s.tail=h);break;case 3:if(o===s){h={p:o.tail.p,next:o.head,prev:null},o.head.prev=h,o.head=h,o.closed=!0;break}switch((a?1:0)|(u?2:0)){case 0:r(o);case 1:s.tail.next=o.head,o.head.prev=s.tail,s.tail=o.tail,this.remove_seq(o);break;case 3:r(o);case 2:o.tail.next=s.head,s.head.prev=o.tail,o.tail=s.tail,this.remove_seq(s)}}},s.prototype.contour=function(t,e,i,r,o,s,a,u,l){var c=this.h,h=this.sh,f=this.xh,g=this.yh,d=this.drawContour;this.contours={};for(var p,v,y,m,x,E=function(t,e){return(c[e]*f[t]-c[t]*f[e])/(c[e]-c[t])},I=function(t,e){return(c[e]*g[t]-c[t]*g[e])/(c[e]-c[t])},N=0,C=0,w=0,S=0,L=[0,1,1,0],T=[0,0,1,1],R=[[[0,0,8],[0,2,5],[7,6,9]],[[0,3,4],[1,3,1],[4,3,0]],[[9,6,7],[5,2,0],[8,0,0]]],b=o-1;b>=r;b--)for(var O=e;O<=i-1;O++){var P,_;if(P=Math.min(t[O][b],t[O][b+1]),_=Math.min(t[O+1][b],t[O+1][b+1]),m=Math.min(P,_),P=Math.max(t[O][b],t[O][b+1]),_=Math.max(t[O+1][b],t[O+1][b+1]),(x=Math.max(P,_))>=l[0]&&m<=l[u-1])for(var M=0;M<u;M++)if(l[M]>=m&&l[M]<=x){for(var A=4;A>=0;A--)A>0?(c[A]=t[O+L[A-1]][b+T[A-1]]-l[M],f[A]=s[O+L[A-1]],g[A]=a[b+T[A-1]]):(c[0]=.25*(c[1]+c[2]+c[3]+c[4]),f[0]=.5*(s[O]+s[O+1]),g[0]=.5*(a[b]+a[b+1])),c[A]>n?h[A]=1:c[A]<-n?h[A]=-1:h[A]=0;for(A=1;A<=4;A++)if(0,v=4!=A?A+1:1,0!=(y=R[h[p=A]+1][h[0]+1][h[v]+1])){switch(y){case 1:N=f[p],w=g[p],C=f[0],S=g[0];break;case 2:N=f[0],w=g[0],C=f[v],S=g[v];break;case 3:N=f[v],w=g[v],C=f[p],S=g[p];break;case 4:N=f[p],w=g[p],C=E(0,v),S=I(0,v);break;case 5:N=f[0],w=g[0],C=E(v,p),S=I(v,p);break;case 6:N=f[v],w=g[v],C=E(p,0),S=I(p,0);break;case 7:N=E(p,0),w=I(p,0),C=E(0,v),S=I(0,v);break;case 8:N=E(0,v),w=I(0,v),C=E(v,p),S=I(v,p);break;case 9:N=E(v,p),w=I(v,p),C=E(p,0),S=I(p,0)}d(N,w,C,S,l[M],M)}}}}},function(t,e,n){var i=n(6).coordEach,r=n(105),o=n(0).polygon;t.exports=function(t){var e=[];i(t,function(t){e.push(t)});var n=r(e);if(n.length>0){for(var s=[],a=0;a<n.length;a++)s.push(e[n[a][0]]);return s.push(e[n[n.length-1][1]]),o([s])}}},function(t,e,n){"use strict";var i=n(106),r=n(107),o=n(113);t.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[[0]];var n=t[0].length;return 0===n?[]:1===n?i(t):2===n?r(t):o(t,n)}},function(t,e,n){"use strict";t.exports=function(t){for(var e=0,n=0,i=1;i<t.length;++i)t[i][0]<t[e][0]&&(e=i),t[i][0]>t[n][0]&&(n=i);return e<n?[[e],[n]]:e>n?[[n],[e]]:[[e]]}},function(t,e,n){"use strict";t.exports=function(t){var e=i(t),n=e.length;if(n<=2)return[];for(var r=new Array(n),o=e[n-1],s=0;s<n;++s){var a=e[s];r[s]=[o,a],o=a}return r};var i=n(108)},function(t,e,n){"use strict";t.exports=function(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}var o=new Array(e);for(r=0;r<e;++r)o[r]=r;o.sort(function(e,n){return t[e][0]-t[n][0]||t[e][1]-t[n][1]});var s=[o[0],o[1]],a=[o[0],o[1]];for(r=2;r<e;++r){for(var u=o[r],l=t[u],c=s.length;c>1&&i(t[s[c-2]],t[s[c-1]],l)<=0;)c-=1,s.pop();for(s.push(u),c=a.length;c>1&&i(t[a[c-2]],t[a[c-1]],l)>=0;)c-=1,a.pop();a.push(u)}n=new Array(a.length+s.length-2);for(var h=0,f=(r=0,s.length);r<f;++r)n[h++]=s[r];for(var g=a.length-2;g>0;--g)n[h++]=a[g];return n};var i=n(18)[3]},function(t,e,n){"use strict";t.exports=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],e[0]);var r,o,s=new Array(n+i),a=0,u=0,l=0,c=Math.abs,h=t[u],f=c(h),g=e[l],d=c(g);f<d?(o=h,(u+=1)<n&&(f=c(h=t[u]))):(o=g,(l+=1)<i&&(d=c(g=e[l]))),u<n&&f<d||l>=i?(r=h,(u+=1)<n&&(f=c(h=t[u]))):(r=g,(l+=1)<i&&(d=c(g=e[l])));for(var p,v,y=r+o,m=y-r,x=o-m,E=x,I=y;u<n&&l<i;)f<d?(r=h,(u+=1)<n&&(f=c(h=t[u]))):(r=g,(l+=1)<i&&(d=c(g=e[l]))),(x=(o=E)-(m=(y=r+o)-r))&&(s[a++]=x),E=I-((p=I+y)-(v=p-I))+(y-v),I=p;for(;u<n;)(x=(o=E)-(m=(y=(r=h)+o)-r))&&(s[a++]=x),E=I-((p=I+y)-(v=p-I))+(y-v),I=p,(u+=1)<n&&(h=t[u]);for(;l<i;)(x=(o=E)-(m=(y=(r=g)+o)-r))&&(s[a++]=x),E=I-((p=I+y)-(v=p-I))+(y-v),I=p,(l+=1)<i&&(g=e[l]);return E&&(s[a++]=E),I&&(s[a++]=I),a||(s[a++]=0),s.length=a,s}},function(t,e,n){"use strict";var i=n(30),r=n(111);t.exports=function(t,e){var n=t.length;if(1===n){var o=i(t[0],e);return o[0]?o:[o[1]]}var s=new Array(2*n),a=[.1,.1],u=[.1,.1],l=0;i(t[0],e,a),a[0]&&(s[l++]=a[0]);for(var c=1;c<n;++c){i(t[c],e,u);var h=a[1];r(h,u[0],a),a[0]&&(s[l++]=a[0]);var f=u[1],g=a[1],d=f+g,p=g-(d-f);a[1]=d,p&&(s[l++]=p)}return a[1]&&(s[l++]=a[1]),0===l&&(s[l++]=0),s.length=l,s}},function(t,e,n){"use strict";t.exports=function(t,e,n){var i=t+e,r=i-t,o=e-r,s=t-(i-r);return n?(n[0]=s+o,n[1]=i,n):[s+o,i]}},function(t,e,n){"use strict";t.exports=function(t,e){var n=0|t.length,i=0|e.length;if(1===n&&1===i)return function(t,e){var n=t+e,i=n-t,r=t-(n-i)+(e-i);return r?[r,n]:[n]}(t[0],-e[0]);var r,o,s=new Array(n+i),a=0,u=0,l=0,c=Math.abs,h=t[u],f=c(h),g=-e[l],d=c(g);f<d?(o=h,(u+=1)<n&&(f=c(h=t[u]))):(o=g,(l+=1)<i&&(d=c(g=-e[l]))),u<n&&f<d||l>=i?(r=h,(u+=1)<n&&(f=c(h=t[u]))):(r=g,(l+=1)<i&&(d=c(g=-e[l])));for(var p,v,y=r+o,m=y-r,x=o-m,E=x,I=y;u<n&&l<i;)f<d?(r=h,(u+=1)<n&&(f=c(h=t[u]))):(r=g,(l+=1)<i&&(d=c(g=-e[l]))),(x=(o=E)-(m=(y=r+o)-r))&&(s[a++]=x),E=I-((p=I+y)-(v=p-I))+(y-v),I=p;for(;u<n;)(x=(o=E)-(m=(y=(r=h)+o)-r))&&(s[a++]=x),E=I-((p=I+y)-(v=p-I))+(y-v),I=p,(u+=1)<n&&(h=t[u]);for(;l<i;)(x=(o=E)-(m=(y=(r=g)+o)-r))&&(s[a++]=x),E=I-((p=I+y)-(v=p-I))+(y-v),I=p,(l+=1)<i&&(g=-e[l]);return E&&(s[a++]=E),I&&(s[a++]=I),a||(s[a++]=0),s.length=a,s}},function(t,e,n){"use strict";t.exports=function(t,e){try{return i(t,!0)}catch(s){var n=r(t);if(n.length<=e)return[];var o=function(t,e){for(var n=t.length,i=new Array(n),r=0;r<e.length;++r)i[r]=t[e[r]];var o=e.length;for(r=0;r<n;++r)e.indexOf(r)<0&&(i[o++]=t[r]);return i}(t,n);return function(t,e){for(var n=t.length,i=e.length,r=0;r<n;++r)for(var o=t[r],s=0;s<o.length;++s){var a=o[s];if(a<i)o[s]=e[a];else{a-=i;for(var u=0;u<i;++u)a>=e[u]&&(a+=1);o[s]=a}}return t}(i(o,!0),n)}};var i=n(114),r=n(118)},function(t,e,n){"use strict";t.exports=function(t,e){var n=t.length;if(0===n)throw new Error("Must have at least d+1 points");var r=t[0].length;if(n<=r)throw new Error("Must input at least d+1 points");var s=t.slice(0,r+1),a=i.apply(void 0,s);if(0===a)throw new Error("Input not in general position");for(var u=new Array(r+1),c=0;c<=r;++c)u[c]=c;a<0&&(u[0]=1,u[1]=0);var h=new o(u,new Array(r+1),!1),f=h.adjacent,g=new Array(r+2);for(c=0;c<=r;++c){for(var d=u.slice(),p=0;p<=r;++p)p===c&&(d[p]=-1);var v=d[0];d[0]=d[1],d[1]=v;var y=new o(d,new Array(r+1),!0);f[c]=y,g[c]=y}g[r+1]=h;for(c=0;c<=r;++c){d=f[c].vertices;var m=f[c].adjacent;for(p=0;p<=r;++p){var x=d[p];if(x<0)m[p]=h;else for(var E=0;E<=r;++E)f[E].vertices.indexOf(x)<0&&(m[p]=f[E])}}var I=new l(r,s,g),N=!!e;for(c=r+1;c<n;++c)I.insert(t[c],N);return I.boundary()};var i=n(18),r=n(115).compareCells;function o(t,e,n){this.vertices=t,this.adjacent=e,this.boundary=n,this.lastVisited=-1}function s(t,e,n){this.vertices=t,this.cell=e,this.index=n}function a(t,e){return r(t.vertices,e.vertices)}o.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var u=[];function l(t,e,n){this.dimension=t,this.vertices=e,this.simplices=n,this.interior=n.filter(function(t){return!t.boundary}),this.tuple=new Array(t+1);for(var r=0;r<=t;++r)this.tuple[r]=this.vertices[r];var o=u[t];o||(o=u[t]=function(t){for(var e=["function orient(){var tuple=this.tuple;return test("],n=0;n<=t;++n)n>0&&e.push(","),e.push("tuple[",n,"]");e.push(")}return orient");var r=new Function("test",e.join("")),o=i[t+1];return o||(o=i),r(o)}(t)),this.orient=o}var c=l.prototype;c.handleBoundaryDegeneracy=function(t,e){var n=this.dimension,i=this.vertices.length-1,r=this.tuple,o=this.vertices,s=[t];for(t.lastVisited=-i;s.length>0;){(t=s.pop()).vertices;for(var a=t.adjacent,u=0;u<=n;++u){var l=a[u];if(l.boundary&&!(l.lastVisited<=-i)){for(var c=l.vertices,h=0;h<=n;++h){var f=c[h];r[h]=f<0?e:o[f]}var g=this.orient();if(g>0)return l;l.lastVisited=-i,0===g&&s.push(l)}}}return null},c.walk=function(t,e){var n=this.vertices.length-1,i=this.dimension,r=this.vertices,o=this.tuple,s=e?this.interior.length*Math.random()|0:this.interior.length-1,a=this.interior[s];t:for(;!a.boundary;){for(var u=a.vertices,l=a.adjacent,c=0;c<=i;++c)o[c]=r[u[c]];for(a.lastVisited=n,c=0;c<=i;++c){var h=l[c];if(!(h.lastVisited>=n)){var f=o[c];o[c]=t;var g=this.orient();if(o[c]=f,g<0){a=h;continue t}h.boundary?h.lastVisited=-n:h.lastVisited=n}}return}return a},c.addPeaks=function(t,e){var n=this.vertices.length-1,i=this.dimension,r=this.vertices,u=this.tuple,l=this.interior,c=this.simplices,h=[e];e.lastVisited=n,e.vertices[e.vertices.indexOf(-1)]=n,e.boundary=!1,l.push(e);for(var f=[];h.length>0;){var g=(e=h.pop()).vertices,d=e.adjacent,p=g.indexOf(n);if(!(p<0))for(var v=0;v<=i;++v)if(v!==p){var y=d[v];if(y.boundary&&!(y.lastVisited>=n)){var m=y.vertices;if(y.lastVisited!==-n){for(var x=0,E=0;E<=i;++E)m[E]<0?(x=E,u[E]=t):u[E]=r[m[E]];if(this.orient()>0){m[x]=n,y.boundary=!1,l.push(y),h.push(y),y.lastVisited=n;continue}y.lastVisited=-n}var I=y.adjacent,N=g.slice(),C=d.slice(),w=new o(N,C,!0);c.push(w);var S=I.indexOf(e);if(!(S<0))for(I[S]=w,C[p]=y,N[v]=-1,C[v]=e,d[v]=w,w.flip(),E=0;E<=i;++E){var L=N[E];if(!(L<0||L===n)){for(var T=new Array(i-1),R=0,b=0;b<=i;++b){var O=N[b];O<0||b===E||(T[R++]=O)}f.push(new s(T,w,E))}}}}}for(f.sort(a),v=0;v+1<f.length;v+=2){var P=f[v],_=f[v+1],M=P.index,A=_.index;M<0||A<0||(P.cell.adjacent[P.index]=_.cell,_.cell.adjacent[_.index]=P.cell)}},c.insert=function(t,e){var n=this.vertices;n.push(t);var i=this.walk(t,e);if(i){for(var r=this.dimension,o=this.tuple,s=0;s<=r;++s){var a=i.vertices[s];o[s]=a<0?t:n[a]}var u=this.orient(o);u<0||(0!==u||(i=this.handleBoundaryDegeneracy(i,t)))&&this.addPeaks(t,i)}},c.boundary=function(){for(var t=this.dimension,e=[],n=this.simplices,i=n.length,r=0;r<i;++r){var o=n[r];if(o.boundary){for(var s=new Array(t),a=o.vertices,u=0,l=0,c=0;c<=t;++c)a[c]>=0?s[u++]=a[c]:l=1&c;if(l===(1&t)){var h=s[0];s[0]=s[1],s[1]=h}e.push(s)}}return e}},function(t,e,n){"use strict";var i=n(116),r=n(117);function o(t,e){var n=t.length,i=t.length-e.length,r=Math.min;if(i)return i;switch(n){case 0:return 0;case 1:return t[0]-e[0];case 2:return(a=t[0]+t[1]-e[0]-e[1])||r(t[0],t[1])-r(e[0],e[1]);case 3:var o=t[0]+t[1],s=e[0]+e[1];if(a=o+t[2]-(s+e[2]))return a;var a,u=r(t[0],t[1]),l=r(e[0],e[1]);return(a=r(u,t[2])-r(l,e[2]))||r(u+t[2],o)-r(l+e[2],s);default:var c=t.slice(0);c.sort();var h=e.slice(0);h.sort();for(var f=0;f<n;++f)if(i=c[f]-h[f])return i;return 0}}function s(t,e){return o(t[0],e[0])}function a(t,e){if(e){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=[t[r],e[r]];for(i.sort(s),r=0;r<n;++r)t[r]=i[r][0],e[r]=i[r][1];return t}return t.sort(o),t}function u(t){if(0===t.length)return[];for(var e=1,n=t.length,i=1;i<n;++i){var r=t[i];if(o(r,t[i-1])){if(i===e){e++;continue}t[e++]=r}}return t.length=e,t}function l(t,e){for(var n=0,i=t.length-1,r=-1;n<=i;){var s=n+i>>1,a=o(t[s],e);a<=0?(0===a&&(r=s),n=s+1):a>0&&(i=s-1)}return r}function c(t,e){for(var n=new Array(t.length),r=0,s=n.length;r<s;++r)n[r]=[];for(var a=[],u=(r=0,e.length);r<u;++r)for(var c=e[r],h=c.length,f=1,g=1<<h;f<g;++f){a.length=i.popCount(f);for(var d=0,p=0;p<h;++p)f&1<<p&&(a[d++]=c[p]);var v=l(t,a);if(!(v<0))for(;n[v++].push(r),!(v>=t.length||0!==o(t[v],a)););}return n}function h(t,e){if(e<0)return[];for(var n=[],r=(1<<e+1)-1,o=0;o<t.length;++o)for(var s=t[o],u=r;u<1<<s.length;u=i.nextCombination(u)){for(var l=new Array(e+1),c=0,h=0;h<s.length;++h)u&1<<h&&(l[c++]=s[h]);n.push(l)}return a(n)}e.dimension=function(t){for(var e=0,n=Math.max,i=0,r=t.length;i<r;++i)e=n(e,t[i].length);return e-1},e.countVertices=function(t){for(var e=-1,n=Math.max,i=0,r=t.length;i<r;++i)for(var o=t[i],s=0,a=o.length;s<a;++s)e=n(e,o[s]);return e+1},e.cloneCells=function(t){for(var e=new Array(t.length),n=0,i=t.length;n<i;++n)e[n]=t[n].slice(0);return e},e.compareCells=o,e.normalize=a,e.unique=u,e.findCell=l,e.incidence=c,e.dual=function(t,e){if(!e)return c(u(h(t,0)),t);for(var n=new Array(e),i=0;i<e;++i)n[i]=[];i=0;for(var r=t.length;i<r;++i)for(var o=t[i],s=0,a=o.length;s<a;++s)n[o[s]].push(i);return n},e.explode=function(t){for(var e=[],n=0,i=t.length;n<i;++n)for(var r=t[n],o=0|r.length,s=1,u=1<<o;s<u;++s){for(var l=[],c=0;c<o;++c)s>>>c&1&&l.push(r[c]);e.push(l)}return a(e)},e.skeleton=h,e.boundary=function(t){for(var e=[],n=0,i=t.length;n<i;++n)for(var r=t[n],o=0,s=r.length;o<s;++o){for(var u=new Array(r.length-1),l=0,c=0;l<s;++l)l!==o&&(u[c++]=r[l]);e.push(u)}return a(e)},e.connectedComponents=function(t,e){return e?function(t,e){for(var n=new r(e),i=0;i<t.length;++i)for(var o=t[i],s=0;s<o.length;++s)for(var a=s+1;a<o.length;++a)n.link(o[s],o[a]);var u=[],l=n.ranks;for(i=0;i<l.length;++i)l[i]=-1;for(i=0;i<t.length;++i){var c=n.find(t[i][0]);l[c]<0?(l[c]=u.length,u.push([t[i].slice(0)])):u[l[c]].push(t[i].slice(0))}return u}(t,e):function(t){for(var e=u(a(h(t,0))),n=new r(e.length),i=0;i<t.length;++i)for(var o=t[i],s=0;s<o.length;++s)for(var c=l(e,[o[s]]),f=s+1;f<o.length;++f)n.link(c,l(e,[o[f]]));var g=[],d=n.ranks;for(i=0;i<d.length;++i)d[i]=-1;for(i=0;i<t.length;++i){var p=n.find(l(e,[t[i][0]]));d[p]<0?(d[p]=g.length,g.push([t[i].slice(0)])):g[d[p]].push(t[i].slice(0))}return g}(t)}},function(t,e,n){"use strict";function i(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=i,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var r=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,i=e,r=7;for(n>>>=1;n;n>>>=1)i<<=1,i|=1&n,--r;t[e]=i<<r&255}}(r),e.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>i(t)+1}},function(t,e,n){"use strict";function i(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}t.exports=i;var r=i.prototype;Object.defineProperty(r,"length",{get:function(){return this.roots.length}}),r.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},r.find=function(t){for(var e=t,n=this.roots;n[t]!==t;)t=n[t];for(;n[e]!==t;){var i=n[e];n[e]=t,e=i}return t},r.link=function(t,e){var n=this.find(t),i=this.find(e);if(n!==i){var r=this.ranks,o=this.roots,s=r[n],a=r[i];s<a?o[n]=i:a<s?o[i]=n:(o[i]=n,++r[n])}}},function(t,e,n){"use strict";t.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[0];for(var n=t[0].length,i=[t[0]],o=[0],s=1;s<e;++s)if(i.push(t[s]),r(i,n)){if(o.push(s),o.length===n+1)return o}else i.pop();return o};var i=n(18);function r(t,e){for(var n=new Array(e+1),r=0;r<t.length;++r)n[r]=t[r];for(r=0;r<=t.length;++r){for(var o=t.length;o<=e;++o){for(var s=new Array(e),a=0;a<e;++a)s[a]=Math.pow(o+1-r,a);n[o]=s}if(i.apply(void 0,n))return!0}return!1}},function(t,e,n){var i=n(5),r=n(0).featureCollection;t.exports=function(t,e){for(var n=r([]),o=0;o<e.features.length;o++)for(var s=0;s<t.features.length;s++)i(t.features[s],e.features[o])&&n.features.push(t.features[s]);return n}},function(t,e,n){var i=n(17),r=n(31),o=n(2);t.exports=function(t,e,n){if("number"!=typeof e)throw new Error("maxEdge parameter is required");if("string"!=typeof n)throw new Error("units parameter is required");var s=i(t),a=s.features.filter(function(t){var i=t.geometry.coordinates[0][0],r=t.geometry.coordinates[0][1],s=t.geometry.coordinates[0][2],a=o(i,r,n),u=o(r,s,n),l=o(i,s,n);return a<=e&&u<=e&&l<=e});return s.features=a,function(t){for(var e=JSON.parse(JSON.stringify(t.features[0])),n=t.features,i=0,o=n.length;i<o;i++){var s=n[i];s.geometry&&(e=r(e,s))}return e}(s)}},function(t,e,n){var i=n(9);t.exports=function(t,e){var n=JSON.parse(JSON.stringify(t)),r=JSON.parse(JSON.stringify(e));"Feature"!==n.type&&(n={type:"Feature",properties:{},geometry:n}),"Feature"!==r.type&&(r={type:"Feature",properties:{},geometry:r});var o=new i.io.GeoJSONReader,s=o.read(JSON.stringify(n.geometry)),a=o.read(JSON.stringify(r.geometry)),u=s.difference(a);if(!u.isEmpty()){var l=(new i.io.GeoJSONWriter).write(u);return n.geometry=u,{type:"Feature",properties:n.properties,geometry:l}}}},function(t,e,n){var i=n(5);t.exports=function(t,e,n,r){return t.features.forEach(function(t){var o=e.features.filter(function(e){return i(e,t)}).map(function(t){return t.properties[n]});t.properties||(t.properties={}),t.properties[r]=o}),t}},function(t,e,n){var i=n(6).coordEach;t.exports=function(t){return t=JSON.parse(JSON.stringify(t)),i(t,function(t){t.reverse()}),t}},function(t,e,n){var i=n(125),r=["LineString","MultiLineString","Polygon","MultiPolygon"];function o(t,e,n){return"LineString"===t.geometry.type?{type:"LineString",coordinates:u(t.geometry.coordinates,e,n)}:"MultiLineString"===t.geometry.type?{type:"MultiLineString",coordinates:t.geometry.coordinates.map(function(t){return u(t,e,n)})}:"Polygon"===t.geometry.type?{type:"Polygon",coordinates:l(t.geometry.coordinates,e,n)}:"MultiPolygon"===t.geometry.type?{type:"MultiPolygon",coordinates:t.geometry.coordinates.map(function(t){return l(t,e,n)})}:t}function s(t){return!(t.length<3||3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}function a(t,e){return{type:"Feature",geometry:t,properties:e}}function u(t,e,n){return i(t.map(function(t){return{x:t[0],y:t[1]}}),e,n).map(function(t){return[t.x,t.y]})}function l(t,e,n){return t.map(function(t){var r=t.map(function(t){return{x:t[0],y:t[1]}});if(r.length<4)throw new Error("Invalid polygon");for(var o=i(r,e,n).map(function(t){return[t.x,t.y]});!s(o);)o=i(r,e-=.01*e,n).map(function(t){return[t.x,t.y]});return o[o.length-1][0]===o[0][0]&&o[o.length-1][1]===o[0][1]||o.push(o[0]),o})}t.exports=function(t,e,n){return"Feature"===t.type?a(o(t,e,n),t.properties):"FeatureCollection"===t.type?{type:"FeatureCollection",features:t.features.map(function(t){var i=o(t,e,n);return r.indexOf(i.type)>-1?a(i,t.properties):i})}:"GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(function(t){return r.indexOf(t.type)>-1?o({type:"Feature",geometry:t},e,n):t})}:t}},function(t,e,n){var i;!function(){"use strict";function r(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i}function o(t,e,n){var i=e.x,r=e.y,o=n.x-i,s=n.y-r;if(0!==o||0!==s){var a=((t.x-i)*o+(t.y-r)*s)/(o*o+s*s);a>1?(i=n.x,r=n.y):a>0&&(i+=o*a,r+=s*a)}return(o=t.x-i)*o+(s=t.y-r)*s}function s(t,e,n){if(t.length<=2)return t;var i=void 0!==e?e*e:1;return function(t,e){var n=t.length-1,i=[t[0]];return function t(e,n,i,r,s){for(var a,u=r,l=n+1;l<i;l++){var c=o(e[l],e[n],e[i]);c>u&&(a=l,u=c)}u>r&&(a-n>1&&t(e,n,a,r,s),s.push(e[a]),i-a>1&&t(e,a,i,r,s))}(t,0,n,e,i),i.push(t[n]),i}(t=n?t:function(t,e){for(var n,i=t[0],o=[i],s=1,a=t.length;s<a;s++)r(n=t[s],i)>e&&(o.push(n),i=n);return i!==n&&o.push(n),o}(t,i),i)}void 0===(i=function(){return s}.call(e,n,e,t))||(t.exports=i)}()},function(t,e,n){var i=n(0).lineString,r=n(127);t.exports=function(t,e,n){var o=i([]);o.properties=t.properties;for(var s=new r({points:t.geometry.coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:e,sharpness:n}),a=0;a<s.duration;a+=10){var u=s.pos(a);Math.floor(a/100)%2==0&&o.geometry.coordinates.push([u.x,u.y])}return o}},function(t,e){var n=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var n=this.points[e],i=this.points[e+1];this.centers.push({x:(n.x+i.x)/2,y:(n.y+i.y)/2,z:(n.z+i.z)/2})}for(this.controls.push([this.points[0],this.points[0]]),e=0;e<this.centers.length-1;e++){n=this.centers[e],i=this.centers[e+1];var r=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};n.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var i=0;i<this.duration;i+=10){var r=this.pos(i);Math.sqrt((r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y)+(r.z-n.z)*(r.z-n.z))>t&&(e.push(i),n=r)}return e},n.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},n.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var n=e/this.duration;if(n>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*n);return function(t,e,n,i,r){var o=function(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}(t);return{x:r.x*o[0]+i.x*o[1]+n.x*o[2]+e.x*o[3],y:r.y*o[0]+i.y*o[1]+n.y*o[2]+e.y*o[3],z:r.z*o[0]+i.z*o[1]+n.z*o[2]+e.z*o[3]}}((this.length-1)*n-i,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])},t.exports=n},function(t,e,n){var i=n(5);t.exports=function(t,e,n,r){return t=JSON.parse(JSON.stringify(t)),e=JSON.parse(JSON.stringify(e)),t.features.forEach(function(t){t.properties||(t.properties={}),e.features.forEach(function(e){void 0===t.properties[r]&&i(t,e)&&(t.properties[r]=e.properties[n])})}),t}},function(t,e,n){var i=n(0).featureCollection;t.exports=function(t,e){return i(function(t,e){for(var n,i,r=t.slice(0),o=t.length,s=o-e;o-- >s;)n=r[i=Math.floor((o+1)*Math.random())],r[i]=r[o],r[o]=n;return r.slice(s)}(t.features,e))}},function(t,e,n){var i=n(8),r=n(32);t.exports=function(t){return r(i(t))}},function(t,e,n){var i=n(10),r=n(11),o=n(2);t.exports=function(t,e){var n=o(t,e,"miles"),s=i(t,e);return r(t,n/2,s,"miles")}},function(t,e,n){var i=n(0),r=i.featureCollection,o=n(9),s=n(133);t.exports=function(t,e,n){var a=i.distanceToDegrees(e,n),u=s(t),l=s(r(u.features.map(function(t){return function(t,e){var n=(new o.io.GeoJSONReader).read(t.geometry).buffer(e);return{type:"Feature",geometry:n=(new o.io.GeoJSONWriter).write(n),properties:{}}}(t,a)})));return l.features.length>1?l:1===l.features.length?l.features[0]:void 0}},function(t,e){t.exports=function(t){if(!t||!t.type)return null;var e=n[t.type];return e?"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featurecollection"===e?t:void 0:null};var n={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},function(t,e,n){var i=n(6).coordEach,r=n(0).point;t.exports=function(t){var e=0,n=0,o=0;return i(t,function(t){e+=t[0],n+=t[1],o++},!0),r([e/o,n/o])}},function(t,e,n){var i=n(6);t.exports=function(t){var e={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},n=Object.keys(e).reduce(function(t,e){return t[e.replace("Multi","")]=e,t},{});function r(t,n,i){i?e[n].coordinates=e[n].coordinates.concat(t.geometry.coordinates):e[n].coordinates.push(t.geometry.coordinates),e[n].properties.push(t.properties)}return i.featureEach(t,function(t){t.geometry&&(e[t.geometry.type]?r(t,t.geometry.type,!0):n[t.geometry.type]&&r(t,n[t.geometry.type],!1))}),{type:"FeatureCollection",features:Object.keys(e).filter(function(t){return e[t].coordinates.length}).sort().map(function(t){return{type:"Feature",properties:{collectedProperties:e[t].properties},geometry:{type:t,coordinates:e[t].coordinates}}})}}},function(t,e,n){var i=n(0).polygon,r=n(137);function o(t){var e=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}(t),n=r(e.vertices,e.holes,2),o=[],s=[];n.forEach(function(t,i){var r=n[i];s.push([e.vertices[2*r],e.vertices[2*r+1]])});for(var a=0;a<s.length;a+=3){var u=s.slice(a,a+3);u.push(s[a]),o.push(i([u]))}return o}t.exports=function(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=o(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(o(t))}),e}},function(t,e,n){"use strict";function i(t,e,n){n=n||2;var i,a,u,l,c,g,p,v=e&&e.length,y=v?e[0]*n:t.length,m=r(t,0,y,n,!0),x=[];if(!m||m.next===m.prev)return x;if(v&&(m=function(t,e,n,i){var s,a,u,l=[];for(s=0,a=e.length;s<a;s++)(u=r(t,e[s]*i,s<a-1?e[s+1]*i:t.length,i,!1))===u.next&&(u.steiner=!0),l.push(d(u));for(l.sort(h),s=0;s<l.length;s++)f(l[s],n),n=o(n,n.next);return n}(t,e,m,n)),t.length>80*n){i=u=t[0],a=l=t[1];for(var E=n;E<y;E+=n)(c=t[E])<i&&(i=c),(g=t[E+1])<a&&(a=g),c>u&&(u=c),g>l&&(l=g);p=0!==(p=Math.max(u-i,l-a))?1/p:0}return s(m,x,n,i,a,p),x}function r(t,e,n,i,r){var o,s;if(r===S(t,e,n,i)>0)for(o=e;o<n;o+=i)s=N(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=N(o,t[o],t[o+1],s);return s&&m(s,s.next)&&(C(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!m(i,i.next)&&0!==y(i.prev,i,i.next))i=i.next;else{if(C(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function s(t,e,n,i,r,h,f){if(t){!f&&h&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=g(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,u,l=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<l&&(a++,i=i.nextZ);e++);for(u=l;a>0||u>0&&i;)0!==a&&(0===u||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,l*=2}while(s>1)}(r)}(t,i,r,h);for(var d,p,v=t;t.prev!==t.next;)if(d=t.prev,p=t.next,h?u(t,i,r,h):a(t))e.push(d.i/n),e.push(t.i/n),e.push(p.i/n),C(t),t=p.next,v=p.next;else if((t=p)===v){f?1===f?s(t=l(t,e,n),e,n,i,r,h,2):2===f&&c(t,e,n,i,r,h):s(o(t),e,n,i,r,h,1);break}}}function a(t){var e=t.prev,n=t,i=t.next;if(y(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(p(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&y(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function u(t,e,n,i){var r=t.prev,o=t,s=t.next;if(y(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,u=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,l=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,c=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,h=g(a,u,e,n,i),f=g(l,c,e,n,i),d=t.prevZ,v=t.nextZ;d&&d.z>=h&&v&&v.z<=f;){if(d!==t.prev&&d!==t.next&&p(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,v!==t.prev&&v!==t.next&&p(r.x,r.y,o.x,o.y,s.x,s.y,v.x,v.y)&&y(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&p(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;v&&v.z<=f;){if(v!==t.prev&&v!==t.next&&p(r.x,r.y,o.x,o.y,s.x,s.y,v.x,v.y)&&y(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function l(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!m(r,o)&&x(r,i,i.next,o)&&E(r,o)&&E(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),C(i),C(i.next),i=t=o),i=i.next}while(i!==t);return i}function c(t,e,n,i,r,a){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&v(u,l)){var c=I(u,l);return u=o(u,u.next),c=o(c,c.next),s(u,e,n,i,r,a),void s(c,e,n,i,r,a)}l=l.next}u=u.next}while(u!==t)}function h(t,e){return t.x-e.x}function f(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s){if(s=a,a===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===s)return n.prev;var u,l=n,c=n.x,h=n.y,f=1/0;for(i=n.next;i!==l;)r>=i.x&&i.x>=c&&r!==i.x&&p(o<h?r:s,o,c,h,o<h?s:r,o,i.x,i.y)&&((u=Math.abs(o-i.y)/(r-i.x))<f||u===f&&i.x>n.x)&&E(i,t)&&(n=i,f=u),i=i.next;return n}(t,e)){var n=I(e,t);o(n,n.next)}}function g(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function d(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function p(t,e,n,i,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(i-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&x(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&E(t,e)&&E(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)}function y(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function m(t,e){return t.x===e.x&&t.y===e.y}function x(t,e,n,i){return!!(m(t,e)&&m(n,i)||m(t,i)&&m(n,e))||y(t,e,n)>0!=y(t,e,i)>0&&y(n,i,t)>0!=y(n,i,e)>0}function E(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function I(t,e){var n=new w(t.i,t.x,t.y),i=new w(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function N(t,e,n,i){var r=new w(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function C(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function w(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function S(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}t.exports=i,t.exports.default=i,i.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(S(t,0,o,n));if(r)for(var a=0,u=e.length;a<u;a++){var l=e[a]*n,c=a<u-1?e[a+1]*n:t.length;s-=Math.abs(S(t,l,c,n))}var h=0;for(a=0;a<i.length;a+=3){var f=i[a]*n,g=i[a+1]*n,d=i[a+2]*n;h+=Math.abs((t[f]-t[d])*(t[g+1]-t[f+1])-(t[f]-t[g])*(t[d+1]-t[f+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},function(t,e,n){var i=n(9);t.exports=function(t,e){var n,r;n="Feature"===t.type?t.geometry:t,r="Feature"===e.type?e.geometry:e;var o=new i.io.GeoJSONReader,s=o.read(JSON.stringify(n)),a=o.read(JSON.stringify(r)),u=s.intersection(a);if(!u.isEmpty())return{type:"Feature",properties:{},geometry:(new i.io.GeoJSONWriter).write(u)}}},function(t,e,n){var i=n(2);t.exports=function(t,e){for(var n,r=1/0,o=0;o<e.features.length;o++){var s=i(t,e.features[o],"miles");s<r&&(n=e.features[o],r=s)}return n}},function(t,e,n){var i=n(141);t.exports=function(t,e,n){switch(n=n||{},e=e||1,t){case"point":case"points":case void 0:return i.point(e,n.bbox);case"polygon":case"polygons":return i.polygon(e,n.num_vertices,n.max_radial_length,n.bbox);default:throw new Error("Unknown type given: valid options are points and polygons")}}},function(t,e){function n(t){return t?function(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}(t):[s(),a()]}function r(t){return function(e,n){return[e[0]+t[0],e[1]+t[1]]}}function o(){return Math.random()-.5}function s(){return 360*o()}function a(){return 180*o()}function u(t){return{type:"Point",coordinates:t||[s(),a()]}}function l(t){return{type:"Polygon",coordinates:t}}function c(t){return{type:"Feature",geometry:t,properties:{}}}function h(t){return{type:"FeatureCollection",features:t}}t.exports=function(){throw new Error("call .point() or .polygon() instead")},t.exports.position=n,t.exports.point=function(t,e){var r=[];for(i=0;i<t;i++)r.push(c(e?u(n(e)):u()));return h(r)},t.exports.polygon=function(t,e,o,s){"number"!=typeof e&&(e=10),"number"!=typeof o&&(o=10);var a=[];for(i=0;i<t;i++){var u=[],f=Array.apply(null,new Array(e+1)).map(Math.random);f.forEach(g),f.forEach(d),u[u.length-1]=u[0],u=u.map(r(n(s))),a.push(c(l([u])))}function g(t,e,n){n[e]=e>0?t+n[e-1]:t}function d(t,e){t=2*t*Math.PI/f[f.length-1];var n=Math.random();u.push([n*o*Math.sin(t),n*o*Math.cos(t)])}return h(a)}},function(t,e,n){var i=n(0).point;function r(t,e,n,i,r,o,s,a){var u,l,c,h,f={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(u=(a-o)*(n-t)-(s-r)*(i-e))?null!==f.x&&null!==f.y&&f:(h=(n-t)*(l=e-o)-(i-e)*(c=t-r),l=((s-r)*l-(a-o)*c)/u,c=h/u,f.x=t+l*(n-t),f.y=e+l*(i-e),l>=0&&l<=1&&(f.onLine1=!0),c>=0&&c<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}t.exports=function(t){var e,n={type:"FeatureCollection",features:[]};return(e="Feature"===t.type?t.geometry:t).coordinates.forEach(function(t){e.coordinates.forEach(function(e){for(var o=0;o<t.length-1;o++)for(var s=0;s<e.length-1;s++)if(t!==e||1!==Math.abs(o-s)&&Math.abs(o-s)!==t.length-2){var a=r(t[o][0],t[o][1],t[o+1][0],t[o+1][1],e[s][0],e[s][1],e[s+1][0],e[s+1][1]);a&&n.features.push(i([a[0],a[1]]))}})}),n}},function(t,e,n){var i=n(0).featureCollection,r=n(33),o=n(2),s=n(5),a=n(34);function u(t,e,n,i,r,o){if(Math.sqrt((r-n)*(r-n)+(o-i)*(o-i))===Math.sqrt((t-n)*(t-n)+(e-i)*(e-i))+Math.sqrt((r-t)*(r-t)+(o-e)*(o-e)))return!0}t.exports=function(t){"FeatureCollection"!==t.type&&("Feature"!==t.type&&(t={type:"Feature",geometry:t,properties:{}}),t=i([t]));for(var e=r(t),n=!1,l=0;!n&&l<t.features.length;){var c,h=t.features[l].geometry,f=!1;if("Point"===h.type)e.geometry.coordinates[0]===h.coordinates[0]&&e.geometry.coordinates[1]===h.coordinates[1]&&(n=!0);else if("MultiPoint"===h.type){var g=!1;for(c=0;!g&&c<h.coordinates.length;)e.geometry.coordinates[0]===h.coordinates[c][0]&&e.geometry.coordinates[1]===h.coordinates[c][1]&&(n=!0,g=!0),c++}else if("LineString"===h.type)for(c=0;!f&&c<h.coordinates.length-1;)u(e.geometry.coordinates[0],e.geometry.coordinates[1],h.coordinates[c][0],h.coordinates[c][1],h.coordinates[c+1][0],h.coordinates[c+1][1])&&(f=!0,n=!0),c++;else if("MultiLineString"===h.type)for(var d=0;d<h.coordinates.length;){f=!1,c=0;for(var p=h.coordinates[d];!f&&c<p.length-1;)u(e.geometry.coordinates[0],e.geometry.coordinates[1],p[c][0],p[c][1],p[c+1][0],p[c+1][1])&&(f=!0,n=!0),c++;d++}else"Polygon"!==h.type&&"MultiPolygon"!==h.type||s(e,{type:"Feature",geometry:h,properties:{}})&&(n=!0);l++}if(n)return e;var v,y=i([]);for(l=0;l<t.features.length;l++)y.features=y.features.concat(a(t.features[l]).features);var m=1/0;for(l=0;l<y.features.length;l++){var x=o(e,y.features[l],"miles");x<m&&(m=x,v=y.features[l])}return v}},function(t,e,n){var i=n(145).geometry;t.exports=function(t){if("FeatureCollection"===t.type){for(var e=0,n=0;e<t.features.length;e++)t.features[e].geometry&&(n+=i(t.features[e].geometry));return n}return"Feature"===t.type?i(t.geometry):i(t)}},function(t,e,n){var r=n(146);function o(t){var e=0;if(t&&t.length>0){e+=Math.abs(s(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(s(t[n]))}return e}function s(t){var e,n,o,s,u,l=0,c=t.length;if(c>2){for(i=0;i<c;i++)i===c-2?(o=c-2,s=c-1,u=0):i===c-1?(o=c-1,s=0,u=1):(o=i,s=i+1,u=i+2),e=t[o],n=t[s],l+=(a(t[u][0])-a(e[0]))*Math.sin(a(n[1]));l=l*r.RADIUS*r.RADIUS/2}return l}function a(t){return t*Math.PI/180}t.exports.geometry=function t(e){var n,i=0;switch(e.type){case"Polygon":return o(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)i+=o(e.coordinates[n]);return i;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)i+=t(e.geometries[n]);return i}},t.exports.ring=s},function(t,e){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},function(t,e,n){var i=n(2),r=n(0).point,o=n(10),s=n(11);t.exports=function(t,e,n){var a;if("Feature"===t.type)a=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");a=t.coordinates}for(var u=0,l=0;l<a.length&&!(e>=u&&l===a.length-1);l++){if(u>=e){var c=e-u;if(c){var h=o(a[l],a[l-1])-180;return s(a[l],c,h,n)}return r(a[l])}u+=i(a[l],a[l+1],n)}return r(a[a.length-1])}},function(t,e,n){var i=n(2),r=n(0).point;function o(t,e){for(var n,o=0,s=r(t[0]),a=r(t[0]),u=1;u<t.length;u++)a.geometry.coordinates=t[u],o+=i(s,a,e),n=s,s=a,a=n;return o}t.exports=function t(e,n){if("FeatureCollection"===e.type)return e.features.reduce(function(e,i){return e+t(i,n)},0);var i,r,s="Feature"===e.type?e.geometry:e;if("LineString"===s.type)return o(s.coordinates,n);if("Polygon"===s.type||"MultiLineString"===s.type){for(i=0,r=0;r<s.coordinates.length;r++)i+=o(s.coordinates[r],n);return i}if("MultiPolygon"===e.type){for(i=0,r=0;r<s.coordinates.length;r++)for(var a=0;a<s.coordinates[r].length;a++)i+=o(s.coordinates[r][a],n);return i}throw new Error("input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry (or a FeatureCollection containing only those types)")}},function(t,e,n){var i=n(0).lineString,r=n(35);t.exports=function(t,e,n){var o;if("Feature"===n.type)o=n.geometry.coordinates;else{if("LineString"!==n.type)throw new Error("input must be a LineString Feature or Geometry");o=n.coordinates}var s,a=r(n,t),u=r(n,e);s=a.properties.index<=u.properties.index?[a,u]:[u,a];for(var l=i([s[0].geometry.coordinates],{}),c=s[0].properties.index+1;c<s[1].properties.index+1;c++)l.geometry.coordinates.push(o[c]);return l.geometry.coordinates.push(s[1].geometry.coordinates),l}},function(t,e,n){var i=n(0).point,r=n(0).featureCollection,o=n(2);t.exports=function(t,e,n){for(var s=r([]),a=e/o(i([t[0],t[1]]),i([t[2],t[1]]),n)*(t[2]-t[0]),u=e/o(i([t[0],t[1]]),i([t[0],t[3]]),n)*(t[3]-t[1]),l=t[0];l<=t[2];){for(var c=t[1];c<=t[3];)s.features.push(i([l,c])),c+=u;l+=a}return s}},function(t,e,n){var i=n(0).featureCollection,r=n(0).point,o=n(0).polygon,s=n(2);t.exports=function(t,e,n){for(var a=i([]),u=e/s(r([t[0],t[1]]),r([t[2],t[1]]),n)*(t[2]-t[0]),l=e/s(r([t[0],t[1]]),r([t[0],t[3]]),n)*(t[3]-t[1]),c=t[0];c<=t[2];){for(var h=t[1];h<=t[3];){var f=o([[[c,h],[c,h+l],[c+u,h+l],[c+u,h],[c,h]]]);a.features.push(f),h+=l}c+=u}return a}},function(t,e,n){var i=n(0).featureCollection,r=n(0).polygon,o=n(2);t.exports=function(t,e,n){for(var s=i([]),a=e/o([t[0],t[1]],[t[2],t[1]],n)*(t[2]-t[0]),u=e/o([t[0],t[1]],[t[0],t[3]],n)*(t[3]-t[1]),l=0,c=t[0];c<=t[2];){for(var h=0,f=t[1];f<=t[3];)l%2==0&&h%2==0?s.features.push(r([[[c,f],[c,f+u],[c+a,f],[c,f]]]),r([[[c,f+u],[c+a,f+u],[c+a,f],[c,f+u]]])):l%2==0&&h%2==1?s.features.push(r([[[c,f],[c+a,f+u],[c+a,f],[c,f]]]),r([[[c,f],[c,f+u],[c+a,f+u],[c,f]]])):h%2==0&&l%2==1?s.features.push(r([[[c,f],[c,f+u],[c+a,f+u],[c,f]]]),r([[[c,f],[c+a,f+u],[c+a,f],[c,f]]])):h%2==1&&l%2==1&&s.features.push(r([[[c,f],[c,f+u],[c+a,f],[c,f]]]),r([[[c,f+u],[c+a,f+u],[c+a,f],[c,f+u]]])),f+=u,h++;l++,c+=a}return s}},function(t,e,n){for(var i=n(0).point,r=n(0).polygon,o=n(2),s=n(0).featureCollection,a=[],u=[],l=0;l<6;l++){var c=2*Math.PI/6*l;a.push(Math.cos(c)),u.push(Math.sin(c))}function h(t,e,n){for(var i=[],o=0;o<6;o++){var s=t[0]+e*a[o],l=t[1]+n*u[o];i.push([s,l])}return i.push(i[0]),r([i])}function f(t,e,n){for(var i=[],o=0;o<6;o++){var s=[];s.push(t),s.push([t[0]+e*a[o],t[1]+n*u[o]]),s.push([t[0]+e*a[(o+1)%6],t[1]+n*u[(o+1)%6]]),s.push(t),i.push(r([s]))}return i}t.exports=function(t,e,n,r){var a=e/o(i([t[0],t[1]]),i([t[2],t[1]]),n)*(t[2]-t[0]),u=e/o(i([t[0],t[1]]),i([t[0],t[3]]),n)*(t[3]-t[1]),l=a/2,c=2*l,g=Math.sqrt(3)/2*u,d=t[2]-t[0],p=t[3]-t[1],v=.75*c,y=g,m=d/(c-l/2),x=Math.ceil(m);Math.round(m)===x&&x++;var E=(x*v-l/2-d)/2-l/2,I=Math.ceil(p/g),N=(p-I*g)/2,C=I*g-p>g/2;C&&(N-=g/4);for(var w=s([]),S=0;S<x;S++)for(var L=0;L<=I;L++){var T=S%2==1;if(!(0===L&&T||0===L&&C)){var R=S*v+t[0]-E,b=L*y+t[1]+N;T&&(b-=g/2),r?w.features.push.apply(w.features,f([R,b],a/2,u/2)):w.features.push(h([R,b],a/2,u/2))}}return w}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=window.ol?window.ol.proj:n(16),r=i.fromLonLat;function o(t,e){return Math.random()*(e-t)+t}i.Projection,e.rand=o,e.scatteredPoints=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=50);for(var i=[],s=0;s<n;++s){var a=t+o(-1,1),u=e+o(-1,1);i.push({coords:r([a,u])})}return i},e.getRandomColor=function(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=window.ol?window.ol.style:n(156),r=i.Style,o=i.Text,s=i.Fill,a=i.Stroke,u=i.Circle,l={};function c(t){var e=t.get("features").length,n=l[e];return n||(n=new r({text:new o({text:e.toString(),textAlign:"left",textBaseline:"top",font:"14px sans-serif",offsetX:5,fill:new s({color:"#fff"}),stroke:new a({width:2,color:"#000"})})})),n}function h(){return new r({image:new u({radius:16,stroke:new a({color:"orange",width:2}),fill:new s({color:"purple"})})})}e.textStyle=c,e.clsuterStyle=function(){return function(t,e){var n=[h()];return t.get("features")&&t.get("features").length&&n.push(c(t)),n}},e.iconStyle=h},function(t,e){t.exports=p},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((i=i.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(158);e.ctx=s;var a=n(159);e.carrouting=a;var u=n(160);e.geosearch=u;var l=n(161);e.format=l;var c=n(4),h=n(1);function f(t){return c.getConfig().get2gisCtxUrl()+"/"+t}function g(t){return c.getConfig().get2gisCarroutingUrl()+"/"+t}function d(){return""+c.getConfig().get2gisGeoUrl()}function p(t){return Object.keys(t).map(function(e){var n=t[e];return e+"="+encodeURIComponent(n)}).join("&")}e.fetchRoute=function(t,e){void 0===e&&(e="moscow"),f(e);var n=i({locale:"ru",transport:["pedestrian","bus","trolleybus","tram","shuttle_bus","metro"]},t);return h.axiosEgip.post(""+f(e),n,{}).then(function(t){var e=t;return{status:t.status,statusText:t.statusText,data:e}})},e.searchGeo=function(t){var e=p(t);return h.axiosEgip.get(d()+"?"+e).then(function(t){return{meta:t.meta,data:t.result}})},e.geosearchAddress=function(t){var e=p(t);return h.axiosEgip.get(d()+"?"+e).then(function(t){var e=t;return{meta:e.meta,data:e.result}})},e.fetchRouteCar=function(t,e){var n=this;void 0===e&&(e="moscow"),g(e);var s=i({locale:"ru",type:"shortest"},t);return h.axiosEgip.post(""+g(e),s,{}).then(function(t){return r(n,void 0,void 0,function(){var e;return o(this,function(n){return 204===t.status?[2,{status:t.status,statusText:t.statusText,url:t.url}]:(e=t,[2,{status:t.status,statusText:t.statusText,data:e.result}])})})})},e.geosearchAddressMos=function(t){var e=new URLSearchParams(t);return h.axiosEgip.get("services/publish/search_2gis",{params:e}).then(function(t){console.warn(t);var e=t;return{meta:e.meta,data:e.result}})},(e.CarRoutingColor||(e.CarRoutingColor={})).NO_TRAFFIC="green",e.carroutingColor=function(t){return"no-traffic"==t?"#8BC34A":"fast"==t?"#4CAF50":"normal"==t?"#00aeef":"slow"==t?"#CDDC39":void 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,n){"use strict";function i(t){return"finish"===t.waypoint.subtype?null:"(  : "+r(t)+" )"}function r(t){return Math.floor((o(t.total_duration)-o(t.waiting_duration))/60)}function o(t){return"number"!=typeof t?0:Number(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.route_navigation_text=function(t){return t?t.movements.map(function(t){return{line:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(["walkway","crossing"].includes(t.type)?function(t){return[t.waypoint.comment,t.waypoint.navigation.from,t.waypoint.navigation.from_name,t.waypoint.navigation.to,t.waypoint.navigation.to_name,i(t)].join(" ")}(t):"metro"==t.waypoint.subtype?function(t){return["",t.waypoint.name,t.waypoint.navigation.from,t.waypoint.navigation.from_name,t.waypoint.navigation.to,t.waypoint.navigation.to_name,i(t)].join(" ")}(t):function(t){return[t.routes[0].subtype_name,t.routes[0].names?t.routes[0].names.join(","):"",t.waypoint.navigation.from,t.waypoint.navigation.from_name,t.waypoint.navigation.to,t.waypoint.navigation.to_name,i(t)].join(" ")}(t)),movementTime:r(t),movement:t}}):[]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(163);e.VERSION=i.version},function(t){t.exports={name:"@gostgroup/egip-api",private:!1,version:"7.96.28",description:"",main:"./dist/index.js",types:"./dist",files:["dist","src","types","README.md","LICENSE"],scripts:{cz:"git add . && git-cz",clean:"rimraf dist",release:"standard-version","with-tsconfig":"mkdirp dist && ncp src/tsconfig.json dist/tsconfig.json",tsc:"cross-env NODE_ENV=production tsc --project src --diagnostics","tsc:w":"cross-env NODE_ENV=development tsc --watch --project src",webpack:"cross-env NODE_ENV=production webpack --config ./webpack.config.ts","webpack:w":"cross-env WATCH=true webpack -w --config ./webpack.config.ts",build:"npm-run-all clean  tsc webpack",serve:"http-server -s -p 3702 dist",publish:"git push --follow-tags origin master && npm publish",typedoc:"typedoc --tsconfig src/tsconfig.json --out dist/docs --mode modules src",dev:"npm-run-all tsc:w","build:examples":"ts-node script/build.ts","docs:tsc":"cross-env NODE_ENV=production tsc --project jsapi/docs","docs:tsc:w":"cross-env NODE_ENV=production tsc --project jsapi/docs -w","docs:html":"ts-node jsapi/script/gen-html-files.ts","docs:serve":"ts-node serve.ts","docs:devserver":"cross-env WATCH=true cross-env NODE_ENV=development NODE_OPTIONS=--max-old-space-size=4096 webpack-dev-server --config ./webpack.config.devserver.ts","docs:build":"npm-run-all docs:tsc docs:html docs:rlive webpack","docs:rlive":"cross-env NODE_ENV=production webpack --config ./jsapi/rlive-editor/webpack.config.ts","docs:dev":"npm run docs:html docs:rlive && npm-run-all --parallel dev webpack:w docs:tsc:w docs:devserver ","dev:examples":"rimraf dist &&  ts-node script/build.ts --watch","build:sandbox":"cross-env NODE_ENV=production webpack --config ./jsapi/rlive-editor/webpack.config.ts"},devDependencies:{"@types/fs-extra":"5.0.4","@types/geojson":"7946.0.4","@types/node":"10.12.7","@types/openlayers":"4.6.12","@types/webpack":"4.4.19","@types/webpack-env":"1.13.6",commitizen:"3.0.4","cross-env":"5.2.0","css-loader":"1.0.1","cz-conventional-changelog":"2.1.0","file-loader":"2.0.0","fs-extra":"7.0.1","html-webpack-plugin":"3.2.0","http-server":"0.11.1","json-loader":"0.5.7",less:"3.8.1","less-loader":"4.1.0","less-vars-to-js":"1.3.0",ncp:"2.0.0","npm-run-all":"4.1.3",rimraf:"2.6.2","standard-version":"4.4.0","style-loader":"0.23.1","ts-import-plugin":"1.5.5","ts-loader":"5.3.0","ts-node":"7.0.1",typedoc:"0.13.0","typedoc-webpack-plugin":"1.1.4",typescript:"3.1.6","typescript-styled-plugin":"0.13.0","url-loader":"1.1.2",webpack:"4.25.1","webpack-cli":"3.1.2","webpack-dev-server":"3.1.10","webpack-stats-plugin":"0.2.1"},"standard-version":{skip:{changelog:!1}},config:{commitizen:{path:"cz-conventional-changelog"}},dependencies:{"@types/geojson":"7946.0.4","@types/styled-components":"4.1.0",antd:"3.10.7",axios:"0.18.0","babel-polyfill":"6.26.0",express:"4.16.4",mkdirp:"0.5.1",ncp:"2.0.0",ol:"5.2.0",proj4:"2.5.0",ramda:"0.25.0",react:"16.7.0-alpha.0","react-dom":"16.7.0-alpha.0","react-live":"1.12.0","react-router":"4.3.1","react-router-dom":"4.3.1",recompose:"0.30.0","serve-index":"1.9.1","styled-components":"4.1.1",turf:"3.0.14"}}}])});</script>

  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
  <script type="text/javascript">!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=29)}([function(e,t,r){"use strict";e.exports=r(19)},function(e,t,r){"use strict";(function(e){var n=r(6),o=r.n(n),l=r(9),a=r.n(l),i=r(0),s=r.n(i),c=r(10),u=r(3),p=r(7),f=(r(26),r(2),r(11)),d=function(e,t){for(var r=[e[0]],n=0,o=t.length;n<o;n+=1)r.push(t[n],e[n+1]);return r},g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},m=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},y=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},v=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},w=function(e){return"object"===(void 0===e?"undefined":g(e))&&e.constructor===Object},x=Object.freeze([]),k=Object.freeze({});function C(e){return"function"==typeof e}function E(e){return e.displayName||e.name||"Component"}function I(e){return e&&"string"==typeof e.styledComponentId}var S=void 0!==e&&e.env.SC_ATTR||"data-styled",T="undefined"!=typeof window&&"HTMLElement"in window,B="boolean"==typeof SC_DISABLE_SPEEDY&&SC_DISABLE_SPEEDY||!1;var N=function(e){function t(r){h(this,t);for(var n=arguments.length,o=Array(n>1?n-1:0),l=1;l<n;l++)o[l-1]=arguments[l];var a=v(this,e.call(this,"An error occurred. See https://github.com/styled-components/styled-components/blob/master/src/utils/errors.md#"+r+" for more information. "+(o?"Additional arguments: "+o.join(", "):"")));return v(a)}return A(t,e),t}(Error),R=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,M=function(e){var t=""+(e||""),r=[];return t.replace(R,function(e,t,n){return r.push({componentId:t,matchIndex:n}),e}),r.map(function(e,n){var o=e.componentId,l=e.matchIndex,a=r[n+1];return{componentId:o,cssFromDOM:a?t.slice(l,a.matchIndex):t.slice(l)}})},P=/^\s*\/\/.*$/gm,Q=new o.a({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),O=new o.a({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),j=[],L=function(e){if(-2===e){var t=j;return j=[],t}},D=a()(function(e){j.push(e)}),G=void 0,z=void 0,F=void 0,U=function(e,t,r){return t>0&&-1!==r.slice(0,t).indexOf(z)&&r.slice(t-z.length,t)!==z?"."+G:e};O.use([function(e,t,r){2===e&&r.length&&r[0].lastIndexOf(z)>0&&(r[0]=r[0].replace(F,U))},D,L]),Q.use([D,L]);function Y(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"&",o=e.join("").replace(P,""),l=t&&r?r+" "+t+" { "+o+" }":o;return G=n,z=t,F=new RegExp("\\"+z+"\\b","g"),O(r||!t?"":t,l)}var H=function(){return r.nc},V=function(e,t,r){r&&((e[t]||(e[t]=Object.create(null)))[r]=!0)},J=function(e,t){e[t]=Object.create(null)},W=function(e){return function(t,r){return void 0!==e[t]&&e[t][r]}},X=function(e){var t="";for(var r in e)t+=Object.keys(e[r]).join(" ")+" ";return t.trim()},K=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets.length,r=0;r<t;r+=1){var n=document.styleSheets[r];if(n.ownerNode===e)return n}throw new N(10)},Z=function(e,t,r){if(!t)return!1;var n=e.cssRules.length;try{e.insertRule(t,r<=n?r:n)}catch(e){return!1}return!0},_=function(e){return"\n/* sc-component-id: "+e+" */\n"},q=function(e,t){for(var r=0,n=0;n<=t;n+=1)r+=e[n];return r},$=function(e,t){return function(r){var n=H();return"<style "+[n&&'nonce="'+n+'"',S+'="'+X(t)+'"','data-styled-version="4.1.3"',r].filter(Boolean).join(" ")+">"+e()+"</style>"}},ee=function(e,t){return function(){var r,n=((r={})[S]=X(t),r["data-styled-version"]="4.1.3",r),o=H();return o&&(n.nonce=o),s.a.createElement("style",b({},n,{dangerouslySetInnerHTML:{__html:e()}}))}},te=function(e){return function(){return Object.keys(e)}},re=function(e){return document.createTextNode(_(e))},ne=function e(t,r){var n=void 0===t?Object.create(null):t,o=void 0===r?Object.create(null):r,l=function(e){var t=o[e];return void 0!==t?t:o[e]=[""]},a=function(){var e="";for(var t in o){var r=o[t][0];r&&(e+=_(t)+r)}return e};return{clone:function(){var t=function(e){var t=Object.create(null);for(var r in e)t[r]=b({},e[r]);return t}(n),r=Object.create(null);for(var l in o)r[l]=[o[l][0]];return e(t,r)},css:a,getIds:te(o),hasNameForId:W(n),insertMarker:l,insertRules:function(e,t,r){l(e)[0]+=t.join(" "),V(n,e,r)},removeRules:function(e){var t=o[e];void 0!==t&&(t[0]="",J(n,e))},sealed:!1,styleTag:null,toElement:ee(a,n),toHTML:$(a,n)}},oe=function(e,t,r,n,o){if(T&&!r){var l=function(e,t,r){var n=document.createElement("style");n.setAttribute(S,""),n.setAttribute("data-styled-version","4.1.3");var o=H();if(o&&n.setAttribute("nonce",o),n.appendChild(document.createTextNode("")),e&&!t)e.appendChild(n);else{if(!t||!e||!t.parentNode)throw new N(6);t.parentNode.insertBefore(n,r?t:t.nextSibling)}return n}(e,t,n);return B?function(e,t){var r=Object.create(null),n=Object.create(null),o=void 0!==t,l=!1,a=function(t){var o=n[t];return void 0!==o?o:(n[t]=re(t),e.appendChild(n[t]),r[t]=Object.create(null),n[t])},i=function(){var e="";for(var t in n)e+=n[t].data;return e};return{clone:function(){throw new N(5)},css:i,getIds:te(n),hasNameForId:W(r),insertMarker:a,insertRules:function(e,n,i){for(var s=a(e),c=[],u=n.length,p=0;p<u;p+=1){var f=n[p],d=o;if(d&&-1!==f.indexOf("@import"))c.push(f);else{d=!1;var g=p===u-1?"":" ";s.appendData(""+f+g)}}V(r,e,i),o&&c.length>0&&(l=!0,t().insertRules(e+"-import",c))},removeRules:function(a){var i=n[a];if(void 0!==i){var s=re(a);e.replaceChild(s,i),n[a]=s,J(r,a),o&&l&&t().removeRules(a+"-import")}},sealed:!1,styleTag:e,toElement:ee(i,r),toHTML:$(i,r)}}(l,o):function(e,t){var r=Object.create(null),n=Object.create(null),o=[],l=void 0!==t,a=!1,i=function(e){var t=n[e];return void 0!==t?t:(n[e]=o.length,o.push(0),J(r,e),n[e])},s=function(){var t=K(e).cssRules,r="";for(var l in n){r+=_(l);for(var a=n[l],i=q(o,a),s=i-o[a];s<i;s+=1){var c=t[s];void 0!==c&&(r+=c.cssText)}}return r};return{clone:function(){throw new N(5)},css:s,getIds:te(n),hasNameForId:W(r),insertMarker:i,insertRules:function(n,s,c){for(var u=i(n),p=K(e),f=q(o,u),d=0,g=[],h=s.length,m=0;m<h;m+=1){var b=s[m],A=l;A&&-1!==b.indexOf("@import")?g.push(b):Z(p,b,f+d)&&(A=!1,d+=1)}l&&g.length>0&&(a=!0,t().insertRules(n+"-import",g)),o[u]+=d,V(r,n,c)},removeRules:function(i){var s=n[i];if(void 0!==s){var c=o[s];!function(e,t,r){for(var n=t-r,o=t;o>n;o-=1)e.deleteRule(o)}(K(e),q(o,s)-1,c),o[s]=0,J(r,i),l&&a&&t().removeRules(i+"-import")}},sealed:!1,styleTag:e,toElement:ee(s,r),toHTML:$(s,r)}}(l,o)}return ne()},le=/\s+/,ae=void 0;ae=T?B?40:1e3:-1;var ie=0,se=void 0,ce=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T?document.head:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];h(this,e),this.getImportRuleTag=function(){var e=t.importRuleTag;if(void 0!==e)return e;var r=t.tags[0];return t.importRuleTag=oe(t.target,r?r.styleTag:null,t.forceServer,!0)},ie+=1,this.id=ie,this.forceServer=n,this.target=n?null:r,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return e.prototype.rehydrate=function(){if(!T||this.forceServer)return this;var e=[],t=[],r=!1,n=document.querySelectorAll("style["+S+'][data-styled-version="4.1.3"]'),o=n.length;if(!o)return this;for(var l=0;l<o;l+=1){var a=n[l];r||(r=!!a.getAttribute("data-styled-streamed"));for(var i,s=(a.getAttribute(S)||"").trim().split(le),c=s.length,u=0;u<c;u+=1)i=s[u],this.rehydratedNames[i]=!0;t.push.apply(t,M(a.textContent)),e.push(a)}var p=t.length;if(!p)return this;var f=this.makeTag(null);!function(e,t,r){for(var n=0,o=r.length;n<o;n+=1){var l=r[n],a=l.componentId,i=l.cssFromDOM,s=Q("",i);e.insertRules(a,s)}for(var c=0,u=t.length;c<u;c+=1){var p=t[c];p.parentNode&&p.parentNode.removeChild(p)}}(f,e,t),this.capacity=Math.max(1,ae-p),this.tags.push(f);for(var d=0;d<p;d+=1)this.tagMap[t[d].componentId]=f;return this},e.reset=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];se=new e(void 0,t).rehydrate()},e.prototype.clone=function(){var t=new e(this.target,this.forceServer);return this.clones.push(t),t.tags=this.tags.map(function(e){for(var r=e.getIds(),n=e.clone(),o=0;o<r.length;o+=1)t.tagMap[r[o]]=n;return n}),t.rehydratedNames=b({},this.rehydratedNames),t.deferred=b({},this.deferred),t},e.prototype.sealAllTags=function(){this.capacity=1,this.tags.forEach(function(e){e.sealed=!0})},e.prototype.makeTag=function(e){var t=e?e.styleTag:null;return oe(this.target,t,this.forceServer,!1,this.getImportRuleTag)},e.prototype.getTagForId=function(e){var t=this.tagMap[e];if(void 0!==t&&!t.sealed)return t;var r=this.tags[this.tags.length-1];return this.capacity-=1,0===this.capacity&&(this.capacity=ae,r=this.makeTag(r),this.tags.push(r)),this.tagMap[e]=r},e.prototype.hasId=function(e){return void 0!==this.tagMap[e]},e.prototype.hasNameForId=function(e,t){if(void 0===this.ignoreRehydratedNames[e]&&this.rehydratedNames[t])return!0;var r=this.tagMap[e];return void 0!==r&&r.hasNameForId(e,t)},e.prototype.deferredInject=function(e,t){if(void 0===this.tagMap[e]){for(var r=this.clones,n=0;n<r.length;n+=1)r[n].deferredInject(e,t);this.getTagForId(e).insertMarker(e),this.deferred[e]=t}},e.prototype.inject=function(e,t,r){for(var n=this.clones,o=0;o<n.length;o+=1)n[o].inject(e,t,r);var l=this.getTagForId(e);if(void 0!==this.deferred[e]){var a=this.deferred[e].concat(t);l.insertRules(e,a,r),this.deferred[e]=void 0}else l.insertRules(e,t,r)},e.prototype.remove=function(e){var t=this.tagMap[e];if(void 0!==t){for(var r=this.clones,n=0;n<r.length;n+=1)r[n].remove(e);t.removeRules(e),this.ignoreRehydratedNames[e]=!0,this.deferred[e]=void 0}},e.prototype.toHTML=function(){return this.tags.map(function(e){return e.toHTML()}).join("")},e.prototype.toReactElements=function(){var e=this.id;return this.tags.map(function(t,r){var n="sc-"+e+"-"+r;return Object(i.cloneElement)(t.toElement(),{key:n})})},m(e,null,[{key:"master",get:function(){return se||(se=(new e).rehydrate())}},{key:"instance",get:function(){return e.master}}]),e}(),ue=function(){function e(t,r){var n=this;h(this,e),this.inject=function(e){e.hasNameForId(n.id,n.name)||e.inject(n.id,n.rules,n.name)},this.toString=function(){throw new N(12,String(n.name))},this.name=t,this.rules=r,this.id="sc-keyframes-"+t}return e.prototype.getName=function(){return this.name},e}(),pe=/([A-Z])/g,fe=/^ms-/;var de=function(e){return null==e||!1===e||""===e},ge=function e(t,r){var n=Object.keys(t).filter(function(e){return!de(t[e])}).map(function(r){return w(t[r])?e(t[r],r):r.replace(pe,"-$1").toLowerCase().replace(fe,"-ms-")+": "+(n=r,null==(o=t[r])||"boolean"==typeof o||""===o?"":"number"!=typeof o||0===o||n in c.a?String(o).trim():o+"px")+";";var n,o}).join(" ");return r?r+" {\n  "+n+"\n}":n};function he(e,t,r){if(Array.isArray(e)){for(var n,o=[],l=0,a=e.length;l<a;l+=1)null!==(n=he(e[l],t,r))&&(Array.isArray(n)?o.push.apply(o,n):o.push(n));return o}if(de(e))return null;if(I(e))return"."+e.styledComponentId;if(C(e)){if(t){var i=!1;try{Object(u.isElement)(new e(t))&&(i=!0)}catch(e){}if(i)throw new N(13,E(e));return he(e(t),t,r)}return e}return e instanceof ue?r?(e.inject(r),e.getName()):e:w(e)?ge(e):e.toString()}function me(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return C(e)||w(e)?he(d(x,[e].concat(r))):he(d(e,r))}function be(e){for(var t,r=0|e.length,n=0|r,o=0;r>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(t>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:n^=(255&e.charCodeAt(o+2))<<16;case 2:n^=(255&e.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(o)))+((1540483477*(n>>>16)&65535)<<16)}return((n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16))^n>>>15)>>>0}var Ae=52,ye=function(e){return String.fromCharCode(e+(e>25?39:97))};function ve(e){var t="",r=void 0;for(r=e;r>Ae;r=Math.floor(r/Ae))t=ye(r%Ae)+t;return ye(r%Ae)+t}function we(e,t){for(var r=0;r<e.length;r+=1){var n=e[r];if(Array.isArray(n)&&!we(n,t))return!1;if(C(n)&&!I(n))return!1}return!t.some(function(e){return C(e)||function(e){for(var t in e)if(C(e[t]))return!0;return!1}(e)})}var xe,ke=!1,Ce=function(e){return ve(be(e))},Ee=function(){function e(t,r,n){h(this,e),this.rules=t,this.isStatic=!ke&&we(t,r),this.componentId=n,ce.master.hasId(n)||ce.master.deferredInject(n,[])}return e.prototype.generateAndInjectStyles=function(e,t){var r=this.isStatic,n=this.componentId,o=this.lastClassName;if(T&&r&&"string"==typeof o&&t.hasNameForId(n,o))return o;var l=he(this.rules,e,t),a=Ce(this.componentId+l.join(""));return t.hasNameForId(n,a)||t.inject(this.componentId,Y(l,"."+a,void 0,n),a),this.lastClassName=a,a},e.generateName=function(e){return Ce(e)},e}(),Ie=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k,n=!!r&&e.theme===r.theme;return e.theme&&!n?e.theme:t||r.theme},Se=/[[\].#*$><+~=|^:(),"'`-]+/g,Te=/(^-|-$)/g;function Be(e){return e.replace(Se,"-").replace(Te,"")}function Ne(e){return"string"==typeof e&&!0}var Re={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDerivedStateFromProps:!0,propTypes:!0,type:!0},Me={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Pe=((xe={})[u.ForwardRef]={$$typeof:!0,render:!0},xe),Qe=Object.defineProperty,Oe=Object.getOwnPropertyNames,je=Object.getOwnPropertySymbols,Le=void 0===je?function(){return[]}:je,De=Object.getOwnPropertyDescriptor,Ge=Object.getPrototypeOf,ze=Object.prototype,Fe=Array.prototype;function Ue(e,t,r){if("string"!=typeof t){var n=Ge(t);n&&n!==ze&&Ue(e,n,r);for(var o=Fe.concat(Oe(t),Le(t)),l=Pe[e.$$typeof]||Re,a=Pe[t.$$typeof]||Re,i=o.length,s=void 0,c=void 0;i--;)if(c=o[i],!(Me[c]||r&&r[c]||a&&a[c]||l&&l[c])&&(s=De(t,c)))try{Qe(e,c,s)}catch(e){}return e}return e}var Ye=Object(i.createContext)(),He=Ye.Consumer,Ve=(function(e){function t(r){h(this,t);var n=v(this,e.call(this,r));return n.getContext=Object(p.a)(n.getContext.bind(n)),n.renderInner=n.renderInner.bind(n),n}A(t,e),t.prototype.render=function(){return this.props.children?s.a.createElement(Ye.Consumer,null,this.renderInner):null},t.prototype.renderInner=function(e){var t=this.getContext(this.props.theme,e);return s.a.createElement(Ye.Provider,{value:t},s.a.Children.only(this.props.children))},t.prototype.getTheme=function(e,t){if(C(e))return e(t);if(null===e||Array.isArray(e)||"object"!==(void 0===e?"undefined":g(e)))throw new N(8);return b({},t,e)},t.prototype.getContext=function(e,t){return this.getTheme(e,t)}}(i.Component),function(){function e(){h(this,e),this.masterSheet=ce.master,this.instance=this.masterSheet.clone(),this.sealed=!1}e.prototype.seal=function(){if(!this.sealed){var e=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(e,1),this.sealed=!0}},e.prototype.collectStyles=function(e){if(this.sealed)throw new N(2);return s.a.createElement(We,{sheet:this.instance},e)},e.prototype.getStyleTags=function(){return this.seal(),this.instance.toHTML()},e.prototype.getStyleElement=function(){return this.seal(),this.instance.toReactElements()},e.prototype.interleaveWithNodeStream=function(e){throw new N(3)}}(),Object(i.createContext)()),Je=Ve.Consumer,We=function(e){function t(r){h(this,t);var n=v(this,e.call(this,r));return n.getContext=Object(p.a)(n.getContext),n}return A(t,e),t.prototype.getContext=function(e,t){if(e)return e;if(t)return new ce(t);throw new N(4)},t.prototype.render=function(){var e=this.props,t=e.children,r=e.sheet,n=e.target;return s.a.createElement(Ve.Provider,{value:this.getContext(r,n)},t)},t}(i.Component),Xe=(new Set,{});var Ke=function(e){function t(){h(this,t);var r=v(this,e.call(this));return r.attrs={},r.renderOuter=r.renderOuter.bind(r),r.renderInner=r.renderInner.bind(r),r}return A(t,e),t.prototype.render=function(){return s.a.createElement(Je,null,this.renderOuter)},t.prototype.renderOuter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce.master;return this.styleSheet=e,this.props.forwardedComponent.componentStyle.isStatic?this.renderInner():s.a.createElement(He,null,this.renderInner)},t.prototype.renderInner=function(e){var t=this.props.forwardedComponent,r=t.componentStyle,n=t.defaultProps,o=(t.displayName,t.foldedComponentIds),l=t.styledComponentId,a=t.target,s=void 0;s=r.isStatic?this.generateAndInjectStyles(k,this.props):void 0!==e?this.generateAndInjectStyles(Ie(this.props,e,n),this.props):this.generateAndInjectStyles(this.props.theme||k,this.props);var c=this.props.as||this.attrs.as||a,u=Ne(c),p={},d=b({},this.attrs,this.props),g=void 0;for(g in d)"forwardedComponent"!==g&&"as"!==g&&("forwardedRef"===g?p.ref=d[g]:u&&!Object(f.a)(g)||(p[g]=d[g]));return this.props.style&&this.attrs.style&&(p.style=b({},this.attrs.style,this.props.style)),p.className=Array.prototype.concat(o,this.props.className,l,this.attrs.className,s).filter(Boolean).join(" "),Object(i.createElement)(c,p)},t.prototype.buildExecutionContext=function(e,t,r){var n=this,o=b({},t,{theme:e});return r.length?(this.attrs={},r.forEach(function(e){var t,r=e,l=!1,a=void 0,i=void 0;for(i in C(r)&&(r=r(o),l=!0),r)a=r[i],l||!C(a)||(t=a)&&t.prototype&&t.prototype.isReactComponent||I(a)||(a=a(o)),n.attrs[i]=a,o[i]=a}),o):o},t.prototype.generateAndInjectStyles=function(e,t){var r=t.forwardedComponent,n=r.attrs,o=r.componentStyle;r.warnTooManyClasses;return o.isStatic&&!n.length?o.generateAndInjectStyles(k,this.styleSheet):o.generateAndInjectStyles(this.buildExecutionContext(e,t,n),this.styleSheet)},t}(i.Component);function Ze(e,t,r){var n=I(e),o=!Ne(e),l=t.displayName,a=void 0===l?function(e){return Ne(e)?"styled."+e:"Styled("+E(e)+")"}(e):l,i=t.componentId,c=void 0===i?function(e,t,r){var n="string"!=typeof t?"sc":Be(t),o=(Xe[n]||0)+1;Xe[n]=o;var l=n+"-"+e.generateName(n+o);return r?r+"-"+l:l}(Ee,t.displayName,t.parentComponentId):i,u=t.ParentComponent,p=void 0===u?Ke:u,f=t.attrs,d=void 0===f?x:f,g=t.displayName&&t.componentId?Be(t.displayName)+"-"+t.componentId:t.componentId||c,h=n&&e.attrs?Array.prototype.concat(e.attrs,d).filter(Boolean):d,m=new Ee(n?e.componentStyle.rules.concat(r):r,h,g),A=s.a.forwardRef(function(e,t){return s.a.createElement(p,b({},e,{forwardedComponent:A,forwardedRef:t}))});return A.attrs=h,A.componentStyle=m,A.displayName=a,A.foldedComponentIds=n?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):x,A.styledComponentId=g,A.target=n?e.target:e,A.withComponent=function(e){var n=t.componentId,o=y(t,["componentId"]),l=n&&n+"-"+(Ne(e)?e:Be(E(e)));return Ze(e,b({},o,{attrs:h,componentId:l,ParentComponent:p}),r)},A.toString=function(){return"."+A.styledComponentId},o&&Ue(A,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,styledComponentId:!0,target:!0,withComponent:!0}),A}var _e=function(e){return function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;if(!Object(u.isValidElementType)(r))throw new N(1,String(r));var o=function(){return t(r,n,me.apply(void 0,arguments))};return o.withConfig=function(o){return e(t,r,b({},n,o))},o.attrs=function(o){return e(t,r,b({},n,{attrs:Array.prototype.concat(n.attrs,o).filter(Boolean)}))},o}(Ze,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach(function(e){_e[e]=_e(e)});!function(){function e(t,r){h(this,e),this.rules=t,this.componentId=r,this.isStatic=we(t,x),ce.master.hasId(r)||ce.master.deferredInject(r,[])}e.prototype.createStyles=function(e,t){var r=Y(he(this.rules,e,t),"");t.inject(this.componentId,r)},e.prototype.removeStyles=function(e){var t=this.componentId;e.hasId(t)&&e.remove(t)},e.prototype.renderStyles=function(e,t){this.removeStyles(t),this.createStyles(e,t)}}();T&&(window.scCGSHMRCache={});t.a=_e}).call(this,r(24))},function(e,t,r){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=r(20)},function(e,t,r){"use strict";e.exports=r(25)},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var o=(a=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),l=n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"});return[r].concat(l).concat([o]).join("\n")}var a;return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var l=this[o][0];null!=l&&(n[l]=!0)}for(o=0;o<e.length;o++){var a=e[o];null!=a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),t.push(a))}},t}},function(e,t,r){var n,o,l={},a=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),i=function(e){var t={};return function(e,r){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),s=null,c=0,u=[],p=r(14);function f(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=l[n.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](n.parts[a]);for(;a<n.parts.length;a++)o.parts.push(A(n.parts[a],t))}else{var i=[];for(a=0;a<n.parts.length;a++)i.push(A(n.parts[a],t));l[n.id]={id:n.id,refs:1,parts:i}}}}function d(e,t){for(var r=[],n={},o=0;o<e.length;o++){var l=e[o],a=t.base?l[0]+t.base:l[0],i={css:l[1],media:l[2],sourceMap:l[3]};n[a]?n[a].parts.push(i):r.push(n[a]={id:a,parts:[i]})}return r}function g(e,t){var r=i(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=u[u.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),u.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=i(e.insertAt.before,r);r.insertBefore(t,o)}}function h(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function m(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=function(){0;return r.nc}();n&&(e.attrs.nonce=n)}return b(t,e.attrs),g(e,t),t}function b(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function A(e,t){var r,n,o,l;if(t.transform&&e.css){if(!(l=t.transform(e.css)))return function(){};e.css=l}if(t.singleton){var a=c++;r=s||(s=m(t)),n=w.bind(null,r,a,!1),o=w.bind(null,r,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),g(e,t),t}(t),n=function(e,t,r){var n=r.css,o=r.sourceMap,l=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||l)&&(n=p(n));o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(a),i&&URL.revokeObjectURL(i)}.bind(null,r,t),o=function(){h(r),r.href&&URL.revokeObjectURL(r.href)}):(r=m(t),n=function(e,t){var r=t.css,n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,r),o=function(){h(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=d(e,t);return f(r,t),function(e){for(var n=[],o=0;o<r.length;o++){var a=r[o];(i=l[a.id]).refs--,n.push(i)}e&&f(d(e,t),t);for(o=0;o<n.length;o++){var i;if(0===(i=n[o]).refs){for(var s=0;s<i.parts.length;s++)i.parts[s]();delete l[i.id]}}}};var y,v=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function w(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=v(t,o);else{var l=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(l,a[t]):e.appendChild(l)}}},function(e,t,r){e.exports=function e(t){"use strict";var r=/^\0+/g,n=/[\0\r\f]/g,o=/: */g,l=/zoo|gra/,a=/([,: ])(transform)/g,i=/,+\s*(?![^(]*[)])/g,s=/ +\s*(?![^(]*[)])/g,c=/ *[\0] */g,u=/,\r+?/g,p=/([\t\r\n ])*\f?&/g,f=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,d=/\W+/g,g=/@(k\w+)\s*(\S*)\s*/,h=/::(place)/g,m=/:(read-only)/g,b=/\s+(?=[{\];=:>])/g,A=/([[}=:>])\s+/g,y=/(\{[^{]+?);(?=\})/g,v=/\s{2,}/g,w=/([^\(])(:+) */g,x=/[svh]\w+-[tblr]{2}/,k=/\(\s*(.*)\s*\)/g,C=/([\s\S]*?);/g,E=/-self|flex-/g,I=/[^]*?(:[rp][el]a[\w-]+)[^]*/,S=/stretch|:\s*\w+\-(?:conte|avail)/,T=/([^-])(image-set\()/,B="-webkit-",N="-moz-",R="-ms-",M=59,P=125,Q=123,O=40,j=41,L=91,D=93,G=10,z=13,F=9,U=64,Y=32,H=38,V=45,J=95,W=42,X=44,K=58,Z=39,_=34,q=47,$=62,ee=43,te=126,re=0,ne=12,oe=11,le=107,ae=109,ie=115,se=112,ce=111,ue=105,pe=99,fe=100,de=112,ge=1,he=1,me=0,be=1,Ae=1,ye=1,ve=0,we=0,xe=0,ke=[],Ce=[],Ee=0,Ie=null,Se=-2,Te=-1,Be=0,Ne=1,Re=2,Me=3,Pe=0,Qe=1,Oe="",je="",Le="";function De(e,t,o,l,a){for(var i,s,u=0,p=0,f=0,d=0,b=0,A=0,y=0,v=0,x=0,C=0,E=0,I=0,S=0,T=0,J=0,ve=0,Ce=0,Ie=0,Se=0,Te=o.length,ze=Te-1,Je="",We="",Xe="",Ke="",Ze="",_e="";J<Te;){if(y=o.charCodeAt(J),J===ze&&p+d+f+u!==0&&(0!==p&&(y=p===q?G:q),d=f=u=0,Te++,ze++),p+d+f+u===0){if(J===ze&&(ve>0&&(We=We.replace(n,"")),We.trim().length>0)){switch(y){case Y:case F:case M:case z:case G:break;default:We+=o.charAt(J)}y=M}if(1===Ce)switch(y){case Q:case P:case M:case _:case Z:case O:case j:case X:Ce=0;case F:case z:case G:case Y:break;default:for(Ce=0,Se=J,b=y,J--,y=M;Se<Te;)switch(o.charCodeAt(Se++)){case G:case z:case M:++J,y=b,Se=Te;break;case K:ve>0&&(++J,y=b);case Q:Se=Te}}switch(y){case Q:for(b=(We=We.trim()).charCodeAt(0),E=1,Se=++J;J<Te;){switch(y=o.charCodeAt(J)){case Q:E++;break;case P:E--;break;case q:switch(A=o.charCodeAt(J+1)){case W:case q:J=Ve(A,J,ze,o)}break;case L:y++;case O:y++;case _:case Z:for(;J++<ze&&o.charCodeAt(J)!==y;);}if(0===E)break;J++}switch(Xe=o.substring(Se,J),b===re&&(b=(We=We.replace(r,"").trim()).charCodeAt(0)),b){case U:switch(ve>0&&(We=We.replace(n,"")),A=We.charCodeAt(1)){case fe:case ae:case ie:case V:i=t;break;default:i=ke}if(Se=(Xe=De(t,i,Xe,A,a+1)).length,xe>0&&0===Se&&(Se=We.length),Ee>0&&(i=Ge(ke,We,Ie),s=He(Me,Xe,i,t,he,ge,Se,A,a,l),We=i.join(""),void 0!==s&&0===(Se=(Xe=s.trim()).length)&&(A=0,Xe="")),Se>0)switch(A){case ie:We=We.replace(k,Ye);case fe:case ae:case V:Xe=We+"{"+Xe+"}";break;case le:Xe=(We=We.replace(g,"$1 $2"+(Qe>0?Oe:"")))+"{"+Xe+"}",Xe=1===Ae||2===Ae&&Ue("@"+Xe,3)?"@"+B+Xe+"@"+Xe:"@"+Xe;break;default:Xe=We+Xe,l===de&&(Ke+=Xe,Xe="")}else Xe="";break;default:Xe=De(t,Ge(t,We,Ie),Xe,l,a+1)}Ze+=Xe,I=0,Ce=0,T=0,ve=0,Ie=0,S=0,We="",Xe="",y=o.charCodeAt(++J);break;case P:case M:if((Se=(We=(ve>0?We.replace(n,""):We).trim()).length)>1)switch(0===T&&((b=We.charCodeAt(0))===V||b>96&&b<123)&&(Se=(We=We.replace(" ",":")).length),Ee>0&&void 0!==(s=He(Ne,We,t,e,he,ge,Ke.length,l,a,l))&&0===(Se=(We=s.trim()).length)&&(We="\0\0"),b=We.charCodeAt(0),A=We.charCodeAt(1),b){case re:break;case U:if(A===ue||A===pe){_e+=We+o.charAt(J);break}default:if(We.charCodeAt(Se-1)===K)break;Ke+=Fe(We,b,A,We.charCodeAt(2))}I=0,Ce=0,T=0,ve=0,Ie=0,We="",y=o.charCodeAt(++J)}}switch(y){case z:case G:if(p+d+f+u+we===0)switch(C){case j:case Z:case _:case U:case te:case $:case W:case ee:case q:case V:case K:case X:case M:case Q:case P:break;default:T>0&&(Ce=1)}p===q?p=0:be+I===0&&l!==le&&We.length>0&&(ve=1,We+="\0"),Ee*Pe>0&&He(Be,We,t,e,he,ge,Ke.length,l,a,l),ge=1,he++;break;case M:case P:if(p+d+f+u===0){ge++;break}default:switch(ge++,Je=o.charAt(J),y){case F:case Y:if(d+u+p===0)switch(v){case X:case K:case F:case Y:Je="";break;default:y!==Y&&(Je=" ")}break;case re:Je="\\0";break;case ne:Je="\\f";break;case oe:Je="\\v";break;case H:d+p+u===0&&be>0&&(Ie=1,ve=1,Je="\f"+Je);break;case 108:if(d+p+u+me===0&&T>0)switch(J-T){case 2:v===se&&o.charCodeAt(J-3)===K&&(me=v);case 8:x===ce&&(me=x)}break;case K:d+p+u===0&&(T=J);break;case X:p+f+d+u===0&&(ve=1,Je+="\r");break;case _:case Z:0===p&&(d=d===y?0:0===d?y:d);break;case L:d+p+f===0&&u++;break;case D:d+p+f===0&&u--;break;case j:d+p+u===0&&f--;break;case O:if(d+p+u===0){if(0===I)switch(2*v+3*x){case 533:break;default:E=0,I=1}f++}break;case U:p+f+d+u+T+S===0&&(S=1);break;case W:case q:if(d+u+f>0)break;switch(p){case 0:switch(2*y+3*o.charCodeAt(J+1)){case 235:p=q;break;case 220:Se=J,p=W}break;case W:y===q&&v===W&&Se+2!==J&&(33===o.charCodeAt(Se+2)&&(Ke+=o.substring(Se,J+1)),Je="",p=0)}}if(0===p){if(be+d+u+S===0&&l!==le&&y!==M)switch(y){case X:case te:case $:case ee:case j:case O:if(0===I){switch(v){case F:case Y:case G:case z:Je+="\0";break;default:Je="\0"+Je+(y===X?"":"\0")}ve=1}else switch(y){case O:T+7===J&&108===v&&(T=0),I=++E;break;case j:0==(I=--E)&&(ve=1,Je+="\0")}break;case F:case Y:switch(v){case re:case Q:case P:case M:case X:case ne:case F:case Y:case G:case z:break;default:0===I&&(ve=1,Je+="\0")}}We+=Je,y!==Y&&y!==F&&(C=y)}}x=v,v=y,J++}if(Se=Ke.length,xe>0&&0===Se&&0===Ze.length&&0===t[0].length==0&&(l!==ae||1===t.length&&(be>0?je:Le)===t[0])&&(Se=t.join(",").length+2),Se>0){if(i=0===be&&l!==le?function(e){for(var t,r,o=0,l=e.length,a=Array(l);o<l;++o){for(var i=e[o].split(c),s="",u=0,p=0,f=0,d=0,g=i.length;u<g;++u)if(!(0===(p=(r=i[u]).length)&&g>1)){if(f=s.charCodeAt(s.length-1),d=r.charCodeAt(0),t="",0!==u)switch(f){case W:case te:case $:case ee:case Y:case O:break;default:t=" "}switch(d){case H:r=t+je;case te:case $:case ee:case Y:case j:case O:break;case L:r=t+r+je;break;case K:switch(2*r.charCodeAt(1)+3*r.charCodeAt(2)){case 530:if(ye>0){r=t+r.substring(8,p-1);break}default:(u<1||i[u-1].length<1)&&(r=t+je+r)}break;case X:t="";default:r=p>1&&r.indexOf(":")>0?t+r.replace(w,"$1"+je+"$2"):t+r+je}s+=r}a[o]=s.replace(n,"").trim()}return a}(t):t,Ee>0&&void 0!==(s=He(Re,Ke,i,e,he,ge,Se,l,a,l))&&0===(Ke=s).length)return _e+Ke+Ze;if(Ke=i.join(",")+"{"+Ke+"}",Ae*me!=0){switch(2!==Ae||Ue(Ke,2)||(me=0),me){case ce:Ke=Ke.replace(m,":"+N+"$1")+Ke;break;case se:Ke=Ke.replace(h,"::"+B+"input-$1")+Ke.replace(h,"::"+N+"$1")+Ke.replace(h,":"+R+"input-$1")+Ke}me=0}}return _e+Ke+Ze}function Ge(e,t,r){var n=t.trim().split(u),o=n,l=n.length,a=e.length;switch(a){case 0:case 1:for(var i=0,s=0===a?"":e[0]+" ";i<l;++i)o[i]=ze(s,o[i],r,a).trim();break;default:i=0;var c=0;for(o=[];i<l;++i)for(var p=0;p<a;++p)o[c++]=ze(e[p]+" ",n[i],r,a).trim()}return o}function ze(e,t,r,n){var o=t,l=o.charCodeAt(0);switch(l<33&&(l=(o=o.trim()).charCodeAt(0)),l){case H:switch(be+n){case 0:case 1:if(0===e.trim().length)break;default:return o.replace(p,"$1"+e.trim())}break;case K:switch(o.charCodeAt(1)){case 103:if(ye>0&&be>0)return o.replace(f,"$1").replace(p,"$1"+Le);break;default:return e.trim()+o.replace(p,"$1"+e.trim())}default:if(r*be>0&&o.indexOf("\f")>0)return o.replace(p,(e.charCodeAt(0)===K?"":"$1")+e.trim())}return e+o}function Fe(e,t,r,n){var c,u=0,p=e+";",f=2*t+3*r+4*n;if(944===f)return function(e){var t=e.length,r=e.indexOf(":",9)+1,n=e.substring(0,r).trim(),o=e.substring(r,t-1).trim();switch(e.charCodeAt(9)*Qe){case 0:break;case V:if(110!==e.charCodeAt(10))break;default:for(var l=o.split((o="",i)),a=0,r=0,t=l.length;a<t;r=0,++a){for(var c=l[a],u=c.split(s);c=u[r];){var p=c.charCodeAt(0);if(1===Qe&&(p>U&&p<90||p>96&&p<123||p===J||p===V&&c.charCodeAt(1)!==V))switch(isNaN(parseFloat(c))+(-1!==c.indexOf("("))){case 1:switch(c){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:c+=Oe}}u[r++]=c}o+=(0===a?"":",")+u.join(" ")}}return o=n+o+";",1===Ae||2===Ae&&Ue(o,1)?B+o+o:o}(p);if(0===Ae||2===Ae&&!Ue(p,1))return p;switch(f){case 1015:return 97===p.charCodeAt(10)?B+p+p:p;case 951:return 116===p.charCodeAt(3)?B+p+p:p;case 963:return 110===p.charCodeAt(5)?B+p+p:p;case 1009:if(100!==p.charCodeAt(4))break;case 969:case 942:return B+p+p;case 978:return B+p+N+p+p;case 1019:case 983:return B+p+N+p+R+p+p;case 883:return p.charCodeAt(8)===V?B+p+p:p.indexOf("image-set(",11)>0?p.replace(T,"$1"+B+"$2")+p:p;case 932:if(p.charCodeAt(4)===V)switch(p.charCodeAt(5)){case 103:return B+"box-"+p.replace("-grow","")+B+p+R+p.replace("grow","positive")+p;case 115:return B+p+R+p.replace("shrink","negative")+p;case 98:return B+p+R+p.replace("basis","preferred-size")+p}return B+p+R+p+p;case 964:return B+p+R+"flex-"+p+p;case 1023:if(99!==p.charCodeAt(8))break;return c=p.substring(p.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),B+"box-pack"+c+B+p+R+"flex-pack"+c+p;case 1005:return l.test(p)?p.replace(o,":"+B)+p.replace(o,":"+N)+p:p;case 1e3:switch(u=(c=p.substring(13).trim()).indexOf("-")+1,c.charCodeAt(0)+c.charCodeAt(u)){case 226:c=p.replace(x,"tb");break;case 232:c=p.replace(x,"tb-rl");break;case 220:c=p.replace(x,"lr");break;default:return p}return B+p+R+c+p;case 1017:if(-1===p.indexOf("sticky",9))return p;case 975:switch(u=(p=e).length-10,f=(c=(33===p.charCodeAt(u)?p.substring(0,u):p).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|c.charCodeAt(7))){case 203:if(c.charCodeAt(8)<111)break;case 115:p=p.replace(c,B+c)+";"+p;break;case 207:case 102:p=p.replace(c,B+(f>102?"inline-":"")+"box")+";"+p.replace(c,B+c)+";"+p.replace(c,R+c+"box")+";"+p}return p+";";case 938:if(p.charCodeAt(5)===V)switch(p.charCodeAt(6)){case 105:return c=p.replace("-items",""),B+p+B+"box-"+c+R+"flex-"+c+p;case 115:return B+p+R+"flex-item-"+p.replace(E,"")+p;default:return B+p+R+"flex-line-pack"+p.replace("align-content","").replace(E,"")+p}break;case 973:case 989:if(p.charCodeAt(3)!==V||122===p.charCodeAt(4))break;case 931:case 953:if(!0===S.test(e))return 115===(c=e.substring(e.indexOf(":")+1)).charCodeAt(0)?Fe(e.replace("stretch","fill-available"),t,r,n).replace(":fill-available",":stretch"):p.replace(c,B+c)+p.replace(c,N+c.replace("fill-",""))+p;break;case 962:if(p=B+p+(102===p.charCodeAt(5)?R+p:"")+p,r+n===211&&105===p.charCodeAt(13)&&p.indexOf("transform",10)>0)return p.substring(0,p.indexOf(";",27)+1).replace(a,"$1"+B+"$2")+p}return p}function Ue(e,t){var r=e.indexOf(1===t?":":"{"),n=e.substring(0,3!==t?r:10),o=e.substring(r+1,e.length-1);return Ie(2!==t?n:n.replace(I,"$1"),o,t)}function Ye(e,t){var r=Fe(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return r!==t+";"?r.replace(C," or ($1)").substring(4):"("+t+")"}function He(e,t,r,n,o,l,a,i,s,c){for(var u,p=0,f=t;p<Ee;++p)switch(u=Ce[p].call(We,e,f,r,n,o,l,a,i,s,c)){case void 0:case!1:case!0:case null:break;default:f=u}if(f!==t)return f}function Ve(e,t,r,n){for(var o=t+1;o<r;++o)switch(n.charCodeAt(o)){case q:if(e===W&&n.charCodeAt(o-1)===W&&t+2!==o)return o+1;break;case G:if(e===q)return o+1}return o}function Je(e){for(var t in e){var r=e[t];switch(t){case"keyframe":Qe=0|r;break;case"global":ye=0|r;break;case"cascade":be=0|r;break;case"compress":ve=0|r;break;case"semicolon":we=0|r;break;case"preserve":xe=0|r;break;case"prefix":Ie=null,r?"function"!=typeof r?Ae=1:(Ae=2,Ie=r):Ae=0}}return Je}function We(t,r){if(void 0!==this&&this.constructor===We)return e(t);var o=t,l=o.charCodeAt(0);l<33&&(l=(o=o.trim()).charCodeAt(0)),Qe>0&&(Oe=o.replace(d,l===L?"":"-")),l=1,1===be?Le=o:je=o;var a,i=[Le];Ee>0&&void 0!==(a=He(Te,r,i,i,he,ge,0,0,0,0))&&"string"==typeof a&&(r=a);var s=De(ke,i,r,0,0);return Ee>0&&void 0!==(a=He(Se,s,i,i,he,ge,s.length,0,0,0))&&"string"!=typeof(s=a)&&(l=0),Oe="",Le="",je="",me=0,he=1,ge=1,ve*l==0?s:s.replace(n,"").replace(b,"").replace(A,"$1").replace(y,"$1").replace(v," ")}return We.use=function e(t){switch(t){case void 0:case null:Ee=Ce.length=0;break;default:if("function"==typeof t)Ce[Ee++]=t;else if("object"==typeof t)for(var r=0,n=t.length;r<n;++r)e(t[r]);else Pe=0|!!t}return e},We.set=Je,void 0!==t&&Je(t),We}(null)},function(e,t,r){"use strict";var n=function(e,t){return e===t};t.a=function(e,t){var r;void 0===t&&(t=n);var o,l=[],a=!1,i=function(e,r){return t(e,l[r],r)};return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return a&&r===this&&n.length===l.length&&n.every(i)?o:(o=e.apply(this,n),a=!0,r=this,l=n,o)}}},function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,a,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in r=Object(arguments[s]))o.call(r,c)&&(i[c]=r[c]);if(n){a=n(r);for(var u=0;u<a.length;u++)l.call(r,a[u])&&(i[a[u]]=r[a[u]])}}return i}},function(e,t,r){e.exports=function(){"use strict";return function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(r,n,o,l,a,i,s,c,u,p){switch(r){case 1:if(0===u&&64===n.charCodeAt(0))return e(n+";"),"";break;case 2:if(0===c)return n+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(o[0]+n),"";default:return n+(0===p?"/*|*/":"")}case-2:n.split("/*|*/}").forEach(t)}}}}()},function(e,t,r){"use strict";t.a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,r){"use strict";var n=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,o=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}(function(e){return n.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91});t.a=o},function(e,t,r){var n=r(13);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(5)(n,o);n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(4)(!1)).push([e.i,"* {\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\nhtml, body {\r\n    height: 100%;\r\n}\r\n",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,l=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(l)?e:(o=0===l.indexOf("//")?l:0===l.indexOf("/")?r+l:n+l.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,r){var n=r(16);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(5)(n,o);n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(4)(!1)).push([e.i,'.ol-popup.modifytouch .content a,.ol-search li.copy a{text-decoration:none}.ol-control.ol-bar{left:50%;min-height:1em;min-width:1em;position:absolute;top:.5em;transform:translate(-50%,0);-webkit-transform:translate(-50%,0)}.ol-control.ol-toggle .ol-option-bar{display:none}.ol-control.ol-bar .ol-control{position:relative;top:auto;left:auto;right:auto;bottom:auto;display:inline-block;vertical-align:middle;background:0 0;padding:0;margin:0;transform:none;-webkit-transform:none}.ol-control.ol-bar .ol-rotate button,.ol-control.ol-bar.ol-left .ol-control,.ol-control.ol-bar.ol-right .ol-control{display:block}.ol-control.ol-bar .ol-bar{position:static}.ol-control.ol-bar .ol-control button{margin:2px 1px}.ol-control.ol-bar.ol-left{left:.5em;top:50%;-webkit-transform:translate(0,-50%);transform:translate(0,-50%)}.ol-control.ol-bar.ol-right{left:auto;right:.5em;top:50%;-webkit-transform:translate(0,-50%);transform:translate(0,-50%)}.ol-control.ol-bar.ol-bottom{top:auto;bottom:.5em}.ol-control.ol-bar.ol-top.ol-left,.ol-control.ol-bar.ol-top.ol-right{top:4.5em;-webkit-transform:none;transform:none}.ol-touch .ol-control.ol-bar.ol-top.ol-left,.ol-touch .ol-control.ol-bar.ol-top.ol-right{top:5.5em}.ol-control.ol-bar.ol-bottom.ol-left,.ol-control.ol-bar.ol-bottom.ol-right{top:auto;bottom:.5em;-webkit-transform:none;transform:none}.ol-control.ol-bar.ol-group{margin:1px 1px 1px 0}.ol-control.ol-bar.ol-left .ol-group,.ol-control.ol-bar.ol-right .ol-group{margin:1px 1px 0}.ol-control.ol-bar.ol-group button{border-radius:0;margin:0 0 0 1px}.ol-control.ol-bar.ol-left .ol-group button,.ol-control.ol-bar.ol-left.ol-group button,.ol-control.ol-bar.ol-right .ol-group button,.ol-control.ol-bar.ol-right.ol-group button{margin:0 0 1px}.ol-control.ol-bar.ol-group .ol-control:first-child>button{border-radius:5px 0 0 5px}.ol-control.ol-bar.ol-group .ol-control:last-child>button{border-radius:0 5px 5px 0}.ol-control.ol-bar.ol-left .ol-group .ol-control:first-child>button,.ol-control.ol-bar.ol-left.ol-group .ol-control:first-child>button,.ol-control.ol-bar.ol-right .ol-group .ol-control:first-child>button,.ol-control.ol-bar.ol-right.ol-group .ol-control:first-child>button{border-radius:5px 5px 0 0}.ol-control.ol-bar.ol-left .ol-group .ol-control:last-child>button,.ol-control.ol-bar.ol-left.ol-group .ol-control:last-child>button,.ol-control.ol-bar.ol-right .ol-group .ol-control:last-child>button,.ol-control.ol-bar.ol-right.ol-group .ol-control:last-child>button{border-radius:0 0 5px 5px}.ol-control.ol-bar .ol-rotate{opacity:1;visibility:visible}.ol-control.ol-bar .ol-toggle.ol-active button:hover,.ol-control.ol-bar .ol-toggle.ol-active>button{background:rgba(60,136,0,.7)}.ol-control.ol-toggle button:disabled{background:rgba(0,60,136,.3)}.ol-control.ol-bar .ol-control.ol-option-bar{display:none;position:absolute;top:100%;left:0;margin:5px 0;border-radius:0;background:rgba(255,255,255,.8);-webkit-box-shadow:0 0 0 1px rgba(0,60,136,.5),1px 1px 2px rgba(0,0,0,.5);box-shadow:0 0 0 1px rgba(0,60,136,.5),1px 1px 2px rgba(0,0,0,.5)}.ol-control.ol-bar .ol-option-bar:before{content:"";border:.5em solid transparent;border-color:transparent transparent rgba(0,60,136,.5);position:absolute;bottom:100%;left:.3em}.ol-control.ol-bar .ol-option-bar .ol-control{display:table-cell}.ol-control.ol-bar .ol-control .ol-bar{display:none}.ol-control.ol-bar .ol-control.ol-active>.ol-option-bar{display:block}.ol-control.ol-bar .ol-control.ol-collapsed ul{display:none}.ol-control.ol-bar .ol-control.ol-text-button>button,.ol-control.ol-bar .ol-control.ol-text-button>button:hover{background:0 0;color:rgba(0,60,136,.5);width:auto;min-width:1.375em;margin:0}.ol-control.ol-bar .ol-control.ol-text-button{font-size:.9em;border-left:1px solid rgba(0,60,136,.8);border-radius:0}.ol-control.ol-bar .ol-control.ol-text-button:first-child{border-left:0}.ol-control.ol-bar .ol-control.ol-text-button button{padding:0 .3em;font-weight:400;height:1.4em}.ol-control.ol-bar .ol-control.ol-text-button button:hover{color:rgba(0,60,136,1)}.ol-control.ol-bar.ol-bottom .ol-option-bar{top:auto;bottom:100%}.ol-control.ol-bar.ol-bottom .ol-option-bar:before{border-color:rgba(0,60,136,.5) transparent transparent;bottom:auto;top:100%}.ol-control.ol-bar.ol-left .ol-option-bar{left:100%;top:0;bottom:auto;margin:0 5px}.ol-control.ol-bar.ol-left .ol-option-bar:before{border-color:transparent rgba(0,60,136,.5) transparent transparent;bottom:auto;right:100%;left:auto;top:.3em}.ol-control.ol-bar.ol-right .ol-option-bar{right:100%;left:auto;top:0;bottom:auto;margin:0 5px}.ol-control.ol-bar.ol-right .ol-option-bar:before{border-color:transparent transparent transparent rgba(0,60,136,.5);bottom:auto;left:100%;top:.3em}.ol-control.ol-bar.ol-left .ol-option-bar .ol-option-bar,.ol-control.ol-bar.ol-right .ol-option-bar .ol-option-bar{top:100%;bottom:auto;left:.3em;right:auto;margin:5px 0}.ol-control.ol-bar.ol-right .ol-option-bar .ol-option-bar{right:.3em;left:auto}.ol-control.ol-bar.ol-left .ol-option-bar .ol-option-bar:before,.ol-control.ol-bar.ol-right .ol-option-bar .ol-option-bar:before{border-color:transparent transparent rgba(0,60,136,.5);bottom:100%;top:auto;left:.3em;right:auto}.ol-control.ol-bar.ol-right .ol-option-bar .ol-option-bar:before{right:.3em;left:auto}.ol-gauge{top:.5em;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.ol-gauge>*{display:inline-block;vertical-align:middle}.ol-gauge>span{margin:0 .5em}.ol-gauge>div{width:200px;border:1px solid rgba(0,60,136,.5);border-radius:3px;padding:1px}.ol-gauge button{height:.8em;margin:0;max-width:100%}.ol-control.ol-bookmark{top:.5em;left:3em}.ol-control.ol-bookmark button{position:relative}.ol-control.ol-bookmark>button::before{content:"";position:absolute;border-width:10px 5px 4px;border-style:solid;border-color:#fff #fff transparent;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);height:0}.ol-control.ol-bookmark>div{display:none;min-width:5em}.ol-control.ol-bookmark input{font-size:.9em;margin:.1em 0;padding:0 .5em}.ol-control.ol-bookmark ul{margin:0;padding:0;list-style:none;min-width:10em}.ol-control.ol-bookmark li{color:rgba(0,60,136,.8);font-size:.9em;padding:0 .2em 0 .5em;cursor:default;clear:both}.ol-control.ol-bookmark li:hover{background-color:rgba(0,60,136,.5);color:#fff}.ol-control.ol-bookmark>div button{width:1em;height:.8em;float:right;background-color:transparent;cursor:pointer;border-radius:0}.ol-control.ol-bookmark>div button:before{content:"\\2A2F";color:#936;font-size:1.2em;line-height:1em;border-radius:0;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.ol-bookmark input,.ol-bookmark ul li button{display:none}.ol-bookmark.ol-editable input,.ol-bookmark.ol-editable ul li button{display:block}.ol-control.ol-bar.ol-geobar .ol-control{display:inline-block;vertical-align:middle}.ol-control.ol-bar.ol-geobar .ol-bar{display:none}.ol-bar.ol-geobar.ol-active .ol-bar{display:inline-block}.ol-bar.ol-geobar .geolocBt button:after,.ol-bar.ol-geobar .geolocBt button:before{content:"";display:block;position:absolute;border:1px solid transparent;border-width:.3em .8em 0 .2em;border-color:#fff transparent transparent;-webkit-transform:rotate(-30deg);transform:rotate(-30deg);top:.45em;left:.15em;font-size:1.2em}.ol-bar.ol-geobar .geolocBt button:after{border-width:0 .8em .3em .2em;border-color:transparent transparent #fff;-webkit-transform:rotate(-61deg);transform:rotate(-61deg)}.ol-bar.ol-geobar .startBt button:before{content:"";display:block;position:absolute;width:1em;height:1em;background-color:#800;border-radius:50%;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.ol-bar.ol-geobar .pauseBt button:after,.ol-bar.ol-geobar .pauseBt button:before{content:"";display:block;position:absolute;width:.25em;height:1em;background-color:#fff;top:50%;left:35%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.ol-bar.ol-geobar .pauseBt button:after{left:65%}.ol-bar.ol-geobar.centerTrack .pauseBt,.ol-bar.ol-geobar.centerTrack .startBt,.ol-bar.ol-geobar.centerTrack.pauseTrack .pauseBt,.ol-bar.ol-geobar.pauseTrack .startBt,.ol-control.ol-bar.ol-geobar .centerBt,.ol-control.ol-bar.ol-geobar .pauseBt{display:none}.ol-bar.ol-geobar.centerTrack .centerBt,.ol-bar.ol-geobar.pauseTrack .pauseBt{display:inline-block}.ol-control.ol-globe{position:absolute;left:.5em;bottom:.5em;border-radius:50%;opacity:.7;transform:scale(.5);transform-origin:0 100%;-webkit-transform:scale(.5);-webkit-transform-origin:0 100%}.ol-control.ol-globe:hover{opacity:.9}.ol-control.ol-globe .panel{display:block;width:170px;height:170px;background-color:#fff;cursor:pointer;border-radius:50%;overflow:hidden;-webkit-box-shadow:0 0 10px 5px rgba(255,255,255,.5);box-shadow:0 0 10px 5px rgba(255,255,255,.5)}.ol-control.ol-globe .panel .ol-viewport{border-radius:50%}.ol-control.ol-globe .ol-pointer{display:block;background-color:#fff;width:10px;height:10px;border:10px solid red;position:absolute;top:50%;left:50%;transform:translate(-15px,-40px);-webkit-transform:translate(-15px,-40px);border-radius:50%;z-index:1;transition:opacity .15s,top 0s,left 0s;-webkit-transition:opacity .15s,top 0s,left 0s}.ol-control.ol-globe .ol-pointer::before,.ol-control.ol-globe .panel::after,.ol-control.ol-globe .panel::before{border-radius:50%;content:"";display:block;position:absolute}.ol-control.ol-globe .ol-pointer.hidden{opacity:0;transition:opacity .15s,top 3s,left 5s;-webkit-transition:opacity .15s,top 3s,left 5s}.ol-control.ol-globe .ol-pointer::before{-webkit-box-shadow:6px 6px 10px 5px #000;box-shadow:6px 6px 10px 5px #000;height:0;left:0;top:23px;width:0}.ol-control.ol-globe .ol-pointer::after{content:"";width:0;height:0;display:block;position:absolute;border-width:20px 10px 0;border-color:red transparent;border-style:solid;left:-50%;top:100%}.ol-control.ol-globe .panel::before{-webkit-box-shadow:-20px -20px 80px 2px rgba(0,0,0,.7) inset;box-shadow:-20px -20px 80px 2px rgba(0,0,0,.7) inset;height:100%;left:0;top:0;width:100%;z-index:1}.ol-control.ol-globe .panel::after{-webkit-box-shadow:0 0 20px 7px rgba(255,255,255,1);box-shadow:0 0 20px 7px rgba(255,255,255,1);height:0;left:23%;top:20%;-webkit-transform:rotate(-40deg);transform:rotate(-40deg);width:20%;z-index:1}.ol-control.ol-globe.ol-collapsed .panel,.ol-layerswitcher-popup.ol-collapsed .panel{display:none}.ol-control-top.ol-globe{bottom:auto;top:5em;transform-origin:0 0;-webkit-transform-origin:0 0}.ol-control-right.ol-globe{left:auto;right:.5em;transform-origin:100% 100%;-webkit-transform-origin:100% 100%}.ol-control-right.ol-control-top.ol-globe{left:auto;right:.5em;transform-origin:100% 0;-webkit-transform-origin:100% 0}.ol-gridreference{background:#fff;border:1px solid #000;overflow:auto;max-height:100%;top:0;right:0}.ol-control.ol-layerswitcher,.ol-control.ol-layerswitcher-popup{right:.5em;text-align:left;top:3em;position:absolute}.ol-gridreference input{width:100%}.ol-gridreference ul{margin:0;padding:0;list-style:none}.ol-gridreference li{padding:0 .5em;cursor:pointer}.ol-gridreference ul li:hover{background-color:#ccc}.ol-gridreference li.ol-title,.ol-gridreference li.ol-title:hover{background:rgba(0,60,136,.5);color:#fff;cursor:default}.ol-gridreference ul li .ol-ref{margin-left:.5em}.ol-gridreference ul li .ol-ref:before{content:"("}.ol-gridreference ul li .ol-ref:after{content:")"}.ol-control.ol-layerswitcher-popup .panel{clear:both;background:#fff}.ol-layerswitcher-popup .panel{list-style:none;padding:.25em;margin:0;overflow:hidden}.ol-layerswitcher-popup .panel ul{list-style:none;padding:0 0 0 20px;overflow:hidden}.ol-layerswitcher-popup.ol-forceopen .panel{display:block}.ol-layerswitcher-popup button{background-color:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAACE1BMVEX///8A//8AgICA//8AVVVAQID///8rVVVJtttgv98nTmJ2xNgkW1ttyNsmWWZmzNZYxM4gWGgeU2JmzNNr0N1Rwc0eU2VXxdEhV2JqytQeVmMhVmNoydUfVGUgVGQfVGQfVmVqy9hqy9dWw9AfVWRpydVry9YhVmMgVGNUw9BrytchVWRexdGw294gVWQgVmUhVWPd4N6HoaZsy9cfVmQgVGRrytZsy9cgVWQgVWMgVWRsy9YfVWNsy9YgVWVty9YgVWVry9UgVWRsy9Zsy9UfVWRsy9YgVWVty9YgVWRty9Vsy9aM09sgVWRTws/AzM0gVWRtzNYgVWRuy9Zsy9cgVWRGcHxty9bb5ORbxdEgVWRty9bn6OZTws9mydRfxtLX3Nva5eRix9NFcXxOd4JPeINQeIMiVmVUws9Vws9Vw9BXw9BYxNBaxNBbxNBcxdJexdElWWgmWmhjyNRlx9IqXGtoipNpytVqytVryNNrytZsjZUuX210k5t1y9R2zNR3y9V4lp57zth9zdaAnKOGoaeK0NiNpquV09mesrag1tuitbmj1tuj19uktrqr2d2svcCu2d2xwMO63N+7x8nA3uDC3uDFz9DK4eHL4eLN4eIyYnDX5OM5Z3Tb397e4uDf4uHf5uXi5ePi5+Xj5+Xk5+Xm5+Xm6OY6aHXQ19fT4+NfhI1Ww89gx9Nhx9Nsy9ZWw9Dpj2abAAAAWnRSTlMAAQICAwQEBgcIDQ0ODhQZGiAiIyYpKywvNTs+QklPUlNUWWJjaGt0dnd+hIWFh4mNjZCSm6CpsbW2t7nDzNDT1dje5efr7PHy9PT29/j4+Pn5+vr8/f39/f6DPtKwAAABTklEQVR4Xr3QVWPbMBSAUTVFZmZmhhSXMjNvkhwqMzMzMzPDeD+xASvObKePPa+ffHVl8PlsnE0+qPpBuQjVJjno6pZpSKXYl7/bZyFaQxhf98hHDKEppwdWIW1frFnrxSOWHFfWesSEWC6R/P4zOFrix3TzDFLlXRTR8c0fEEJ1/itpo7SVO9Jdr1DVxZ0USyjZsEY5vZfiiAC0UoTGOrm9PZLuRl8X+Dq1HQtoFbJZbv61i+Poblh/97TC7n0neCcK0ETNUrz1/xPHf+DNAW9Ac6t8O8WH3Vp98f5lCaYKAOFZMLyHL4Y0fe319idMNgMMp+zWVSybUed/+/h7I4wRAG1W6XDy4XmjR9HnzvDRZXUAYDFOhC1S/Hh+fIXxen+eO+AKqbs+wAo30zDTDvDxKoJN88sjUzDFAvBzEUGFsnADoIvAJzoh2BZ8sner+Ke/vwECuQAAAABJRU5ErkJggg==);background-position:center;background-repeat:no-repeat;float:right;height:38px;width:38px}.ol-layerswitcher-popup li{color:#369;padding:.25em 1em;font-family:"Trebuchet MS",Helvetica,sans-serif;cursor:pointer}.ol-layerswitcher-popup li.ol-header{display:none}.ol-layerswitcher-popup li.select{background:rgba(0,60,136,.7);color:#fff}.ol-layerswitcher-popup li:hover{background:rgba(0,60,136,.9);color:#fff}.ol-control.ol-layerswitcher{max-height:calc(100% - 6em);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden}.ol-control.ol-layerswitcher .ol-switcherbottomdiv,.ol-control.ol-layerswitcher .ol-switchertopdiv{display:block;position:absolute;top:0;left:0;right:0;height:45px;background:#fff;z-index:2;opacity:1;cursor:pointer;border-top:2px solid transparent;border-bottom:2px solid #369;margin:0 2px;-webkit-box-sizing:border-box;box-sizing:border-box}.ol-control.ol-layerswitcher.ol-collapsed .ol-switcherbottomdiv,.ol-control.ol-layerswitcher.ol-collapsed .ol-switchertopdiv{display:none}.ol-layerswitcher.ol-forceopen.ol-collapsed .ol-switcherbottomdiv,.ol-layerswitcher.ol-forceopen.ol-collapsed .ol-switchertopdiv{display:block}.ol-control.ol-layerswitcher .ol-switcherbottomdiv{top:auto;bottom:0;height:2em;border-top:2px solid #369;border-bottom:2px solid transparent}.ol-control.ol-layerswitcher .ol-switcherbottomdiv:before,.ol-control.ol-layerswitcher .ol-switchertopdiv:before{content:"";position:absolute;left:50%;top:50%;border:10px solid transparent;width:0;height:0;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);opacity:.8}.ol-control.ol-layerswitcher .ol-switcherbottomdiv:hover:before,.ol-control.ol-layerswitcher .ol-switchertopdiv:hover:before{opacity:1}.ol-control.ol-layerswitcher .ol-switchertopdiv:before{border-bottom-color:#369;border-top:0}.ol-control.ol-layerswitcher .ol-switcherbottomdiv:before{border-top-color:#369;border-bottom:0}.ol-control.ol-layerswitcher .panel{background-color:#fff;border-radius:0 0 2px 2px;clear:both;display:block}.ol-layerswitcher .panel{list-style:none;padding:.5em .5em 0;margin:0;overflow:hidden;font-family:Tahoma,Geneva,sans-serif;font-size:.9em;-webkit-transition:top .3s;transition:top .3s;position:relative;top:0}.ol-layerswitcher .panel ul{list-style:none;padding:0 0 0 20px;overflow:hidden;clear:both}.ol-layerswitcher input[type=radio],.ol-layerswitcher input[type=checkbox]{display:none}.ol-layerswitcher .panel li{-weblit-transition:-webkit-transform .2s linear;-webkit-transition:-webkit-transform .2s linear;transition:-webkit-transform .2s linear;transition:transform .2s linear;transition:transform .2s linear,-webkit-transform .2s linear;clear:both;display:block;#border:1px solid transparent;-webkit-box-sizing:border-box;box-sizing:border-box}.ol-layerswitcher .panel li.drag{opacity:.5;transform:scale(.8);-webkit-transform:scale(.8)}.ol-dragover{background:rgba(51,102,153,.5);opacity:.8}.forbidden .layerswitcher-opacity div,.forbidden .ol-layerswitcher-buttons div,.ol-layerswitcher .panel li.forbidden{background:rgba(255,0,0,.5);color:red!important}.ol-layerswitcher.drag,.ol-layerswitcher.drag *{cursor:not-allowed!important;cursor:no-drop!important}.ol-layerswitcher.drag .panel li.dropover,.ol-layerswitcher.drag .panel li.dropover *{cursor:pointer!important;cursor:n-resize!important;cursor:ns-resize!important;cursor:-webkit-grab!important;cursor:grab!important;cursor:-webkit-grabbing!important;cursor:grabbing!important}.ol-layerswitcher .panel li.dropover{background:rgba(51,102,153,.5)}.ol-layerswitcher .panel li label{display:inline-block;height:1.4em;max-width:12em;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;padding:0 .2em 0 1.7em;position:relative}.ol-layerswitcher [type=radio]+label:before,.ol-layerswitcher [type=radio]:checked+label:after,.ol-layerswitcher [type=checkbox]+label:before,.ol-layerswitcher [type=checkbox]:checked+label:after{content:\'\';position:absolute;left:.1em;top:.1em;width:1.2em;height:1.2em;border:2px solid #369;background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box}.ol-layerswitcher [type=radio]+label:after,.ol-layerswitcher [type=radio]+label:before{border-radius:50%}.ol-layerswitcher [type=radio]:checked+label:after{background:#369;margin:.3em;width:.6em;height:.6em}.ol-layerswitcher [type=checkbox]:checked+label:after{background:0 0;border-width:0 3px 3px 0;border-style:solid;border-color:#369;width:.7em;height:1em;-webkit-transform:rotate(45deg);transform:rotate(45deg);left:.55em;top:-.05em;-webkit-box-shadow:1px 0 1px 1px #fff;box-shadow:1px 0 1px 1px #fff}.ol-layerswitcher .panel li.ol-layer-hidden{opacity:.6}.ol-layerswitcher.ol-collapsed .panel{display:none}.ol-layerswitcher.ol-forceopen .panel{display:block}.ol-layerswitcher button{background-color:#fff;float:right;z-index:10;position:relative;font-size:1.7em}.ol-touch .ol-layerswitcher button{font-size:2.5em}.ol-layerswitcher button:after,.ol-layerswitcher button:before{content:"";position:absolute;width:.75em;height:.75em;border-radius:.15em;-webkit-transform:scaleY(.8) rotate(45deg);transform:scaleY(.8) rotate(45deg)}.ol-layerswitcher button:before{background:#e2e4e1;top:.32em;left:.34em;-webkit-box-shadow:.1em .1em #325158;box-shadow:.1em .1em #325158}.ol-layerswitcher button:after{top:.22em;left:.34em;background:#83bcc5;background-image:radial-gradient(circle at .85em .6em,#70b3be 0,#70b3be .65em,#83bcc5 .65em)}.ol-layerswitcher .layerExtent,.ol-layerswitcher .layerInfo,.ol-layerswitcher .layerTrash{background:#369}.ol-layerswitcher-buttons{display:block;float:right;text-align:right}.ol-layerswitcher .panel li>div,.ol-layerswitcher-buttons>div{display:inline-block;position:relative}.ol-layerswitcher-buttons>div{cursor:pointer;height:1em;width:1em;margin:2px;line-height:1em;text-align:center;background:#369;vertical-align:middle;color:#fff}.ol-layerswitcher .ol-separator{display:block;width:0;height:0;padding:0;margin:0}.ol-layerswitcher .layerup{float:right;height:2.5em;background-color:#369;opacity:.5;cursor:move;cursor:ns-resize}.ol-layerswitcher .layerup:after,.ol-layerswitcher .layerup:before{border-color:#fff transparent;border-style:solid;border-width:.4em .4em 0;content:"";height:0;position:absolute;bottom:3px;left:.1em;width:0}.ol-layerswitcher .layerup:after{border-width:0 .4em .4em;top:3px;bottom:auto}.ol-layerswitcher .layerInfo{border-radius:100%}.ol-layerswitcher .layerInfo:before{color:#fff;content:"i";display:block;font-size:.8em;font-weight:700;text-align:center;width:1.25em;position:absolute;left:0;top:0}.ol-layerswitcher .layerTrash:before{color:#fff;content:"\\00d7";font-size:1em;top:50%;left:0;right:0;text-align:center;line-height:1em;margin:-.5em 0;position:absolute}.ol-layerswitcher .layerExtent:before{border-right:1px solid #fff;border-bottom:1px solid #fff;content:"";display:block;position:absolute;left:6px;right:2px;top:6px;bottom:3px}.ol-layerswitcher .layerExtent:after{border-left:1px solid #fff;border-top:1px solid #fff;content:"";display:block;position:absolute;bottom:6px;left:2px;right:6px;top:3px}.ol-layerswitcher .collapse-layers,.ol-layerswitcher .expend-layers{margin:0 2px;background-color:transparent}.ol-layerswitcher .collapse-layers:before,.ol-layerswitcher .expend-layers:before{content:"";position:absolute;top:50%;left:0;margin-top:-2px;height:4px;width:100%;background:#369}.ol-layerswitcher .expend-layers:after{content:"";position:absolute;left:50%;top:0;margin-left:-2px;width:4px;height:100%;background:#369}.ol-layerswitcher .layerswitcher-opacity{position:relative;border:1px solid #369;height:3px;width:120px;margin:5px 1em 10px 7px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:3px;background:#69c;background:-webkit-gradient(linear,left top,right top,from(rgba(0,60,136,0)),to(rgba(0,60,136,.6)));background:linear-gradient(to right,rgba(0,60,136,0),rgba(0,60,136,.6));cursor:pointer;-webkit-box-shadow:1px 1px 1px rgba(0,0,0,.5);box-shadow:1px 1px 1px rgba(0,0,0,.5)}.ol-overlay,.ol-search input{-webkit-box-sizing:border-box}.ol-layerswitcher .layerswitcher-opacity .layerswitcher-opacity-cursor,.ol-layerswitcher .layerswitcher-opacity .layerswitcher-opacity-cursor:before{position:absolute;width:20px;height:20px;top:50%;left:50%;background:rgba(0,60,136,.5);border-radius:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);z-index:1}.ol-layerswitcher-image button,.ol-permalink button,.ol-profil button{background-position:center;background-repeat:no-repeat}.ol-layerswitcher .layerswitcher-opacity .layerswitcher-opacity-cursor:before{content:"";position:absolute;width:50%;height:50%}.ol-touch .ol-layerswitcher .layerswitcher-opacity .layerswitcher-opacity-cursor{width:26px;height:26px}.ol-layerswitcher .layerswitcher-opacity-label{display:none;position:absolute;right:-2.5em;bottom:5px;font-size:.8em}.ol-layerswitcher .layerswitcher-opacity-label::after{content:"%"}.ol-layerswitcher .layerswitcher-progress{display:block;margin:-4px 1em 2px 7px;width:120px}.ol-layerswitcher .layerswitcher-progress div{background-color:#369;height:2px;display:block;width:0}.ol-control.ol-layerswitcher-image{position:absolute;right:.5em;text-align:left;top:1em;transition:all .2s ease 0s;-webkit-transition:all .2s ease 0s}.ol-control.ol-layerswitcher-image.ol-collapsed{top:3em;transition:none;-webkit-transition:none}.ol-layerswitcher-image .panel{list-style:none;padding:.25em;margin:0;overflow:hidden}.ol-layerswitcher-image .panel ul{list-style:none;padding:0 0 0 20px;overflow:hidden}.ol-layerswitcher-image.ol-collapsed .panel{display:none}.ol-layerswitcher-image.ol-forceopen .panel{display:block;clear:both}.ol-layerswitcher-image button{background-color:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAACE1BMVEX///8A//8AgICA//8AVVVAQID///8rVVVJtttgv98nTmJ2xNgkW1ttyNsmWWZmzNZYxM4gWGgeU2JmzNNr0N1Rwc0eU2VXxdEhV2JqytQeVmMhVmNoydUfVGUgVGQfVGQfVmVqy9hqy9dWw9AfVWRpydVry9YhVmMgVGNUw9BrytchVWRexdGw294gVWQgVmUhVWPd4N6HoaZsy9cfVmQgVGRrytZsy9cgVWQgVWMgVWRsy9YfVWNsy9YgVWVty9YgVWVry9UgVWRsy9Zsy9UfVWRsy9YgVWVty9YgVWRty9Vsy9aM09sgVWRTws/AzM0gVWRtzNYgVWRuy9Zsy9cgVWRGcHxty9bb5ORbxdEgVWRty9bn6OZTws9mydRfxtLX3Nva5eRix9NFcXxOd4JPeINQeIMiVmVUws9Vws9Vw9BXw9BYxNBaxNBbxNBcxdJexdElWWgmWmhjyNRlx9IqXGtoipNpytVqytVryNNrytZsjZUuX210k5t1y9R2zNR3y9V4lp57zth9zdaAnKOGoaeK0NiNpquV09mesrag1tuitbmj1tuj19uktrqr2d2svcCu2d2xwMO63N+7x8nA3uDC3uDFz9DK4eHL4eLN4eIyYnDX5OM5Z3Tb397e4uDf4uHf5uXi5ePi5+Xj5+Xk5+Xm5+Xm6OY6aHXQ19fT4+NfhI1Ww89gx9Nhx9Nsy9ZWw9Dpj2abAAAAWnRSTlMAAQICAwQEBgcIDQ0ODhQZGiAiIyYpKywvNTs+QklPUlNUWWJjaGt0dnd+hIWFh4mNjZCSm6CpsbW2t7nDzNDT1dje5efr7PHy9PT29/j4+Pn5+vr8/f39/f6DPtKwAAABTklEQVR4Xr3QVWPbMBSAUTVFZmZmhhSXMjNvkhwqMzMzMzPDeD+xASvObKePPa+ffHVl8PlsnE0+qPpBuQjVJjno6pZpSKXYl7/bZyFaQxhf98hHDKEppwdWIW1frFnrxSOWHFfWesSEWC6R/P4zOFrix3TzDFLlXRTR8c0fEEJ1/itpo7SVO9Jdr1DVxZ0USyjZsEY5vZfiiAC0UoTGOrm9PZLuRl8X+Dq1HQtoFbJZbv61i+Poblh/97TC7n0neCcK0ETNUrz1/xPHf+DNAW9Ac6t8O8WH3Vp98f5lCaYKAOFZMLyHL4Y0fe319idMNgMMp+zWVSybUed/+/h7I4wRAG1W6XDy4XmjR9HnzvDRZXUAYDFOhC1S/Hh+fIXxen+eO+AKqbs+wAo30zDTDvDxKoJN88sjUzDFAvBzEUGFsnADoIvAJzoh2BZ8sner+Ke/vwECuQAAAABJRU5ErkJggg==);float:right;height:38px;width:38px;display:none}.ol-layerswitcher-image.ol-collapsed button{display:block;position:relative}.ol-layerswitcher-image li{border-radius:4px;border:3px solid transparent;-webkit-box-shadow:1px 1px 4px rgba(0,0,0,.5);box-shadow:1px 1px 4px rgba(0,0,0,.5);display:inline-block;width:64px;height:64px;margin:2px;position:relative;background-color:#fff;overflow:hidden;vertical-align:middle;cursor:pointer}.ol-layerswitcher-image li p,.ol-layerswitcher-image li.ol-header{display:none}.ol-layerswitcher-image li.ol-layer-hidden{opacity:.5;border-color:#555}.ol-layerswitcher-image li img{position:absolute;max-width:100%}.ol-layerswitcher-image li.select{border:3px solid red}.ol-layerswitcher-image li:hover p{background-color:rgba(0,0,0,.5);color:#fff;bottom:0;display:block;left:0;margin:0;overflow:hidden;position:absolute;right:0;text-align:center;height:1.2em;font-family:Verdana,Geneva,sans-serif;font-size:.8em}.ol-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.4);padding:1em;color:#fff;box-sizing:border-box;z-index:1;opacity:0;display:none;cursor:default;overflow:hidden;-webkit-transition:all .5s;transition:all .5s}.ol-overlay.stretch,.ol-overlay.stretchy,.ol-overlay.zoom,.ol-overlay.zoomrotate{top:50%;left:50%;opacity:.5}.ol-overlay.slide-up{transform:translateY(100%);-webkit-transform:translateY(100%)}.ol-overlay.slide-down{-webkit-transform:translateY(-100%);transform:translateY(-100%)}.ol-overlay.slide-left{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.ol-overlay.slide-right{-webkit-transform:translateX(100%);transform:translateX(100%)}.ol-overlay.zoom{-webkit-transform:translate(-50%,-50%) scale(0);transform:translate(-50%,-50%) scale(0)}.ol-overlay.zoomout{-webkit-transform:scale(3);transform:scale(3)}.ol-overlay.zoomrotate{-webkit-transform:translate(-50%,-50%) scale(0) rotate(360deg);transform:translate(-50%,-50%) scale(0) rotate(360deg)}.ol-overlay.stretch{-webkit-transform:translate(-50%,-50%) scaleX(0);transform:translate(-50%,-50%) scaleX(0)}.ol-overlay.stretchy{-webkit-transform:translate(-50%,-50%) scaleY(0);transform:translate(-50%,-50%) scaleY(0)}.ol-overlay.wipe{opacity:1}.ol-overlay.flip{-webkit-transform:perspective(600px) rotateY(180deg);transform:perspective(600px) rotateY(180deg)}.ol-overlay.card{opacity:.5;-webkit-transform:translate(-80%,100%) rotate(-.5turn);transform:translate(-80%,100%) rotate(-.5turn)}.ol-overlay.book{-webkit-transform:perspective(600px) rotateY(-180deg) scaleX(.6);transform:perspective(600px) rotateY(-180deg) scaleX(.6);-webkit-transform-origin:10% 50%;transform-origin:10% 50%}.ol-overlay.book.visible{-webkit-transform-origin:10% 50%;transform-origin:10% 50%}.ol-overlay.ol-visible{opacity:1;top:0;left:0;right:0;bottom:0;-webkit-transform:none;transform:none}.ol-overlay .ol-closebox{position:absolute;top:1em;right:1em;width:1em;height:1em;cursor:pointer;z-index:1}.ol-overlay .ol-closebox:before{content:"\\274c";display:block;text-align:center;vertical-align:middle}.ol-control.ol-overview{position:absolute;left:.5em;text-align:left;bottom:.5em}.ol-control.ol-overview .panel{display:block;width:150px;height:150px;margin:2px;background-color:#fff;border:1px solid #369;cursor:pointer}.ol-overview:not(.ol-collapsed) button{position:absolute;bottom:2px;left:2px;z-index:2}.ol-control.ol-overview.ol-collapsed .panel{display:none}.ol-overview.ol-collapsed button:before{content:\'\\00bb\'}.ol-control-right.ol-overview.ol-collapsed button:before,.ol-overview button:before{content:\'\\00ab\'}.ol-control-right.ol-overview{left:auto;right:.5em}.ol-control-right.ol-overview:not(.ol-collapsed) button{left:auto;right:2px}.ol-control-right.ol-overview button:before{content:\'\\00bb\'}.ol-control-top.ol-overview{bottom:auto;top:5em}.ol-control-top.ol-overview:not(.ol-collapsed) button{bottom:auto;top:2px}.ol-permalink{position:absolute;top:.5em;right:2.5em}.ol-touch .ol-permalink{right:3em}.ol-permalink button{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AcFBjYE1ZK03gAAAUlJREFUOMuVk71KA1EQhc/NaiP+gCRpFHwGBSFlCrFVfAsbwSJCBMv06QIGJOBziI3EYAgkjU8gIloIAasIn4WzMqx34zrN7J6de+6ZmbNSgQDSfADcATPgHbgCyvonSYv8KEzWdofegH3gwmG9Ikq67sAESFzNueHThTyiEIKAmr2OJCUhhO30Aou+5aUQU2Ik65K2JC1KegohPGfUBkmvksqShnntHEcGOs60NXHfjmKz6czZTsNqbhzW+muwY2ATWAWawCOwBgxcTfvnvCPxKx4Cy5bPgBWgauRpdL2ImNlGhp3MabETm8mh94nDk4yCNE5/KTGg7xxbyhYAG0AN2AEqURIDZ0a0Fxn+LXAPXDpzRqMk6cOedz1ubdYl1b6NHgZRJe72nuu/CdSBl+yKi/zZlTnbaeXOJIesClwDU+ATeEhtX5TkCwAWUyAsHH1QAAAAAElFTkSuQmCC)}.ol-control.ol-profil{position:absolute;top:.5em;right:3em;text-align:right;overflow:hidden}.ol-profil .ol-inner{position:relative;padding:.5em;font-size:.8em}.ol-control.ol-profil .ol-inner{display:block;background-color:rgba(255,255,255,.7);margin:2.3em 2px 2px}.ol-control.ol-profil.ol-collapsed .ol-inner{display:none}.ol-profil canvas{display:block}.ol-profil button{display:block;position:absolute;right:2px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAPCAYAAAALWoRrAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AgXCR4dn7j9TAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAz0lEQVQ4y7WTMU4CURRFz0xIpLUBEhdAY2tJYW1jaWlsXYVxDWyBhWCFCYugYgnDFPMOhTMJGf3AwHiqn/uTk5v/3gfAH6b0RH7sMiIe1Ts162z+q2lVVbd1XqijLuJk0zzP1/VxCGyApLgsy+HJphGx8DeFOm6L1bn6eVQaEW+m2amTRqx+1fkqKY2Ie0+zUx/U7WGYfNMsy57PmMMN8A1MWsWeUoPyivV8PWtPOzL7D+lYHfUtBXgHGLTCJfBxodD6k9Dsm8BLE17LobQ39nJC61aLVoVsAAAAAElFTkSuQmCC)}.ol-profil.ol-collapsed button{position:static}.ol-profil .ol-profilbar,.ol-profil .ol-profilcursor{position:absolute;pointer-events:none;width:1px;display:none}.ol-profil .ol-profilcursor{width:0;height:0}.ol-profil .ol-profilcursor:before{content:"";pointer-events:none;display:block;margin:-2px;width:5px;height:5px}.ol-profil .ol-profilbar,.ol-profil .ol-profilcursor:before{background:red}.ol-profil table{text-align:center}.ol-profil table span{display:block}.ol-profilpopup{background-color:rgba(255,255,255,.5);margin:.5em;padding:0 .5em;position:absolute;top:-1em;white-space:nowrap}.ol-profilpopup.ol-left{right:0}.ol-profil table td{padding:0 2px}.ol-profil table .track-info{display:table-row}.ol-profil .over table .track-info,.ol-profil table .point-info{display:none}.ol-profil .over table .point-info{display:table-row}.ol-profil p{text-align:center;margin:0}.ol-viewport .ol-scale{left:.5em;bottom:2.5em;text-align:center;-webkit-transform:scaleX(.8);-webkit-transform-origin:0 0;transform:scaleX(.8);transform-origin:0 0}.ol-viewport .ol-scale input{background:0 0;border:0;width:8em;text-align:center}.ol-search{top:.5em;left:3em}.ol-touch .ol-search{left:3.5em}.ol-search button{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAABPUlEQVQoU41SwXHCQAzUHh58eoUOIBWEDkI6oAToIKkg7iAuwakgpAIowXRACcnrzp6BzchjMx4wE/S6kW5XK60gvQghzJIkmVoqSZI9gJ9+/fINS5Cc1HX9QXIlIr/tpwcRyb33b7cIGnAIYQdg4pxbjcfj0nJ1Xc+Px+PGObdN03Q9RIAQwgpAnqbp7FKmjQGgJLlU1d2V7BjjRkQO3vvXIXarkyxVNbsCm2QR2Q0V7XOMMReRmfd+OQQubN6hYgs22ZtbnRcAtiRfLueqqmpJ8ovko6oeBq0KIWQA3gFkzrlmMafTaUEyI/mpqmbhVTRWWbRdbClPbeobQNES5KPRqOxs7DBn8K1DsAOKMZYApiTXqlrcDe4d0XN7jWeCfzt351tVle2iGalTcBd4gGDvvZ/fDe4RmCOFLe8Pr7mvEP2N9PQAAAAASUVORK5CYII=);background-repeat:no-repeat;background-position:center center;background-size:1em;top:2px;left:2px;float:left}.ol-search input{display:inline-block;border:0;margin:1px 1px 1px 2px;font-size:1.14em;padding-left:.3em;height:1.375em;box-sizing:border-box;-webkit-transition:all .1s;transition:all .1s}.ol-touch .ol-search input,.ol-touch .ol-search ul{font-size:1.5em}.ol-control.ol-search.ol-collapsed>*{display:none}.ol-control.ol-search.ol-collapsed>button,.ol-search ul{display:block}.ol-search ul{list-style:none;padding:0;margin:0;clear:both;cursor:pointer;max-width:17em;overflow-x:hidden}.ol-control.ol-search ul li{padding:.1em .5em}.ol-search ul li{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ol-search ul li.select,.ol-search ul li:hover{background-color:rgba(0,60,136,.5);color:#fff}.ol-search ul li img{float:left;max-height:2em}.ol-search li.copy{background:rgba(0,0,0,.5);color:#fff}.ol-search li.copy a{color:#fff}.ol-search.searching:before{content:\'\';position:absolute;height:3px;left:0;top:1.6em;-webkit-animation:pulse .5s infinite alternate linear;animation:pulse .5s infinite alternate linear;background:red}@-webkit-keyframes pulse{0%{left:0;right:95%}50%{left:30%;right:30%}100%{left:95%;right:0}}@keyframes pulse{0%{left:0;right:95%}50%{left:30%;right:30%}100%{left:95%;right:0}}.ol-swipe,.ol-swipe:before{left:50%;position:absolute}.ol-search.IGNF-parcelle input{width:13.5em}.ol-search.IGNF-parcelle input:-moz-read-only{background:#ccc;opacity:.8}.ol-search.IGNF-parcelle input:read-only{background:#ccc;opacity:.8}.ol-search.IGNF-parcelle.ol-collapsed-list>ul.autocomplete{display:none}.ol-search.IGNF-parcelle label{display:block;clear:both}.ol-search.IGNF-parcelle>div *{width:5em;-webkit-box-sizing:border-box;box-sizing:border-box;display:inline-block;margin:.1em;font-size:1em}.ol-search.IGNF-parcelle ul.autocomplete-page{margin-top:.5em;width:100%;text-align:center;display:none}.ol-search.IGNF-parcelle.ol-collapsed-list ul.autocomplete-page,.ol-search.IGNF-parcelle.ol-collapsed-list ul.autocomplete-parcelle{display:block}.ol-search.IGNF-parcelle ul.autocomplete-parcelle,.ol-search.IGNF-parcelle.ol-collapsed ul.autocomplete-page,.ol-search.IGNF-parcelle.ol-collapsed ul.autocomplete-parcelle{display:none}.ol-search.IGNF-parcelle ul.autocomplete-page li{display:inline-block;color:#fff;background:rgba(0,60,136,.5);border-radius:50%;width:1.3em;height:1.3em;padding:.1em;margin:0 .1em}.ol-search.IGNF-parcelle ul.autocomplete-page li.selected{background:rgba(0,60,136,1)}.ol-swipe{top:50%;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%)}.ol-swipe:before{content:"";top:-5000px;bottom:-5000px;width:4px;background:#fff;z-index:-1;transform:translate(-2px,0);-webkit-transform:translate(-2px,0)}.ol-swipe.horizontal:before{left:-5000px;right:-5000px;top:50%;bottom:auto;width:auto;height:4px}.ol-popup-right .anchor,.ol-popup-right .anchor:after,.ol-popup-right .anchor:before{right:0}.ol-swipe,.ol-swipe button{cursor:ew-resize}.ol-swipe.horizontal,.ol-swipe.horizontal button{cursor:ns-resize}.ol-swipe button:after,.ol-swipe button:before,.ol-swipe:after{content:"";position:absolute;top:25%;bottom:25%;left:50%;width:2px;background:rgba(255,255,255,.8);transform:translate(-1px,0);-webkit-transform:translate(-1px,0)}.ol-swipe button:after{transform:translateX(5px);-webkit-transform:translateX(5px)}.ol-swipe button:before{transform:translateX(-7px);-webkit-transform:translateX(-7px)}.ol-target-overlay .ol-target{border:1px solid transparent;-webkit-box-shadow:0 0 1px 1px #fff;box-shadow:0 0 1px 1px #fff;display:block;height:20px;width:0}.ol-target-overlay .ol-target:after,.ol-target-overlay .ol-target:before{content:"";border:1px solid #369;-webkit-box-shadow:0 0 1px 1px #fff;box-shadow:0 0 1px 1px #fff;display:block;width:20px;height:0;position:absolute;top:10px;left:-10px}.ol-target-overlay .ol-target:after{-webkit-box-shadow:none;box-shadow:none;height:20px;width:0;top:0;left:0}.ol-overlay-container .ol-magnify{background:rgba(0,0,0,.5);border:3px solid #369;border-radius:50%;height:150px;width:150px;overflow:hidden;-webkit-box-shadow:5px 5px 5px rgba(0,0,0,.5);box-shadow:5px 5px 5px rgba(0,0,0,.5);position:relative;z-index:0}.ol-overlay-container .ol-magnify:after,.ol-overlay-container .ol-magnify:before{border-radius:50%;z-index:1;content:"";display:block;position:absolute}.ol-overlay-container .ol-magnify:before{-webkit-box-shadow:0 0 40px 2px rgba(0,0,0,.25) inset;box-shadow:0 0 40px 2px rgba(0,0,0,.25) inset;height:100%;left:0;top:0;width:100%}.ol-overlay-container .ol-magnify:after{-webkit-box-shadow:0 0 20px 7px rgba(255,255,255,1);box-shadow:0 0 20px 7px rgba(255,255,255,1);height:0;left:23%;top:20%;width:20%;transform:rotate(-40deg);-webkit-transform:rotate(-40deg)}.ol-popup.anim{visibility:hidden}.ol-popup.anim.visible{visibility:visible;transform:none;-webkit-transform:none;-webkit-animation:ol-popup_bounce .4s ease 1;animation:ol-popup_bounce .4s ease 1}@-webkit-keyframes ol-popup_bounce{from{-webkit-transform:scale(0);transform:scale(0)}50%{-webkit-transform:scale(1.1);transform:scale(1.1)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}@keyframes ol-popup_bounce{from{-webkit-transform:scale(0);transform:scale(0)}50%{-webkit-transform:scale(1.1);transform:scale(1.1)}80%{-webkit-transform:scale(.95);transform:scale(.95)}to{-webkit-transform:scale(1);transform:scale(1)}}.ol-popup.anim.visible .anchor{-webkit-animation:ol-popup_opacity .4s ease 1;animation:ol-popup_opacity .4s ease 1}@-webkit-keyframes ol-popup_opacity{from,to{visibility:hidden}}@keyframes ol-popup_opacity{from,to{visibility:hidden}}.ol-popup.anim.ol-popup-bottom.ol-popup-left{transform-origin:0 100%;-webkit-transform-origin:0 100%}.ol-popup.anim.ol-popup-bottom.ol-popup-right{transform-origin:100% 100%;-webkit-transform-origin:100% 100%}.ol-popup.anim.ol-popup-bottom.ol-popup-center{transform-origin:50% 100%;-webkit-transform-origin:50% 100%}.ol-popup.anim.ol-popup-top.ol-popup-left{transform-origin:0 0;-webkit-transform-origin:0 0}.ol-popup.anim.ol-popup-top.ol-popup-right{transform-origin:100% 0;-webkit-transform-origin:100% 0}.ol-popup.anim.ol-popup-top.ol-popup-center{transform-origin:50% 0;-webkit-transform-origin:50% 0}.ol-popup.anim.ol-popup-middle.ol-popup-left{transform-origin:0 50%;-webkit-transform-origin:0 50%}.ol-popup.anim.ol-popup-middle.ol-popup-right{transform-origin:100% 50%;-webkit-transform-origin:100% 50%}.ol-popup{font-size:.9em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ol-popup .content{overflow:hidden;cursor:default;padding:.25em .5em}.ol-popup.hasclosebox .content{margin-right:1.7em}.ol-popup .content:after{clear:both;content:"";display:block;font-size:0;height:0}.ol-popup .anchor{display:block;width:0;height:0;background:red;position:absolute;margin:-11px 21px;pointer-events:none}.ol-popup .anchor:after,.ol-popup .anchor:before{position:absolute}.ol-popup-top .anchor{top:0}.ol-popup-bottom .anchor{bottom:0}.ol-popup-left .anchor{left:0}.ol-popup-center .anchor{left:50%;margin-left:0!important}.ol-popup-middle .anchor{top:50%;margin-top:0!important}.ol-popup-center.ol-popup-middle .anchor{display:none}.ol-popup.shadow{-webkit-box-shadow:2px 2px 2px 2px rgba(0,0,0,.5);box-shadow:2px 2px 2px 2px rgba(0,0,0,.5)}.ol-popup .closeBox{background-color:rgba(0,60,136,.5);color:#fff;border:0;border-radius:2px;cursor:pointer;float:right;font-size:.9em;font-weight:700;width:1.4em;height:1.4em;margin:5px 5px 0 0;padding:0;position:relative;display:none}.ol-popup.hasclosebox .closeBox{display:block}.ol-popup .closeBox:hover{background-color:rgba(0,60,136,.7)}.ol-popup .closeBox:after{content:"\\00d7";font-size:1.5em;top:50%;left:0;right:0;width:100%;text-align:center;line-height:1em;margin:-.5em 0;position:absolute}.ol-popup.modifytouch .content,.ol-popup.tooltips .content{padding:0 .25em;font-size:.85em;white-space:nowrap}.ol-popup.modifytouch{background-color:#eee}.ol-popup.tooltips{background-color:#ffa}.ol-popup.default{background-color:#fff;border:1px solid #69f;border-radius:5px;margin:11px 0}.ol-popup-left.default{margin:11px 10px 11px -22px}.ol-popup-right.default{margin:11px -22px 11px 10px}.ol-popup-middle.default{margin:0 10px}.ol-popup.default .anchor:after,.ol-popup.default .anchor:before{content:"";border-color:#69f transparent;border-style:solid;border-width:11px;margin:0 -11px}.ol-popup.default .anchor:after{border-color:#fff transparent;border-width:9px;margin:3px -9px}.ol-popup-top.default .anchor:after,.ol-popup-top.default .anchor:before{border-top:0;top:0}.ol-popup-bottom.default .anchor:after,.ol-popup-bottom.default .anchor:before{border-bottom:0;bottom:0}.ol-popup-middle.default .anchor:before{margin:-11px -33px;border-color:transparent #69f}.ol-popup-middle.default .anchor:after{margin:-9px -30px;border-color:transparent #fff}.ol-popup-middle.ol-popup-left.default .anchor:after,.ol-popup-middle.ol-popup-left.default .anchor:before{border-left:0}.ol-popup-middle.ol-popup-right.default .anchor:after,.ol-popup-middle.ol-popup-right.default .anchor:before{border-right:0}.ol-popup.black .closeBox{background-color:rgba(0,0,0,.5);border-radius:5px;color:#f80}.ol-popup.black .closeBox:hover{background-color:rgba(0,0,0,.7);color:#da2}.ol-popup.black{background-color:rgba(0,0,0,.6);border-radius:5px;margin:20px 0;color:#fff}.ol-popup-left.black{margin:20px 10px 20px -22px}.ol-popup-right.black{margin:20px -22px 20px 10px}.ol-popup-middle.black{margin:0 11px}.ol-popup.black .anchor{margin:-20px 11px}.ol-popup.black .anchor:before{content:"";border-color:rgba(0,0,0,.6) transparent;border-style:solid;border-width:20px 11px}.ol-popup-top.black .anchor:before{border-top:0;top:0}.ol-popup-bottom.black .anchor:before{border-bottom:0;bottom:0}.ol-popup-middle.black .anchor:before{margin:-20px -22px;border-color:transparent rgba(0,0,0,.6)}.ol-popup-middle.ol-popup-left.black .anchor:before{border-left:0}.ol-popup-middle.ol-popup-right.black .anchor:before{border-right:0}.ol-popup-center.black .anchor:before{margin:0 -10px}.ol-popup.tips .closeBox{background-color:red;border-radius:50%;color:#fff;width:1.2em;height:1.2em}.ol-popup.tips .closeBox:hover{background-color:#f40}.ol-popup.tips{background-color:#cea;border:5px solid #ad7;border-radius:5px;margin:20px 0;color:#333}.ol-popup-left.tips{margin:20px 10px 20px -22px}.ol-popup-right.tips{margin:20px -22px 20px 10px}.ol-popup-middle.tips{margin:0 20px}.ol-popup.tips .anchor{margin:-25px 16px}.ol-popup.tips .anchor:before{content:"";border-color:#ad7 transparent;border-style:solid;border-width:20px 11px}.ol-popup-top.tips .anchor:before{border-top:0;top:0}.ol-popup-bottom.tips .anchor:before{border-bottom:0;bottom:0}.ol-popup-center.tips .anchor:before{border-width:20px 6px;margin:0 -6px}.ol-popup-left.tips .anchor:before{border-left:0;margin-left:0}.ol-popup-right.tips .anchor:before{border-right:0;margin-right:0}.ol-popup-middle.tips .anchor:before{margin:-6px -41px;border-color:transparent #ad7;border-width:6px 20px}.ol-popup-middle.ol-popup-left.tips .anchor:before{border-left:0}.ol-popup-middle.ol-popup-right.tips .anchor:before{border-right:0}.ol-popup.warning .closeBox{background-color:red;border-radius:50%;color:#fff;font-size:.83em}.ol-popup.warning .closeBox:hover{background-color:#f40}.ol-popup.warning{background-color:#fd0;border-radius:3px;border:4px dashed red;color:#900;margin:28px 10px}.ol-popup-left.warning{margin-left:-22px;margin-right:10px}.ol-popup-right.warning{margin-right:-22px;margin-left:10px}.ol-popup-middle.warning{margin:0 22px}.ol-popup.warning .anchor{margin:-33px 7px}.ol-popup.warning .anchor:before{content:"";border-color:red transparent;border-style:solid;border-width:30px 11px}.ol-popup-top.warning .anchor:before{border-top:0;top:0}.ol-popup-bottom.warning .anchor:before{border-bottom:0;bottom:0}.ol-popup-center.warning .anchor:before{margin:0 -21px}.ol-popup-middle.warning .anchor:before{margin:-10px -33px;border-color:transparent red;border-width:10px 22px}.ol-popup-middle.ol-popup-left.warning .anchor:before{border-left:0}.ol-popup-middle.ol-popup-right.warning .anchor:before{border-right:0}\r\n',""])},function(e,t,r){var n=r(18);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(5)(n,o);n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(4)(!1)).push([e.i,'.ol-box{box-sizing:border-box;border-radius:2px;border:2px solid #00f}.ol-mouse-position{top:8px;right:8px;position:absolute}.ol-scale-line{background:rgba(0,60,136,.3);border-radius:4px;bottom:8px;left:8px;padding:2px;position:absolute}.ol-scale-line-inner{border:1px solid #eee;border-top:none;color:#eee;font-size:10px;text-align:center;margin:1px;will-change:contents,width}.ol-overlay-container{will-change:left,right,top,bottom}.ol-unsupported{display:none}.ol-unselectable,.ol-viewport{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ol-selectable{-webkit-touch-callout:default;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.ol-grabbing{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.ol-grab{cursor:move;cursor:-webkit-grab;cursor:-moz-grab;cursor:grab}.ol-control{position:absolute;background-color:rgba(255,255,255,.4);border-radius:4px;padding:2px}.ol-control:hover{background-color:rgba(255,255,255,.6)}.ol-zoom{top:.5em;left:.5em}.ol-rotate{top:.5em;right:.5em;transition:opacity .25s linear,visibility 0s linear}.ol-rotate.ol-hidden{opacity:0;visibility:hidden;transition:opacity .25s linear,visibility 0s linear .25s}.ol-zoom-extent{top:4.643em;left:.5em}.ol-full-screen{right:.5em;top:.5em}@media print{.ol-control{display:none}}.ol-control button{display:block;margin:1px;padding:0;color:#fff;font-size:1.14em;font-weight:700;text-decoration:none;text-align:center;height:1.375em;width:1.375em;line-height:.4em;background-color:rgba(0,60,136,.5);border:none;border-radius:2px}.ol-control button::-moz-focus-inner{border:none;padding:0}.ol-zoom-extent button{line-height:1.4em}.ol-compass{display:block;font-weight:400;font-size:1.2em;will-change:transform}.ol-touch .ol-control button{font-size:1.5em}.ol-touch .ol-zoom-extent{top:5.5em}.ol-control button:focus,.ol-control button:hover{text-decoration:none;background-color:rgba(0,60,136,.7)}.ol-zoom .ol-zoom-in{border-radius:2px 2px 0 0}.ol-zoom .ol-zoom-out{border-radius:0 0 2px 2px}.ol-attribution{text-align:right;bottom:.5em;right:.5em;max-width:calc(100% - 1.3em)}.ol-attribution ul{margin:0;padding:0 .5em;font-size:.7rem;line-height:1.375em;color:#000;text-shadow:0 0 2px #fff}.ol-attribution li{display:inline;list-style:none;line-height:inherit}.ol-attribution li:not(:last-child):after{content:" "}.ol-attribution img{max-height:2em;max-width:inherit;vertical-align:middle}.ol-attribution button,.ol-attribution ul{display:inline-block}.ol-attribution.ol-collapsed ul{display:none}.ol-attribution:not(.ol-collapsed){background:rgba(255,255,255,.8)}.ol-attribution.ol-uncollapsible{bottom:0;right:0;border-radius:4px 0 0;height:1.1em;line-height:1em}.ol-attribution.ol-uncollapsible img{margin-top:-.2em;max-height:1.6em}.ol-attribution.ol-uncollapsible button{display:none}.ol-zoomslider{top:4.5em;left:.5em;height:200px}.ol-zoomslider button{position:relative;height:10px}.ol-touch .ol-zoomslider{top:5.5em}.ol-overviewmap{left:.5em;bottom:.5em}.ol-overviewmap.ol-uncollapsible{bottom:0;left:0;border-radius:0 4px 0 0}.ol-overviewmap .ol-overviewmap-map,.ol-overviewmap button{display:inline-block}.ol-overviewmap .ol-overviewmap-map{border:1px solid #7b98bc;height:150px;margin:2px;width:150px}.ol-overviewmap:not(.ol-collapsed) button{bottom:1px;left:2px;position:absolute}.ol-overviewmap.ol-collapsed .ol-overviewmap-map,.ol-overviewmap.ol-uncollapsible button{display:none}.ol-overviewmap:not(.ol-collapsed){background:rgba(255,255,255,.8)}.ol-overviewmap-box{border:2px dotted rgba(0,60,136,.7)}.ol-overviewmap .ol-overviewmap-box:hover{cursor:move}\r\n',""])},function(e,t,r){"use strict";
/** @license React v16.7.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(8),o="function"==typeof Symbol&&Symbol.for,l=o?Symbol.for("react.element"):60103,a=o?Symbol.for("react.portal"):60106,i=o?Symbol.for("react.fragment"):60107,s=o?Symbol.for("react.strict_mode"):60108,c=o?Symbol.for("react.profiler"):60114,u=o?Symbol.for("react.provider"):60109,p=o?Symbol.for("react.context"):60110,f=o?Symbol.for("react.concurrent_mode"):60111,d=o?Symbol.for("react.forward_ref"):60112,g=o?Symbol.for("react.suspense"):60113,h=o?Symbol.for("react.memo"):60115,m=o?Symbol.for("react.lazy"):60116,b="function"==typeof Symbol&&Symbol.iterator;function A(e){for(var t=arguments.length-1,r="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);!function(e,t,r,n,o,l,a,i){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[r,n,o,l,a,i],c=0;(e=Error(t.replace(/%s/g,function(){return s[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",r)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function w(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||y}function x(){}function k(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||y}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&A("85"),this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=w.prototype;var C=k.prototype=new x;C.constructor=k,n(C,w.prototype),C.isPureReactComponent=!0;var E={current:null,currentDispatcher:null},I=Object.prototype.hasOwnProperty,S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var n=void 0,o={},a=null,i=null;if(null!=t)for(n in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(a=""+t.key),t)I.call(t,n)&&!S.hasOwnProperty(n)&&(o[n]=t[n]);var s=arguments.length-2;if(1===s)o.children=r;else if(1<s){for(var c=Array(s),u=0;u<s;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===o[n]&&(o[n]=s[n]);return{$$typeof:l,type:e,key:a,ref:i,props:o,_owner:E.current}}function B(e){return"object"==typeof e&&null!==e&&e.$$typeof===l}var N=/\/+/g,R=[];function M(e,t,r,n){if(R.length){var o=R.pop();return o.result=e,o.keyPrefix=t,o.func=r,o.context=n,o.count=0,o}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>R.length&&R.push(e)}function Q(e,t,r){return null==e?0:function e(t,r,n,o){var i=typeof t;"undefined"!==i&&"boolean"!==i||(t=null);var s=!1;if(null===t)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case l:case a:s=!0}}if(s)return n(o,t,""===r?"."+O(t,0):r),1;if(s=0,r=""===r?".":r+":",Array.isArray(t))for(var c=0;c<t.length;c++){var u=r+O(i=t[c],c);s+=e(i,u,n,o)}else if(u=null===t||"object"!=typeof t?null:"function"==typeof(u=b&&t[b]||t["@@iterator"])?u:null,"function"==typeof u)for(t=u.call(t),c=0;!(i=t.next()).done;)s+=e(i=i.value,u=r+O(i,c++),n,o);else"object"===i&&A("31","[object Object]"==(n=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":n,"");return s}(e,"",t,r)}function O(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function j(e,t){e.func.call(e.context,t,e.count++)}function L(e,t,r){var n=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?D(e,n,r,function(e){return e}):null!=e&&(B(e)&&(e=function(e,t){return{$$typeof:l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(N,"$&/")+"/")+r)),n.push(e))}function D(e,t,r,n,o){var l="";null!=r&&(l=(""+r).replace(N,"$&/")+"/"),Q(e,L,t=M(t,l,n,o)),P(t)}var G={Children:{map:function(e,t,r){if(null==e)return e;var n=[];return D(e,n,null,t,r),n},forEach:function(e,t,r){if(null==e)return e;Q(e,j,t=M(null,null,t,r)),P(t)},count:function(e){return Q(e,function(){return null},null)},toArray:function(e){var t=[];return D(e,t,null,function(e){return e}),t},only:function(e){return B(e)||A("143"),e}},createRef:function(){return{current:null}},Component:w,PureComponent:k,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:p,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:d,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},Fragment:i,StrictMode:s,Suspense:g,createElement:T,cloneElement:function(e,t,r){null==e&&A("267",e);var o=void 0,a=n({},e.props),i=e.key,s=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,c=E.current),void 0!==t.key&&(i=""+t.key);var u=void 0;for(o in e.type&&e.type.defaultProps&&(u=e.type.defaultProps),t)I.call(t,o)&&!S.hasOwnProperty(o)&&(a[o]=void 0===t[o]&&void 0!==u?u[o]:t[o])}if(1===(o=arguments.length-2))a.children=r;else if(1<o){u=Array(o);for(var p=0;p<o;p++)u[p]=arguments[p+2];a.children=u}return{$$typeof:l,type:e.type,key:i,ref:s,props:a,_owner:c}},createFactory:function(e){var t=T.bind(null,e);return t.type=e,t},isValidElement:B,version:"16.7.0",unstable_ConcurrentMode:f,unstable_Profiler:c,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:E,assign:n}},z={default:G},F=z&&G||z;e.exports=F.default||F},function(e,t,r){"use strict";
/** @license React v16.7.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(0),o=r(8),l=r(21);function a(e){for(var t=arguments.length-1,r="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=0;n<t;n++)r+="&args[]="+encodeURIComponent(arguments[n+1]);!function(e,t,r,n,o,l,a,i){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[r,n,o,l,a,i],c=0;(e=Error(t.replace(/%s/g,function(){return s[c++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",r)}n||a("227");var i=!1,s=null,c=!1,u=null,p={onError:function(e){i=!0,s=e}};function f(e,t,r,n,o,l,a,c,u){i=!1,s=null,function(e,t,r,n,o,l,a,i,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(e){this.onError(e)}}.apply(p,arguments)}var d=null,g={};function h(){if(d)for(var e in g){var t=g[e],r=d.indexOf(e);if(-1<r||a("96",e),!b[r])for(var n in t.extractEvents||a("97",e),b[r]=t,r=t.eventTypes){var o=void 0,l=r[n],i=t,s=n;A.hasOwnProperty(s)&&a("99",s),A[s]=l;var c=l.phasedRegistrationNames;if(c){for(o in c)c.hasOwnProperty(o)&&m(c[o],i,s);o=!0}else l.registrationName?(m(l.registrationName,i,s),o=!0):o=!1;o||a("98",n,e)}}}function m(e,t,r){y[e]&&a("100",e),y[e]=t,v[e]=t.eventTypes[r].dependencies}var b=[],A={},y={},v={},w=null,x=null,k=null;function C(e,t,r){var n=e.type||"unknown-event";e.currentTarget=k(r),function(e,t,r,n,o,l,p,d,g){if(f.apply(this,arguments),i){if(i){var h=s;i=!1,s=null}else a("198"),h=void 0;c||(c=!0,u=h)}}(n,t,void 0,e),e.currentTarget=null}function E(e,t){return null==t&&a("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function I(e,t,r){Array.isArray(e)?e.forEach(t,r):e&&t.call(r,e)}var S=null;function T(e){if(e){var t=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)C(e,t[n],r[n]);else t&&C(e,t,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}var B={injectEventPluginOrder:function(e){d&&a("101"),d=Array.prototype.slice.call(e),h()},injectEventPluginsByName:function(e){var t,r=!1;for(t in e)if(e.hasOwnProperty(t)){var n=e[t];g.hasOwnProperty(t)&&g[t]===n||(g[t]&&a("102",t),g[t]=n,r=!0)}r&&h()}};function N(e,t){var r=e.stateNode;if(!r)return null;var n=w(r);if(!n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}return e?null:(r&&"function"!=typeof r&&a("231",t,typeof r),r)}function R(e){if(null!==e&&(S=E(S,e)),e=S,S=null,e&&(I(e,T),S&&a("95"),c))throw e=u,c=!1,u=null,e}var M=Math.random().toString(36).slice(2),P="__reactInternalInstance$"+M,Q="__reactEventHandlers$"+M;function O(e){if(e[P])return e[P];for(;!e[P];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[P]).tag||6===e.tag?e:null}function j(e){return!(e=e[P])||5!==e.tag&&6!==e.tag?null:e}function L(e){if(5===e.tag||6===e.tag)return e.stateNode;a("33")}function D(e){return e[Q]||null}function G(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function z(e,t,r){(t=N(e,r.dispatchConfig.phasedRegistrationNames[t]))&&(r._dispatchListeners=E(r._dispatchListeners,t),r._dispatchInstances=E(r._dispatchInstances,e))}function F(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,r=[];t;)r.push(t),t=G(t);for(t=r.length;0<t--;)z(r[t],"captured",e);for(t=0;t<r.length;t++)z(r[t],"bubbled",e)}}function U(e,t,r){e&&r&&r.dispatchConfig.registrationName&&(t=N(e,r.dispatchConfig.registrationName))&&(r._dispatchListeners=E(r._dispatchListeners,t),r._dispatchInstances=E(r._dispatchInstances,e))}function Y(e){e&&e.dispatchConfig.registrationName&&U(e._targetInst,null,e)}function H(e){I(e,F)}var V=!("undefined"==typeof window||!window.document||!window.document.createElement);function J(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var W={animationend:J("Animation","AnimationEnd"),animationiteration:J("Animation","AnimationIteration"),animationstart:J("Animation","AnimationStart"),transitionend:J("Transition","TransitionEnd")},X={},K={};function Z(e){if(X[e])return X[e];if(!W[e])return e;var t,r=W[e];for(t in r)if(r.hasOwnProperty(t)&&t in K)return X[e]=r[t];return e}V&&(K=document.createElement("div").style,"AnimationEvent"in window||(delete W.animationend.animation,delete W.animationiteration.animation,delete W.animationstart.animation),"TransitionEvent"in window||delete W.transitionend.transition);var _=Z("animationend"),q=Z("animationiteration"),$=Z("animationstart"),ee=Z("transitionend"),te="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),re=null,ne=null,oe=null;function le(){if(oe)return oe;var e,t,r=ne,n=r.length,o="value"in re?re.value:re.textContent,l=o.length;for(e=0;e<n&&r[e]===o[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===o[l-t];t++);return oe=o.slice(e,1<t?1-t:void 0)}function ae(){return!0}function ie(){return!1}function se(e,t,r,n){for(var o in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=r,e=this.constructor.Interface)e.hasOwnProperty(o)&&((t=e[o])?this[o]=t(r):"target"===o?this.target=n:this[o]=r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?ae:ie,this.isPropagationStopped=ie,this}function ce(e,t,r,n){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,r,n),o}return new this(e,t,r,n)}function ue(e){e instanceof this||a("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function pe(e){e.eventPool=[],e.getPooled=ce,e.release=ue}o(se.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ae)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ae)},persist:function(){this.isPersistent=ae},isPersistent:ie,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=ie,this._dispatchInstances=this._dispatchListeners=null}}),se.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},se.extend=function(e){function t(){}function r(){return n.apply(this,arguments)}var n=this;t.prototype=n.prototype;var l=new t;return o(l,r.prototype),r.prototype=l,r.prototype.constructor=r,r.Interface=o({},n.Interface,e),r.extend=n.extend,pe(r),r},pe(se);var fe=se.extend({data:null}),de=se.extend({data:null}),ge=[9,13,27,32],he=V&&"CompositionEvent"in window,me=null;V&&"documentMode"in document&&(me=document.documentMode);var be=V&&"TextEvent"in window&&!me,Ae=V&&(!he||me&&8<me&&11>=me),ye=String.fromCharCode(32),ve={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},we=!1;function xe(e,t){switch(e){case"keyup":return-1!==ge.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function ke(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ce=!1;var Ee={eventTypes:ve,extractEvents:function(e,t,r,n){var o=void 0,l=void 0;if(he)e:{switch(e){case"compositionstart":o=ve.compositionStart;break e;case"compositionend":o=ve.compositionEnd;break e;case"compositionupdate":o=ve.compositionUpdate;break e}o=void 0}else Ce?xe(e,r)&&(o=ve.compositionEnd):"keydown"===e&&229===r.keyCode&&(o=ve.compositionStart);return o?(Ae&&"ko"!==r.locale&&(Ce||o!==ve.compositionStart?o===ve.compositionEnd&&Ce&&(l=le()):(ne="value"in(re=n)?re.value:re.textContent,Ce=!0)),o=fe.getPooled(o,t,r,n),l?o.data=l:null!==(l=ke(r))&&(o.data=l),H(o),l=o):l=null,(e=be?function(e,t){switch(e){case"compositionend":return ke(t);case"keypress":return 32!==t.which?null:(we=!0,ye);case"textInput":return(e=t.data)===ye&&we?null:e;default:return null}}(e,r):function(e,t){if(Ce)return"compositionend"===e||!he&&xe(e,t)?(e=le(),oe=ne=re=null,Ce=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ae&&"ko"!==t.locale?null:t.data;default:return null}}(e,r))?((t=de.getPooled(ve.beforeInput,t,r,n)).data=e,H(t)):t=null,null===l?t:null===t?l:[l,t]}},Ie=null,Se=null,Te=null;function Be(e){if(e=x(e)){"function"!=typeof Ie&&a("280");var t=w(e.stateNode);Ie(e.stateNode,e.type,t)}}function Ne(e){Se?Te?Te.push(e):Te=[e]:Se=e}function Re(){if(Se){var e=Se,t=Te;if(Te=Se=null,Be(e),t)for(e=0;e<t.length;e++)Be(t[e])}}function Me(e,t){return e(t)}function Pe(e,t,r){return e(t,r)}function Qe(){}var Oe=!1;function je(e,t){if(Oe)return e(t);Oe=!0;try{return Me(e,t)}finally{Oe=!1,(null!==Se||null!==Te)&&(Qe(),Re())}}var Le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function De(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Le[e.type]:"textarea"===t}function Ge(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ze(e){if(!V)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}function Fe(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ue(e){e._valueTracker||(e._valueTracker=function(e){var t=Fe(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var o=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,l.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Fe(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}var He=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ve=/^(.*)[\\\/]/,Je="function"==typeof Symbol&&Symbol.for,We=Je?Symbol.for("react.element"):60103,Xe=Je?Symbol.for("react.portal"):60106,Ke=Je?Symbol.for("react.fragment"):60107,Ze=Je?Symbol.for("react.strict_mode"):60108,_e=Je?Symbol.for("react.profiler"):60114,qe=Je?Symbol.for("react.provider"):60109,$e=Je?Symbol.for("react.context"):60110,et=Je?Symbol.for("react.concurrent_mode"):60111,tt=Je?Symbol.for("react.forward_ref"):60112,rt=Je?Symbol.for("react.suspense"):60113,nt=Je?Symbol.for("react.memo"):60115,ot=Je?Symbol.for("react.lazy"):60116,lt="function"==typeof Symbol&&Symbol.iterator;function at(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=lt&&e[lt]||e["@@iterator"])?e:null}function it(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case et:return"ConcurrentMode";case Ke:return"Fragment";case Xe:return"Portal";case _e:return"Profiler";case Ze:return"StrictMode";case rt:return"Suspense"}if("object"==typeof e)switch(e.$$typeof){case $e:return"Context.Consumer";case qe:return"Context.Provider";case tt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case nt:return it(e.type);case ot:if(e=1===e._status?e._result:null)return it(e)}return null}function st(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var r="";break e;default:var n=e._debugOwner,o=e._debugSource,l=it(e.type);r=null,n&&(r=it(n.type)),n=l,l="",o?l=" (at "+o.fileName.replace(Ve,"")+":"+o.lineNumber+")":r&&(l=" (created by "+r+")"),r="\n    in "+(n||"Unknown")+l}t+=r,e=e.return}while(e);return t}var ct=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ut=Object.prototype.hasOwnProperty,pt={},ft={};function dt(e,t,r,n,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t}var gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){gt[e]=new dt(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];gt[t]=new dt(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){gt[e]=new dt(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){gt[e]=new dt(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){gt[e]=new dt(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){gt[e]=new dt(e,3,!0,e,null)}),["capture","download"].forEach(function(e){gt[e]=new dt(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){gt[e]=new dt(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){gt[e]=new dt(e,5,!1,e.toLowerCase(),null)});var ht=/[\-:]([a-z])/g;function mt(e){return e[1].toUpperCase()}function bt(e,t,r,n){var o=gt.hasOwnProperty(t)?gt[t]:null;(null!==o?0===o.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,o,n)&&(r=null),n||null===o?function(e){return!!ut.call(ft,e)||!ut.call(pt,e)&&(ct.test(e)?ft[e]=!0:(pt[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=null===r?3!==o.type&&"":r:(t=o.attributeName,n=o.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(o=o.type)||4===o&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}function At(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function yt(e,t){var r=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function vt(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=At(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function wt(e,t){null!=(t=t.checked)&&bt(e,"checked",t,!1)}function xt(e,t){wt(e,t);var r=At(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ct(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ct(e,t.type,At(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function kt(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function Ct(e,t,r){"number"===t&&e.ownerDocument.activeElement===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ht,mt);gt[t]=new dt(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ht,mt);gt[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ht,mt);gt[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),gt.tabIndex=new dt("tabIndex",1,!1,"tabindex",null);var Et={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function It(e,t,r){return(e=se.getPooled(Et.change,e,t,r)).type="change",Ne(r),H(e),e}var St=null,Tt=null;function Bt(e){R(e)}function Nt(e){if(Ye(L(e)))return e}function Rt(e,t){if("change"===e)return t}var Mt=!1;function Pt(){St&&(St.detachEvent("onpropertychange",Qt),Tt=St=null)}function Qt(e){"value"===e.propertyName&&Nt(Tt)&&je(Bt,e=It(Tt,e,Ge(e)))}function Ot(e,t,r){"focus"===e?(Pt(),Tt=r,(St=t).attachEvent("onpropertychange",Qt)):"blur"===e&&Pt()}function jt(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Nt(Tt)}function Lt(e,t){if("click"===e)return Nt(t)}function Dt(e,t){if("input"===e||"change"===e)return Nt(t)}V&&(Mt=ze("input")&&(!document.documentMode||9<document.documentMode));var Gt={eventTypes:Et,_isInputEventSupported:Mt,extractEvents:function(e,t,r,n){var o=t?L(t):window,l=void 0,a=void 0,i=o.nodeName&&o.nodeName.toLowerCase();if("select"===i||"input"===i&&"file"===o.type?l=Rt:De(o)?Mt?l=Dt:(l=jt,a=Ot):(i=o.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(l=Lt),l&&(l=l(e,t)))return It(l,r,n);a&&a(e,o,t),"blur"===e&&(e=o._wrapperState)&&e.controlled&&"number"===o.type&&Ct(o,"number",o.value)}},zt=se.extend({view:null,detail:null}),Ft={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ut(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ft[e])&&!!t[e]}function Yt(){return Ut}var Ht=0,Vt=0,Jt=!1,Wt=!1,Xt=zt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Yt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Ht;return Ht=e.screenX,Jt?"mousemove"===e.type?e.screenX-t:0:(Jt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Vt;return Vt=e.screenY,Wt?"mousemove"===e.type?e.screenY-t:0:(Wt=!0,0)}}),Kt=Xt.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Zt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},_t={eventTypes:Zt,extractEvents:function(e,t,r,n){var o="mouseover"===e||"pointerover"===e,l="mouseout"===e||"pointerout"===e;if(o&&(r.relatedTarget||r.fromElement)||!l&&!o)return null;if(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=t,t=(t=r.relatedTarget||r.toElement)?O(t):null):l=null,l===t)return null;var a=void 0,i=void 0,s=void 0,c=void 0;"mouseout"===e||"mouseover"===e?(a=Xt,i=Zt.mouseLeave,s=Zt.mouseEnter,c="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=Kt,i=Zt.pointerLeave,s=Zt.pointerEnter,c="pointer");var u=null==l?o:L(l);if(o=null==t?o:L(t),(e=a.getPooled(i,l,r,n)).type=c+"leave",e.target=u,e.relatedTarget=o,(r=a.getPooled(s,t,r,n)).type=c+"enter",r.target=o,r.relatedTarget=u,n=t,l&&n)e:{for(o=n,c=0,a=t=l;a;a=G(a))c++;for(a=0,s=o;s;s=G(s))a++;for(;0<c-a;)t=G(t),c--;for(;0<a-c;)o=G(o),a--;for(;c--;){if(t===o||t===o.alternate)break e;t=G(t),o=G(o)}t=null}else t=null;for(o=t,t=[];l&&l!==o&&(null===(c=l.alternate)||c!==o);)t.push(l),l=G(l);for(l=[];n&&n!==o&&(null===(c=n.alternate)||c!==o);)l.push(n),n=G(n);for(n=0;n<t.length;n++)U(t[n],"bubbled",e);for(n=l.length;0<n--;)U(l[n],"captured",r);return[e,r]}},qt=Object.prototype.hasOwnProperty;function $t(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function er(e,t){if($t(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!qt.call(t,r[n])||!$t(e[r[n]],t[r[n]]))return!1;return!0}function tr(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function rr(e){2!==tr(e)&&a("188")}function nr(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=tr(e))&&a("188"),1===t?null:e;for(var r=e,n=t;;){var o=r.return,l=o?o.alternate:null;if(!o||!l)break;if(o.child===l.child){for(var i=o.child;i;){if(i===r)return rr(o),e;if(i===n)return rr(o),t;i=i.sibling}a("188")}if(r.return!==n.return)r=o,n=l;else{i=!1;for(var s=o.child;s;){if(s===r){i=!0,r=o,n=l;break}if(s===n){i=!0,n=o,r=l;break}s=s.sibling}if(!i){for(s=l.child;s;){if(s===r){i=!0,r=l,n=o;break}if(s===n){i=!0,n=l,r=o;break}s=s.sibling}i||a("189")}}r.alternate!==n&&a("190")}return 3!==r.tag&&a("188"),r.stateNode.current===r?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var or=se.extend({animationName:null,elapsedTime:null,pseudoElement:null}),lr=se.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ar=zt.extend({relatedTarget:null});function ir(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var sr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ur=zt.extend({key:function(e){if(e.key){var t=sr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ir(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?cr[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Yt,charCode:function(e){return"keypress"===e.type?ir(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ir(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),pr=Xt.extend({dataTransfer:null}),fr=zt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Yt}),dr=se.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),gr=Xt.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),hr=[["abort","abort"],[_,"animationEnd"],[q,"animationIteration"],[$,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ee,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],mr={},br={};function Ar(e,t){var r=e[0],n="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r],isInteractive:t},mr[e]=t,br[r]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){Ar(e,!0)}),hr.forEach(function(e){Ar(e,!1)});var yr={eventTypes:mr,isInteractiveTopLevelEventType:function(e){return void 0!==(e=br[e])&&!0===e.isInteractive},extractEvents:function(e,t,r,n){var o=br[e];if(!o)return null;switch(e){case"keypress":if(0===ir(r))return null;case"keydown":case"keyup":e=ur;break;case"blur":case"focus":e=ar;break;case"click":if(2===r.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Xt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=fr;break;case _:case q:case $:e=or;break;case ee:e=dr;break;case"scroll":e=zt;break;case"wheel":e=gr;break;case"copy":case"cut":case"paste":e=lr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Kt;break;default:e=se}return H(t=e.getPooled(o,t,r,n)),t}},vr=yr.isInteractiveTopLevelEventType,wr=[];function xr(e){var t=e.targetInst,r=t;do{if(!r){e.ancestors.push(r);break}var n;for(n=r;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(r),r=O(n)}while(r);for(r=0;r<e.ancestors.length;r++){t=e.ancestors[r];var o=Ge(e.nativeEvent);n=e.topLevelType;for(var l=e.nativeEvent,a=null,i=0;i<b.length;i++){var s=b[i];s&&(s=s.extractEvents(n,t,l,o))&&(a=E(a,s))}R(a)}}var kr=!0;function Cr(e,t){if(!t)return null;var r=(vr(e)?Ir:Sr).bind(null,e);t.addEventListener(e,r,!1)}function Er(e,t){if(!t)return null;var r=(vr(e)?Ir:Sr).bind(null,e);t.addEventListener(e,r,!0)}function Ir(e,t){Pe(Sr,e,t)}function Sr(e,t){if(kr){var r=Ge(t);if(null===(r=O(r))||"number"!=typeof r.tag||2===tr(r)||(r=null),wr.length){var n=wr.pop();n.topLevelType=e,n.nativeEvent=t,n.targetInst=r,e=n}else e={topLevelType:e,nativeEvent:t,targetInst:r,ancestors:[]};try{je(xr,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>wr.length&&wr.push(e)}}}var Tr={},Br=0,Nr="_reactListenersID"+(""+Math.random()).slice(2);function Rr(e){return Object.prototype.hasOwnProperty.call(e,Nr)||(e[Nr]=Br++,Tr[e[Nr]]={}),Tr[e[Nr]]}function Mr(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Pr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qr(e,t){var r,n=Pr(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pr(n)}}function Or(){for(var e=window,t=Mr();t instanceof e.HTMLIFrameElement;){try{e=t.contentDocument.defaultView}catch(e){break}t=Mr(e.document)}return t}function jr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Lr=V&&"documentMode"in document&&11>=document.documentMode,Dr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Gr=null,zr=null,Fr=null,Ur=!1;function Yr(e,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Ur||null==Gr||Gr!==Mr(r)?null:("selectionStart"in(r=Gr)&&jr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Fr&&er(Fr,r)?null:(Fr=r,(e=se.getPooled(Dr.select,zr,e,t)).type="select",e.target=Gr,H(e),e))}var Hr={eventTypes:Dr,extractEvents:function(e,t,r,n){var o,l=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;if(!(o=!l)){e:{l=Rr(l),o=v.onSelect;for(var a=0;a<o.length;a++){var i=o[a];if(!l.hasOwnProperty(i)||!l[i]){l=!1;break e}}l=!0}o=!l}if(o)return null;switch(l=t?L(t):window,e){case"focus":(De(l)||"true"===l.contentEditable)&&(Gr=l,zr=t,Fr=null);break;case"blur":Fr=zr=Gr=null;break;case"mousedown":Ur=!0;break;case"contextmenu":case"mouseup":case"dragend":return Ur=!1,Yr(r,n);case"selectionchange":if(Lr)break;case"keydown":case"keyup":return Yr(r,n)}return null}};function Vr(e,t){return e=o({children:void 0},t),(t=function(e){var t="";return n.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function Jr(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+At(r),t=null,o=0;o<e.length;o++){if(e[o].value===r)return e[o].selected=!0,void(n&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function Wr(e,t){return null!=t.dangerouslySetInnerHTML&&a("91"),o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xr(e,t){var r=t.value;null==r&&(r=t.defaultValue,null!=(t=t.children)&&(null!=r&&a("92"),Array.isArray(t)&&(1>=t.length||a("93"),t=t[0]),r=t),null==r&&(r="")),e._wrapperState={initialValue:At(r)}}function Kr(e,t){var r=At(t.value),n=At(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function Zr(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}B.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w=D,x=j,k=L,B.injectEventPluginsByName({SimpleEventPlugin:yr,EnterLeaveEventPlugin:_t,ChangeEventPlugin:Gt,SelectEventPlugin:Hr,BeforeInputEventPlugin:Ee});var _r={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function qr(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $r(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?qr(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var en,tn=void 0,rn=(en=function(e,t){if(e.namespaceURI!==_r.svg||"innerHTML"in e)e.innerHTML=t;else{for((tn=tn||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=tn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return en(e,t)})}:en);function nn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var on={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ln=["Webkit","ms","Moz","O"];function an(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||on.hasOwnProperty(e)&&on[e]?(""+t).trim():t+"px"}function sn(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),o=an(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}Object.keys(on).forEach(function(e){ln.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),on[t]=on[e]})});var cn=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function un(e,t){t&&(cn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&a("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&a("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||a("61")),null!=t.style&&"object"!=typeof t.style&&a("62",""))}function pn(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function fn(e,t){var r=Rr(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=v[t];for(var n=0;n<t.length;n++){var o=t[n];if(!r.hasOwnProperty(o)||!r[o]){switch(o){case"scroll":Er("scroll",e);break;case"focus":case"blur":Er("focus",e),Er("blur",e),r.blur=!0,r.focus=!0;break;case"cancel":case"close":ze(o)&&Er(o,e);break;case"invalid":case"submit":case"reset":break;default:-1===te.indexOf(o)&&Cr(o,e)}r[o]=!0}}}function dn(){}var gn=null,hn=null;function mn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function bn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var An="function"==typeof setTimeout?setTimeout:void 0,yn="function"==typeof clearTimeout?clearTimeout:void 0;function vn(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function wn(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var xn=[],kn=-1;function Cn(e){0>kn||(e.current=xn[kn],xn[kn]=null,kn--)}function En(e,t){xn[++kn]=e.current,e.current=t}var In={},Sn={current:In},Tn={current:!1},Bn=In;function Nn(e,t){var r=e.type.contextTypes;if(!r)return In;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o,l={};for(o in r)l[o]=t[o];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Rn(e){return null!=(e=e.childContextTypes)}function Mn(e){Cn(Tn),Cn(Sn)}function Pn(e){Cn(Tn),Cn(Sn)}function Qn(e,t,r){Sn.current!==In&&a("168"),En(Sn,t),En(Tn,r)}function On(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,"function"!=typeof n.getChildContext)return r;for(var l in n=n.getChildContext())l in e||a("108",it(t)||"Unknown",l);return o({},r,n)}function jn(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||In,Bn=Sn.current,En(Sn,t),En(Tn,Tn.current),!0}function Ln(e,t,r){var n=e.stateNode;n||a("169"),r?(t=On(e,t,Bn),n.__reactInternalMemoizedMergedChildContext=t,Cn(Tn),Cn(Sn),En(Sn,t)):Cn(Tn),En(Tn,r)}var Dn=null,Gn=null;function zn(e){return function(t){try{return e(t)}catch(e){}}}function Fn(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.firstContextDependency=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Un(e,t,r,n){return new Fn(e,t,r,n)}function Yn(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hn(e,t){var r=e.alternate;return null===r?((r=Un(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childExpirationTime=e.childExpirationTime,r.expirationTime=e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.firstContextDependency=e.firstContextDependency,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Vn(e,t,r,n,o,l){var i=2;if(n=e,"function"==typeof e)Yn(e)&&(i=1);else if("string"==typeof e)i=5;else e:switch(e){case Ke:return Jn(r.children,o,l,t);case et:return Wn(r,3|o,l,t);case Ze:return Wn(r,2|o,l,t);case _e:return(e=Un(12,r,t,4|o)).elementType=_e,e.type=_e,e.expirationTime=l,e;case rt:return(e=Un(13,r,t,o)).elementType=rt,e.type=rt,e.expirationTime=l,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case qe:i=10;break e;case $e:i=9;break e;case tt:i=11;break e;case nt:i=14;break e;case ot:i=16,n=null;break e}a("130",null==e?e:typeof e,"")}return(t=Un(i,r,t,o)).elementType=e,t.type=n,t.expirationTime=l,t}function Jn(e,t,r,n){return(e=Un(7,e,n,t)).expirationTime=r,e}function Wn(e,t,r,n){return e=Un(8,e,n,t),t=0==(1&t)?Ze:et,e.elementType=t,e.type=t,e.expirationTime=r,e}function Xn(e,t,r){return(e=Un(6,e,null,t)).expirationTime=r,e}function Kn(e,t,r){return(t=Un(4,null!==e.children?e.children:[],e.key,t)).expirationTime=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Zn(e,t){e.didError=!1;var r=e.earliestPendingTime;0===r?e.earliestPendingTime=e.latestPendingTime=t:r<t?e.earliestPendingTime=t:e.latestPendingTime>t&&(e.latestPendingTime=t),$n(t,e)}function _n(e,t){e.didError=!1,e.latestPingedTime>=t&&(e.latestPingedTime=0);var r=e.earliestPendingTime,n=e.latestPendingTime;r===t?e.earliestPendingTime=n===t?e.latestPendingTime=0:n:n===t&&(e.latestPendingTime=r),r=e.earliestSuspendedTime,n=e.latestSuspendedTime,0===r?e.earliestSuspendedTime=e.latestSuspendedTime=t:r<t?e.earliestSuspendedTime=t:n>t&&(e.latestSuspendedTime=t),$n(t,e)}function qn(e,t){var r=e.earliestPendingTime;return r>t&&(t=r),(e=e.earliestSuspendedTime)>t&&(t=e),t}function $n(e,t){var r=t.earliestSuspendedTime,n=t.latestSuspendedTime,o=t.earliestPendingTime,l=t.latestPingedTime;0===(o=0!==o?o:l)&&(0===e||n<e)&&(o=n),0!==(e=o)&&r>e&&(e=r),t.nextExpirationTimeToWorkOn=o,t.expirationTime=e}var eo=!1;function to(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ro(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function no(e){return{expirationTime:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function oo(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function lo(e,t){var r=e.alternate;if(null===r){var n=e.updateQueue,o=null;null===n&&(n=e.updateQueue=to(e.memoizedState))}else n=e.updateQueue,o=r.updateQueue,null===n?null===o?(n=e.updateQueue=to(e.memoizedState),o=r.updateQueue=to(r.memoizedState)):n=e.updateQueue=ro(o):null===o&&(o=r.updateQueue=ro(n));null===o||n===o?oo(n,t):null===n.lastUpdate||null===o.lastUpdate?(oo(n,t),oo(o,t)):(oo(n,t),o.lastUpdate=t)}function ao(e,t){var r=e.updateQueue;null===(r=null===r?e.updateQueue=to(e.memoizedState):io(e,r)).lastCapturedUpdate?r.firstCapturedUpdate=r.lastCapturedUpdate=t:(r.lastCapturedUpdate.next=t,r.lastCapturedUpdate=t)}function io(e,t){var r=e.alternate;return null!==r&&t===r.updateQueue&&(t=e.updateQueue=ro(t)),t}function so(e,t,r,n,l,a){switch(r.tag){case 1:return"function"==typeof(e=r.payload)?e.call(a,n,l):e;case 3:e.effectTag=-2049&e.effectTag|64;case 0:if(null==(l="function"==typeof(e=r.payload)?e.call(a,n,l):e))break;return o({},n,l);case 2:eo=!0}return n}function co(e,t,r,n,o){eo=!1;for(var l=(t=io(e,t)).baseState,a=null,i=0,s=t.firstUpdate,c=l;null!==s;){var u=s.expirationTime;u<o?(null===a&&(a=s,l=c),i<u&&(i=u)):(c=so(e,0,s,c,r,n),null!==s.callback&&(e.effectTag|=32,s.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=s:(t.lastEffect.nextEffect=s,t.lastEffect=s))),s=s.next}for(u=null,s=t.firstCapturedUpdate;null!==s;){var p=s.expirationTime;p<o?(null===u&&(u=s,null===a&&(l=c)),i<p&&(i=p)):(c=so(e,0,s,c,r,n),null!==s.callback&&(e.effectTag|=32,s.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=s:(t.lastCapturedEffect.nextEffect=s,t.lastCapturedEffect=s))),s=s.next}null===a&&(t.lastUpdate=null),null===u?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===u&&(l=c),t.baseState=l,t.firstUpdate=a,t.firstCapturedUpdate=u,e.expirationTime=i,e.memoizedState=c}function uo(e,t,r){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),po(t.firstEffect,r),t.firstEffect=t.lastEffect=null,po(t.firstCapturedEffect,r),t.firstCapturedEffect=t.lastCapturedEffect=null}function po(e,t){for(;null!==e;){var r=e.callback;if(null!==r){e.callback=null;var n=t;"function"!=typeof r&&a("191",r),r.call(n)}e=e.nextEffect}}function fo(e,t){return{value:e,source:t,stack:st(t)}}var go={current:null},ho=null,mo=null,bo=null;function Ao(e,t){var r=e.type._context;En(go,r._currentValue),r._currentValue=t}function yo(e){var t=go.current;Cn(go),e.type._context._currentValue=t}function vo(e){ho=e,bo=mo=null,e.firstContextDependency=null}function wo(e,t){return bo!==e&&!1!==t&&0!==t&&("number"==typeof t&&1073741823!==t||(bo=e,t=1073741823),t={context:e,observedBits:t,next:null},null===mo?(null===ho&&a("293"),ho.firstContextDependency=mo=t):mo=mo.next=t),e._currentValue}var xo={},ko={current:xo},Co={current:xo},Eo={current:xo};function Io(e){return e===xo&&a("174"),e}function So(e,t){En(Eo,t),En(Co,e),En(ko,xo);var r=t.nodeType;switch(r){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$r(null,"");break;default:t=$r(t=(r=8===r?t.parentNode:t).namespaceURI||null,r=r.tagName)}Cn(ko),En(ko,t)}function To(e){Cn(ko),Cn(Co),Cn(Eo)}function Bo(e){Io(Eo.current);var t=Io(ko.current),r=$r(t,e.type);t!==r&&(En(Co,e),En(ko,r))}function No(e){Co.current===e&&(Cn(ko),Cn(Co))}function Ro(e,t){if(e&&e.defaultProps)for(var r in t=o({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}var Mo=He.ReactCurrentOwner,Po=(new n.Component).refs;function Qo(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:o({},t,r),e.memoizedState=r,null!==(n=e.updateQueue)&&0===e.expirationTime&&(n.baseState=r)}var Oo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===tr(e)},enqueueSetState:function(e,t,r){e=e._reactInternalFiber;var n=Ia(),o=no(n=ql(n,e));o.payload=t,null!=r&&(o.callback=r),Wl(),lo(e,o),ta(e,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternalFiber;var n=Ia(),o=no(n=ql(n,e));o.tag=1,o.payload=t,null!=r&&(o.callback=r),Wl(),lo(e,o),ta(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var r=Ia(),n=no(r=ql(r,e));n.tag=2,null!=t&&(n.callback=t),Wl(),lo(e,n),ta(e,r)}};function jo(e,t,r,n,o,l,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,l,a):!t.prototype||!t.prototype.isPureReactComponent||(!er(r,n)||!er(o,l))}function Lo(e,t,r){var n=!1,o=In,l=t.contextType;return"object"==typeof l&&null!==l?l=Mo.currentDispatcher.readContext(l):(o=Rn(t)?Bn:Sn.current,l=(n=null!=(n=t.contextTypes))?Nn(e,o):In),t=new t(r,l),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Oo,e.stateNode=t,t._reactInternalFiber=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function Do(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Oo.enqueueReplaceState(t,t.state,null)}function Go(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=Po;var l=t.contextType;"object"==typeof l&&null!==l?o.context=Mo.currentDispatcher.readContext(l):(l=Rn(t)?Bn:Sn.current,o.context=Nn(e,l)),null!==(l=e.updateQueue)&&(co(e,l,r,o,n),o.state=e.memoizedState),"function"==typeof(l=t.getDerivedStateFromProps)&&(Qo(e,t,l,r),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&Oo.enqueueReplaceState(o,o.state,null),null!==(l=e.updateQueue)&&(co(e,l,r,o,n),o.state=e.memoizedState)),"function"==typeof o.componentDidMount&&(e.effectTag|=4)}var zo=Array.isArray;function Fo(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){r=r._owner;var n=void 0;r&&(1!==r.tag&&a("289"),n=r.stateNode),n||a("147",e);var o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=n.refs;t===Po&&(t=n.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}"string"!=typeof e&&a("284"),r._owner||a("290",e)}return e}function Uo(e,t){"textarea"!==e.type&&a("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function Yo(e){function t(t,r){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r,r.nextEffect=null,r.effectTag=8}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t,r){return(e=Hn(e,t)).index=0,e.sibling=null,e}function l(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.effectTag=2,r):n:(t.effectTag=2,r):r}function i(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,r,n){return null===t||6!==t.tag?((t=Xn(r,e.mode,n)).return=e,t):((t=o(t,r)).return=e,t)}function c(e,t,r,n){return null!==t&&t.elementType===r.type?((n=o(t,r.props)).ref=Fo(e,t,r),n.return=e,n):((n=Vn(r.type,r.key,r.props,null,e.mode,n)).ref=Fo(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Kn(r,e.mode,n)).return=e,t):((t=o(t,r.children||[])).return=e,t)}function p(e,t,r,n,l){return null===t||7!==t.tag?((t=Jn(r,e.mode,n,l)).return=e,t):((t=o(t,r)).return=e,t)}function f(e,t,r){if("string"==typeof t||"number"==typeof t)return(t=Xn(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case We:return(r=Vn(t.type,t.key,t.props,null,e.mode,r)).ref=Fo(e,null,t),r.return=e,r;case Xe:return(t=Kn(t,e.mode,r)).return=e,t}if(zo(t)||at(t))return(t=Jn(t,e.mode,r,null)).return=e,t;Uo(e,t)}return null}function d(e,t,r,n){var o=null!==t?t.key:null;if("string"==typeof r||"number"==typeof r)return null!==o?null:s(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case We:return r.key===o?r.type===Ke?p(e,t,r.props.children,n,o):c(e,t,r,n):null;case Xe:return r.key===o?u(e,t,r,n):null}if(zo(r)||at(r))return null!==o?null:p(e,t,r,n,null);Uo(e,r)}return null}function g(e,t,r,n,o){if("string"==typeof n||"number"==typeof n)return s(t,e=e.get(r)||null,""+n,o);if("object"==typeof n&&null!==n){switch(n.$$typeof){case We:return e=e.get(null===n.key?r:n.key)||null,n.type===Ke?p(t,e,n.props.children,o,n.key):c(t,e,n,o);case Xe:return u(t,e=e.get(null===n.key?r:n.key)||null,n,o)}if(zo(n)||at(n))return p(t,e=e.get(r)||null,n,o,null);Uo(t,n)}return null}function h(o,a,i,s){for(var c=null,u=null,p=a,h=a=0,m=null;null!==p&&h<i.length;h++){p.index>h?(m=p,p=null):m=p.sibling;var b=d(o,p,i[h],s);if(null===b){null===p&&(p=m);break}e&&p&&null===b.alternate&&t(o,p),a=l(b,a,h),null===u?c=b:u.sibling=b,u=b,p=m}if(h===i.length)return r(o,p),c;if(null===p){for(;h<i.length;h++)(p=f(o,i[h],s))&&(a=l(p,a,h),null===u?c=p:u.sibling=p,u=p);return c}for(p=n(o,p);h<i.length;h++)(m=g(p,o,h,i[h],s))&&(e&&null!==m.alternate&&p.delete(null===m.key?h:m.key),a=l(m,a,h),null===u?c=m:u.sibling=m,u=m);return e&&p.forEach(function(e){return t(o,e)}),c}function m(o,i,s,c){var u=at(s);"function"!=typeof u&&a("150"),null==(s=u.call(s))&&a("151");for(var p=u=null,h=i,m=i=0,b=null,A=s.next();null!==h&&!A.done;m++,A=s.next()){h.index>m?(b=h,h=null):b=h.sibling;var y=d(o,h,A.value,c);if(null===y){h||(h=b);break}e&&h&&null===y.alternate&&t(o,h),i=l(y,i,m),null===p?u=y:p.sibling=y,p=y,h=b}if(A.done)return r(o,h),u;if(null===h){for(;!A.done;m++,A=s.next())null!==(A=f(o,A.value,c))&&(i=l(A,i,m),null===p?u=A:p.sibling=A,p=A);return u}for(h=n(o,h);!A.done;m++,A=s.next())null!==(A=g(h,o,m,A.value,c))&&(e&&null!==A.alternate&&h.delete(null===A.key?m:A.key),i=l(A,i,m),null===p?u=A:p.sibling=A,p=A);return e&&h.forEach(function(e){return t(o,e)}),u}return function(e,n,l,s){var c="object"==typeof l&&null!==l&&l.type===Ke&&null===l.key;c&&(l=l.props.children);var u="object"==typeof l&&null!==l;if(u)switch(l.$$typeof){case We:e:{for(u=l.key,c=n;null!==c;){if(c.key===u){if(7===c.tag?l.type===Ke:c.elementType===l.type){r(e,c.sibling),(n=o(c,l.type===Ke?l.props.children:l.props)).ref=Fo(e,c,l),n.return=e,e=n;break e}r(e,c);break}t(e,c),c=c.sibling}l.type===Ke?((n=Jn(l.props.children,e.mode,s,l.key)).return=e,e=n):((s=Vn(l.type,l.key,l.props,null,e.mode,s)).ref=Fo(e,n,l),s.return=e,e=s)}return i(e);case Xe:e:{for(c=l.key;null!==n;){if(n.key===c){if(4===n.tag&&n.stateNode.containerInfo===l.containerInfo&&n.stateNode.implementation===l.implementation){r(e,n.sibling),(n=o(n,l.children||[])).return=e,e=n;break e}r(e,n);break}t(e,n),n=n.sibling}(n=Kn(l,e.mode,s)).return=e,e=n}return i(e)}if("string"==typeof l||"number"==typeof l)return l=""+l,null!==n&&6===n.tag?(r(e,n.sibling),(n=o(n,l)).return=e,e=n):(r(e,n),(n=Xn(l,e.mode,s)).return=e,e=n),i(e);if(zo(l))return h(e,n,l,s);if(at(l))return m(e,n,l,s);if(u&&Uo(e,l),void 0===l&&!c)switch(e.tag){case 1:case 0:a("152",(s=e.type).displayName||s.name||"Component")}return r(e,n)}}var Ho=Yo(!0),Vo=Yo(!1),Jo=null,Wo=null,Xo=!1;function Ko(e,t){var r=Un(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function Zo(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function _o(e){if(Xo){var t=Wo;if(t){var r=t;if(!Zo(e,t)){if(!(t=vn(r))||!Zo(e,t))return e.effectTag|=2,Xo=!1,void(Jo=e);Ko(Jo,r)}Jo=e,Wo=wn(t)}else e.effectTag|=2,Xo=!1,Jo=e}}function qo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;Jo=e}function $o(e){if(e!==Jo)return!1;if(!Xo)return qo(e),Xo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!bn(t,e.memoizedProps))for(t=Wo;t;)Ko(e,t),t=vn(t);return qo(e),Wo=Jo?vn(e.stateNode):null,!0}function el(){Wo=Jo=null,Xo=!1}var tl=He.ReactCurrentOwner;function rl(e,t,r,n){t.child=null===e?Vo(t,null,r,n):Ho(t,e.child,r,n)}function nl(e,t,r,n,o){r=r.render;var l=t.ref;return vo(t),n=r(n,l),t.effectTag|=1,rl(e,t,n,o),t.child}function ol(e,t,r,n,o,l){if(null===e){var a=r.type;return"function"!=typeof a||Yn(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Vn(r.type,null,n,null,t.mode,l)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ll(e,t,a,n,o,l))}return a=e.child,o<l&&(o=a.memoizedProps,(r=null!==(r=r.compare)?r:er)(o,n)&&e.ref===t.ref)?fl(e,t,l):(t.effectTag|=1,(e=Hn(a,n)).ref=t.ref,e.return=t,t.child=e)}function ll(e,t,r,n,o,l){return null!==e&&o<l&&er(e.memoizedProps,n)&&e.ref===t.ref?fl(e,t,l):il(e,t,r,n,l)}function al(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.effectTag|=128)}function il(e,t,r,n,o){var l=Rn(r)?Bn:Sn.current;return l=Nn(t,l),vo(t),r=r(n,l),t.effectTag|=1,rl(e,t,r,o),t.child}function sl(e,t,r,n,o){if(Rn(r)){var l=!0;jn(t)}else l=!1;if(vo(t),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Lo(t,r,n),Go(t,r,n,o),n=!0;else if(null===e){var a=t.stateNode,i=t.memoizedProps;a.props=i;var s=a.context,c=r.contextType;"object"==typeof c&&null!==c?c=Mo.currentDispatcher.readContext(c):c=Nn(t,c=Rn(r)?Bn:Sn.current);var u=r.getDerivedStateFromProps,p="function"==typeof u||"function"==typeof a.getSnapshotBeforeUpdate;p||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(i!==n||s!==c)&&Do(t,a,n,c),eo=!1;var f=t.memoizedState;s=a.state=f;var d=t.updateQueue;null!==d&&(co(t,d,n,a,o),s=t.memoizedState),i!==n||f!==s||Tn.current||eo?("function"==typeof u&&(Qo(t,r,u,n),s=t.memoizedState),(i=eo||jo(t,r,i,n,f,s,c))?(p||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=s),a.props=n,a.state=s,a.context=c,n=i):("function"==typeof a.componentDidMount&&(t.effectTag|=4),n=!1)}else a=t.stateNode,i=t.memoizedProps,a.props=t.type===t.elementType?i:Ro(t.type,i),s=a.context,"object"==typeof(c=r.contextType)&&null!==c?c=Mo.currentDispatcher.readContext(c):c=Nn(t,c=Rn(r)?Bn:Sn.current),(p="function"==typeof(u=r.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(i!==n||s!==c)&&Do(t,a,n,c),eo=!1,s=t.memoizedState,f=a.state=s,null!==(d=t.updateQueue)&&(co(t,d,n,a,o),f=t.memoizedState),i!==n||s!==f||Tn.current||eo?("function"==typeof u&&(Qo(t,r,u,n),f=t.memoizedState),(u=eo||jo(t,r,i,n,s,f,c))?(p||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,f,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,f,c)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||i===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=f),a.props=n,a.state=f,a.context=c,n=u):("function"!=typeof a.componentDidUpdate||i===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),n=!1);return cl(e,t,r,n,l,o)}function cl(e,t,r,n,o,l){al(e,t);var a=0!=(64&t.effectTag);if(!n&&!a)return o&&Ln(t,r,!1),fl(e,t,l);n=t.stateNode,tl.current=t;var i=a&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.effectTag|=1,null!==e&&a?(t.child=Ho(t,e.child,null,l),t.child=Ho(t,null,i,l)):rl(e,t,i,l),t.memoizedState=n.state,o&&Ln(t,r,!0),t.child}function ul(e){var t=e.stateNode;t.pendingContext?Qn(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Qn(0,t.context,!1),So(e,t.containerInfo)}function pl(e,t,r){var n=t.mode,o=t.pendingProps,l=t.memoizedState;if(0==(64&t.effectTag)){l=null;var a=!1}else l={timedOutAt:null!==l?l.timedOutAt:0},a=!0,t.effectTag&=-65;if(null===e)if(a){var i=o.fallback;e=Jn(null,n,0,null),0==(1&t.mode)&&(e.child=null!==t.memoizedState?t.child.child:t.child),n=Jn(i,n,r,null),e.sibling=n,(r=e).return=n.return=t}else r=n=Vo(t,null,o.children,r);else null!==e.memoizedState?(i=(n=e.child).sibling,a?(r=o.fallback,o=Hn(n,n.pendingProps),0==(1&t.mode)&&((a=null!==t.memoizedState?t.child.child:t.child)!==n.child&&(o.child=a)),n=o.sibling=Hn(i,r,i.expirationTime),r=o,o.childExpirationTime=0,r.return=n.return=t):r=n=Ho(t,n.child,o.children,r)):(i=e.child,a?(a=o.fallback,(o=Jn(null,n,0,null)).child=i,0==(1&t.mode)&&(o.child=null!==t.memoizedState?t.child.child:t.child),(n=o.sibling=Jn(a,n,r,null)).effectTag|=2,r=o,o.childExpirationTime=0,r.return=n.return=t):n=r=Ho(t,i,o.children,r)),t.stateNode=e.stateNode;return t.memoizedState=l,t.child=r,n}function fl(e,t,r){if(null!==e&&(t.firstContextDependency=e.firstContextDependency),t.childExpirationTime<r)return null;if(null!==e&&t.child!==e.child&&a("153"),null!==t.child){for(r=Hn(e=t.child,e.pendingProps,e.expirationTime),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Hn(e,e.pendingProps,e.expirationTime)).return=t;r.sibling=null}return t.child}function dl(e,t,r){var n=t.expirationTime;if(null!==e&&e.memoizedProps===t.pendingProps&&!Tn.current&&n<r){switch(t.tag){case 3:ul(t),el();break;case 5:Bo(t);break;case 1:Rn(t.type)&&jn(t);break;case 4:So(t,t.stateNode.containerInfo);break;case 10:Ao(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(n=t.child.childExpirationTime)&&n>=r?pl(e,t,r):null!==(t=fl(e,t,r))?t.sibling:null}return fl(e,t,r)}switch(t.expirationTime=0,t.tag){case 2:n=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps;var o=Nn(t,Sn.current);if(vo(t),o=n(e,o),t.effectTag|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){if(t.tag=1,Rn(n)){var l=!0;jn(t)}else l=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null;var i=n.getDerivedStateFromProps;"function"==typeof i&&Qo(t,n,i,e),o.updater=Oo,t.stateNode=o,o._reactInternalFiber=t,Go(t,n,e,r),t=cl(null,t,n,!0,l,r)}else t.tag=0,rl(null,t,o,r),t=t.child;return t;case 16:switch(o=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),l=t.pendingProps,e=function(e){var t=e._result;switch(e._status){case 1:return t;case 2:case 0:throw t;default:throw e._status=0,(t=(t=e._ctor)()).then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)}),e._result=t,t}}(o),t.type=e,o=t.tag=function(e){if("function"==typeof e)return Yn(e)?1:0;if(null!=e){if((e=e.$$typeof)===tt)return 11;if(e===nt)return 14}return 2}(e),l=Ro(e,l),i=void 0,o){case 0:i=il(null,t,e,l,r);break;case 1:i=sl(null,t,e,l,r);break;case 11:i=nl(null,t,e,l,r);break;case 14:i=ol(null,t,e,Ro(e.type,l),n,r);break;default:a("306",e,"")}return i;case 0:return n=t.type,o=t.pendingProps,il(e,t,n,o=t.elementType===n?o:Ro(n,o),r);case 1:return n=t.type,o=t.pendingProps,sl(e,t,n,o=t.elementType===n?o:Ro(n,o),r);case 3:return ul(t),null===(n=t.updateQueue)&&a("282"),o=null!==(o=t.memoizedState)?o.element:null,co(t,n,t.pendingProps,null,r),(n=t.memoizedState.element)===o?(el(),t=fl(e,t,r)):(o=t.stateNode,(o=(null===e||null===e.child)&&o.hydrate)&&(Wo=wn(t.stateNode.containerInfo),Jo=t,o=Xo=!0),o?(t.effectTag|=2,t.child=Vo(t,null,n,r)):(rl(e,t,n,r),el()),t=t.child),t;case 5:return Bo(t),null===e&&_o(t),n=t.type,o=t.pendingProps,l=null!==e?e.memoizedProps:null,i=o.children,bn(n,o)?i=null:null!==l&&bn(n,l)&&(t.effectTag|=16),al(e,t),1!==r&&1&t.mode&&o.hidden?(t.expirationTime=1,t=null):(rl(e,t,i,r),t=t.child),t;case 6:return null===e&&_o(t),null;case 13:return pl(e,t,r);case 4:return So(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Ho(t,null,n,r):rl(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,nl(e,t,n,o=t.elementType===n?o:Ro(n,o),r);case 7:return rl(e,t,t.pendingProps,r),t.child;case 8:case 12:return rl(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,o=t.pendingProps,i=t.memoizedProps,Ao(t,l=o.value),null!==i){var s=i.value;if(0===(l=s===l&&(0!==s||1/s==1/l)||s!=s&&l!=l?0:0|("function"==typeof n._calculateChangedBits?n._calculateChangedBits(s,l):1073741823))){if(i.children===o.children&&!Tn.current){t=fl(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){if(null!==(s=i.firstContextDependency))do{if(s.context===n&&0!=(s.observedBits&l)){if(1===i.tag){var c=no(r);c.tag=2,lo(i,c)}i.expirationTime<r&&(i.expirationTime=r),null!==(c=i.alternate)&&c.expirationTime<r&&(c.expirationTime=r);for(var u=i.return;null!==u;){if(c=u.alternate,u.childExpirationTime<r)u.childExpirationTime=r,null!==c&&c.childExpirationTime<r&&(c.childExpirationTime=r);else{if(!(null!==c&&c.childExpirationTime<r))break;c.childExpirationTime=r}u=u.return}}c=i.child,s=s.next}while(null!==s);else c=10===i.tag&&i.type===t.type?null:i.child;if(null!==c)c.return=i;else for(c=i;null!==c;){if(c===t){c=null;break}if(null!==(i=c.sibling)){i.return=c.return,c=i;break}c=c.return}i=c}}rl(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,n=(l=t.pendingProps).children,vo(t),n=n(o=wo(o,l.unstable_observedBits)),t.effectTag|=1,rl(e,t,n,r),t.child;case 14:return l=Ro(o=t.type,t.pendingProps),ol(e,t,o,l=Ro(o.type,l),n,r);case 15:return ll(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Ro(n,o),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Rn(n)?(e=!0,jn(t)):e=!1,vo(t),Lo(t,n,o),Go(t,n,o,r),cl(null,t,n,!0,e,r);default:a("156")}}function gl(e){e.effectTag|=4}var hl=void 0,ml=void 0,bl=void 0,Al=void 0;hl=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},ml=function(){},bl=function(e,t,r,n,l){var a=e.memoizedProps;if(a!==n){var i=t.stateNode;switch(Io(ko.current),e=null,r){case"input":a=yt(i,a),n=yt(i,n),e=[];break;case"option":a=Vr(i,a),n=Vr(i,n),e=[];break;case"select":a=o({},a,{value:void 0}),n=o({},n,{value:void 0}),e=[];break;case"textarea":a=Wr(i,a),n=Wr(i,n),e=[];break;default:"function"!=typeof a.onClick&&"function"==typeof n.onClick&&(i.onclick=dn)}un(r,n),i=r=void 0;var s=null;for(r in a)if(!n.hasOwnProperty(r)&&a.hasOwnProperty(r)&&null!=a[r])if("style"===r){var c=a[r];for(i in c)c.hasOwnProperty(i)&&(s||(s={}),s[i]="")}else"dangerouslySetInnerHTML"!==r&&"children"!==r&&"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&"autoFocus"!==r&&(y.hasOwnProperty(r)?e||(e=[]):(e=e||[]).push(r,null));for(r in n){var u=n[r];if(c=null!=a?a[r]:void 0,n.hasOwnProperty(r)&&u!==c&&(null!=u||null!=c))if("style"===r)if(c){for(i in c)!c.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(s||(s={}),s[i]="");for(i in u)u.hasOwnProperty(i)&&c[i]!==u[i]&&(s||(s={}),s[i]=u[i])}else s||(e||(e=[]),e.push(r,s)),s=u;else"dangerouslySetInnerHTML"===r?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(e=e||[]).push(r,""+u)):"children"===r?c===u||"string"!=typeof u&&"number"!=typeof u||(e=e||[]).push(r,""+u):"suppressContentEditableWarning"!==r&&"suppressHydrationWarning"!==r&&(y.hasOwnProperty(r)?(null!=u&&fn(l,r),e||c===u||(e=[])):(e=e||[]).push(r,u))}s&&(e=e||[]).push("style",s),l=e,(t.updateQueue=l)&&gl(t)}},Al=function(e,t,r,n){r!==n&&gl(t)};var yl="function"==typeof WeakSet?WeakSet:Set;function vl(e,t){var r=t.source,n=t.stack;null===n&&null!==r&&(n=st(r)),null!==r&&it(r.type),t=t.value,null!==e&&1===e.tag&&it(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function wl(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){_l(e,t)}else t.current=null}function xl(e){switch("function"==typeof Gn&&Gn(e),e.tag){case 0:case 11:case 14:case 15:var t=e.updateQueue;if(null!==t&&null!==(t=t.lastEffect)){var r=t=t.next;do{var n=r.destroy;if(null!==n){var o=e;try{n()}catch(e){_l(o,e)}}r=r.next}while(r!==t)}break;case 1:if(wl(e),"function"==typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){_l(e,t)}break;case 5:wl(e);break;case 4:El(e)}}function kl(e){return 5===e.tag||3===e.tag||4===e.tag}function Cl(e){e:{for(var t=e.return;null!==t;){if(kl(t)){var r=t;break e}t=t.return}a("160"),r=void 0}var n=t=void 0;switch(r.tag){case 5:t=r.stateNode,n=!1;break;case 3:case 4:t=r.stateNode.containerInfo,n=!0;break;default:a("161")}16&r.effectTag&&(nn(t,""),r.effectTag&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||kl(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag;){if(2&r.effectTag)continue t;if(null===r.child||4===r.tag)continue t;r.child.return=r,r=r.child}if(!(2&r.effectTag)){r=r.stateNode;break e}}for(var o=e;;){if(5===o.tag||6===o.tag)if(r)if(n){var l=t,i=o.stateNode,s=r;8===l.nodeType?l.parentNode.insertBefore(i,s):l.insertBefore(i,s)}else t.insertBefore(o.stateNode,r);else n?(i=t,s=o.stateNode,8===i.nodeType?(l=i.parentNode).insertBefore(s,i):(l=i).appendChild(s),null!=(i=i._reactRootContainer)||null!==l.onclick||(l.onclick=dn)):t.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}function El(e){for(var t=e,r=!1,n=void 0,o=void 0;;){if(!r){r=t.return;e:for(;;){switch(null===r&&a("160"),r.tag){case 5:n=r.stateNode,o=!1;break e;case 3:case 4:n=r.stateNode.containerInfo,o=!0;break e}r=r.return}r=!0}if(5===t.tag||6===t.tag){e:for(var l=t,i=l;;)if(xl(i),null!==i.child&&4!==i.tag)i.child.return=i,i=i.child;else{if(i===l)break;for(;null===i.sibling;){if(null===i.return||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}o?(l=n,i=t.stateNode,8===l.nodeType?l.parentNode.removeChild(i):l.removeChild(i)):n.removeChild(t.stateNode)}else if(4===t.tag?(n=t.stateNode.containerInfo,o=!0):xl(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(r=!1)}t.sibling.return=t.return,t=t.sibling}}function Il(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 1:break;case 5:var r=t.stateNode;if(null!=r){var n=t.memoizedProps;e=null!==e?e.memoizedProps:n;var o=t.type,l=t.updateQueue;t.updateQueue=null,null!==l&&function(e,t,r,n,o){e[Q]=o,"input"===r&&"radio"===o.type&&null!=o.name&&wt(e,o),pn(r,n),n=pn(r,o);for(var l=0;l<t.length;l+=2){var a=t[l],i=t[l+1];"style"===a?sn(e,i):"dangerouslySetInnerHTML"===a?rn(e,i):"children"===a?nn(e,i):bt(e,a,i,n)}switch(r){case"input":xt(e,o);break;case"textarea":Kr(e,o);break;case"select":t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!o.multiple,null!=(r=o.value)?Jr(e,!!o.multiple,r,!1):t!==!!o.multiple&&(null!=o.defaultValue?Jr(e,!!o.multiple,o.defaultValue,!0):Jr(e,!!o.multiple,o.multiple?[]:"",!1))}}(r,l,o,e,n)}break;case 6:null===t.stateNode&&a("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 12:break;case 13:if(r=t.memoizedState,n=void 0,e=t,null===r?n=!1:(n=!0,e=t.child,0===r.timedOutAt&&(r.timedOutAt=Ia())),null!==e&&function(e,t){for(var r=e;;){if(5===r.tag){var n=r.stateNode;if(t)n.style.display="none";else{n=r.stateNode;var o=r.memoizedProps.style;o=null!=o&&o.hasOwnProperty("display")?o.display:null,n.style.display=an("display",o)}}else if(6===r.tag)r.stateNode.nodeValue=t?"":r.memoizedProps;else{if(13===r.tag&&null!==r.memoizedState){(n=r.child.sibling).return=r,r=n;continue}if(null!==r.child){r.child.return=r,r=r.child;continue}}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}(e,n),null!==(r=t.updateQueue)){t.updateQueue=null;var i=t.stateNode;null===i&&(i=t.stateNode=new yl),r.forEach(function(e){var r=function(e,t){var r=e.stateNode;null!==r&&r.delete(t),t=ql(t=Ia(),e),null!==(e=ea(e,t))&&(Zn(e,t),0!==(t=e.expirationTime)&&Sa(e,t))}.bind(null,t,e);i.has(e)||(i.add(e),e.then(r,r))})}break;case 17:break;default:a("163")}}var Sl="function"==typeof WeakMap?WeakMap:Map;function Tl(e,t,r){(r=no(r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){ja(n),vl(e,t)},r}function Bl(e,t,r){(r=no(r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var o=t.value;r.payload=function(){return n(o)}}var l=e.stateNode;return null!==l&&"function"==typeof l.componentDidCatch&&(r.callback=function(){"function"!=typeof n&&(null===Vl?Vl=new Set([this]):Vl.add(this));var r=t.value,o=t.stack;vl(e,t),this.componentDidCatch(r,{componentStack:null!==o?o:""})}),r}function Nl(e){switch(e.tag){case 1:Rn(e.type)&&Mn();var t=e.effectTag;return 2048&t?(e.effectTag=-2049&t|64,e):null;case 3:return To(),Pn(),0!=(64&(t=e.effectTag))&&a("285"),e.effectTag=-2049&t|64,e;case 5:return No(e),null;case 13:return 2048&(t=e.effectTag)?(e.effectTag=-2049&t|64,e):null;case 4:return To(),null;case 10:return yo(e),null;default:return null}}var Rl={readContext:wo},Ml=He.ReactCurrentOwner,Pl=1073741822,Ql=0,Ol=!1,jl=null,Ll=null,Dl=0,Gl=-1,zl=!1,Fl=null,Ul=!1,Yl=null,Hl=null,Vl=null;function Jl(){if(null!==jl)for(var e=jl.return;null!==e;){var t=e;switch(t.tag){case 1:var r=t.type.childContextTypes;null!=r&&Mn();break;case 3:To(),Pn();break;case 5:No(t);break;case 4:To();break;case 10:yo(t)}e=e.return}Ll=null,Dl=0,Gl=-1,zl=!1,jl=null}function Wl(){null!==Hl&&(l.unstable_cancelCallback(Yl),Hl())}function Xl(e){for(;;){var t=e.alternate,r=e.return,n=e.sibling;if(0==(1024&e.effectTag)){jl=e;e:{var l=t,i=Dl,s=(t=e).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:Rn(t.type)&&Mn();break;case 3:To(),Pn(),(s=t.stateNode).pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==l&&null!==l.child||($o(t),t.effectTag&=-3),ml(t);break;case 5:No(t);var c=Io(Eo.current);if(i=t.type,null!==l&&null!=t.stateNode)bl(l,t,i,s,c),l.ref!==t.ref&&(t.effectTag|=128);else if(s){var u=Io(ko.current);if($o(t)){l=(s=t).stateNode;var p=s.type,f=s.memoizedProps,d=c;switch(l[P]=s,l[Q]=f,i=void 0,c=p){case"iframe":case"object":Cr("load",l);break;case"video":case"audio":for(p=0;p<te.length;p++)Cr(te[p],l);break;case"source":Cr("error",l);break;case"img":case"image":case"link":Cr("error",l),Cr("load",l);break;case"form":Cr("reset",l),Cr("submit",l);break;case"details":Cr("toggle",l);break;case"input":vt(l,f),Cr("invalid",l),fn(d,"onChange");break;case"select":l._wrapperState={wasMultiple:!!f.multiple},Cr("invalid",l),fn(d,"onChange");break;case"textarea":Xr(l,f),Cr("invalid",l),fn(d,"onChange")}for(i in un(c,f),p=null,f)f.hasOwnProperty(i)&&(u=f[i],"children"===i?"string"==typeof u?l.textContent!==u&&(p=["children",u]):"number"==typeof u&&l.textContent!==""+u&&(p=["children",""+u]):y.hasOwnProperty(i)&&null!=u&&fn(d,i));switch(c){case"input":Ue(l),kt(l,f,!0);break;case"textarea":Ue(l),Zr(l);break;case"select":case"option":break;default:"function"==typeof f.onClick&&(l.onclick=dn)}i=p,s.updateQueue=i,(s=null!==i)&&gl(t)}else{f=t,l=i,d=s,p=9===c.nodeType?c:c.ownerDocument,u===_r.html&&(u=qr(l)),u===_r.html?"script"===l?((l=p.createElement("div")).innerHTML="<script><\/script>",p=l.removeChild(l.firstChild)):"string"==typeof d.is?p=p.createElement(l,{is:d.is}):(p=p.createElement(l),"select"===l&&d.multiple&&(p.multiple=!0)):p=p.createElementNS(u,l),(l=p)[P]=f,l[Q]=s,hl(l,t,!1,!1),d=l;var g=c,h=pn(p=i,f=s);switch(p){case"iframe":case"object":Cr("load",d),c=f;break;case"video":case"audio":for(c=0;c<te.length;c++)Cr(te[c],d);c=f;break;case"source":Cr("error",d),c=f;break;case"img":case"image":case"link":Cr("error",d),Cr("load",d),c=f;break;case"form":Cr("reset",d),Cr("submit",d),c=f;break;case"details":Cr("toggle",d),c=f;break;case"input":vt(d,f),c=yt(d,f),Cr("invalid",d),fn(g,"onChange");break;case"option":c=Vr(d,f);break;case"select":d._wrapperState={wasMultiple:!!f.multiple},c=o({},f,{value:void 0}),Cr("invalid",d),fn(g,"onChange");break;case"textarea":Xr(d,f),c=Wr(d,f),Cr("invalid",d),fn(g,"onChange");break;default:c=f}un(p,c),u=void 0;var m=p,b=d,A=c;for(u in A)if(A.hasOwnProperty(u)){var v=A[u];"style"===u?sn(b,v):"dangerouslySetInnerHTML"===u?null!=(v=v?v.__html:void 0)&&rn(b,v):"children"===u?"string"==typeof v?("textarea"!==m||""!==v)&&nn(b,v):"number"==typeof v&&nn(b,""+v):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(y.hasOwnProperty(u)?null!=v&&fn(g,u):null!=v&&bt(b,u,v,h))}switch(p){case"input":Ue(d),kt(d,f,!1);break;case"textarea":Ue(d),Zr(d);break;case"option":null!=f.value&&d.setAttribute("value",""+At(f.value));break;case"select":(c=d).multiple=!!f.multiple,null!=(d=f.value)?Jr(c,!!f.multiple,d,!1):null!=f.defaultValue&&Jr(c,!!f.multiple,f.defaultValue,!0);break;default:"function"==typeof c.onClick&&(d.onclick=dn)}(s=mn(i,s))&&gl(t),t.stateNode=l}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&a("166");break;case 6:l&&null!=t.stateNode?Al(l,t,l.memoizedProps,s):("string"!=typeof s&&(null===t.stateNode&&a("166")),l=Io(Eo.current),Io(ko.current),$o(t)?(i=(s=t).stateNode,l=s.memoizedProps,i[P]=s,(s=i.nodeValue!==l)&&gl(t)):(i=t,(s=(9===l.nodeType?l:l.ownerDocument).createTextNode(s))[P]=t,i.stateNode=s));break;case 11:break;case 13:if(s=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=i,jl=t;break e}s=null!==s,i=null!==l&&null!==l.memoizedState,null!==l&&!s&&i&&(null!==(l=l.child.sibling)&&(null!==(c=t.firstEffect)?(t.firstEffect=l,l.nextEffect=c):(t.firstEffect=t.lastEffect=l,l.nextEffect=null),l.effectTag=8)),(s!==i||0==(1&t.effectTag)&&s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:To(),ml(t);break;case 10:yo(t);break;case 9:case 14:break;case 17:Rn(t.type)&&Mn();break;default:a("156")}jl=null}if(t=e,1===Dl||1!==t.childExpirationTime){for(s=0,i=t.child;null!==i;)(l=i.expirationTime)>s&&(s=l),(c=i.childExpirationTime)>s&&(s=c),i=i.sibling;t.childExpirationTime=s}if(null!==jl)return jl;null!==r&&0==(1024&r.effectTag)&&(null===r.firstEffect&&(r.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==r.lastEffect&&(r.lastEffect.nextEffect=e.firstEffect),r.lastEffect=e.lastEffect),1<e.effectTag&&(null!==r.lastEffect?r.lastEffect.nextEffect=e:r.firstEffect=e,r.lastEffect=e))}else{if(null!==(e=Nl(e)))return e.effectTag&=1023,e;null!==r&&(r.firstEffect=r.lastEffect=null,r.effectTag|=1024)}if(null!==n)return n;if(null===r)break;e=r}return null}function Kl(e){var t=dl(e.alternate,e,Dl);return e.memoizedProps=e.pendingProps,null===t&&(t=Xl(e)),Ml.current=null,t}function Zl(e,t){Ol&&a("243"),Wl(),Ol=!0,Ml.currentDispatcher=Rl;var r=e.nextExpirationTimeToWorkOn;r===Dl&&e===Ll&&null!==jl||(Jl(),Dl=r,jl=Hn((Ll=e).current,null),e.pendingCommitExpirationTime=0);for(var n=!1;;){try{if(t)for(;null!==jl&&!Na();)jl=Kl(jl);else for(;null!==jl;)jl=Kl(jl)}catch(t){if(bo=mo=ho=null,null===jl)n=!0,ja(t);else{null===jl&&a("271");var o=jl,l=o.return;if(null!==l){e:{var i=e,s=l,c=o,u=t;if(l=Dl,c.effectTag|=1024,c.firstEffect=c.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var p=u;u=s;var f=-1,d=-1;do{if(13===u.tag){var g=u.alternate;if(null!==g&&null!==(g=g.memoizedState)){d=10*(1073741822-g.timedOutAt);break}"number"==typeof(g=u.pendingProps.maxDuration)&&(0>=g?f=0:(-1===f||g<f)&&(f=g))}u=u.return}while(null!==u);u=s;do{if((g=13===u.tag)&&(g=void 0!==u.memoizedProps.fallback&&null===u.memoizedState),g){if(null===(s=u.updateQueue)?u.updateQueue=new Set([p]):s.add(p),0==(1&u.mode)){u.effectTag|=64,c.effectTag&=-1957,1===c.tag&&(null===c.alternate?c.tag=17:((l=no(1073741823)).tag=2,lo(c,l))),c.expirationTime=1073741823;break e}null===(c=i.pingCache)?(c=i.pingCache=new Sl,s=new Set,c.set(p,s)):void 0===(s=c.get(p))&&(s=new Set,c.set(p,s)),s.has(l)||(s.add(l),c=$l.bind(null,i,p,l),p.then(c,c)),-1===f?i=1073741823:(-1===d&&(d=10*(1073741822-qn(i,l))-5e3),i=d+f),0<=i&&Gl<i&&(Gl=i),u.effectTag|=2048,u.expirationTime=l;break e}u=u.return}while(null!==u);u=Error((it(c.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+st(c))}zl=!0,u=fo(u,c),i=s;do{switch(i.tag){case 3:i.effectTag|=2048,i.expirationTime=l,ao(i,l=Tl(i,u,l));break e;case 1:if(p=u,f=i.type,d=i.stateNode,0==(64&i.effectTag)&&("function"==typeof f.getDerivedStateFromError||null!==d&&"function"==typeof d.componentDidCatch&&(null===Vl||!Vl.has(d)))){i.effectTag|=2048,i.expirationTime=l,ao(i,l=Bl(i,p,l));break e}}i=i.return}while(null!==i)}jl=Xl(o);continue}n=!0,ja(t)}}break}if(Ol=!1,bo=mo=ho=Ml.currentDispatcher=null,n)Ll=null,e.finishedWork=null;else if(null!==jl)e.finishedWork=null;else{if(null===(n=e.current.alternate)&&a("281"),Ll=null,zl){if(o=e.latestPendingTime,l=e.latestSuspendedTime,i=e.latestPingedTime,0!==o&&o<r||0!==l&&l<r||0!==i&&i<r)return _n(e,r),void Ea(e,n,r,e.expirationTime,-1);if(!e.didError&&t)return e.didError=!0,r=e.nextExpirationTimeToWorkOn=r,t=e.expirationTime=1073741823,void Ea(e,n,r,t,-1)}t&&-1!==Gl?(_n(e,r),(t=10*(1073741822-qn(e,r)))<Gl&&(Gl=t),t=10*(1073741822-Ia()),t=Gl-t,Ea(e,n,r,e.expirationTime,0>t?0:t)):(e.pendingCommitExpirationTime=r,e.finishedWork=n)}}function _l(e,t){for(var r=e.return;null!==r;){switch(r.tag){case 1:var n=r.stateNode;if("function"==typeof r.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Vl||!Vl.has(n)))return lo(r,e=Bl(r,e=fo(t,e),1073741823)),void ta(r,1073741823);break;case 3:return lo(r,e=Tl(r,e=fo(t,e),1073741823)),void ta(r,1073741823)}r=r.return}3===e.tag&&(lo(e,r=Tl(e,r=fo(t,e),1073741823)),ta(e,1073741823))}function ql(e,t){return 0!==Ql?e=Ql:Ol?e=Ul?1073741823:Dl:1&t.mode?(e=ha?1073741822-10*(1+((1073741822-e+15)/10|0)):1073741822-25*(1+((1073741822-e+500)/25|0)),null!==Ll&&e===Dl&&--e):e=1073741823,ha&&(0===ua||e<ua)&&(ua=e),e}function $l(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),null!==Ll&&Dl===r?Ll=null:(t=e.earliestSuspendedTime,n=e.latestSuspendedTime,0!==t&&r<=t&&r>=n&&(e.didError=!1,(0===(t=e.latestPingedTime)||t>r)&&(e.latestPingedTime=r),$n(r,e),0!==(r=e.expirationTime)&&Sa(e,r)))}function ea(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;null!==r&&r.expirationTime<t&&(r.expirationTime=t);var n=e.return,o=null;if(null===n&&3===e.tag)o=e.stateNode;else for(;null!==n;){if(r=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),null!==r&&r.childExpirationTime<t&&(r.childExpirationTime=t),null===n.return&&3===n.tag){o=n.stateNode;break}n=n.return}return o}function ta(e,t){null!==(e=ea(e,t))&&(!Ol&&0!==Dl&&t>Dl&&Jl(),Zn(e,t),Ol&&!Ul&&Ll===e||Sa(e,e.expirationTime),wa>va&&(wa=0,a("185")))}function ra(e,t,r,n,o){var l=Ql;Ql=1073741823;try{return e(t,r,n,o)}finally{Ql=l}}var na=null,oa=null,la=0,aa=void 0,ia=!1,sa=null,ca=0,ua=0,pa=!1,fa=null,da=!1,ga=!1,ha=!1,ma=null,ba=l.unstable_now(),Aa=1073741822-(ba/10|0),ya=Aa,va=50,wa=0,xa=null;function ka(){Aa=1073741822-((l.unstable_now()-ba)/10|0)}function Ca(e,t){if(0!==la){if(t<la)return;null!==aa&&l.unstable_cancelCallback(aa)}la=t,e=l.unstable_now()-ba,aa=l.unstable_scheduleCallback(Ra,{timeout:10*(1073741822-t)-e})}function Ea(e,t,r,n,o){e.expirationTime=n,0!==o||Na()?0<o&&(e.timeoutHandle=An(function(e,t,r){e.pendingCommitExpirationTime=r,e.finishedWork=t,ka(),ya=Aa,Pa(e,r)}.bind(null,e,t,r),o)):(e.pendingCommitExpirationTime=r,e.finishedWork=t)}function Ia(){return ia?ya:(Ta(),0!==ca&&1!==ca||(ka(),ya=Aa),ya)}function Sa(e,t){null===e.nextScheduledRoot?(e.expirationTime=t,null===oa?(na=oa=e,e.nextScheduledRoot=e):(oa=oa.nextScheduledRoot=e).nextScheduledRoot=na):t>e.expirationTime&&(e.expirationTime=t),ia||(da?ga&&(sa=e,ca=1073741823,Qa(e,1073741823,!1)):1073741823===t?Ma(1073741823,!1):Ca(e,t))}function Ta(){var e=0,t=null;if(null!==oa)for(var r=oa,n=na;null!==n;){var o=n.expirationTime;if(0===o){if((null===r||null===oa)&&a("244"),n===n.nextScheduledRoot){na=oa=n.nextScheduledRoot=null;break}if(n===na)na=o=n.nextScheduledRoot,oa.nextScheduledRoot=o,n.nextScheduledRoot=null;else{if(n===oa){(oa=r).nextScheduledRoot=na,n.nextScheduledRoot=null;break}r.nextScheduledRoot=n.nextScheduledRoot,n.nextScheduledRoot=null}n=r.nextScheduledRoot}else{if(o>e&&(e=o,t=n),n===oa)break;if(1073741823===e)break;r=n,n=n.nextScheduledRoot}}sa=t,ca=e}var Ba=!1;function Na(){return!!Ba||!!l.unstable_shouldYield()&&(Ba=!0)}function Ra(){try{if(!Na()&&null!==na){ka();var e=na;do{var t=e.expirationTime;0!==t&&Aa<=t&&(e.nextExpirationTimeToWorkOn=Aa),e=e.nextScheduledRoot}while(e!==na)}Ma(0,!0)}finally{Ba=!1}}function Ma(e,t){if(Ta(),t)for(ka(),ya=Aa;null!==sa&&0!==ca&&e<=ca&&!(Ba&&Aa>ca);)Qa(sa,ca,Aa>ca),Ta(),ka(),ya=Aa;else for(;null!==sa&&0!==ca&&e<=ca;)Qa(sa,ca,!1),Ta();if(t&&(la=0,aa=null),0!==ca&&Ca(sa,ca),wa=0,xa=null,null!==ma)for(e=ma,ma=null,t=0;t<e.length;t++){var r=e[t];try{r._onComplete()}catch(e){pa||(pa=!0,fa=e)}}if(pa)throw e=fa,fa=null,pa=!1,e}function Pa(e,t){ia&&a("253"),sa=e,ca=t,Qa(e,t,!1),Ma(1073741823,!1)}function Qa(e,t,r){if(ia&&a("245"),ia=!0,r){var n=e.finishedWork;null!==n?Oa(e,n,t):(e.finishedWork=null,-1!==(n=e.timeoutHandle)&&(e.timeoutHandle=-1,yn(n)),Zl(e,r),null!==(n=e.finishedWork)&&(Na()?e.finishedWork=n:Oa(e,n,t)))}else null!==(n=e.finishedWork)?Oa(e,n,t):(e.finishedWork=null,-1!==(n=e.timeoutHandle)&&(e.timeoutHandle=-1,yn(n)),Zl(e,r),null!==(n=e.finishedWork)&&Oa(e,n,t));ia=!1}function Oa(e,t,r){var n=e.firstBatch;if(null!==n&&n._expirationTime>=r&&(null===ma?ma=[n]:ma.push(n),n._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===xa?wa++:(xa=e,wa=0),Ul=Ol=!0,e.current===t&&a("177"),0===(r=e.pendingCommitExpirationTime)&&a("261"),e.pendingCommitExpirationTime=0,n=t.expirationTime;var o=t.childExpirationTime;if(n=o>n?o:n,e.didError=!1,0===n?(e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0):(n<e.latestPingedTime&&(e.latestPingedTime=0),0!==(o=e.latestPendingTime)&&(o>n?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime>n&&(e.earliestPendingTime=e.latestPendingTime)),0===(o=e.earliestSuspendedTime)?Zn(e,n):n<e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,Zn(e,n)):n>o&&Zn(e,n)),$n(0,e),Ml.current=null,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,n=t.firstEffect):n=t:n=t.firstEffect,gn=kr,jr(o=Or())){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{var i=(l=(l=o.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(i&&0!==i.rangeCount){l=i.anchorNode;var s=i.anchorOffset,c=i.focusNode;i=i.focusOffset;try{l.nodeType,c.nodeType}catch(e){l=null;break e}var u=0,p=-1,f=-1,d=0,g=0,h=o,m=null;t:for(;;){for(var b;h!==l||0!==s&&3!==h.nodeType||(p=u+s),h!==c||0!==i&&3!==h.nodeType||(f=u+i),3===h.nodeType&&(u+=h.nodeValue.length),null!==(b=h.firstChild);)m=h,h=b;for(;;){if(h===o)break t;if(m===l&&++d===s&&(p=u),m===c&&++g===i&&(f=u),null!==(b=h.nextSibling))break;m=(h=m).parentNode}h=b}l=-1===p||-1===f?null:{start:p,end:f}}else l=null}l=l||{start:0,end:0}}else l=null;for(hn={focusedElem:o,selectionRange:l},kr=!1,Fl=n;null!==Fl;){o=!1,l=void 0;try{for(;null!==Fl;){if(256&Fl.effectTag)e:{var A=Fl.alternate;switch((s=Fl).tag){case 0:case 11:case 15:break e;case 1:if(256&s.effectTag&&null!==A){var y=A.memoizedProps,v=A.memoizedState,w=s.stateNode,x=w.getSnapshotBeforeUpdate(s.elementType===s.type?y:Ro(s.type,y),v);w.__reactInternalSnapshotBeforeUpdate=x}break e;case 3:case 5:case 6:case 4:case 17:break e;default:a("163")}}Fl=Fl.nextEffect}}catch(e){o=!0,l=e}o&&(null===Fl&&a("178"),_l(Fl,l),null!==Fl&&(Fl=Fl.nextEffect))}for(Fl=n;null!==Fl;){A=!1,y=void 0;try{for(;null!==Fl;){var k=Fl.effectTag;if(16&k&&nn(Fl.stateNode,""),128&k){var C=Fl.alternate;if(null!==C){var E=C.ref;null!==E&&("function"==typeof E?E(null):E.current=null)}}switch(14&k){case 2:Cl(Fl),Fl.effectTag&=-3;break;case 6:Cl(Fl),Fl.effectTag&=-3,Il(Fl.alternate,Fl);break;case 4:Il(Fl.alternate,Fl);break;case 8:El(v=Fl),v.return=null,v.child=null,v.memoizedState=null,v.updateQueue=null;var I=v.alternate;null!==I&&(I.return=null,I.child=null,I.memoizedState=null,I.updateQueue=null)}Fl=Fl.nextEffect}}catch(e){A=!0,y=e}A&&(null===Fl&&a("178"),_l(Fl,y),null!==Fl&&(Fl=Fl.nextEffect))}if(E=hn,C=Or(),k=E.focusedElem,A=E.selectionRange,C!==k&&k&&k.ownerDocument&&function e(t,r){return!(!t||!r)&&(t===r||(!t||3!==t.nodeType)&&(r&&3===r.nodeType?e(t,r.parentNode):"contains"in t?t.contains(r):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(r))))}(k.ownerDocument.documentElement,k)){null!==A&&jr(k)&&(C=A.start,void 0===(E=A.end)&&(E=C),"selectionStart"in k?(k.selectionStart=C,k.selectionEnd=Math.min(E,k.value.length)):(E=(C=k.ownerDocument||document)&&C.defaultView||window).getSelection&&(E=E.getSelection(),y=k.textContent.length,I=Math.min(A.start,y),A=void 0===A.end?I:Math.min(A.end,y),!E.extend&&I>A&&(y=A,A=I,I=y),y=Qr(k,I),v=Qr(k,A),y&&v&&(1!==E.rangeCount||E.anchorNode!==y.node||E.anchorOffset!==y.offset||E.focusNode!==v.node||E.focusOffset!==v.offset)&&((C=C.createRange()).setStart(y.node,y.offset),E.removeAllRanges(),I>A?(E.addRange(C),E.extend(v.node,v.offset)):(C.setEnd(v.node,v.offset),E.addRange(C))))),C=[];for(E=k;E=E.parentNode;)1===E.nodeType&&C.push({element:E,left:E.scrollLeft,top:E.scrollTop});for("function"==typeof k.focus&&k.focus(),k=0;k<C.length;k++)(E=C[k]).element.scrollLeft=E.left,E.element.scrollTop=E.top}for(hn=null,kr=!!gn,gn=null,e.current=t,Fl=n;null!==Fl;){n=!1,k=void 0;try{for(C=r;null!==Fl;){var S=Fl.effectTag;if(36&S){var T=Fl.alternate;switch(I=C,(E=Fl).tag){case 0:case 11:case 15:break;case 1:var B=E.stateNode;if(4&E.effectTag)if(null===T)B.componentDidMount();else{var N=E.elementType===E.type?T.memoizedProps:Ro(E.type,T.memoizedProps);B.componentDidUpdate(N,T.memoizedState,B.__reactInternalSnapshotBeforeUpdate)}var R=E.updateQueue;null!==R&&uo(0,R,B);break;case 3:var M=E.updateQueue;if(null!==M){if(A=null,null!==E.child)switch(E.child.tag){case 5:A=E.child.stateNode;break;case 1:A=E.child.stateNode}uo(0,M,A)}break;case 5:var P=E.stateNode;null===T&&4&E.effectTag&&mn(E.type,E.memoizedProps)&&P.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:a("163")}}if(128&S){var Q=Fl.ref;if(null!==Q){var O=Fl.stateNode;switch(Fl.tag){case 5:var j=O;break;default:j=O}"function"==typeof Q?Q(j):Q.current=j}}Fl=Fl.nextEffect}}catch(e){n=!0,k=e}n&&(null===Fl&&a("178"),_l(Fl,k),null!==Fl&&(Fl=Fl.nextEffect))}Ol=Ul=!1,"function"==typeof Dn&&Dn(t.stateNode),S=t.expirationTime,0===(t=(t=t.childExpirationTime)>S?t:S)&&(Vl=null),e.expirationTime=t,e.finishedWork=null}function ja(e){null===sa&&a("246"),sa.expirationTime=0,pa||(pa=!0,fa=e)}function La(e,t){var r=da;da=!0;try{return e(t)}finally{(da=r)||ia||Ma(1073741823,!1)}}function Da(e,t){if(da&&!ga){ga=!0;try{return e(t)}finally{ga=!1}}return e(t)}function Ga(e,t,r){if(ha)return e(t,r);da||ia||0===ua||(Ma(ua,!1),ua=0);var n=ha,o=da;da=ha=!0;try{return e(t,r)}finally{ha=n,(da=o)||ia||Ma(1073741823,!1)}}function za(e,t,r,n,o){var l=t.current;e:if(r){t:{2===tr(r=r._reactInternalFiber)&&1===r.tag||a("170");var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break t;case 1:if(Rn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break t}}i=i.return}while(null!==i);a("171"),i=void 0}if(1===r.tag){var s=r.type;if(Rn(s)){r=On(r,s,i);break e}}r=i}else r=In;return null===t.context?t.context=r:t.pendingContext=r,t=o,(o=no(n)).payload={element:e},null!==(t=void 0===t?null:t)&&(o.callback=t),Wl(),lo(l,o),ta(l,n),n}function Fa(e,t,r,n){var o=t.current;return za(e,t,r,o=ql(Ia(),o),n)}function Ua(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Ya(e){var t=1073741822-25*(1+((1073741822-Ia()+500)/25|0));t>=Pl&&(t=Pl-1),this._expirationTime=Pl=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Ha(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function Va(e,t,r){e={current:t=Un(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:r,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Ja(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Wa(e,t,r,n,o){Ja(r)||a("200");var l=r._reactRootContainer;if(l){if("function"==typeof o){var i=o;o=function(){var e=Ua(l._internalRoot);i.call(e)}}null!=e?l.legacy_renderSubtreeIntoContainer(e,t,o):l.render(t,o)}else{if(l=r._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new Va(e,!1,t)}(r,n),"function"==typeof o){var s=o;o=function(){var e=Ua(l._internalRoot);s.call(e)}}Da(function(){null!=e?l.legacy_renderSubtreeIntoContainer(e,t,o):l.render(t,o)})}return Ua(l._internalRoot)}function Xa(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Ja(t)||a("200"),function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Xe,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)}Ie=function(e,t,r){switch(t){case"input":if(xt(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=D(n);o||a("90"),Ye(n),xt(n,o)}}}break;case"textarea":Kr(e,r);break;case"select":null!=(t=r.value)&&Jr(e,!!r.multiple,t,!1)}},Ya.prototype.render=function(e){this._defer||a("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,r=this._expirationTime,n=new Ha;return za(e,t,null,r,n._onCommit),n},Ya.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Ya.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||a("251"),this._hasChildren){var r=this._expirationTime;if(t!==this){this._hasChildren&&(r=this._expirationTime=t._expirationTime,this.render(this._children));for(var n=null,o=t;o!==this;)n=o,o=o._next;null===n&&a("251"),n._next=o._next,this._next=t,e.firstBatch=this}this._defer=!1,Pa(e,r),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},Ya.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},Ha.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},Ha.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var r=e[t];"function"!=typeof r&&a("191",r),r()}}},Va.prototype.render=function(e,t){var r=this._internalRoot,n=new Ha;return null!==(t=void 0===t?null:t)&&n.then(t),Fa(e,r,null,n._onCommit),n},Va.prototype.unmount=function(e){var t=this._internalRoot,r=new Ha;return null!==(e=void 0===e?null:e)&&r.then(e),Fa(null,t,null,r._onCommit),r},Va.prototype.legacy_renderSubtreeIntoContainer=function(e,t,r){var n=this._internalRoot,o=new Ha;return null!==(r=void 0===r?null:r)&&o.then(r),Fa(t,n,e,o._onCommit),o},Va.prototype.createBatch=function(){var e=new Ya(this),t=e._expirationTime,r=this._internalRoot,n=r.firstBatch;if(null===n)r.firstBatch=e,e._next=null;else{for(r=null;null!==n&&n._expirationTime>=t;)r=n,n=n._next;e._next=n,null!==r&&(r._next=e)}return e},Me=La,Pe=Ga,Qe=function(){ia||0===ua||(Ma(ua,!1),ua=0)};var Ka={createPortal:Xa,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?a("188"):a("268",Object.keys(e))),e=null===(e=nr(t))?null:e.stateNode},hydrate:function(e,t,r){return Wa(null,e,t,!0,r)},render:function(e,t,r){return Wa(null,e,t,!1,r)},unstable_renderSubtreeIntoContainer:function(e,t,r,n){return(null==e||void 0===e._reactInternalFiber)&&a("38"),Wa(e,t,r,!1,n)},unmountComponentAtNode:function(e){return Ja(e)||a("40"),!!e._reactRootContainer&&(Da(function(){Wa(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Xa.apply(void 0,arguments)},unstable_batchedUpdates:La,unstable_interactiveUpdates:Ga,flushSync:function(e,t){ia&&a("187");var r=da;da=!0;try{return ra(e,t)}finally{da=r,Ma(1073741823,!1)}},unstable_createRoot:function(e,t){return Ja(e)||a("299","unstable_createRoot"),new Va(e,!0,null!=t&&!0===t.hydrate)},unstable_flushControlled:function(e){var t=da;da=!0;try{ra(e)}finally{(da=t)||ia||Ma(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[j,L,D,B.injectEventPluginsByName,A,H,function(e){I(e,Y)},Ne,Re,Sr,R]}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var r=t.inject(e);Dn=zn(function(e){return t.onCommitFiberRoot(r,e)}),Gn=zn(function(e){return t.onCommitFiberUnmount(r,e)})}catch(e){}})(o({},e,{overrideProps:null,findHostInstanceByFiber:function(e){return null===(e=nr(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:O,bundleType:0,version:"16.7.0",rendererPackageName:"react-dom"});var Za={default:Ka},_a=Za&&Ka||Za;e.exports=_a.default||_a},function(e,t,r){"use strict";e.exports=r(22)},function(e,t,r){"use strict";(function(e){
/** @license React v0.12.0
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
Object.defineProperty(t,"__esModule",{value:!0});var r=null,n=!1,o=3,l=-1,a=-1,i=!1,s=!1;function c(){if(!i){var e=r.expirationTime;s?k():s=!0,x(f,e)}}function u(){var e=r,t=r.next;if(r===t)r=null;else{var n=r.previous;r=n.next=t,t.previous=n}e.next=e.previous=null,n=e.callback,t=e.expirationTime,e=e.priorityLevel;var l=o,i=a;o=e,a=t;try{var s=n()}finally{o=l,a=i}if("function"==typeof s)if(s={callback:s,priorityLevel:e,expirationTime:t,next:null,previous:null},null===r)r=s.next=s.previous=s;else{n=null,e=r;do{if(e.expirationTime>=t){n=e;break}e=e.next}while(e!==r);null===n?n=r:n===r&&(r=s,c()),(t=n.previous).next=n.previous=s,s.next=n,s.previous=t}}function p(){if(-1===l&&null!==r&&1===r.priorityLevel){i=!0;try{do{u()}while(null!==r&&1===r.priorityLevel)}finally{i=!1,null!==r?c():s=!1}}}function f(e){i=!0;var o=n;n=e;try{if(e)for(;null!==r;){var l=t.unstable_now();if(!(r.expirationTime<=l))break;do{u()}while(null!==r&&r.expirationTime<=l)}else if(null!==r)do{u()}while(null!==r&&!C())}finally{i=!1,n=o,null!==r?c():s=!1,p()}}var d,g,h=Date,m="function"==typeof setTimeout?setTimeout:void 0,b="function"==typeof clearTimeout?clearTimeout:void 0,A="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,y="function"==typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function v(e){d=A(function(t){b(g),e(t)}),g=m(function(){y(d),e(t.unstable_now())},100)}if("object"==typeof performance&&"function"==typeof performance.now){var w=performance;t.unstable_now=function(){return w.now()}}else t.unstable_now=function(){return h.now()};var x,k,C,E=null;if("undefined"!=typeof window?E=window:void 0!==e&&(E=e),E&&E._schedMock){var I=E._schedMock;x=I[0],k=I[1],C=I[2],t.unstable_now=I[3]}else if("undefined"==typeof window||"function"!=typeof MessageChannel){var S=null,T=function(e){if(null!==S)try{S(e)}finally{S=null}};x=function(e){null!==S?setTimeout(x,0,e):(S=e,setTimeout(T,0,!1))},k=function(){S=null},C=function(){return!1}}else{"undefined"!=typeof console&&("function"!=typeof A&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var B=null,N=!1,R=-1,M=!1,P=!1,Q=0,O=33,j=33;C=function(){return Q<=t.unstable_now()};var L=new MessageChannel,D=L.port2;L.port1.onmessage=function(){N=!1;var e=B,r=R;B=null,R=-1;var n=t.unstable_now(),o=!1;if(0>=Q-n){if(!(-1!==r&&r<=n))return M||(M=!0,v(G)),B=e,void(R=r);o=!0}if(null!==e){P=!0;try{e(o)}finally{P=!1}}};var G=function(e){if(null!==B){v(G);var t=e-Q+j;t<j&&O<j?(8>t&&(t=8),j=t<O?O:t):O=t,Q=e+j,N||(N=!0,D.postMessage(void 0))}else M=!1};x=function(e,t){B=e,R=t,P||0>t?D.postMessage(void 0):M||(M=!0,v(G))},k=function(){B=null,N=!1,R=-1}}t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,r){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=o,a=l;o=e,l=t.unstable_now();try{return r()}finally{o=n,l=a,p()}},t.unstable_scheduleCallback=function(e,n){var a=-1!==l?l:t.unstable_now();if("object"==typeof n&&null!==n&&"number"==typeof n.timeout)n=a+n.timeout;else switch(o){case 1:n=a+-1;break;case 2:n=a+250;break;case 5:n=a+1073741823;break;case 4:n=a+1e4;break;default:n=a+5e3}if(e={callback:e,priorityLevel:o,expirationTime:n,next:null,previous:null},null===r)r=e.next=e.previous=e,c();else{a=null;var i=r;do{if(i.expirationTime>n){a=i;break}i=i.next}while(i!==r);null===a?a=r:a===r&&(r=e,c()),(n=a.previous).next=a.previous=e,e.next=a,e.previous=n}return e},t.unstable_cancelCallback=function(e){var t=e.next;if(null!==t){if(t===e)r=null;else{e===r&&(r=t);var n=e.previous;n.next=t,t.previous=n}e.next=e.previous=null}},t.unstable_wrapCallback=function(e){var r=o;return function(){var n=o,a=l;o=r,l=t.unstable_now();try{return e.apply(this,arguments)}finally{o=n,l=a,p()}}},t.unstable_getCurrentPriorityLevel=function(){return o},t.unstable_shouldYield=function(){return!n&&(null!==r&&r.expirationTime<a||C())},t.unstable_continueExecution=function(){null!==r&&c()},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return r}}).call(this,r(23))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){var r,n,o=e.exports={};function l(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(e){if(r===setTimeout)return setTimeout(e,0);if((r===l||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:l}catch(e){r=l}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s,c=[],u=!1,p=-1;function f(){u&&s&&(u=!1,s.length?c=s.concat(c):p=-1,c.length&&d())}function d(){if(!u){var e=i(f);u=!0;for(var t=c.length;t;){for(s=c,c=[];++p<t;)s&&s[p].run();p=-1,t=c.length}s=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new g(e,t)),1!==c.length||u||i(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";
/** @license React v16.7.0
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,o=n?Symbol.for("react.element"):60103,l=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,p=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,g=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case p:case f:case a:case s:case i:case g:return e;default:switch(e=e&&e.$$typeof){case u:case d:case c:return e;default:return t}}case m:case h:case l:return t}}}function A(e){return b(e)===f}t.typeOf=b,t.AsyncMode=p,t.ConcurrentMode=f,t.ContextConsumer=u,t.ContextProvider=c,t.Element=o,t.ForwardRef=d,t.Fragment=a,t.Lazy=m,t.Memo=h,t.Portal=l,t.Profiler=s,t.StrictMode=i,t.Suspense=g,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===f||e===s||e===i||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===h||e.$$typeof===c||e.$$typeof===u||e.$$typeof===d)},t.isAsyncMode=function(e){return A(e)||b(e)===p},t.isConcurrentMode=A,t.isContextConsumer=function(e){return b(e)===u},t.isContextProvider=function(e){return b(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return b(e)===d},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===m},t.isMemo=function(e){return b(e)===h},t.isPortal=function(e){return b(e)===l},t.isProfiler=function(e){return b(e)===s},t.isStrictMode=function(e){return b(e)===i},t.isSuspense=function(e){return b(e)===g}},function(e,t,r){e.exports=r(27)()},function(e,t,r){"use strict";var n=r(28);function o(){}e.exports=function(){function e(e,t,r,o,l,a){if(a!==n){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return r.checkPropTypes=o,r.PropTypes=r,r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";r.r(t);r(12),r(15),r(17);var n=r(0),o=r.n(n),l=r(2),a=r.n(l),i=r(1),s="rgb(176, 36, 35)";function c(){var e=h(["\n  background-color: ",";\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAPJElEQVR4Xu2d3XIctxFGgQfIdR40lit2RFbZkpKUpPdNqnIxKYq7FMmd2cHP10ADOL4l0MCc7u9w5JXIGO78t23bnyGE/8UYP91bx9cgAAF/BLZt+yWE8NcY44ej28WjL1zC/3D5+iMS8NdgbgSBO/l9Cv+3y9e/H0lgVwDvwn89AwkwbxAYgMDlO/81/Ncb70rgRgAH4UcCAzSeK0LgIPyHEngjgJPwIwHmCwKOCZyEf1cCLwJIDD8ScDwAXG1dAonhv5HADwFkhh8JrDtnPLlDApnhvz7Btxjjr7Ew/EjA4SBwpfUIFIb/pwQqCzwV4tOB9eaOJ3ZAQJDdh+sfAV5/ZljyaEighBp7IFBIQBL+GD+//p+ASKCwGWyDQEsCqvA/3fn9x4BIoGUnOQsCmQSU4b8RwOUTASSQ2RSWQ6AFAXX4dwWABFq0kjMgkEfAIvyHAkACec1hNQQsCViF/64AkIBlS6kNgTQCluE/FQASSGsSqyBgQcA6/EkCQAIWraUmBO4TaBH+ZAEgAcYVAu0ItAp/lgCQQLsB4KR1CbQMf7YAkMC6g8mT2xNoHf4iASAB+0HghPUI9Ah/sQCQwHoDyhPbEegV/ioBIAG7gaDyOgR6hr9aAEhgnUHlSfUEeodfIgAkoB8MKs5PwEP4ZQJAAvMPLE+oI+Al/FIBIAHdgFBpXgKewi8XABKYd3B5snoC3sJvIgAkUD8oVJiPgMfwmwkACcw3wDxROYFt255+O+/X8grhIcb4uWL/4dbD3w6sOExgPX7asKIR1OhGwHP4Td8ArsSRQLfZ4+DOBLyHv4kA+ONA5ynk+C4ERgh/MwEggS4zyKGdCIwS/qYCQAKdppFjmxIYKfzNBYAEms4ihzUmMFr4uwgACTSeSo5rQmDE8HcTABJoMpMc0ojAqOHvKgAk0Gg6OcaUwMjh7y4AJGA6mxQ3JjB6+F0IAAkYTynlTQjMEH43AkACJjNKUSMCs4TflQCQgNG0UlZKYKbwuxMAEpDOKsXEBGYLv0sBIAHx1FJOQmDG8LsVABKQzCxFRARmDb9rASAB0fRSporAzOF3LwAkUDW7bK4kMHv4hxAAEqicYrYXEVgh/MMIAAkUzTCbCgmsEv6hBIAECqeZbVkEVgr/cAJAAlmzzOJMAquFf0gBIIHMqWZ5EoEVwz+sAJBA0kyzKJHAquEfWgBIIHG6WXaXwMrhH14ASIB01xBYPfxTCAAJ1ERg3b2E/7n3pr8arOV48RuIWtIe+yzC/7N/0wiAN4GxQ9nq9oT/LempBIAEWsVozHMI/23fphMAEhgznNa3Jvz7hKcUABKwjtNY9Qn/cb+mFQASGCukVrcl/PfJTi0AJGAVqzHqEv7zPk0vACRwPgQzriD8aV1dQgBIIG0YZllF+NM7uYwAkED6UIy8kvDndW8pAVwk8LcQwvc8TG9WP8YYP1XsZ6sRAUH4P8YYvxhdz2XZ5QSABFzOYfWlCH8ZwiUFgATKhsXrLsJf3pllBYAEyofG007CX9eNpQWABOqGp/duwl/fgeUFgATqh6hHBcKvoY4ALhy3bePTAc1MmVch/DrECOAVSySgGyyrSoRfSxYBvOOJBLQDpqxG+JU0n2shgB2mSEA/aLUVCX8twf39COCAKxKwGbiSqoS/hFraHgRwhxMSSBsiy1WE35IufwQ4pYsEThGZLSD8ZmhfCvMGkMAYCSRAEi8h/GKgB+UQQCJnJJAISrCM8AsgJpZAAImgnpYhgQxYhUsJfyG4wm0IIBMcEsgElrGc8GfAEi1FAAUgkUABtJMthF/PNKUiAkihtLMGCRSC22f5IYTwtaLicj/Jp4LVm60IoIIkEqiAd9nKd/56hjUVEEANPf7HYBU9wl+FT7IZAQgw8iaQD5Hw5zOz2IEARFSRQDpIwp/OynolAhASRgLnMAn/OaOWKxCAmDYSOAZK+MXDJiiHAAQQ35dAArdQCb/BoAlKIgABxL0SSOAnFcJvNGSCsghAAPGoBBL48e8n+Es+hjNWWxoB1BI82b+yBAi/8XAJyiMAAcSzEitKgPCfTYWPryOARn1YSQKEv9FQCY5BAAKIqSVWkADhT50GH+sQQOM+zCwBwt94mATHIQABxNwSM0qA8OdOgY/1CKBTH2aSAOHvNESCYxGAAGJpiRkkQPhLu+9jHwLo3IeRJUD4Ow+P4HgEIIBYW2JECRD+2q772I8AfPRhqB85TvidDI3gGghAAFFVYoQ3AcKv6raPOgjARx9ebuFZAoTf2bAIroMABBDVJTxKgPCru+yjHgLw0YebW3iSAOF3OiSCayEAAUSrEh4kQPituuujLgLw0YfDW/SUAOF3PhyC6yEAAUTrEj0kQPitu+qjPgLw0YfTW7SUAOE/bcc0CxDAQK1sIQHCP9BACK6KAAQQW5awlADhb9lJH2chAB99yLqFhQQIf1YLplmMAAZtpVIChH/QIRBcGwEIIPYqsW3b30MI/6o4/+Nl7+eKGr/FGP9dsZ+tHQkggI7wFUcL3gRqrvExxvilpgB7+xJAAH35S07vJAHCL+le3yIIoC9/2emNJUD4ZZ3rWwgB9OUvPb2RBAi/tGt9iyGAvvzlpxtLgPDLO9a3IALoy9/kdCMJEH6TbvUtigD68jc7XSwBwm/Wqb6FEUBf/qaniyRA+E271Lc4AujL3/R0wd/we7rfY4zxk+lFKd6NAALoht72YFH4r5dEArbt6lYdAXRDb3ewOPxIwK5V3SsjgO4t0F7AKPxIQNsmN9UQgJtW1F/EOPxIoL5F7iogAHctKbtQo/AjgbL2uN2FANy2Jv1ijcOPBNJb434lAnDfovsX3Lbt9xBCr3+S+48Y4z8HR7j09RHAwO0XfOd/+oEg/w0hfK/AwEeEFfB6b0UAvTtQeL4i/Ncf5iH4G4NIoLCPvbchgN4dKDhfGf7r8UigoBETbEEAgzXRIvxIYLAhEF4XAQhhWpeyDD8SsO6ez/oIwGdfbm7VIvxIYJBhEF4TAQhhWpVqGX4kYNVFn3URgM++vNyqR/iRgPOhEF4PAQhhqkv1DD8SUHfTZz0E4LMvwUP4kYDT4RBeCwEIYapKeQo/ElB11WcdBOCsLx7DjwScDYnwOghACLO2lOfwI4Ha7vrcjwCc9GWE8CMBJ8MivAYCEMIsLTVS+JFAaZd97kMAnfsyYviRQOehER6PAIQwc0uNHH4kkNttn+sRQKe+zBB+JNBpeITHIgAhzNRSM4UfCaR23ec6BNC4LzOGHwk0HiLhcQhACPOs1MzhRwJn3ff5dQTQqC8rhB8JNBom4TEIQAjzqNRK4UcCDQZKeAQCEMLcK7Vi+JGA8VAJyyMAIcz3pVYOPxIwHCxhaQQghPm6FOH/SYMfOW40ZIKyCEAAke/85xCRwDmjHisQgJg63/mPgSIB8bAJyiEAAcRXf979EEL4WlHy4/XXdVXUcL0VCfhqDwIQ9YPv/OkgkUA6K+uVCEBAmPDnQ0QC+cwsdiCASqqEvxwgEihnp9qJACpIEv4KeJetSKCeYU0FBFBIj/AXgtvZhgR0LHMrIYBcYiG4+qUdBdd3uQUJ9GkLAsjkznf+TGAZy5FABizRUgSQAZLwZ8AqXIoECsEVbkMAieAIfyIowTIkIICYWAIBJIAi/AmQxEuQgBjoQTkEcMKZ8LcZxL1TkIA9ewRwhzHhtx/AsxOQwBmhuq8jgAN+hL9usJS7kYCS5ttaCGCHLeG3G7jSykiglNz9fQjgHR/CbzNoiqpIQEGRN4BDioRfP2DqikhAS5Q3gAtPQfgfYoyfte2hGp8O2M4AAtD83X7CbzunN9V5E9AAX14AfOfXDFKPKkignvrSAiD89QPUuwISqOvAsgIg/HWD42k3EijvxpICIPzlA+N1JxIo68xyAiD8ZYMywi4kkN+lpQRA+PMHZLQdSCCvY8sIgPDnDcbIq5FAeveWEADhTx+IWVYigbROTi8Awp82CDOuQgLnXZ1aAIT/fABmX4EE7nd4WgEQ/tmjnf58SOCY1ZQCIPzp4VhlJRLY7/R0AiD8q0Q6/zmRwC2zqQRA+PNDsdoOJPC249MIgPCvFuXy50UCP9lNIQDCXx6GVXcigefODy8Awr9qhOufGwkMLgDCXx+C1SusLoFh3wAI/+rR1T3/yhIYUgCEXzf8VHomsKoEhhMA4SeyVgRWlMBQAiD8VqNP3SuB1SQwjAAIPyFtRWAlCQwhAMLfavQ5Z7U3AfcCIPyEsheBFd4EXAuA8Pcafc5d5U3ArQAIPyH0QmDmNwGXAiD8Xkafe8z+JuBOAISf0HklMOObgCsBEH6vo8+9Zn0TcCMAwk/IRiEw05uACwEQ/lFGn3vO9ibQXQCEn1CNSmCGN4GuAiD8o44+957lTaCbAAg/IZqFwMhvAl0EQPhnGX2eY/Q3geYCIPyEZlYCI74JNBUA4Z919HmuUd8EmgmA8BOSVQiM9CbQRACEf5XR5zlHexMwFwDhJxSrEhjhTcBUAIR/1dHnuUd5EzATAOEnBBB4JuD5TcBEAISf0YfAWwLbtv0SQvhWweUxxvipYv/uVrkACL+6RdSbhYBHCUgFQPhnGVWew4qANwnIBED4rUaGurMR8CQBiQAI/2wjyvNYE/AigWoBEH7rUaH+rAQ8SKBKAIR/1tHkuVoR6C2BYgEQ/lYjwjmzE+gpgSIBEP7ZR5Lna02glwSyBUD4W48G561CoIcEsgRA+FcZRZ6zF4HWEkgWAOHvNRKcuxqBlhJIEgDhX20Eed7eBFpJ4FQAhL/3KHD+qgRaSOCuAAj/qqPHc3shYC2BQwEIwm/yzxe9NIZ7QKAVAUsJ7AqA8LdqLedAII2AlQRuBED40xrCKgi0JmAhgTcCIPytW8p5EMgjoJbAiwAIf14jWA2BXgSUEvghAMLfq5WcC4EyAioJRMJf1gB2QaA3AYkEtm37I4TwWPgwfNRXCI5tEFAQqJTA1+sfAUokQPgVHaQGBCoJFErgW4zx19f/EzBHAoS/smlsh4CSQKYEfoT/6fz3HwOmSIDwKztHLQiICCRK4CX8NwK4fCLwZwjh4eBOhF/ULMpAwILAiQTehH9XAHckQPgtOkZNCIgJHEjgJvyHAtiRAOEXN4lyELAk8E4C32OMH/bOO/vnwJ9DCP+JMX6xvCy1IQABPYFt234LIfwlxvj7UfX/A5xzpoi6Uq1bAAAAAElFTkSuQmCC');\n  background-size: 18px 18px;\n  background-repeat: no-repeat;\n  background-position: center center;\n"]);return c=function(){return e},e}function u(){var e=h(["\n  margin-bottom: 8px;\n  background-color: green;\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAMa0lEQVR4Xu2dy6tlRxWHf6UYfBBIVDCIQY0QRByITRKdKKJmYCZBeyaoOHOmE8kfIIoTMzI6UIIP/AtaoW1QRzrwMTBBEFoyUdAEBTVIN4olu3OOOX373Hv2o1ZVrVpfTxLoqlWrvrW+rH0fZyeJPxCAgFsCyW3mJA4BCAiBaQIIOCaAwI6LR+oQQGB6AAKOCSCw4+KROgQQmB6AgGMCCOy4eKQOAQSmByDgmAACOy4eqUMAgekBCDgmgMCOi0fqEEBgegACjgkgsOPikToEEJgegIBjAgjsuHikDgEEpgcg4JgAAjsuHqlDAIHpAQg4JoDAjotH6hBAYHoAAo4JILDj4pE6BBCYHoCAYwII7Lh4pA4BBKYHIOCYAAI7Lh6pQwCB6QEIOCaAwI6LR+oQQGB6AAKOCSCw4+KROgQQmB6AgGMCCOy4eKQOAQSmByDQEYGc82skvVPSfZJelPTHlNJz56WIwB0Vj1TiEsg5v1/SE5I+KmmS+PDPdUnfl/S1lNI/D/8CgeP2DDfvgEDO+dWSvinp0zPSeUHSJ1NK1/ZrEXgGNZZAwIJAzvleST+S9L4F8f8j6bMppe9NexB4ATmWQqAUgZ280yS9tCLmTUkfSin9AoFX0GMLBLYQyDnfI+mqpIc3xHlG0nsQeANBtkJgKYGNk/fscR9H4KUVYD0EVhIoNHkPT/8uAq8sBtsgsIRA4cm7P/o6Ai+pAmshsIKAkbxTJv9C4BUFYQsE5hIweGw+PPrvCDy3EqyDwEIChpN3n8nvEHhhUVgOgTkEjCfvPoWvI/CcarAGAgsIVJi8+2w+iMALCsNSCJwiUGnyTmlcSyk9isCnKsLfQ2AmgYry/k3SIyklfow0szYsg8CFBCo+Nt+Q9FhK6SdTQkxgGhMCGwlUnLzThxgup5Su7FNG4I3FY3tsAi3lZQLH7j1uv5FAa3kReGMB2R6XQA/yInDc/uPmGwj0Ii8CbygiW2MS6EleBI7Zg9x6JYHe5EXglYVkWzwCPcqLwPH6kBuvINCrvAi8ophsiUWgZ3kROFYvctuFBHqXF4EXFpTlcQh4kBeB4/QjN11AwIu8CLygqCyNQcCTvAgcoye55UwC3uRF4JmFZdn4BDzKi8Dj9yU3nEHAq7wIPKO4LBmbgGd5EXjs3uR2Jwh4lxeBafGwBEaQF4HDtm/si48iLwLH7uOQtx9JXgQO2cJxLz2avAgct5fD3XxEeRE4XBvHvPCo8iJwzH4OdeuR5UXgUK0c77Kjy4vA8Xo6zI0jyIvAYdo51kWjyIvAsfo6xG0jyYvAIVo6ziWjyYvAcXp7+JtGlBeBh2/rGBeMKi8Cx+jvoW8ZWV4EHrq1x79cdHkRePweH/aGyPtSadOwFeZiwxJA3pdLi8DDtvmYF0Pe2+uKwGP2+ZC3Qt47y4rAQ7b6eJdC3uM1ReDxen24GyHv+SVF4OHafawLIe/F9UTgsfp9qNsg7+lyIvBpRqxoQAB550FH4HmcWFWRAPLOh43A81mxsgIB5F0GGYGX8WK1IQHkXQ4XgZczY4cBAeRdBxWB13FjV0ECyLseJgKvZ8fOAgSQdxtEBN7Gj90bCCDvBni7rQi8nSERVhBA3hXQjmxB4DIcibKAAPIugHViKQKXY0mkGQSQdwakBUsQeAEslm4jgLzb+B3bjcDlmRLxCAHktWkLBLbhStQDAshr1w4IbMeWyJKQ17YNENiWb+joyGtffgS2ZxzyBOStU3YErsM51CnIW6/cCFyPdYiTkLdumRG4Lu+hT0Pe+uVF4PrMhzwReduUFYHbcB/qVORtV04Ebsd+iJORt20ZEbgtf9enI2/78iFw+xq4zAB5+ygbAvdRB1dZIG8/5ULgfmrhIhPk7atMCNxXPbrOBnn7Kw8C91eTLjNC3i7LIgTusy5dZYW8XZXjtmQQuN/adJEZ8nZRhnOTOFfgnPObJH1E0lskvVbS85J+JemXKaX/9n0tsitBIOd8r6Rrki6ViHdBjBuSHk8pXTU+Z7jwdwicc35I0pd28r7iyI3/LOmrkr6RUro5HBEudIsA8vpohP8LnHOe/v2Lkr4s6Zi4Z2/0291/NZ/zcVWynEuAx+a5pNqvOxT4SUmfX5jSX6ZJnVJ6duE+lndKgMnbaWHOSeuWwDnnT0n6zsrUp6+NP4zEK+l1tA15OyrGzFRSzvl1kq5Lum/mnmPLXthJ/MyGGGxtSIDH5obwNxw9Cfw5SU9tiLHfyiQuALFFCCZvC+plzpwE/qGkj5UJd+tHTTxOF4JZIwzy1qBsd8Yk8J8kvbngETxOF4RpGYrHZku6dWJPAk8/y72r8HFM4sJAS4dj8pYm2ibeJPBfJb3e4HgmsQHUEiGZvCUo9hFjEvjXkt5rlA6T2Ajs2rBM3rXk+tw3CfwVSU8YpsckNoS7JDSTdwktH2sngd8lafq1yFcapswkNoQ7JzSTdw4lf2v2v4n1tKTPGKePxMaAzwuPvI3AVzh2L/Ddkn4u6d3GZ/I4bQz4bHgemysDr3zc4YcZHpD0M0n3G+fAJDYGvA/P5K0EuuExt30eOOf81p3EbzPOiUlsDJjJawy4k/DHPtCPxJ0UZ20ayLuWnL99R1+pwyT2V8iDx+Z7JE2vpnnY+BbTb/BdTildMT6H8BcQuOidWExiZ63D5HVWsALpXvhWSiZxAcKVQiBvJdCdHXPytbJI3FnFjqSDvP3XyCrDkwJPByOxFf7tcZF3O0PPEWYJjMR9lhh5+6xLzaxmC4zENcty+izkPc0owopFAiNxHy2BvH3UoYcsFguMxG3Lhrxt+fd2+iqBkbhNGZG3DfeeT10tMBLXLSvy1uXt5bRNAiNxnTIjbx3OHk/ZLDAS25YdeW35eo9eRGAktmkD5LXhOlLUYgIjcdm2QN6yPEeNVlRgJC7TJshbhmOEKMUFRuJtbYO82/hF220iMBKvayPkXcct8i4zgZF4WVsh7zJerH6JgKnASDyvzZB3HidW3UnAXGAkvrjtkBcttxCoIjASHy8R8m5pXfZWeYQ+xMybPV6mgbwIWIJAtQm8TxaJb72iiFe/luheYth/E+sY48gSIy/WlSRQfQJHnsTIW7J1iVX9a+CzyCNNYuRFOAsCzSZwpEmMvBatS8zmEziCxMiLaJYEmk/gMxL/VNLbLS8sqdr/2hR5jStJ+DbfhT6P++5r4iEkRl7sqkGgmwk80iRG3hqtyxndfA18znenXU5i5EWsmgS6m8CeJzHy1mxdzup2AnuUGHkRqgWBbiewJ4mRt0Xrcmb3E9iDxMiLSC0JdD+Be5YYeVu2Lme7mcA9Soy8CNQDATcTuCeJkbeH1iUHdxO4B4mRF3F6IuBuAreUGHl7al1ycTuBDyR+h6TpN7buNy7n9AGIT0h6UtIl47NuSHo8pXTV+BzCD0DA7QRuMIlrlPumpMsppSs1DuMM/wTcCzyVoOKnmCwrjryWdAeNPYTAA0iMvIMKZn2tYQR2LDHyWnf5wPGHEtihxMg7sFw1rjacwI4kRt4aHT74GUMK7EBi5B1crFrXG1bgjiVG3lrdHeCcoQXuUGLkDSBVzSsOL3BHEiNvzc4OclYIgTuQGHmDCFX7mmEEbigx8tbu6kDnhRK4gcTIG0imFlcNJ3BFiZG3RUcHOzOkwBUkRt5gIrW6bliBDSVG3lbdHPDc0AIbSIy8ASVqeeXwAheUGHlbdnLQsxF4V/iNLwVA3qACtb42Ah9UIOf8gKRrkqZ/zv3z4vS+rJTSj+duYB0EShFA4DMkc85vkPQDSY/OgPz73Tusnp2xliUQKE4Agc9BmnN+TNIXJH1A0qsOB7Wk30j6lqRvp5T+XbwqBITATAIIfAJUzvluSQ9KeqOkf0j6Q0rp+Zl8WQYBUwIIbIqX4BCwJYDAtnyJDgFTAghsipfgELAlgMC2fIkOAVMCCGyKl+AQsCWAwLZ8iQ4BUwIIbIqX4BCwJYDAtnyJDgFTAghsipfgELAlgMC2fIkOAVMCCGyKl+AQsCWAwLZ8iQ4BUwIIbIqX4BCwJYDAtnyJDgFTAghsipfgELAlgMC2fIkOAVMCCGyKl+AQsCWAwLZ8iQ4BUwIIbIqX4BCwJYDAtnyJDgFTAghsipfgELAlgMC2fIkOAVMCCGyKl+AQsCWAwLZ8iQ4BUwIIbIqX4BCwJYDAtnyJDgFTAghsipfgELAlgMC2fIkOAVMCCGyKl+AQsCWAwLZ8iQ4BUwIIbIqX4BCwJYDAtnyJDgFTAv8DKEKJfOZXgs4AAAAASUVORK5CYII=');\n  background-size: 18px 18px;\n  background-repeat: no-repeat;\n  background-position: center center;\n"]);return u=function(){return e},e}function p(){var e=h(["\n  position: absolute;\n  right: 50px;\n  top: 50px;\n  display: flex;\n  flex-direction: column;\n"]);return p=function(){return e},e}function f(){var e=h(["\n  position: absolute;\n  right: 50px;\n  top: 50px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAAAAHgCAYAAAB91L6VAAAgAElEQVR4Xu2dedw2ZVn3f4clmJpmWpZZglqCWdnm2/LigiyioAKiJii5hhu4kr2K4pJv7mJq7iu4hVoiLuSaZi65pCagKbjkgooKKM/DdvQ5cR65eXzu+77mumbmd87Md/6xT/d5nr/j/B4zfJ9rm4nMTHG4COweEae5wsmFAATmTSAzd5N06rwp+HYfCNgHXxICtuInHALzJoCAvf1HwF7+CNjLn3QIzJoAAva2HwF7+SNgL3/SITBrAgjY234E7OWPgL38SYfArAkgYG/7EbCXPwL28icdArMmgIC97UfAXv4I2MufdAjMmgAC9rYfAXv5I2Avf9IhMGsCCNjbfgTs5Y+AvfxJh8CsCSBgb/sRsJc/AvbyJx0CsyaAgL3tR8Be/gjYy590CMyaAAL2th8Be/kjYC9/0iEwawII2Nt+BOzlj4C9/EmHwKwJIGBv+xGwlz8C9vInHQKzJoCAve1HwF7+CNjLn3QIzJoAAva2HwF7+SNgL3/SITBrAgjY234E7OWPgL38SYfArAkgYG/7EbCXPwL28icdArMmgIC97UfAXv4I2MufdAjMmgAC9rYfAXv5I2Avf9IhMGsCCNjbfgTs5Y+AvfxJh8CsCSBgb/sRsJc/AvbyJx0CsyaAgL3tR8Be/gjYy590CMyaAAL2th8Be/kjYC9/0iEwawII2Nt+BOzlj4C9/EmHwKwJIGBv+xGwlz8C9vInHQKzJoCAve1HwF7+CNjLn3QIzJoAAva2HwF7+SNgL3/SITBrAgjY236HgPeQ9DXvttdNP13STgPWhoAHhE0UBCBweQIGAV8g6UaV9uG6kj4wZG0OAe8aEWcOuclFszJzi6SdFx3fwTgE3AFEloAABJYjYBDw1oi40nLV9jsrM3eRdEa/KZdfHQGv4YGAhzz1yIIABNwEEPBlHUDA5rMRAZsbQDwEIDAoAQSMgAc94TYKQ8DVtIJCIACBAQggYAQ8wGm2WIRBwMdJ+s5i1TEKAhCAQOcEriXpqM5XXX9BPgNew4bPgNfAMAh4wPOeKAhAAAJ2AggYAe/4JETA9ouTAiAAgWkTQMAIGAFP+xpndxCAQKUEEDACRsCVXpyUBQEITJsAAkbACHja1zi7gwAEKiWAgBEwAq704qQsCEBg2gQQMAJGwNO+xtkdBCBQKQEEjIARcKUXJ2VBAALTJoCAETACnvY1zu4gAIFKCSBgBIyAK704KQsCEJg2AQSMgBHwtK9xdgcBCFRKAAEjYARc6cVJWRCAwLQJIGAEjICnfY2zOwhAoFICCBgBI+BKL07KggAEpk0AASNgBDzta5zdQQAClRJAwAgYAVd6cVIWBCAwbQIIGAEj4Glf4+wOAhColAACRsAIuNKLk7IgAIFpE0DACBgBT/saZ3cQgEClBBAwAkbAlV6clAUBCEybAAJGwAh42tc4u4MABColgIARMAKu9OKkLAhAYNoEEDACRsDTvsbZHQQgUCkBBIyAEXClFydlQQAC0yaAgBEwAp72Nc7uIACBSgkgYASMgCu9OCkLAhCYNgEEjIAR8LSvcXYHAQhUSgABI+BqBHySpHMqvVAoCwIQmD6Bq0k6YMBtImAEXI2Ad4+I0wY8+YmCAAQg8BMCmbmbpFMHRIKAETACHvCCIwoCEKiUAAK+rDGZuYukM4ZsVWRmDhkoadeIOHPgzIXiMnOLpJ0XGtzNIF4Bd8ORVSAAgSUIIGAEvMRp088UBNwPV1aFAATqJICAEXA1ZyYCrqYVFAIBCAxAAAHPT8AXSBr6be9FT+Uh334uNfEW9KKdYRwEINA5AYOAyx62dr6RbhYMSTt1s9Riqzg+A16ssnmMQsDz6DO7hECVBEwCrpKFoygE7KB+WSYC9vInHQKzJoCAve1HwF7+CNjLn3QIzJoAAva2HwF7+SNgL3/SITBrAgjY234E7OWPgL38SYfArAkgYG/7EbCXPwL28icdArMmgIC97UfAXv4I2MufdAjMmgAC9rYfAXv5I2Avf9IhMGsCCNjbfgTs5Y+AvfxJh8CsCSBgb/sRsJc/AvbyJx0CsyaAgL3tR8Be/gjYy590CMyaAAL2th8Be/kjYC9/0iEwawII2Nt+BOzlj4C9/EmHwKwJIGBv+xGwlz8C9vInHQKzJoCAve1HwF7+CNjLn3QIzJoAAva2HwF7+SNgL3/SITBrAgjY234E7OWPgL38SYfArAkgYG/7EbCXPwL28icdArMmgIC97UfAXv4I2MufdAjMmgAC9rYfAXv5I2Avf9IhMGsCCNjbfgTs5Y+AvfxJh8CsCSBgb/sRsJc/AvbyJx0CsyaAgL3tR8Be/gjYy590CMyaAAL2th8Be/kjYC9/0iEwawII2Nt+BOzlj4C9/EmHwKwJIGBv+xGwlz8C9vInHQKzJoCAve1HwF7+CNjLn3QIzJoAAva2vwh4N28Jl6YfIemoAes4SdLRA+atF/WliLiggjooAQIQmCGBzNxJ0vUr2PpTJR0wYB3HSXrBgHk7jAp3ASU/Mx8j6YkD1nJCRBw2YB5REIAABCCwDoHMPF7SoQMCOiYinjRgHgJeQwABu8888iEAAQg0BBCw8VTgFbARPtEQgAAEzAQQsLEBCNgIn2gIQAACZgII2NgABGyEb4zOzN+OiP8ylkA0BCBQAQEEbGwCAjbCN0Zn5tMkXUXSAyMijaUQDQEIGAkgYC98vgVt5O+KbgT8CEkvlPSAiLjEVQu5EICAjwAC9rHnZ0hG9s7ozHy6pIc3NbxE0l8hYWdHyIaAhwAC9nC/NJW3oI3wjdHbCbhU8hpJ94iIi41lEQ0BCAxMAAEPDHxtHAI2wjdG70DApZrXSbp7RFxkLI1oCEBgQAIIeEDY20chYCN8Y/Q6Ai4VvUHSYRFxobE8oiEAgYEIIOCBQO8oBgEb4RujM/MZkh62TgknSrobEjY2iGgIDEQAAQ8EGgEbQVcWvYmAS7UnS7pTRGyprHTKgQAEOiSAgDuE2XYpXgG3JTaN8QsIuGz07ZIOQsLT6Dm7gMA6L8J4GIPr1EDALvLe3Mx8pqSHLlDFKZLuGBHnLzCWIRCAwMgI8ArY2DAEbIRvjG4h4FLlv0q6XUScZyyZaAhAoAcCCLgHqIsuiYAXJTWtcS0FXDb/QUm3jYhzp0WC3UBg3gQQsLH/CNgI3xidmc+S9JCWJXxI0n4RcU7LeQyHAAQqJYCAjY1BwEb4xuglBVwq/rikfSLibGP5REMAAh0RQMAdgVxmGQS8DLXxz1lBwGXzn5S0d0R8d/wk2AEE5k0AARv7j4CN8I3RKwq4VP6p5pXwt43bIBoCEFiRAAJeEeAq0xHwKvTGOzczny3pqBV3cKqkW0fEN1Zch+kQgICJAAI2gS+xCNgI3xjdkYDLDk6XtGdEfN24HaIhAIElCSDgJcF1MQ0Bd0FxfGt0KOCy+c83r4S/Nj4SVAyBeRNAwMb+I2AjfGN0Zh4n6cgOSzizeSV8RodrshQEINAzAQTcM+CNlkfARvjG6B4EXHbzlUbCXzRujWgIQKAFAQTcAlbXQxFw10THsV5PAi6b/2oj4f8eBwmqhMC8CSBgY/8RsBG+MToznyPpwT2V8M3mM+HP9bQ+y0IAAh0RQMAdgVxmGQS8DLXxz+lZwAXQtyTtFRGfHT8tdgCB6RJAwMbeImAjfGP0AAIuuzuruWPWp41bJRoCENiAAAI2nh4I2AjfGD2QgMsOvydp34j4mHG7REMAAusQQMDGUwMBG+EbozPz7yU9aKASvi/pNhHxkYHyiIEABBYkgIAXBNXHMATcB9X61xxYwAXIDxoJf7h+OlQIgfkQQMDGXiNgI3xjtEHAZbc/lLR/RLzPuHWiIQCBNQQQsPF0QMBG+MbozHyupAcaSigSvn1EvMeQTSQEILAdAQRsPCUQsBG+Mdoo4LLrH0m6Q0S8y4iAaAhA4McP5Dle0qEDwjgmIp40YN4Oo8JdQMlHwDV0YfgazAIuG94q6ZCIOGn43ZMIAQhsI4CAjecCAjbCN0Zn5vMkPcBYQom+QNKdI+KfzXUQD4HZEkDAxtYjYCN8Y3QlAt4m4btGxJuNOIiGwGwJIGBj6xGwEb4xuiIBFwoXSzo8Ik4wIiEaArMkgICNbUfARvjG6MoEvE3C94yIVxuxEA2B2RFAwMaWI2AjfGN0Zj5f0v2NJewourwSvndEvLKyuigHApMlgICNrUXARvjG6EoFXIhkuUVmRJR/IHBAAAI9E0DAPQPeaHkEbIRvjK5YwNskfGRElJuFcEAAAj0SQMA9wt1saQS8GaFp/j0z/0HSERXvrrwSfmhEHFdxjZQGgdETQMDGFiJgI3xj9AgEvI3OoyPiyUZURENg0gQQsLG9CNgI3xg9IgEXSo+NiCcacRENgckSQMDG1iJgI3xjdGa+QNJfGUtoG31sRDy+7STGQwACGxNAwMYzBAEb4RujRyjgQuspEfEoIzaiITA5AgjY2FIEbIRvjB6pgAuxp0XE0UZ0RENgUgQQsLGdCNgI3xidmS+UdD9jCatEP1PSIyKifFOaAwIQWIEAAl4B3qpTEfCqBMc5f+QCLtDLZ9gPQMLjPP+ouh4CCNjYCwRshG+MnoCAC70Xl98yR8QlRpREQ2DUBBCwsX0I2AjfGD0RAReCLy1vpSNh48lE9KgJIGBj+xCwEb4xOjNfJOm+xhK6jH6tpHtExEVdLspaEJgDAQRs7DICNsI3Rk9MwIXkGyQdioSNJxXRoySAgI1tQ8BG+MboCQq40DxR0t0i4kIjWqIhMCoCCNjYLgRshG+MzszyBab7GEvoK/pkSQdHxNa+AlgXAlMigICN3UTARvjG6AkLuFB9u6SDImKLETHREBgFAQRsbBMCNsI3Rk9cwIXsOyUdGBHnGzETDYHqCSBgY4sQsBG+MTozXyLp3sYShoh+v6T9I+K8IcLIgMAYCSBgY9cQsBG+MXomAi6EPyDpdhFxrhE30RColgACNrYGARvhG6NnJOBC+d8k3TYizjEiJxoCVRJAwMa2IGAjfGP0zARcSH9c0j4RcbYRO9EQqI4AAja2BAEb4RujM7PcwvFexhIc0Z9oJPxdRziZEKiRAAI2dgUBG+Ebo2cq4EL8U5L2jojvGPETDYFqCCBgYysQsBG+MXrGAi7UT5V064j4hrEFREOgCgII2NgGBGyEb4zOzJdJuqexBHf0aY2Ev+4uhHwIOAkgYCN9BGyEb4xGwJfC/7ykPSPif4ytIBoCVgII2IgfARvhG6MR8E/gn9lI+AxjO4iGgI0AArahlxCwEb4xOjNfLukvjSXUFP3lRsJfqqkoaoHAEAQQ8BCU18lAwEb4xmjDK+B/kfSnkq5q3PZG0UXC5YtZX6y0PsqCQC8EEHAvWBdbFAEvxmlqowyvgB8vqUj4bZKuVinPbzYS/lyl9VEWBDongIA7R7r4ggh4cVZTGukQcEQcm5l/KOkUSb9YKc9vSdorIj5baX2UBYFOCSDgTnG2WwwBt+M1ldGZ+QpJhw+4n2MjorwKLt87+P3m1fA1B8xvE3VWI+HPtJnEWAiMkQACNnYNARvhG6OdAm4kfNNGwtcyYtgo+nvNbSv/o9L6KAsCnRBAwJ1gXG4RBLwct7HPcgu4kfDukt4t6Vcr5fl9SftGxEcrrY+yILAyAQS8MsLlF0DAy7Mb88zMfKWkewy4h8dFxBO2z8vMG0l6j6TrDFhLm6gfSLpNRHy4zSTGQmAsBBCwsVMI2AjfGF2LgJtXwr/VvBK+rhHJRtHnSTogIt5XaX2UBYGlCSDgpdGtPhEBr85wjCvUJOBGwrs0r4R3rZTnDyXdPiLKq3UOCEyGAAI2thIBG+EbozPzVZLuPmAJO3wLem1+Zv5GI+EbDFhXm6gfSbpDRLyrzSTGQqBmAgjY2B0EbIRvjDYI+LER8cTNtpyZv95I+IabjTX9/XxJd4yI8ltmDgiMngACNrYQARvhG6NrFXBBkpm/0nwmfGMjoo2iL5B0SES8pdL6KAsCCxNAwAuj6n4gAu6e6RhWrFnAjYSvLam81XuTSnkWCd81It5caX2UBYGFCCDghTD1MwgB98O19lUz89WSDhuwzmMi4klt8jLzl5ubdfxum3kDjr1Q0l9ExBsHzCQKAp0SQMCd4my3GAJux2sqo8cg4OaV8DUkvVPSH1fK/uLyWMeIOL7S+igLAhsSQMDGEwQBG+Ebo8ci4EbCv9BI+GZGZBtFFwnfOyLKzU04IDAqAgjY2C4EbIRvjDZcdI+JiL9ddsuZeXVJ75D0J8uu0fO8SyTdJyJe3nMOy0OgUwKG/xa0/jiq0w03i0Ufi7ZdEwG3JTaN8YaLbiUBN6+EryLprZJuWWkXUtKDI+J5ldZHWRD4KQKG/xYg4G1dQMDzvCINF93KAl4j4fLznz0r7VyR8EMi4jmV1kdZELgcAcN/CxAwAp73VZiZJ0i624AUHh0RT+4iLzOvLOmfyzN7u1ivhzWKhB8WEc/uYW2WhECnBBBwpzjbLcYr4Ha8pjJ6zAJuXgnvLOlESftX3JMq/qVfMR9Kq4AAAjY2AQEb4Rujxy7gRsI7SXpDuT+zEeVm0ZveA3uzBfg7BPokgID7pLvJ2gjYCN8YPQUBr5Hw6yQdaMS5WfRTIuJRmw3i7xBwEEDADupNJgI2wjdGZ+Zryl2cBizh/0XE/+8jLzN/RlJ5utOQn2m33cpTI+Kv205iPAT6JoCA+ya8wfoI2AjfGD0lATevhIuEy29wh3zEYtsOPiMiHtF2EuMh0CcBBNwnXd6CNtKtN3pqAl4j4ZdKOrxe8nqBpAdERPmmNAcE7AQQsLEFvAI2wjdGZ+Zry9N8BizhbyLi7/rOy8xyg5tyI4z79521wvovKvVFRLl7FgcErAQQsBE/AjbCN0ZPVcDNK+Ei4XIjjAcZEW8WXV6p3w8Jb4aJv/dNAAH3TXiD9RGwEb4xesoCXiPhZ0k6yoh5s+jyRbjDI+KizQbydwj0RQAB90V2gXUR8AKQJjgkM8tPd+4y4NYeFRFPGTBPzdvRz5D00CFzW2a9vjyXGQm3pMbwzggg4M5Qtl8IAbdnNoUZcxDwtj5l5hMlPabivv2jpEMj4sKKa6S0iRJAwMbGImAjfGP0nATcvCV9rKTHGZFvFl2e8nSniNi62UD+DoEuCSDgLmm2XAsBtwQ2keFzE3Aj4XIjjN6/ib3CKfI2SQdHxJYV1mAqBFoRQMCtcHU7GAF3y3Msq2Vm+ezxzgPW+9cR8dQB83YYlZmPlGSvYwMO75B0UESc72ZF/jwIIGBjnxGwEb4xeq4Cbl4JP0xS+XJWrcf7y1OeIuK8WgukrukQQMDGXiJgI3xj9JwF3Ej4CEnPl1R+M1zj8QFJt4uIc2ssjpqmQwABG3uJgI3wjdGZWR7jd8iAJRwdEU8bMG/TqMy8r3TprSGvsOlgz4APNhI+xxNP6hwIIGBjlxGwEb4xGgH/GH5m3ltSuTVkrRL+D0n7RsTZxtOF6AkTQMDG5iJgI3xjNAK+DH5mlscylscZ/qyxJRtFf0LSPhHx3Urro6wRE0DAxuYhYCN8Y3Rmlps/3GnAEh4ZEU8fMK9VVGaWu4IdX7GEP9lI+DutNsZgCGxCAAEbTxEEbIRvjEbAPw0/M8s/SMr9ma9obM1G0Z+TdOuI+Gal9VHWCAkgYGPTELARvjEaAe8YfmbuL+lESTsb27NR9GmNhL9eaX2UNTICCNjYMARshG+MRsDrw8/M/SS9SdKVjC3aKPr0RsL/U2l9lDUiAgjY2CwEbIRvjM7M8irv4AFLeERE1Hzzi8uhyMx9Jb1Z0s8NyKhN1BmS9oyIM9tMYiwEtieAgI3nBAI2wjdGI+DN4WfmLSSVhyRcdfPRlhFfbiT8JUs6oZMggICNbUTARvjGaAS8GPzM3EPSyZJ+frEZg4/6SiPhLw6eTOAkCCBgYxsRsBG+MToz31hu+j9gCQ+PiGcOmNdZVGb+uaTypKKrdbZotwt9tflM+AvdLstqcyCAgI1dRsBG+MZoBNwOfmb+kaR3SvrFdjMHG/2tRsL/NVgiQZMggICNbUTARvjGaATcHn5m/oGkUyRds/3sQWacJWmviPjMIGmETIIAAja2EQEb4RujM7P8zObAAUt4WEQ8a8C8XqIy86aS/kXStXoJWH3Rb0vaOyL+c/WlWGEOBBCwscsI2AjfGI2Al4efmbtLerekX11+lV5nfq95gMPHek1h8UkQQMDGNiJgI3xjNAJeDX5m7tZI+DqrrdTb7O9Luk1EfKS3BBaeBAEEbGwjAjbCN0YbBPzQiHi2ccudR2fmjRoJ/1rni3ez4A8k7RcR/97NcqwyRQII2NhVBGyEb4zOzHKXpzsOWMLkBFzYZeYukt4jadcBWbaJ+qGkAyLivW0mMXY+BBCwsdcI2AjfGI2Au4OfmddrJHz97lbtdKUfSbp9RJTPrTkgcDkCCNh4QiBgI3xjNALuFn5m/kbzdvQNu125s9WKhO8YEeUb3BwQ+AkBBGw8GRCwEb4xOjP/SdIdBizhIRFx3IB5g0dl5q80Er7x4OGLBW6VdOeIeMtiwxk1BwII2NhlBGyEb4xGwP3Az8xrNxL+7X4SVl71Akl3iYjyDzAOCJTvMRwv6dABURwTEU8aMG+HUeEuoOQj4Bq6MHwNCLg/5pn5y5LeJel3+ktZaeULJd01IsrNWDhmTgABG08ABGyEb4zOzH8uX8wZsISjIuI5A+ZZozLzGs1tK8s9pGs8Lpb0lxFRXv1wzJgAAjY2HwEb4RujEXD/8DPzF5oHONys/7SlEoqE7xURr1pqNpMmQQABG9uIgI3wjdEIeBj4jYTfLulPhklsnVIkfJ+IeEXrmUyYBAEEbGwjAjbCN0YbBHxkRPy9ccu26My8evM84T+zFbFxcEp6UEQ8v9L6KKtHAgi4R7ibLY2ANyM0zb9nZvkpygED7m62Ai6MM/Mqkk6SdKsBmbeJKhIun9PP8h9JbUBNbSwCNnYUARvhG6MR8PDwM/PKksqX3/YaPn2hxCLh8tjISd2ze6Gdz3gQAjY2HwEb4RujEbAHfmb+nKTyG9x9PBUslPqYiPjbhUYyaPQEELCxhQjYCN8YnZnl7dD9ByzhwRHx3AHzqo3KzJ0k/ePAPwNry+NxEfGEtpMYPz4CCNjYMwRshG+MRsBG+D/+TLhI+PUDP5Gq7aafEhGPajuJ8eMigICN/ULARvjGaARshN9EZ+YVJb1O0kH+atatAAlX3JwuSkPAXVBccg0EvCS4kU/LzLdKut2A2yg/c3negHmjiMrMn5FUfoN7WMUFPz0iHllxfZS2AgEEvAK8Vaci4FUJjnM+Aq6nb42EXyrp8Hqq+qlK/kHSAyOifFOaY0IEELCxmQjYCN8YjYCN8HcQnZlXkPQSSfesq7LLVfNCSQ+IiEsqrpHSWhJAwC2BdTkcAXdJczxrGQRcXj1xp6UNTpHMLE9IKzfCeGDFZ1L5R8JfIeGKO9SyNATcEliXwxFwlzTHs1ZmnizptgNWjIAXgN1IuNwI48gFhruGvEbSPSKi3EeaY+QEELCxgQjYCN8YjYCN8DeJbiT8TEkPqbfKS7+9ffeIuKjiGiltAQIIeAFIfQ1BwH2RrXtdBFx3f0p1mfkkSY+uuNI3lG9vR8SFFddIaZv/g688E/rQAUEdExHl3LYe5fMe+4GA7S2wFJCZb5O034Dh5cs75Zu0HC0IZObjJT22xZShh5Y7qh0SEVuHDiavGwK8Au6G41KrIOClsI1+EgIeTwsz868l/V3FFZfvE9wpIrZUXCOlrUMAARtPDQRshG+MRsBG+EtEZ+bRkp6yxNShprxD0oFIeCjc3eUg4O5Ytl4JAbdGNokJmfl2SbcZcDP3j4gXDJg3uajMfLikp1e8sVPKva0j4vyKa6S07QggYOMpgYCN8I3RCNgIf4XozDxCUvk9dRXfIdnBVv613OI0Is5bYZtMHZAAAh4Q9vZRCNgI3xiNgI3wV4zOzPtJKl9oK3fPqvH4YPmNeUScW2Nx1HR5AgjYeEYgYCN8Y7RBwEdERLmVIUcHBDLzPpIKz1ol/KHyLfuIOKeD7bJEjwQQcI9wN1saAW9GaJp/z8zypZl9B9wdAu4YdmbeTdIrJf1sx0t3tdzHJe0TEWd3tSDrdE8AAXfPdOEVEfDCqCY1EAFPo52ZeVdJr65Ywp+UtHdEfHcaxKe3CwRs7CkCNsI3RhsEXG7g/yLjlicbnZmHSDpB0hUr3eSnmlfC3660vlmXhYCN7UfARvjG6Mx8Z/mP4oAlIOAeYWfm/pJOlLRzjzGrLH2qpFtHxDdWWYS53RNAwN0zXXhFBLwwqkkNRMCTauelm8nM8nSrN0q6UqW7O13SnhHx9Urrm2VZCNjYdgRshG+MRsBG+D1GZ2a5ucqbK5bw55tXwl/rEQNLtyCAgFvA6nooAu6a6DjWy8xy16K9B6z2fhHx4gHzZhuVmbeUVB6ScNVKIZzZvBI+o9L6ZlUWAja2GwEb4RujEbAR/gDRmXlzSW+V9PMDxC0T8ZVGwl9cZjJzuiOAgLtj2XolBNwa2SQmIOBJtHHDTWTm/5VUHjtZq4S/2kj4v6ffjXp3iICNvUHARvjGaIOA7xsRLzFueZbRmflHksrHDdeoFMA3m8+EP1dpfZMvCwEbW4yAjfCN0Zn5L5L2GrAEBDwg7LVRmfmHksrPzq5pKmGz2G+VczEiPrvZQP7ePQEE3D3ThVdEwAujmtRABDypdm66mcz8/eaV8LU2HewZcFZzx6xPe+Lnm4qAjb1HwEb4xmiDgO8TES81bnn20Zn5e5LKOx+/VCmM75X7k0fExyqtb5JlIWBjWxGwEb4xOjPfVT57G7AEBDwg7PWiMnM3Se+WdJ0KytlRCd+XdJuI+Eil9U2uLARsbCkCNsI3RiNgI3xzdGbeqJHwr5lLWS/+B82jDP+90vomVRYCNrYTARvhG6MRsBF+BdGZ+fN4HiMAABh/SURBVJuS3iPpuhWUs6MSfihp/4h4X6X1TaYsBGxsJQI2wjdGZ2Z5G3LPAUu4d0S8bMA8ojYhkJnXayR8/UphFQnfPiLKPxQ4eiKAgHsCu8iyCHgRStMbg4Cn19NldpSZv9FI+AbLzB9gzo8k3TEiypfHOHoggIB7gLrokgh4UVLTGoeAp9XPVXaTmb/efCZc3pau8dgq6ZCIKPe35uiYAALuGGib5RBwG1rTGYuA1+9lZpbPRa/djLhQ0nlrRp8j6eJtf4uItX8b7QmSmeULWeVjifIFrRqPIuGDI+LkGosbc00I2Ng9BGyEb4xGwDuG3/xW9r1L3rpxrZwvkFQ+w9x2bPS38q3fS5qB289b+7ciofKW7LZjo7+Vn/NkM3D7eWv/tkXS+c24X5F0oqQbG0/NjaILm7tExD9VWt8oy0LAxrYhYCN8Y3Rmli+23GrAEu4VES8fMK91VGbeUNIHJBURcdRJoLz7cHhEnFBneeOrCgEbe4aAjfCN0QYB3zMiXmHc8obRzdvORb671Fojdf2EQJFwOZ9eDZPVCSDg1RkuvQICXhrdqCdmZnmbtTy4faijWgFn5i9Ler+kcpcojnEQKBIud1er9h9148AoIWBjpxCwEb4xGgH/GH5mXl1S+cdIeVgBx7gIlM+4HxQRzx9X2XVVi4CN/UDARvjGaAR8qXyv3Dymrzy4nmOcBIqEj4yI546zfH/VCNjYAwRshG+Mzsxyi79bDFjCX0bEKwfM2zAqM3eS9Jby9J1aaqKOpQkUCT80Io5beoUZT0TAxuYjYCN8Y/ScBZyZV5T0pnKvYWMLiO6ewKMj4sndLzvtFRGwsb8I2AjfGD1XAWfmFSQdL+kvjPiJ7o/AYyPiif0tP72VEbCxpwjYCN8YbRBw+e3mq4xbLp/5hqQXSLqfsw6yeydwbEQ8vveUiQQgYGMjEbARvjE6M8vPbm4+YAk1CPipkh454J6J8hF4SkQ8yhc/nmQEbOwVAjbCN0bPTcCZeaykxxmREz08gadFxNHDx44rEQEb+4WAjfCN0QYB38N156LMfLCk5xhxE+0j8ExJj4iIbffF9lVSaTICNjYGARvhG6Mz818l7TFgCRYBZ+bhkso9qMvnvxzzJFA+938AEt5x8xGw8aJAwEb4xug5CDgzD5L0ekk/a0RNdB0EXizpiIjY9tSpOqqqoAoEbGwCAjbCN0YbBHz3iCg//xnkyMx9mhtt7DxIICFjIPAySfdFwpdvFQI2nroI2AjfGJ2Z5ck/Q96CcTABZ+afN7eYvIoRMdF1EnitpPJxyEV1ljd8VQh4eOY/SUTARvjG6KkKODNvJuldkn7eiJfougm8QdKhSPjHTULAxpMVARvhG6OnKODMvImkco/raxrREj0OAidKultEXDiOcvurEgH3x3bTlRHwpogmOSAzPyipvFU71HFYRJzQV1hm3lBS+Wb3r/aVwbqTI3CypIMjYuvkdtZiQwi4BayuhyLgromOY70pCTgzryupfKa9yzjoU2VFBN4u6aCI2FJRTYOWgoAHxX35MARshG+MnoqAM/OXJJXbau5uxEn0uAm8U9KBEXH+uLexXPUIeDluncxCwJ1gHN0iBgGXL728pktQmXl1Se+R9AddrstasyRQ/hG3f0ScN7fdI2BjxxGwEb4xOjP/TdKfDVhCpwLOzCs3PzUa8qdUA+IiykCgfIxxu4g415Bti0TANvSXfgX9MZKGfH7mCRFxmHHLRP/4pwejFXBm7tTcZGNfmgmBjgmU6+K2EXFOx+tWuxwCNrYGARvhG6MNAi4/+Sg3QVjpyMyfkfQ6SXdaaSEmQ2B9Ah+XtE9EnD0HSAjY2GUEbIRvjM7MD0n60wFLWFnAmXkFSa8uv98csG6i5kngE42Evzv17SNgY4cRsBG+MXpsAs7M8jSj55cb6huxET0vAp+StHdEfGfK20bAxu4iYCN8Y/QIBfy08lxXI7L1on9QfsIi6cvN7S+3PXmp/O/a22GW/3uRv11R0lXXhK2d1+ZvV5NU3q4vx/bz1v6tQqRVlfTpRsJnVVVVh8Ug4A5htl0KAbclNo3xmfnvkv5kwN38RUSUz25bH5l5jKQntJ7Y/4QfSdovIsoduEZ9ZObPSbpSs4m1/3f5f43lb339w+I0SbeOiK+PusnrFI+AjV1FwEb4xmjDK+ClBJyZR0o6zohqvehy+8LbR8QpFdY265Ka34eX7wuUozyOsvxkbdtRfju+3t9+QVL5qGNH886KiH+aIlgEbOwqAjbCN0aP4RVwZt5D0svX/AfTSOxy0RdLKv+g+MdaCqIOCCxLAAEvS66DeQi4A4gjXMIg4LtGxOsXRZWZ5XPV8ti4bZ+bLjq173HZPNT9pX0HsT4EhiCAgIegvE4GAjbCN0Zn5ocl/Z8BS1hYwJm5t6STmrcPByxxoaiHRcSzFhrJIAiMgAACNjYJARvhG6NrFXBmlttjls9Vr2LEs17030TE31VYFyVBYGkCCHhpdKtPRMCrMxzjCgYB3yUiylvK6x6ZeVNJ75VUvgxT2/HkiHh0bUVRDwRWJYCAVyW4wnwEvAK8EU/NzI9IutmAW9hQwJl5E0nvk3TNAWtaNOr5EfHARQczDgJjIoCAjd1CwEb4xuiaBJyZN5BUfkt7HSOS9aKPl3R4RFxSYW2UBIGVCSDglREuvwACXp7dmGcaBHznHf1sJzN/TVJ5DNyuFfIsv/s8JCIuqrA2SoJAJwQQcCcYl1sEAS/HbeyzMvOjkv54wH38lIAz85eat51vPGAdi0a9q3lAe7nhBgcEJksAARtbi4CN8I3RbgE3dyt6t6Q/NGJYL7rcprM8ju68CmujJAh0SgABd4qz3WIIuB2vqYx2Cjgzy60B3yFpjwp5/qekW0XE9yqsjZIg0DkBBNw50sUXRMCLs5rSSIOAy2epJ2bmTpLKZ6v7Vcjz85JuHhHfqrA2SoJALwQQcC9YF1sUAS/GaWqjMvNjkv5owH0dIunNkl5bvtg0YO6iUV8pr8gjovwvBwRmQwABG1uNgI3wjdEGAd9Z0m0k3cu47fWiy2Pminy/VGFtlASBXgkg4F7xbrw4AjbCN0YbBHyqpN2NW14v+juSbhERn6uwNkqCQO8EEHDviNcPQMBG+MbozPyPSr+BPCSVc5oHrRcWHBCYJQEEbGw7AjbCN0YjYJ1f3hKPiHIHLg4IzJYAAja2HgEb4RujZy7gCyQdGBFvM7aAaAhUQQABG9uAgI3wjdGZ+XFJf2AswRV9saS7bfZkJldx5EJgaAIIeGjia/IQsBG+MXqmAk5J942IlxrREw2BqgggYGM7ELARvjF6pgJ+eEQ804idaAhURwABG1uCgI3wjdEzFPCjI+LJRuREQ6BKAgjY2BYEbIRvjM7MT0j6fWMJQ0Y/OyIeOmQgWRAYCwEEbOwUAjbCN0bPSMAvk3SfiCif/3JAAALbEUDAxlMCARvhG6NnIuDjJR0eEZcYURMNgaoJIGBjexCwEb4xOjM/KemmxhL6jn6LpIMj4qK+g1gfAmMmgICN3UPARvjG6IkL+N2S9o+ILUbERENgFAQQsLFNCNgI3xg9YQF/WNLeEXGeES/REBgNAQRsbBUCNsI3RmfmpyT9nrGEPqI/LemWEfG9PhZnTQhMkQACNnYVARvhG6MnKOAvSLp5RHzTiJVoCIyOAAI2tgwBG+Eboycm4K9K2iMivmxESjQERkkAARvbhoCN8I3RExLwWc0r39ONOImGwGgJIGBj6xCwEb4xOjP/U9LvGkvoIvr7km4VEeXzbA4IQGAJAgh4CWhdTUHAXZEc1zoTEPA5kvaKiI+NizzVQqAuAgjY2A8EbIRvjB65gM+XtF9EvN+IkGgITIIAAja2EQEb4RujM7P8ZOd3jCUsG32hpAMj4uRlF2AeBCBwGQEEbDwbELARvjF6pAK+WNKhEfF6IzqiITApAgjY2E4EbIRvjB6hgMvTjO4XES8xYiMaApMjgICNLUXARvjG6Mz8jKSbGEtoG/2IiHhG20mMhwAENiaAgI1nCAI2wjdGj0zAx0TEk4y4iIbAZAkgYGNrEbARvjF6RAI+LiIeYkRFNAQmTQABG9uLgI3wjdEjEfDLJd07IsrnvxwQgEAPBBBwD1AXXRIBL0pqWuMy87OSfrviXb1R0l0ionzzmQMCEOiJAALuCewiyyLgRShNb0zlAn6LpDtFRPnNLwcEINAjAQTcI9zNlkbAmxGa5t8rFvB7JN0uIrZMkzy7gkBdBBCwsR8I2AjfGJ2Z/yXpxsYSdhT9keb+zudVVhflQGCyBBCwsbUI2AjfGF2hgMvvkm8ZEWcbsRANgdkRQMDGliNgI3xjdGUC/kLzTN9vGpEQDYFZEkDAxrYjYCN8Y3Rmfk7S7sYStkV/VdIeEfHlCmqhBAjMjgACNrYcARvhG6MrEfBZkm4REacZURANgVkTQMDG9iNgI3xjdAUC/r6kPSPik0YMRENg9gQQsPEUQMBG+MZos4B/KGnfiPg3IwKiIQABSQjYeBogYCN8Y3RmnippN0MJ50u6bUS8z5BNJAQgsB0BBGw8JRCwEb4x2iTgcmergyLircatEw0BCKwhgICNpwMCNsI3RhsEfImkQyPidcZtEw0BCPAK+FICUcOZgIBr6MLwNWRm+ebxjQZKLk8zOiIiXjRQHjEQgMCCBHgFvCCoPoYh4D6o1r/mwAJ+ZEQ8vX4qVAiB+RFAwMaeI2AjfGP0gAJ+XEQ8wbhVoiEAgQ0IIGDj6YGAjfCN0Zl5uqTf6rmE50TEUT1nsDwEILACAQS8ArxVpyLgVQmOc/4AAn6FpHtFRPn8lwMCEKiUAAI2NgYBG+Ebo3sW8Jsk3TkiLjZukWgIQGABAgh4AUh9DUHAfZGte90eBXyKpNtHxNa6CVAdBCBQCCBg43mAgI3wjdGZ+XlJv9lxCe9t7nK1peN1WQ4CEOiJAALuCewiyyLgRShNb0wPAv6opL0i4tzp0WJHEJguAQRs7C0CNsI3Rncs4M9IumVEnG3cEtEQgMASBBDwEtC6moKAuyI5rnUy8wuSbthB1f8t6eYR8Y0O1mIJCEBgYAIIeGDga+MQsBG+MbojAX9N0h4RcaZxK0RDAAIrEEDAK8BbdSoCXpXgOOd3IOBvN698yz2lOSAAgZESQMDGxiFgI3xjdGaWt45vsGQJP5B0q4j45JLzmQYBCFRCAAEbG4GAjfCN0SsI+EeS9o2IDxrLJxoCEOiIAALuCOQyyyDgZaiNf86SAr6gucnGO8dPgB1AAAKFAAI2ngcI2AjfGL2EgC+UdHBEnGQsm2gIQKBjAgi4Y6BtlkPAbWhNZ2xmflHS9Rfc0SWSDouI1y44nmEQgMBICCBgY6MQsBG+MbqFgMvTjO4fES80lks0BCDQEwEE3BPYRZZFwItQmt6YFgI+OiKeNj0C7AgCECgEELDxPEDARvjG6Mz8kqRdNynh8RFxrLFMoiEAgZ4JIOCeAW+0PAI2wjdGLyDgv4+II40lEg0BCAxAAAEPAHm9CARshG+M3kTAr5R0z4gon/9yQAACEyaAgI3NRcBG+MbozDxD0i47KOFNku4SERcZyyMaAhAYiAACHgj0jmIQsBG+MXodAZ/S3Ghjq7E0oiEAgQEJIOABYW8fhYCN8I3ROxDwhyTtExE/NJZFNAQgMDABBDww8LVxCNgI3xi9nYA/KmmviDjXWBLREICAgQACNkDfFomAjfCN0ZlZnuF7PUmflXTLiPiusRyiIQABE4HZCjgzdzMxXxt7hKSjBqyj3Ev46AHz1ov6UkSUhwvM8mgEXL5otUdEfGOWENg0BIwEMnOnFreD7bPSp0o6oM+A7dY+TtILBszbYVRkJj/z8HVh94iY7cPkM7M8TvDuEVG+Dc0BAQgMTKB5AXbqwLHENQQQsPdUmLuArx0R3/K2gHQIzJcAAvb2HgF7+c9awF70pEMAAgjYew4gYC9/BOzlTzoEZk0AAXvbj4C9/BGwlz/pEJg1AQTsbT8C9vJHwF7+pENg1gQQsLf9CNjLHwF7+ZMOgVkTQMDe9iNgL38E7OVPOgRmTQABe9uPgL38EbCXP+kQmDUBBOxtPwL28kfAXv6kQ2DWBBCwt/0I2MsfAXv5kw6BWRNAwN72I2AvfwTs5U86BGZNAAF724+AvfwRsJc/6RCYNQEE7G0/AvbyR8Be/qRDYNYEELC3/QjYyx8Be/mTDoFZE0DA3vYjYC9/BOzlTzoEZk0AAXvbj4C9/BGwlz/pEJg1AQTsbT8C9vJHwF7+pENg1gQQsLf9CNjLHwF7+ZMOgVkTQMDe9iNgL38E7OVPOgRmTQABe9uPgL38EbCXP+kQmDUBBOxtPwL28kfAXv6kQ2DWBBCwt/0I2MsfAXv5kw6BWRNAwN72I2AvfwTs5U86BGZNAAF724+AvfwRsJc/6RCYNQEE7G0/AvbyR8Be/qRDYNYEELC3/QjYyx8Be/mTDoFZE0DA3vY7BHyBpPRue930nQeuCwEPDJw4CEDgMgImAW+ttAchaacha3MIeNeIOHPITS6alZlbJA0pYQS8aHMYBwEIdE7AIOCtEXGlzjfSwYKZuYukMzpYauElEPAaVAh44fOGgRCAwAQIIODLvRuAgJ3nNAJ20icbAhAYmgACRsBDn3Pr5iHgalpBIRCAwAAEEDACHuA0WywCAS/GiVEQgMA0CCBgBFzNmWwQ8EmSzqkGAIVAAAJzI3A1SQcMuGm+hLUGNl/CWgPDIOABz3uiIAABCNgJIGAEvOOTEAHbL04KgAAEpk0AASNgBDzta5zdQQAClRJAwAgYAVd6cVIWBCAwbQIIGAEj4Glf4+wOAhColAACRsAIuNKLk7IgAIFpE0DACBgBT/saZ3cQgEClBBAwAkbAlV6clAUBCEybAAJGwAh42tc4u4MABColgIARMAKu9OKkLAhAYNoEEDACRsDTvsbZHQQgUCkBBIyAEXClFydlQQAC0yaAgBEwAp72Nc7uIACBSgkgYASMgCu9OCkLAhCYNgEEjIAR8LSvcXYHAQhUSgABI2AEXOnFSVkQgMC0CSBgBIyAp32NszsIQKBSAggYASPgSi9OyoIABKZNAAEjYAQ87Wuc3UEAApUSQMAIGAFXenFSFgQgMG0CCBgBI+BpX+PsDgIQqJQAAkbACLjSi5OyIACBaRNAwAgYAU/7Gmd3EIBApQQQMAJGwJVenJQFAQhMmwACRsAIeNrXOLuDAAQqJYCAETACrvTipCwIQGDaBBAwAkbA077G2R0EIFApAQSMgKsR8HGSvlPphUJZEIDA9AlcS9JRA24TASPgagS8e0ScNuDJTxQEIACBnxDIzN0knTogEgSMgBHwgBccURCAQKUEEPBljcnMXSSdMWSrIjNzyEBJu0bEmQNnLhSXmVsk7bzQ4G4G8Qq4G46sAgEILEEAASPgJU6bfqYg4H64sioEIFAnAQQ8PwHvIelrdZ6OOl3STgPWxivgAWETBQEIXJ6AQcAXSLpRpX24rqQPDFmb4y3oIfdXexYCrr1D1AeBCRMwCHjCNNtvDQG3Z9blDATcJU3WggAEWhFAwK1wdT4YAXeOtNWCCLgVLgZDAAJdEkDAXdJsvxYCbs+syxkIuEuarAUBCLQigIBb4ep8MALuHGmrBRFwK1wMhgAEuiSAgLuk2X4tBNyeWZczEHCXNFkLAhBoRQABt8LV+WAE3DnSVgsi4Fa4GAwBCHRJAAF3SbP9Wgi4PbMuZyDgLmmyFgQg0IoAAm6Fq/PBCLhzpK0WRMCtcDEYAhDokgAC7pJm+7UQcHtmXc5AwF3SZC0IQKAVAQTcClfngxFw50hbLYiAW+FiMAQg0CUBBNwlzfZrIeD2zLqcgYC7pMlaEIBAKwIIuBWuzgcj4M6RtloQAbfCxWAIQKBLAgi4S5rt10LA7Zl1OQMBd0mTtSAAgVYEEHArXJ0PRsCdI221IAJuhYvBEIBAlwQQcJc026+FgNsz63IGAu6SJmtBAAKtCCDgVrg6H4yAO0faakEE3AoXgyEAgS4JIOAuabZfCwG3Z9blDATcJU3WggAEWhFAwK1wdT4YAXeOtNWCCLgVLgZDAAJdEkDAXdJsvxYCbs+syxkIuEuarAUBCLQigIBb4ep8MALuHGmrBRFwK1wMhgAEuiSAgLuk2X4tBNyeWZczEHCXNFkLAhBoRQABt8LV+WAE3DnSVgsi4Fa4GAwBCHRJAAF3SbP9Wgi4PbMuZyDgLmmyFgQg0IoAAm6Fq/PBCLhzpK0WRMCtcDEYAhDokgAC7pJm+7UQcHtmXc5AwF3SZC0IQKAVAQTcClfngxFw50hbLYiAW+FiMAQg0CUBBNwlzfZrIeD2zLqcgYC7pMlaEIBAKwIIuBWuzgf/L4WSjObyJiNIAAAAAElFTkSuQmCC');\n  background-size: 24px 24px;\n  background-repeat: no-repeat;\n  background-position: center center;\n"]);return f=function(){return e},e}function d(){var e=h(["\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  box-shadow: 0 0 10px -2px rgba(0, 0, 0, 0.5);\n"]);return d=function(){return e},e}function g(){var e=h(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n"]);return g=function(){return e},e}function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var m=i.a.div(g()),b=i.a.div(d()),A=Object(i.a)(b)(f(),s),y=i.a.div(p()),v=Object(i.a)(b)(u()),w=Object(i.a)(b)(c(),"rgb(128, 128, 128)"),x={text:" ",value:2},k={text:" ",value:3},C={text:"   ",value:22},E={text:"   ",value:8},I=[{address:"",area:null,assignDate:"2019-02-15T16:56:29",contactComment:"    1",contactName:" ..",contactPhone:"",contractNumber:null,contractSubject:"  5",customerName:"  ",deadlineDate:"2019-02-20T18:00:00",detourDate:null,detourId:21499107409,detourResult:null,district:null,documents:null,executorId:3,hasInfringements:-1,infringements:null,latitude:55.885541,longitude:38.779926,monitoringId:21499107405,monitoringType:"MONITORING_PG",objectType:null,photos:null,resultAudio:null,statusId:2,statusName:" ",supplierDefinition:null,supplierDefinitionId:null},{address:"",area:null,assignDate:"2019-02-15T16:56:29",contactComment:"    1 ",contactName:" ..",contactPhone:"",contractNumber:null,contractSubject:"  5 ",customerName:"   ",deadlineDate:"2019-02-20T18:00:00",detourDate:null,detourId:21499107401,detourResult:null,district:null,documents:null,executorId:3,hasInfringements:-1,infringements:null,latitude:55.886541,longitude:38.778926,monitoringId:21499107406,monitoringType:"MONITORING_ASZS",objectType:null,photos:null,resultAudio:null,statusId:2,statusName:" ",supplierDefinition:null,supplierDefinitionId:null}],S={MONITORING_PG:{value:"MONITORING_PG",text:" -"},MONITORING_WC:{value:"MONITORING_WC",text:"  "},MONITORING_ASZS:{value:"MONITORING_ASZS",text:"  100 "}},T="onDetourClick",B="setTitle",N="requestDetours",R={PLANNED:{value:1,text:" "},CITIZEN:{value:2,text:" "},INITIATIVE:{value:3,text:" "},EXTRA_PLANNED:{value:4,text:" "},CURRENT_WORK:{value:5,text:"   "}};function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D=function(e){var t=window.ol,r=t.proj.fromLonLat([e.longitude,e.latitude]);return new t.Feature({geometry:new t.geom.Point(r),detour:e})},G=function(e){return e.statusId===x.value||e.statusId===C.value||e.statusId===E.value?"rgb(0, 176, 80)":e.statusId===k.value?"white":"rgb(128, 128, 128)"},z=function(e,t,r){var n,o=window.ol;n=t.starred?new o.style.RegularShape({fill:new o.style.Fill({color:r?s:G(t)}),stroke:new o.style.Stroke({color:"black",width:2}),points:5,radius:25,radius2:parseInt(12.5),angle:0}):t.monitoringType===S.MONITORING_PG.value?new o.style.Circle({radius:25,fill:new o.style.Fill({color:r?s:G(t)}),stroke:new o.style.Stroke({color:"black",width:2})}):-1!==[R.EXTRA_PLANNED.value,R.CURRENT_WORK.value].indexOf(t.checkReasonId)?t.checkReasonId===R.EXTRA_PLANNED.value?new o.style.Icon({crossOrigin:"anonymous",src:r?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADg0lEQVRYR8WWX4hUVRzHv7+7O5tuWW8pugbec6aFISjxH4ioIGRENuciDMFGSLIPZZmmgiW4q6AVmWVkD7HhgxG4QXtv+5IvBSGCIEgmmzTnnlzcEHwTlc3VuT8546jrzsz9M7vRebzn9/1+P/fc3zn3EP7nQdPJH54/v3Pccbg0Njbeqk/LAL4QO0E4AIAJ9GFR68OtQLQE4EtZAPh3AO210AoiXqyM+SMrRIsA7kmAXpwcxsAvng7X/ecAvhAeCD82CmKG54WhnwUi0woMFgoduYlbFwjINwohwORAhZe1vpUWIhOAL93dAH0Ub867lTafzDhAsGjRXG5z/gLwZIL59UruTvfGP0evpIFIvQK+EMdA2JTGFKBjSus309SmAghcdyk7dAaA89CUbzLRfkSoEKEPwJxJgRFFvKJozNkkiEQABiiQ4hSAlY+a0cdK6w/ssyEp+wlsISaP00UdriKA4yASAQLp9jDou6kmDN7uafPFPQD3LQJ9XRdE3KPK5vuWAQa7umZ3zHrsIoBn6k0edvuQdLcR6PMGQf/M7ny8e/358zebQcSugC/lPoD3NhZzn9Jmv52L254M2udp3Z8ZwBdiIQj27TubiA8qHe6xc4F0+xjULGSc2ysF7+KlS00Or8b2gRQnGCg1I2fwYU+bHbUeOEigakM2GSeUDl9LDeALsRIE2/kxn4iPKm3eqQF8RqD3Y5uNnDXFcvm3qTV1Af2A84IUds8vjTMEMKB02FvrgaMAvZ1Qf25Ch8tKQGVyXR1AIEQvE75JMLPTx5UO36j1wACDNidrqFdpPdAUIOjunsOVO/a8n5dsxj8obao9Ekj3OINeT9bg6kTEz5aMuXa/9pEV8PPiUzB2pjCyJeeKOlxiTzpfyjMAL0+lIxxS5XBXHcCw6+YrDl0A0JHKyHYo4RQzRwCtTqsBMNEW8XMbjClbzYMV8KX7E0AbMhjZM364eicFvRK/Y6a68rDS5tUHAL6U6wH+OUM4mHHEC8Nt1V2QF1+C8W4WPUAvKa1P0q9r17ZfG7tsb7iFjAZblNbVH5Av5RaAv8qmx8hTXQufJz8vtoJxJKPYlo9yxJupDQSmbxv/sBJcCe+RL8UYgAUtAMyE5LIFGG2JfibiwX/TUN7dSFy9cMyaEc/0Jv8ScU91Gw4WCk84t28/nV47/cool7taGhm5kXglm35UvMNdmuUt0BMZO20AAAAASUVORK5CYII=":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjBxQADAp9P3lGAAABiklEQVRIx6WUv0sDMRiGnztLf6m4KVIUly6Cg9Cpg4tCV38gopu4d9BaOzqpWFuqf4AObv4HDg4iHVzcLQiKgtRBaCnUYkscWq93veTaXr9AyJc375PvciEwYAx10YN4qLvHJ6jxw65b+yy/CAR15twBbhGtdufGvmLYBYLlfu1eChbAC77+ACmLXSA46Mc+QckGKDPZO+DKZhcILnu1R2i0LBWS7FFuZQ0ivdg18saexwAcGnkerXO5bgNsETXGRVMPEGWzGyDAkSnzmfpmnDLsDEgxbQP4TTMh9p0AUyQsub0CSDKjBpwRtOR+CSDAiQoQZb3jg2QVwAYLMoDOue0n2c+gGbn2Q9QG7EiuibwCmGe7c2qUT8nlvQHgWqIUGbMC0tLb/4QGPEq1tNkepiZdJHjgXqHUCLfPIIMXWQi+KSGkmpfM/zCm2EOQA+BCqcdAx0MWVRQAeFbqWTwQV/IFryyyxJvDirjGByHcx7tOYwA71GGNqkOJzq3KqgaMMO5y/y8qA9UP8Aex1wOh3zn7nQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0wNy0xOVQyMjoxMjoxMCswMjowMOYb5dcAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMDctMTlUMjI6MTI6MTArMDI6MDCXRl1rAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg=="}):new o.style.Icon({crossOrigin:"anonymous",src:r?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACFUlEQVRYR8WXMUgbURjH/9+ljcYOpbg4iKS5O5TsoghVpIJWUC+CUIcK3bp0Lp2UTu66uBQKRdDB5hRBEKWDVBwcInRJ34tTlo4tBTXtfeWMdwnRJHen8t704N73///u3vvufR/hFuOLrr/VAJ6ScjmqDEUNtHV9jAlbAAigjCWEOw89IgFkDSMN8DcAj68cfzua82w6f5oLSxAaYDuZ7Cg9iB0B6KoxK8a0WN9EPl8MAxEKYL2zMxFvbdkH0F/H5DjR9mho9OTkT1CIwAAMkG3qq2C8bCTOjI2clDMLgBMEIjBA1jAWAX4XRBSgRUuI90HWBgLImqnXYPoYRNBfQ3hj/ZArzWKaAtimOcjs7AKINxOreV5ih19kCoW9RnENAezup938TzsE8CSkubf8lwYamBTie734ugAbPT3t9Ld0SIAZ0fwqjE8dpv5pKX/epHMjwHo6HY9fnO8AGL6deTmaCAcPmUbGhTiv1bsGcJluhv4JwKu7MK/SWJsScpYArta9BmAbqXkGLdyxubcd85YofKgLYBvGDIPXyhfMvQxm0FxGiM+eum+0mUr1Ohp9BdB2L9YV0TMwnltSupdZ5U2VA7g0SrfA+0JKD6ELoTwNXQilPyJvK5T+iv3zoPIy8iFUXscehNKCxIdQWZL56amyKL1MT5VlubcVShuTqvOgrjXz01Nlc+pBuO25O89IuRS1hvgP92P9Id67WokAAAAASUVORK5CYII=":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjBxQAByfbFPz4AAABAElEQVRIx63VMU4CURDG8T+SaIylCTHhACZQUNFY2NDQWNLZUNHgFbTEc0iBjQegoaGg4QSEkJhQm9XEGNDsR2MIuruP95idbff3Jbtv3gy4644uhmryzQ83h/IKEUJ8UDuEX/CKfp8l5VB+ymTLhZhyFsILDP5wIV448g94THAher68ncqF6Pjwa1aZAWsa+/glb5lciHeqLn7OzMmFWFDK4seM9nIhxpykH92TFxfimUIy4MGbC3H/n7eIgwJibnd5nc8gLsQXV0BIe7rL+Ak5/MQcjtHcSDm0MpgvE5ivM5gHCphHWg5D1TzWwbxYwLzawGu5Fp0BcyKG9F2vbABQeJpJcQuwygAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0wNy0xOVQyMjowNzozOSswMjowMBYBs/0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMDctMTlUMjI6MDc6MzkrMDI6MDBnXAtBAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg=="}):new o.style.RegularShape({radius:25,points:F(t.checkReasonId),fill:new o.style.Fill({color:r?s:G(t)}),stroke:new o.style.Stroke({color:"black",width:2})}),e.setStyle(new o.style.Style({image:n}))},F=function(e){return e===R.INITIATIVE.value?5:e===R.PLANNED.value?4:e===R.CITIZEN.value?8:3},U=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=Q(t).call(this,e),r=!o||"object"!==M(o)&&"function"!=typeof o?j(n):o,L(j(j(r)),"map",null),L(j(j(r)),"polygonLayer",null),L(j(j(r)),"pointsLayer",null),L(j(j(r)),"positionLayer",null),L(j(j(r)),"polygonPoints",[]),L(j(j(r)),"sendMessage",function(e){window.ReactNativeWebView.postMessage(JSON.stringify(e))}),L(j(j(r)),"onMapClick",function(e){r.state.isSelectingArea?r.processPolygonClick(e):r.processDetourClick(e),e.preventDefault()}),L(j(j(r)),"processPolygonClick",function(e){var t=window.ol,n=t.proj.fromLonLat(t.proj.transform(e.coordinate,"EPSG:3857","EPSG:4326"));r.polygonPoints.push(n),r.redrawPolygon()}),L(j(j(r)),"processDetourClick",function(e){var t=r.map.getFeaturesAtPixel(e.pixel);if(t){r.deselectAll();var n=t[0],o=n.get("detour");z(n,o,!0);var l={type:T,payload:{detour:o}};r.sendMessage(l)}}),L(j(j(r)),"deselectAll",function(){r.pointsLayer.getSource().getFeatures().forEach(function(e){z(e,e.get("detour"),!1)})}),L(j(j(r)),"handleDetours",function(e){var t=e.detours,n=e.allDetours,o=e.selectedId,l=window.egip;n&&r.setState({allDetours:n}),r.clearMap(),r.pointsLayer=l.layers.createVectorLayer({id:"points",type:"random",source:l.layers.createVectorSource({})}),t.forEach(function(e){var t=D(e);z(t,e,e.detourId===o),r.pointsLayer.getSource().addFeature(t)}),r.map.addLayer(r.pointsLayer)}),L(j(j(r)),"onAreaClick",function(){r.setState({isSelectingArea:!0}),r.clearMap()}),L(j(j(r)),"onConfirmArea",function(e){if(0!==r.polygonPoints.length){r.polygonPoints=[];var t=r.state.allDetours.map(D),n=r.polygonLayer.getSource().getFeatures(),o=t.filter(function(e){return n.filter(function(t){return t.getGeometry().intersectsCoordinate(e.getGeometry().getCoordinates())}).length}).map(function(e){return e.get("detour")});r.handleDetours({detours:o}),r.setState({isSelectingArea:!1});var l={type:B,payload:{title:" (".concat(o.length,")")}};r.sendMessage(l),e.stopPropagation()}else r.onCancelArea(e)}),L(j(j(r)),"onCancelArea",function(e){r.clearMap(),r.polygonPoints=[],r.setState({isSelectingArea:!1}),r.requestDetours(),e.stopPropagation()}),L(j(j(r)),"redrawPolygon",function(){var e=window,t=e.ol,n=e.egip;if(r.clearMap(),r.polygonLayer=n.layers.createVectorLayer({id:"polygon",type:"random",source:n.layers.createVectorSource({}),style:new t.style.Style({stroke:new t.style.Stroke({color:"blue",width:4}),fill:new t.style.Fill({color:"rgba(0, 0, 255, 0.1)"})})}),1===r.polygonPoints.length){var o=new t.Feature(new t.geom.Point(r.polygonPoints[0]));o.setStyle(new t.style.Style({image:new t.style.Circle({radius:4,fill:new t.style.Fill({color:"blue"})})})),r.polygonLayer.getSource().addFeature(o)}else r.polygonLayer.getSource().addFeature(new t.Feature(new t.geom.Polygon([r.polygonPoints])));r.map.addLayer(r.polygonLayer)}),L(j(j(r)),"requestDetours",function(){var e={type:N};r.sendMessage(e)}),L(j(j(r)),"renderCurrentPosition",function(e){var t=e.coords,n=window,o=n.ol,l=n.egip;r.map.removeLayer(r.positionLayer),r.positionLayer=l.layers.createVectorLayer({id:"position",type:"random",source:l.layers.createVectorSource({})});var a=D(t),i=new o.style.Circle({radius:10,fill:new o.style.Fill({color:"blue"})});a.setStyle(new o.style.Style({image:i})),r.positionLayer.getSource().addFeature(a),r.map.addLayer(r.positionLayer)}),r.state={allDetours:I,isSelectingArea:!1},r}var r,l,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,n["Component"]),r=t,(l=[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("message",function(t){var r=JSON.parse(t.data);switch(r.type){case"detours":e.handleDetours(r.payload);break;case"detourClose":e.deselectAll();break;case"COORDS":e.renderCurrentPosition(r.payload)}}),this.init()}},{key:"init",value:function(){this.initMap()}},{key:"initMap",value:function(){var e=window.egip;this.map=e.layers.createMap({target:"map",layers:[e.layers.createTiles2GIS()],view:e.layers.createViewWGS()}),this.map.on("click",this.onMapClick)}},{key:"clearMap",value:function(){this.map.removeLayer(this.pointsLayer),this.map.removeLayer(this.polygonLayer)}},{key:"render",value:function(){var e=this.state.isSelectingArea;return o.a.createElement(o.a.Fragment,null,o.a.createElement(m,{id:"map"}),e?o.a.createElement(y,null,o.a.createElement(v,{onClick:this.onConfirmArea}),o.a.createElement(w,{onClick:this.onCancelArea})):o.a.createElement(A,{onClick:this.onAreaClick}))}}])&&P(r.prototype,l),a&&P(r,a),t}();a.a.render(o.a.createElement(U,null),document.getElementById("root"))}]);</script>

 <h1>Sup</h1>
</body>
</html>
